<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Libsecondlife-commits] r776 - in branches/aditi: . applications applications/Decoder applications/SLIRC applications/SLProxy applications/SecondGlance applications/SecondGlance/Properties libsecondlife-cs libsecondlife-cs/AssetSystem libsecondlife-cs/InventorySystem libsecondlife-cs/XmlRpcCS libsecondlife-cs/examples libsecondlife-cs/examples/BodyPartMorphGenerator libsecondlife-cs/examples/IA_ImageTool libsecondlife-cs/examples/IA_InventoryManager libsecondlife-cs/examples/IA_MultiImageUpload libsecondlife-cs/examples/IA_NotecardTool libsecondlife-cs/examples/IA_SimpleInventory libsecondlife-cs/examples/IA_TestAsyncImage libsecondlife-cs/examples/Key2Name libsecondlife-cs/examples/Key2Name/Properties libsecondlife-cs/examples/ParcelDownload libsecondlife-cs/examples/Teleport libsecondlife-cs/examples/TestClient libsecondlife-cs/examples/TestClient/Commands libsecondlife-cs/examples/groupmanager libsecondlife-cs/examples/name2key libsecondlife-cs/examples/primexport libsecondlife-cs/examp! les/slaccountant libsecondlife-cs/libsecondlife.Tests libsecondlife-cs/libsecondlife.Utilities libsecondlife-cs/libsecondlife.Utilities/Properties libsecondlife-cs/mapgenerator libsecondlife-cs/mapgenerator/Properties
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/libsecondlife-commits/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:libsecondlife-commits%40lists.berlios.de?Subject=Re%3A%20%5BLibsecondlife-commits%5D%20r776%20-%20in%20branches/aditi%3A%20.%20applications%0A%20applications/Decoder%20applications/SLIRC%20applications/SLProxy%0A%20applications/SecondGlance%20applications/SecondGlance/Properties%0A%20libsecondlife-cs%20libsecondlife-cs/AssetSystem%0A%20libsecondlife-cs/InventorySystem%20libsecondlife-cs/XmlRpcCS%0A%20libsecondlife-cs/examples%20libsecondlife-cs/examples/BodyPartMorphGenerator%0A%20libsecondlife-cs/examples/IA_ImageTool%0A%20libsecondlife-cs/examples/IA_InventoryManager%0A%20libsecondlife-cs/examples/IA_MultiImageUpload%0A%20libsecondlife-cs/examples/IA_NotecardTool%0A%20libsecondlife-cs/examples/IA_SimpleInventory%0A%20libsecondlife-cs/examples/IA_TestAsyncImage%0A%20libsecondlife-cs/examples/Key2Name%0A%20libsecondlife-cs/examples/Key2Name/Properties%0A%20libsecondlife-cs/examples/ParcelDownload%20libsecondlife-cs/examples/Teleport%0A%20libsecondlife-cs/examples/TestClient%0A%20libsecondlife-cs/examples/TestClient/Commands%0A%20libsecondlife-cs/examples/groupmanager%20libsecondlife-cs/examples/name2key%0A%20libsecondlife-cs/examples/primexport%20libsecondlife-cs/examp%21%0A%20les/slaccountant%20libsecondlife-cs/libsecondlife.Tests%0A%20libsecondlife-cs/libsecondlife.Utilities%0A%20libsecondlife-cs/libsecondlife.Utilities/Properties%0A%20libsecondlife-cs/mapgenerator%20libsecondlife-cs/mapgenerator/Properties&In-Reply-To=%3C200612290030.kBT0UHth020706%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000153.html">
   <LINK REL="Next"  HREF="000155.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Libsecondlife-commits] r776 - in branches/aditi: . applications applications/Decoder applications/SLIRC applications/SLProxy applications/SecondGlance applications/SecondGlance/Properties libsecondlife-cs libsecondlife-cs/AssetSystem libsecondlife-cs/InventorySystem libsecondlife-cs/XmlRpcCS libsecondlife-cs/examples libsecondlife-cs/examples/BodyPartMorphGenerator libsecondlife-cs/examples/IA_ImageTool libsecondlife-cs/examples/IA_InventoryManager libsecondlife-cs/examples/IA_MultiImageUpload libsecondlife-cs/examples/IA_NotecardTool libsecondlife-cs/examples/IA_SimpleInventory libsecondlife-cs/examples/IA_TestAsyncImage libsecondlife-cs/examples/Key2Name libsecondlife-cs/examples/Key2Name/Properties libsecondlife-cs/examples/ParcelDownload libsecondlife-cs/examples/Teleport libsecondlife-cs/examples/TestClient libsecondlife-cs/examples/TestClient/Commands libsecondlife-cs/examples/groupmanager libsecondlife-cs/examples/name2key libsecondlife-cs/examples/primexport libsecondlife-cs/examp! les/slaccountant libsecondlife-cs/libsecondlife.Tests libsecondlife-cs/libsecondlife.Utilities libsecondlife-cs/libsecondlife.Utilities/Properties libsecondlife-cs/mapgenerator libsecondlife-cs/mapgenerator/Properties</H1>
    <B>otakup0pe at mail.berlios.de</B> 
    <A HREF="mailto:libsecondlife-commits%40lists.berlios.de?Subject=Re%3A%20%5BLibsecondlife-commits%5D%20r776%20-%20in%20branches/aditi%3A%20.%20applications%0A%20applications/Decoder%20applications/SLIRC%20applications/SLProxy%0A%20applications/SecondGlance%20applications/SecondGlance/Properties%0A%20libsecondlife-cs%20libsecondlife-cs/AssetSystem%0A%20libsecondlife-cs/InventorySystem%20libsecondlife-cs/XmlRpcCS%0A%20libsecondlife-cs/examples%20libsecondlife-cs/examples/BodyPartMorphGenerator%0A%20libsecondlife-cs/examples/IA_ImageTool%0A%20libsecondlife-cs/examples/IA_InventoryManager%0A%20libsecondlife-cs/examples/IA_MultiImageUpload%0A%20libsecondlife-cs/examples/IA_NotecardTool%0A%20libsecondlife-cs/examples/IA_SimpleInventory%0A%20libsecondlife-cs/examples/IA_TestAsyncImage%0A%20libsecondlife-cs/examples/Key2Name%0A%20libsecondlife-cs/examples/Key2Name/Properties%0A%20libsecondlife-cs/examples/ParcelDownload%20libsecondlife-cs/examples/Teleport%0A%20libsecondlife-cs/examples/TestClient%0A%20libsecondlife-cs/examples/TestClient/Commands%0A%20libsecondlife-cs/examples/groupmanager%20libsecondlife-cs/examples/name2key%0A%20libsecondlife-cs/examples/primexport%20libsecondlife-cs/examp%21%0A%20les/slaccountant%20libsecondlife-cs/libsecondlife.Tests%0A%20libsecondlife-cs/libsecondlife.Utilities%0A%20libsecondlife-cs/libsecondlife.Utilities/Properties%0A%20libsecondlife-cs/mapgenerator%20libsecondlife-cs/mapgenerator/Properties&In-Reply-To=%3C200612290030.kBT0UHth020706%40sheep.berlios.de%3E"
       TITLE="[Libsecondlife-commits] r776 - in branches/aditi: . applications applications/Decoder applications/SLIRC applications/SLProxy applications/SecondGlance applications/SecondGlance/Properties libsecondlife-cs libsecondlife-cs/AssetSystem libsecondlife-cs/InventorySystem libsecondlife-cs/XmlRpcCS libsecondlife-cs/examples libsecondlife-cs/examples/BodyPartMorphGenerator libsecondlife-cs/examples/IA_ImageTool libsecondlife-cs/examples/IA_InventoryManager libsecondlife-cs/examples/IA_MultiImageUpload libsecondlife-cs/examples/IA_NotecardTool libsecondlife-cs/examples/IA_SimpleInventory libsecondlife-cs/examples/IA_TestAsyncImage libsecondlife-cs/examples/Key2Name libsecondlife-cs/examples/Key2Name/Properties libsecondlife-cs/examples/ParcelDownload libsecondlife-cs/examples/Teleport libsecondlife-cs/examples/TestClient libsecondlife-cs/examples/TestClient/Commands libsecondlife-cs/examples/groupmanager libsecondlife-cs/examples/name2key libsecondlife-cs/examples/primexport libsecondlife-cs/examp! les/slaccountant libsecondlife-cs/libsecondlife.Tests libsecondlife-cs/libsecondlife.Utilities libsecondlife-cs/libsecondlife.Utilities/Properties libsecondlife-cs/mapgenerator libsecondlife-cs/mapgenerator/Properties">otakup0pe at mail.berlios.de
       </A><BR>
    <I>Fri Dec 29 01:30:17 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000153.html">[Libsecondlife-commits] r775 - trunk/libsecondlife-cs
</A></li>
        <LI>Next message: <A HREF="000155.html">[Libsecondlife-commits] [Patch #1760] SLProxy: initial caps support	(ADITI). FOR TESTING ONLY.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#154">[ date ]</a>
              <a href="thread.html#154">[ thread ]</a>
              <a href="subject.html#154">[ subject ]</a>
              <a href="author.html#154">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: otakup0pe
Date: 2006-12-29 01:26:28 +0100 (Fri, 29 Dec 2006)
New Revision: 776

Added:
   branches/aditi/applications/SLProxy/
   branches/aditi/applications/SLProxy/Analyst.cs
   branches/aditi/applications/SLProxy/Analyst.csproj
   branches/aditi/applications/SLProxy/ChatConsole.cs
   branches/aditi/applications/SLProxy/ChatConsole.csproj
   branches/aditi/applications/SLProxy/README.txt
   branches/aditi/applications/SLProxy/SLProxy.build
   branches/aditi/applications/SLProxy/SLProxy.cs
   branches/aditi/applications/SLProxy/SLProxy.csproj
   branches/aditi/applications/SLProxy/SLProxy.sln
   branches/aditi/applications/SecondGlance/
   branches/aditi/applications/SecondGlance/Properties/
   branches/aditi/applications/SecondGlance/Properties/AssemblyInfo.cs
   branches/aditi/applications/SecondGlance/Properties/Resources.Designer.cs
   branches/aditi/applications/SecondGlance/Properties/Resources.resx
   branches/aditi/applications/SecondGlance/Properties/Settings.Designer.cs
   branches/aditi/applications/SecondGlance/Properties/Settings.settings
   branches/aditi/applications/SecondGlance/SecondGlance.cs
   branches/aditi/applications/SecondGlance/SecondGlance.csproj
   branches/aditi/applications/SecondGlance/frmSecondGlance.Designer.cs
   branches/aditi/applications/SecondGlance/frmSecondGlance.cs
   branches/aditi/applications/SecondGlance/frmSecondGlance.resx
   branches/aditi/libsecondlife-cs/AssetSystem/AppearanceManager.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable_Body.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable_Clothing.cs
   branches/aditi/libsecondlife-cs/AssetSystem/BodyPart_Depricated.cs
   branches/aditi/libsecondlife-cs/AssetSystem/_BodyShapeParams_.cs
   branches/aditi/libsecondlife-cs/InventorySystem/DownloadRequest_Folder.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryWearable.cs
   branches/aditi/libsecondlife-cs/MainAvatar.cs
   branches/aditi/libsecondlife-cs/MainAvatarStatus.cs
   branches/aditi/libsecondlife-cs/SerializableDictionary.cs
   branches/aditi/libsecondlife-cs/Settings.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/SimpleHttpRequest.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcBoxcarRequest.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcClientProxy.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcExposedAttribute.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponder.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcServer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSystemObject.cs
   branches/aditi/libsecondlife-cs/examples/Key2Name/
   branches/aditi/libsecondlife-cs/examples/Key2Name/Program.cs
   branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/
   branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Arguments.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/ClientManager.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/AppearanceCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/CloneProfileCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/EchoMasterCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ExportCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ExportOutfitCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FindSimCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/IMCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ImportCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ImportOutfitCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoadCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PacketLogCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ShoutCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhisperCommand.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/Properties/
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp
   branches/aditi/libsecondlife-cs/libsecondlife.mdp
   branches/aditi/libsecondlife-cs/libsecondlife.mds
   branches/aditi/libsecondlife-cs/mapgenerator/unusedpackets.txt
   branches/aditi/mapgen.bat
Removed:
   branches/aditi/SLProxy/
   branches/aditi/applications/SLProxy/Analyst.cs
   branches/aditi/applications/SLProxy/Analyst.csproj
   branches/aditi/applications/SLProxy/ChatConsole.cs
   branches/aditi/applications/SLProxy/ChatConsole.csproj
   branches/aditi/applications/SLProxy/README.txt
   branches/aditi/applications/SLProxy/SLProxy.build
   branches/aditi/applications/SLProxy/SLProxy.cs
   branches/aditi/applications/SLProxy/SLProxy.csproj
   branches/aditi/applications/SLProxy/SLProxy.sln
   branches/aditi/applications/SecondGlance/Properties/
   branches/aditi/applications/SecondGlance/Properties/AssemblyInfo.cs
   branches/aditi/applications/SecondGlance/Properties/Resources.Designer.cs
   branches/aditi/applications/SecondGlance/Properties/Resources.resx
   branches/aditi/applications/SecondGlance/Properties/Settings.Designer.cs
   branches/aditi/applications/SecondGlance/Properties/Settings.settings
   branches/aditi/applications/SecondGlance/SecondGlance.cs
   branches/aditi/applications/SecondGlance/SecondGlance.csproj
   branches/aditi/applications/SecondGlance/frmSecondGlance.Designer.cs
   branches/aditi/applications/SecondGlance/frmSecondGlance.cs
   branches/aditi/applications/SecondGlance/frmSecondGlance.resx
   branches/aditi/applications/TestBot/
   branches/aditi/applications/sceneviewer/
   branches/aditi/bin/
   branches/aditi/libsecondlife-cs/AssetSystem/BodyPart.cs
   branches/aditi/libsecondlife-cs/AssetSystem/BodyShape/
   branches/aditi/libsecondlife-cs/build
   branches/aditi/libsecondlife-cs/examples/Key2Name/Program.cs
   branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/
   branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/Properties/
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp
   branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj
   branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp
   branches/aditi/libsecondlife-cs/tests/
Modified:
   branches/aditi/LICENSE.txt
   branches/aditi/README.txt
   branches/aditi/applications/Decoder/Decoder.build
   branches/aditi/applications/Decoder/Decoder.csproj
   branches/aditi/applications/SLIRC/frmSLIRC.cs
   branches/aditi/libsecondlife-cs/AssetSystem/Asset.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetImage.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetManager.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetNotecard.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetPacketHelpers.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestDownload.cs
   branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestUpload.cs
   branches/aditi/libsecondlife-cs/AssetSystem/ImageManager.cs
   branches/aditi/libsecondlife-cs/Avatar.cs
   branches/aditi/libsecondlife-cs/AvatarManager.cs
   branches/aditi/libsecondlife-cs/EstateTools.cs
   branches/aditi/libsecondlife-cs/GridManager.cs
   branches/aditi/libsecondlife-cs/GroupManager.cs
   branches/aditi/libsecondlife-cs/Helpers.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryBase.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryFolder.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryImage.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryItem.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryManager.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryNotecard.cs
   branches/aditi/libsecondlife-cs/InventorySystem/InventoryPacketHelper.cs
   branches/aditi/libsecondlife-cs/NetworkManager.cs
   branches/aditi/libsecondlife-cs/ObjectManager.cs
   branches/aditi/libsecondlife-cs/Parcel.cs
   branches/aditi/libsecondlife-cs/ParticleSystem.cs
   branches/aditi/libsecondlife-cs/Prims.cs
   branches/aditi/libsecondlife-cs/Region.cs
   branches/aditi/libsecondlife-cs/SecondLife.cs
   branches/aditi/libsecondlife-cs/Textures.cs
   branches/aditi/libsecondlife-cs/Types.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/Logger.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcDeserializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcErrorCodes.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcException.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequest.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestDeserializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestSerializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponse.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseDeserializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseSerializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSerializer.cs
   branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcXmlTokens.cs
   branches/aditi/libsecondlife-cs/_Packets_.cs
   branches/aditi/libsecondlife-cs/examples/BodyPartMorphGenerator/genbodyparams.cs
   branches/aditi/libsecondlife-cs/examples/IA_ImageTool/ImageTool.cs
   branches/aditi/libsecondlife-cs/examples/IA_InventoryManager/iManager.cs
   branches/aditi/libsecondlife-cs/examples/IA_MultiImageUpload/MultiImageUpload.cs
   branches/aditi/libsecondlife-cs/examples/IA_NotecardTool/NotecardTool.cs
   branches/aditi/libsecondlife-cs/examples/IA_SimpleInventory/IA_SimpleInventory.cs
   branches/aditi/libsecondlife-cs/examples/IA_TestAsyncImage/IA_TestAsyncImage.cs
   branches/aditi/libsecondlife-cs/examples/ParcelDownload/ParcelDownload.cs
   branches/aditi/libsecondlife-cs/examples/Teleport/Teleport.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Command.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/BalanceCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FollowCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GiveAllCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GotoCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/HelpCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/JumpCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LocationCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoginCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LogoutCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PrimCountCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/QuitCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SayCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SetMasterCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SitCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/TreeCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/UptimeCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhoCommand.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/Program.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.build
   branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.cs
   branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.csproj
   branches/aditi/libsecondlife-cs/examples/examples.build
   branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.Designer.cs
   branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.cs
   branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupManager.cs
   branches/aditi/libsecondlife-cs/examples/groupmanager/groupmanager.csproj
   branches/aditi/libsecondlife-cs/examples/name2key/name2key.cs
   branches/aditi/libsecondlife-cs/examples/primexport/frmPrimExport.cs
   branches/aditi/libsecondlife-cs/examples/slaccountant/frmSLAccountant.cs
   branches/aditi/libsecondlife-cs/libsecondlife.build
   branches/aditi/libsecondlife-cs/libsecondlife.csproj
   branches/aditi/libsecondlife-cs/libsecondlife.sln
   branches/aditi/libsecondlife-cs/mapgenerator/Properties/AssemblyInfo.cs
   branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.cs
   branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.csproj
   branches/aditi/libsecondlife-cs/mapgenerator/template.cs
   branches/aditi/libsecondlife.build
Log:
Backport from HEAD and added in patch 1760

Modified: branches/aditi/LICENSE.txt
===================================================================
--- branches/aditi/LICENSE.txt	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/LICENSE.txt	2006-12-29 00:26:28 UTC (rev 776)
@@ -21,4 +21,3 @@
 CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 POSSIBILITY OF SUCH DAMAGE.
-

Modified: branches/aditi/README.txt
===================================================================
--- branches/aditi/README.txt	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/README.txt	2006-12-29 00:26:28 UTC (rev 776)
@@ -7,18 +7,16 @@
 have a couple of resources, the primary one being the #libsl IRC channel 
 on EFNet. There are also the web forums at 
 <A HREF="http://www.libsecondlife.org/forums/">http://www.libsecondlife.org/forums/</A> and the libsecondlife-dev mailing 
-list at <A HREF="https://gna.org/mail/?group=libsecondlife">https://gna.org/mail/?group=libsecondlife</A> and lastly you can use 
+list at <A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-dev">https://lists.berlios.de/mailman/listinfo/libsecondlife-dev</A> and lastly you can use 
 the e-mail <A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">contact at libsecondlife.org</A> for any general inquiries (although 
 we prefer developer-related questions to go to IRC, forums, or the 
-mailing list).
+mailing list). You can find us in-world at <A HREF="http://tinyurl.com/y472fj.">http://tinyurl.com/y472fj.</A>
 
 To checkout a copy of libsecondlife trunk see 
-<A HREF="https://gna.org/svn/?group=libsecondlife">https://gna.org/svn/?group=libsecondlife</A> for details. The HTTP method 
-seems to be more reliable.
-
+<A HREF="https://developer.berlios.de/svn/?group_id=7710">https://developer.berlios.de/svn/?group_id=7710</A> for details. 
 Windows
------------------------------------------------------------------
------------------------------------------------------------------
+------------------------------------------------------------------
+------------------------------------------------------------------
 
 
 Microsoft Visual Studio
@@ -40,9 +38,6 @@
    nAnt (0.85) - <A HREF="http://nant.sourceforge.net/">http://nant.sourceforge.net/</A>
    nUnit Framework (2.2.8 or greater) - <A HREF="http://www.nunit.org/">http://www.nunit.org/</A>
 
-3D Stuff (i.e. sceneviewer) for Windows:
-   XNA - <A HREF="http://msdn.microsoft.com/directx/XNA/default.aspx">http://msdn.microsoft.com/directx/XNA/default.aspx</A>
-   XGE - <A HREF="http://msdn.microsoft.com/directx/xna/gse/">http://msdn.microsoft.com/directx/xna/gse/</A>
 
 If you are using Visual Studio or Visual C# Express you can simply open 
 the libsecondlife.sln solution file and begin compiling. It will complain 

Modified: branches/aditi/applications/Decoder/Decoder.build
===================================================================
--- branches/aditi/applications/Decoder/Decoder.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/Decoder/Decoder.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -74,7 +74,7 @@
   &lt;!-- build tasks --&gt;
   &lt;target
     name=&quot;build&quot;
-    depends=&quot;init build-dll&quot;
+    depends=&quot;init&quot;
     description=&quot;Builds the binaries for the current configuration&quot;&gt;
     &lt;echo message=&quot;Build Directory is ${bin_dir}/&quot; /&gt;
     &lt;mkdir
@@ -94,14 +94,6 @@
   &lt;/target&gt;
 
   &lt;target
-    name=&quot;build-dll&quot;
-    description=&quot;Builds libsecondlife dll&quot;&gt;
-    &lt;nant
-      buildfile=&quot;../../libsecondlife-cs/libsecondlife.build&quot;
-      target=&quot;${project.config} build&quot;/&gt;
-  &lt;/target&gt;
-
-  &lt;target
     name=&quot;clean&quot;
     depends=&quot;init&quot;
     description=&quot;Deletes the current configuration&quot;&gt;

Modified: branches/aditi/applications/Decoder/Decoder.csproj
===================================================================
--- branches/aditi/applications/Decoder/Decoder.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/Decoder/Decoder.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -23,7 +23,7 @@
   &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
     &lt;DebugType&gt;pdbonly&lt;/DebugType&gt;
     &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;OutputPath&gt;bin\Release\&lt;/OutputPath&gt;
+    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
     &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
     &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
     &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;

Modified: branches/aditi/applications/SLIRC/frmSLIRC.cs
===================================================================
--- branches/aditi/applications/SLIRC/frmSLIRC.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLIRC/frmSLIRC.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -89,7 +89,7 @@
             try
             {
                 client = new SecondLife();
-                client.Self.OnChat += new ChatCallback(Avatar_OnChat);
+                client.Self.OnChat += new MainAvatar.ChatCallback(Avatar_OnChat);
                 grpLogin.Enabled = true;
             }
             catch (Exception error)

Copied: branches/aditi/applications/SLProxy (from rev 775, trunk/applications/SLProxy)


Property changes on: branches/aditi/applications/SLProxy
___________________________________________________________________
Name: svn:ignore
   + obj


Deleted: branches/aditi/applications/SLProxy/Analyst.cs
===================================================================
--- trunk/applications/SLProxy/Analyst.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/Analyst.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,865 +0,0 @@
-/*
- * Analyst.cs: proxy that makes packet inspection and modifcation interactive
- *   See the README for usage instructions.
- *
- * Copyright (c) 2006 Austin Jennings
- * Modified by &quot;qode&quot; and &quot;mcortez&quot; on December 21st, 2006 to work with the new
- * pregen
- * All rights reserved.
- *
- * - Redistribution and use in source and binary forms, with or without 
- *   modification, are permitted provided that the following conditions are met:
- *
- * - Redistributions of source code must retain the above copyright notice, this
- *   list of conditions and the following disclaimer.
- * - Neither the name of the Second Life Reverse Engineering Team nor the names 
- *   of its contributors may be used to endorse or promote products derived from
- *   this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
- * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
- * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
- * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
- * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
- * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
- * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
- * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
- * POSSIBILITY OF SUCH DAMAGE.
- */
-
-using SLProxy;
-using libsecondlife;
-using Nwc.XmlRpc;
-using libsecondlife.Packets;
-using System.Reflection;
-
-using System;
-using System.Collections;
-using System.Globalization;
-using System.IO;
-using System.Net;
-using System.Text.RegularExpressions;
-
-public class Analyst
-{
-    private static Proxy proxy;
-    private static Hashtable commandDelegates = new Hashtable();
-    private static Hashtable loggedPackets = new Hashtable();
-    // private static string logGrep = null;
-    private static Hashtable modifiedPackets = new Hashtable();
-    private static LLUUID agentID;
-    private static LLUUID sessionID;
-    private static bool logLogin = false;
-    private static Assembly libslAssembly;
-
-    public static void Main(string[] args)
-    {
-        libslAssembly = Assembly.Load(&quot;libsecondlife&quot;);
-        if (libslAssembly == null) throw new Exception(&quot;Assembly load exception&quot;);
-
-        ProxyConfig proxyConfig = new ProxyConfig(&quot;Analyst V2&quot;, &quot;Austin Jennings / Andrew Ortman&quot;, args);
-        proxy = new Proxy(proxyConfig);
-
-        // build the table of /command delegates
-        InitializeCommandDelegates();
-
-        // add delegates for login
-        proxy.SetLoginRequestDelegate(new XmlRpcRequestDelegate(LoginRequest));
-        proxy.SetLoginResponseDelegate(new XmlRpcResponseDelegate(LoginResponse));
-
-        // add a delegate for outgoing chat
-        proxy.AddDelegate(PacketType.ChatFromViewer, Direction.Outgoing, new PacketDelegate(ChatFromViewerOut));
-
-        //  handle command line arguments
-        foreach (string arg in args)
-            if (arg == &quot;--log-all&quot;)
-                LogAll();
-            else if (arg == &quot;--log-login&quot;)
-                logLogin = true;
-
-        // start the proxy
-        proxy.Start();
-    }
-
-    // LoginRequest: dump a login request to the console
-    private static void LoginRequest(XmlRpcRequest request)
-    {
-        if (logLogin)
-        {
-            Console.WriteLine(&quot;==&gt; Login Request&quot;);
-            Console.WriteLine(request);
-        }
-    }
-
-    // Loginresponse: dump a login response to the console
-    private static void LoginResponse(XmlRpcResponse response)
-    {
-        Hashtable values = (Hashtable)response.Value;
-        if (values.Contains(&quot;agent_id&quot;))
-            agentID = new LLUUID((string)values[&quot;agent_id&quot;]);
-        if (values.Contains(&quot;session_id&quot;))
-            sessionID = new LLUUID((string)values[&quot;session_id&quot;]);
-
-        if (logLogin)
-        {
-            Console.WriteLine(&quot;&lt;== Login Response&quot;);
-            Console.WriteLine(response);
-        }
-    }
-
-    // ChatFromViewerOut: outgoing ChatFromViewer delegate; check for Analyst commands
-    private static Packet ChatFromViewerOut(Packet packet, IPEndPoint sim)
-    {
-        // deconstruct the packet
-        ChatFromViewerPacket cpacket = (ChatFromViewerPacket)packet;
-        string message = System.Text.Encoding.UTF8.GetString(cpacket.ChatData.Message).Replace(&quot;\0&quot;, &quot;&quot;);
-
-        if (message.Length &gt; 1 &amp;&amp; message[0] == '/')
-        {
-            string[] words = message.Split(' ');
-            if (commandDelegates.Contains(words[0]))
-            {
-                // this is an Analyst command; act on it and drop the chat packet
-                ((CommandDelegate)commandDelegates[words[0]])(words);
-                return null;
-            }
-        }
-	
-	return packet;
-    }
-
-    // CommandDelegate: specifies a callback delegate for a /command
-    private delegate void CommandDelegate(string[] words);
-
-    // InitializeCommandDelegates: configure Analyst's commands
-    private static void InitializeCommandDelegates()
-    {
-        commandDelegates[&quot;/log&quot;] = new CommandDelegate(CmdLog);
-        commandDelegates[&quot;/-log&quot;] = new CommandDelegate(CmdNoLog);
-        // commandDelegates[&quot;/grep&quot;] = new CommandDelegate(CmdGrep);
-        commandDelegates[&quot;/set&quot;] = new CommandDelegate(CmdSet);
-        commandDelegates[&quot;/-set&quot;] = new CommandDelegate(CmdNoSet);
-        commandDelegates[&quot;/inject&quot;] = new CommandDelegate(CmdInject);
-        commandDelegates[&quot;/in&quot;] = new CommandDelegate(CmdInject);
-    }
-
-    private static PacketType packetTypeFromName(string name)
-    {
-        Type packetTypeType = typeof(PacketType);
-        System.Reflection.FieldInfo f = packetTypeType.GetField(name);
-        if (f == null) throw new ArgumentException(&quot;Bad packet type&quot;);
-        return (PacketType)Enum.ToObject(packetTypeType, (int)f.GetValue(packetTypeType));
-    }
-
-    // CmdLog: handle a /log command
-    private static void CmdLog(string[] words)
-    {
-        if (words.Length != 2)
-            SayToUser(&quot;Usage: /log &lt;packet name&gt;&quot;);
-        else if (words[1] == &quot;*&quot;)
-        {
-            LogAll();
-            SayToUser(&quot;logging all packets&quot;);
-        }
-        else
-        {
-            PacketType pType;
-            try
-            {
-                pType = packetTypeFromName(words[1]);
-            }
-            catch (ArgumentException e)
-            {
-                SayToUser(&quot;Bad packet name: &quot; + words[1]);
-                return;
-            }
-            loggedPackets[pType] = null;
-            proxy.AddDelegate(pType, Direction.Incoming, new PacketDelegate(LogPacketIn));
-            proxy.AddDelegate(pType, Direction.Outgoing, new PacketDelegate(LogPacketOut));
-            SayToUser(&quot;logging &quot; + words[1]);
-        }
-    }
-
-    // CmdNoLog: handle a /-log command
-    private static void CmdNoLog(string[] words)
-    {
-        if (words.Length != 2)
-            SayToUser(&quot;Usage: /-log &lt;packet name&gt;&quot;);
-        else if (words[1] == &quot;*&quot;)
-        {
-            NoLogAll();
-            SayToUser(&quot;stopped logging all packets&quot;);
-        }
-        else
-        {
-            PacketType pType = packetTypeFromName(words[1]);
-            loggedPackets.Remove(pType);
-
-	    proxy.RemoveDelegate(pType, Direction.Incoming, new PacketDelegate(LogPacketIn));
-            proxy.RemoveDelegate(pType, Direction.Outgoing, new PacketDelegate(LogPacketOut));
-            SayToUser(&quot;stopped logging &quot; + words[1]);
-        }
-    }
-
-    /*	// CmdGrep: handle a /grep command
-        private static void CmdGrep(string[] words) {
-            if (words.Length == 1) {
-                logGrep = null;
-                SayToUser(&quot;stopped filtering logs&quot;);
-            } else {
-                string[] regexArray = new string[words.Length - 1];
-                Array.Copy(words, 1, regexArray, 0, words.Length - 1);
-                logGrep = String.Join(&quot; &quot;, regexArray);
-                SayToUser(&quot;filtering log with &quot; + logGrep);
-            }
-        } */
-
-    // CmdSet: handle a /set command
-    private static void CmdSet(string[] words)
-    {
-        if (words.Length &lt; 5)
-            SayToUser(&quot;Usage: /set &lt;packet name&gt; &lt;block&gt; &lt;field&gt; &lt;value&gt;&quot;);
-        else
-        {
-            PacketType pType;
-            try
-            {
-                pType = packetTypeFromName(words[1]);
-            }
-            catch (ArgumentException e)
-            {
-                SayToUser(&quot;Bad packet name: &quot; + words[1]);
-                return;
-            }
-
-            string[] valueArray = new string[words.Length - 4];
-            Array.Copy(words, 4, valueArray, 0, words.Length - 4);
-            string valueString = String.Join(&quot; &quot;, valueArray);
-            object value;
-            try
-            {
-                value = MagicCast(words[1], words[2], words[3], valueString);
-            }
-            catch (Exception e)
-            {
-                SayToUser(e.Message);
-                return;
-            }
-
-            Hashtable fields;
-            if (modifiedPackets.Contains(pType))
-                fields = (Hashtable)modifiedPackets[pType];
-            else
-                fields = new Hashtable();
-
-            fields[new BlockField(words[2], words[3])] = value;
-            modifiedPackets[pType] = fields;
-
-            proxy.AddDelegate(pType, Direction.Incoming, new PacketDelegate(ModifyIn));
-            proxy.AddDelegate(pType, Direction.Outgoing, new PacketDelegate(ModifyOut));
-
-            SayToUser(&quot;setting &quot; + words[1] + &quot;.&quot; + words[2] + &quot;.&quot; + words[3] + &quot; = &quot; + valueString);
-        }
-    }
-
-    // CmdNoSet: handle a /-set command
-    private static void CmdNoSet(string[] words)
-    {
-        if (words.Length == 2 &amp;&amp; words[1] == &quot;*&quot;)
-        {
-            foreach (PacketType pType in modifiedPackets.Keys)
-                {
-                    proxy.RemoveDelegate(pType, Direction.Incoming, new PacketDelegate(ModifyIn));
-                    proxy.RemoveDelegate(pType, Direction.Outgoing, new PacketDelegate(ModifyOut));
-                }
-            modifiedPackets = new Hashtable();
-
-            SayToUser(&quot;stopped setting all fields&quot;);
-        }
-        else if (words.Length == 4)
-        {
-            PacketType pType;
-            try
-            {
-                pType = packetTypeFromName(words[1]);
-            }
-            catch (ArgumentException e)
-            {
-                SayToUser(&quot;Bad packet name: &quot; + words[1]);
-                return;
-            }
-
-
-            if (modifiedPackets.Contains(pType))
-            {
-                Hashtable fields = (Hashtable)modifiedPackets[pType];
-                fields.Remove(new BlockField(words[2], words[3]));
-
-                if (fields.Count == 0)
-                {
-                    modifiedPackets.Remove(pType);
-
-                    proxy.RemoveDelegate(pType, Direction.Incoming, new PacketDelegate(ModifyIn));
-                    proxy.RemoveDelegate(pType, Direction.Outgoing, new PacketDelegate(ModifyOut));
-                }
-            }
-
-            SayToUser(&quot;stopped setting &quot; + words[1] + &quot;.&quot; + words[2] + &quot;.&quot; + words[3]);
-        }
-        else
-            SayToUser(&quot;Usage: /-set &lt;packet name&gt; &lt;block&gt; &lt;field&gt;&quot;);
-    }
-
-
-    // CmdInject: handle an /inject command
-    private static void CmdInject(string[] words)
-    {
-        if (words.Length &lt; 2)
-            SayToUser(&quot;Usage: /inject &lt;packet file&gt; [value]&quot;);
-        else
-        {
-            string[] valueArray = new string[words.Length - 2];
-            Array.Copy(words, 2, valueArray, 0, words.Length - 2);
-            string value = String.Join(&quot; &quot;, valueArray);
-
-            FileStream fs = null;
-            StreamReader sr = null;
-            Direction direction = Direction.Incoming;
-            string name = null;
-            //Hashtable blocks = new Hashtable();
-            string block = null;
-            object blockObj = null;
-            //Hashtable fields = new Hashtable();
-            Type packetClass = null;
-            Packet packet = null;
-
-            try
-            {
-                fs = File.OpenRead(words[1] + &quot;.packet&quot;);
-                sr = new StreamReader(fs);
-
-                string line;
-                while ((line = sr.ReadLine()) != null)
-                {
-                    Match match;
-
-                    if (name == null)
-                    {
-                        match = (new Regex(@&quot;^\s*(in|out)\s+(\w+)\s*$&quot;)).Match(line);
-                        if (!match.Success)
-                        {
-                            SayToUser(&quot;expecting direction and packet name, got: &quot; + line);
-                            return;
-                        }
-
-                        string lineDir = match.Groups[1].Captures[0].ToString();
-                        string lineName = match.Groups[2].Captures[0].ToString();
-
-                        if (lineDir == &quot;in&quot;)
-                            direction = Direction.Incoming;
-                        else if (lineDir == &quot;out&quot;)
-                            direction = Direction.Outgoing;
-                        else
-                        {
-                            SayToUser(&quot;expecting 'in' or 'out', got: &quot; + line);
-                            return;
-                        }
-
-                        name = lineName;
-                        packetClass = libslAssembly.GetType(&quot;libsecondlife.Packets.&quot; + name + &quot;Packet&quot;);
-                        if (packetClass == null) throw new Exception(&quot;Couldn't get class &quot; + name + &quot;Packet&quot;);
-                        ConstructorInfo ctr = packetClass.GetConstructor(new Type[] { });
-                        if (ctr == null) throw new Exception(&quot;Couldn't get suitable constructor for &quot; + name + &quot;Packet&quot;);
-                        packet = (Packet)ctr.Invoke(new object[] { });
-                        //Console.WriteLine(&quot;Created new &quot; + name + &quot;Packet&quot;);
-                    }
-                    else
-                    {
-                        match = (new Regex(@&quot;^\s*\[(\w+)\]\s*$&quot;)).Match(line);
-                        if (match.Success)
-                        {
-                            block = match.Groups[1].Captures[0].ToString();
-                            FieldInfo blockField = packetClass.GetField(block);
-                            if (blockField == null) throw new Exception(&quot;Couldn't get &quot; + name + &quot;Packet.&quot; + block);
-			    Type blockClass = blockField.FieldType;
-			    if (blockClass.IsArray)
-			    {
-				blockClass = blockClass.GetElementType();
-				ConstructorInfo ctr = blockClass.GetConstructor(new Type[] { });
-				if (ctr == null) throw new Exception(&quot;Couldn't get suitable constructor for &quot; + blockClass.Name);
-				blockObj = ctr.Invoke(new object[] { });
-				object[] arr = (object[])blockField.GetValue(packet);
-				object[] narr = (object[])Array.CreateInstance(blockClass, arr.Length + 1);
-				Array.Copy(arr,narr,arr.Length);
-				narr[arr.Length] = blockObj;
-				blockField.SetValue(packet,narr);
-				//Console.WriteLine(&quot;Added block &quot;+block);
-			    } 
-			    else
-			    {
-				blockObj = blockField.GetValue(packet);
-			    }
-                            if (blockObj == null) throw new Exception(&quot;Got &quot; + name + &quot;Packet.&quot; + block + &quot; == null&quot;);
-                            //Console.WriteLine(&quot;Got block &quot; + name + &quot;Packet.&quot; + block);
-
-                            continue;
-                        }
-
-                        if (block == null)
-                        {
-                            SayToUser(&quot;expecting block name, got: &quot; + line);
-                            return;
-                        }
-
-                        match = (new Regex(@&quot;^\s*(\w+)\s*=\s*(.*)$&quot;)).Match(line);
-                        if (match.Success)
-                        {
-                            string lineField = match.Groups[1].Captures[0].ToString();
-                            string lineValue = match.Groups[2].Captures[0].ToString();
-                            object fval;
-
-                            //FIXME: use of MagicCast inefficient
-                            if (lineValue == &quot;$Value&quot;)
-                                fval = MagicCast(name, block, lineField, value);
-                            else if (lineValue == &quot;$UUID&quot;)
-                                fval = LLUUID.Random();
-                            else if (lineValue == &quot;$AgentID&quot;)
-                                fval = agentID;
-                            else if (lineValue == &quot;$SessionID&quot;)
-                                fval = sessionID;
-                            else
-                                fval = MagicCast(name, block, lineField, lineValue);
-
-                            MagicSetField(blockObj, lineField, fval);
-                            continue;
-                        }
-
-                        SayToUser(&quot;expecting block name or field, got: &quot; + line);
-                        return;
-                    }
-                }
-
-                if (name == null)
-                {
-                    SayToUser(&quot;expecting direction and packet name, got EOF&quot;);
-                    return;
-                }
-
-                packet.Header.Flags |= Helpers.MSG_RELIABLE;
-                //if (protocolManager.Command(name).Encoded)
-                //	packet.Header.Flags |= Helpers.MSG_ZEROCODED;
-                proxy.InjectPacket(packet, direction);
-
-                SayToUser(&quot;injected &quot; + words[1]);
-            }
-            catch (Exception e)
-            {
-                SayToUser(&quot;failed to inject &quot; + words[1] + &quot;: &quot; + e.Message);
-                Console.WriteLine(&quot;failed to inject &quot; + words[1] + &quot;: &quot; + e.Message + &quot;\n&quot; + e.StackTrace);
-            }
-            finally
-            {
-                if (fs != null)
-                    fs.Close();
-                if (sr != null)
-                    sr.Close();
-            }
-        }
-    }
-
-    // SayToUser: send a message to the user as in-world chat
-    private static void SayToUser(string message)
-    {
-        ChatFromSimulatorPacket packet = new ChatFromSimulatorPacket();
-        packet.ChatData.FromName = Helpers.StringToField(&quot;Analyst&quot;);
-        packet.ChatData.SourceID = LLUUID.Random();
-        packet.ChatData.OwnerID = agentID;
-        packet.ChatData.SourceType = (byte)2;
-        packet.ChatData.ChatType = (byte)1;
-        packet.ChatData.Audible = (byte)1;
-        packet.ChatData.Position = new LLVector3(0, 0, 0);
-        packet.ChatData.Message = Helpers.StringToField(message);
-        proxy.InjectPacket(packet, Direction.Incoming);
-    }
-
-    // BlockField: product type for a block name and field name
-    private struct BlockField
-    {
-        public string block;
-        public string field;
-
-
-        public BlockField(string block, string field)
-        {
-            this.block = block;
-            this.field = field;
-        }
-    }
-
-    private static void MagicSetField(object obj, string field, object val)
-    {
-        Type cls = obj.GetType();
-
-        FieldInfo fieldInf = cls.GetField(field);
-        if (fieldInf == null)
-        {
-            PropertyInfo prop = cls.GetProperty(field);
-            if (prop == null) throw new Exception(&quot;Couldn't find field &quot; + cls.Name + &quot;.&quot; + field);
-            prop.SetValue(obj, val, null);
-            //throw new Exception(&quot;FIXME: can't set properties&quot;);
-        }
-        else
-        {
-            fieldInf.SetValue(obj, val);
-        }
-    }
-
-    // MagicCast: given a packet/block/field name and a string, convert the string to a value of the appropriate type
-    private static object MagicCast(string name, string block, string field, string value)
-    {
-        Type packetClass = libslAssembly.GetType(&quot;libsecondlife.Packets.&quot; + name + &quot;Packet&quot;);
-        if (packetClass == null) throw new Exception(&quot;Couldn't get class &quot; + name + &quot;Packet&quot;);
-
-        FieldInfo blockField = packetClass.GetField(block);
-        if (blockField == null) throw new Exception(&quot;Couldn't get &quot; + name + &quot;Packet.&quot; + block);
-        Type blockClass = blockField.FieldType;
-        if (blockClass.IsArray) blockClass = blockClass.GetElementType();
-        // Console.WriteLine(&quot;DEBUG: &quot; + blockClass.Name);
-
-        FieldInfo fieldField = blockClass.GetField(field); PropertyInfo fieldProp = null;
-        Type fieldClass = null;
-        if (fieldField == null)
-        {
-            fieldProp = blockClass.GetProperty(field);
-            if (fieldProp == null) throw new Exception(&quot;Couldn't get &quot; + name + &quot;Packet.&quot; + block + &quot;.&quot; + field);
-            fieldClass = fieldProp.PropertyType;
-        }
-        else
-        {
-            fieldClass = fieldField.FieldType;
-        }
-
-        try
-        {
-            if (fieldClass == typeof(byte))
-            {
-                return Convert.ToByte(value);
-            }
-            else if (fieldClass == typeof(ushort))
-            {
-                return Convert.ToUInt16(value);
-            }
-            else if (fieldClass == typeof(uint))
-            {
-                return Convert.ToUInt32(value);
-            }
-            else if (fieldClass == typeof(ulong))
-            {
-                return Convert.ToUInt64(value);
-            }
-            else if (fieldClass == typeof(sbyte))
-            {
-                return Convert.ToSByte(value);
-            }
-            else if (fieldClass == typeof(short))
-            {
-                return Convert.ToInt16(value);
-            }
-            else if (fieldClass == typeof(int))
-            {
-                return Convert.ToInt32(value);
-            }
-            else if (fieldClass == typeof(long))
-            {
-                return Convert.ToInt64(value);
-            }
-            else if (fieldClass == typeof(float))
-            {
-                return Convert.ToSingle(value);
-            }
-            else if (fieldClass == typeof(double))
-            {
-                return Convert.ToDouble(value);
-            }
-            else if (fieldClass == typeof(LLUUID))
-            {
-                return new LLUUID(value);
-            }
-            else if (fieldClass == typeof(bool))
-            {
-                if (value.ToLower() == &quot;true&quot;)
-                    return true;
-                else if (value.ToLower() == &quot;false&quot;)
-                    return false;
-                else
-                    throw new Exception();
-            }
-            else if (fieldClass == typeof(byte[]))
-            {
-                return Helpers.StringToField(value);
-            }
-            else if (fieldClass == typeof(LLVector3))
-            {
-                Match vector3Match = (new Regex(@&quot;&lt;\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*&gt;&quot;)).Match(value);
-                if (!vector3Match.Success)
-                    throw new Exception();
-                return new LLVector3
-                    (Convert.ToSingle(vector3Match.Groups[1].Captures[0].ToString())
-                    , Convert.ToSingle(vector3Match.Groups[2].Captures[0].ToString())
-                    , Convert.ToSingle(vector3Match.Groups[3].Captures[0].ToString())
-                    );
-            }
-            else if (fieldClass == typeof(LLVector3d))
-            {
-                Match vector3dMatch = (new Regex(@&quot;&lt;\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*&gt;&quot;)).Match(value);
-                if (!vector3dMatch.Success)
-                    throw new Exception();
-                return new LLVector3d
-                    (Convert.ToDouble(vector3dMatch.Groups[1].Captures[0].ToString())
-                    , Convert.ToDouble(vector3dMatch.Groups[2].Captures[0].ToString())
-                    , Convert.ToDouble(vector3dMatch.Groups[3].Captures[0].ToString())
-                    );
-            }
-            else if (fieldClass == typeof(LLVector4))
-            {
-                Match vector4Match = (new Regex(@&quot;&lt;\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*&gt;&quot;)).Match(value);
-                if (!vector4Match.Success)
-                    throw new Exception();
-                float vector4X = Convert.ToSingle(vector4Match.Groups[1].Captures[0].ToString());
-                float vector4Y = Convert.ToSingle(vector4Match.Groups[2].Captures[0].ToString());
-                float vector4Z = Convert.ToSingle(vector4Match.Groups[3].Captures[0].ToString());
-                float vector4S = Convert.ToSingle(vector4Match.Groups[4].Captures[0].ToString());
-                byte[] vector4Bytes = new byte[16];
-                Array.Copy(BitConverter.GetBytes(vector4X), 0, vector4Bytes, 0, 4);
-                Array.Copy(BitConverter.GetBytes(vector4Y), 0, vector4Bytes, 4, 4);
-                Array.Copy(BitConverter.GetBytes(vector4Z), 0, vector4Bytes, 8, 4);
-                Array.Copy(BitConverter.GetBytes(vector4S), 0, vector4Bytes, 12, 4);
-                return new LLVector4(vector4Bytes, 0);
-            }
-            else if (fieldClass == typeof(LLQuaternion))
-            {
-                Match quaternionMatch = (new Regex(@&quot;&lt;\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*,\s*(-?[0-9.]+)\s*&gt;&quot;)).Match(value);
-                if (!quaternionMatch.Success)
-                    throw new Exception();
-                return new LLQuaternion
-                    (Convert.ToSingle(quaternionMatch.Groups[1].Captures[0].ToString())
-                    , Convert.ToSingle(quaternionMatch.Groups[2].Captures[0].ToString())
-                    , Convert.ToSingle(quaternionMatch.Groups[3].Captures[0].ToString())
-                    );
-            }
-            else
-            {
-                throw new Exception(&quot;unsupported field type &quot; + fieldClass);
-            }
-        }
-        catch
-        {
-            throw new Exception(&quot;unable to interpret &quot; + value + &quot; as &quot; + fieldClass);
-        }
-        /*				try {
-                            switch (fieldMap.Type) {
-                                case FieldType.LLVector3:
-                                case FieldType.IPADDR:
-                                    return IPAddress.Parse(value);
-                                case FieldType.IPPORT:
-                                    return Convert.ToUInt16(value);
-                                case FieldType.Variable:
-                                    Match match = Regex.Match(value, @&quot;^0x([0-9a-fA-F]{2})*&quot;, RegexOptions.IgnoreCase);
-                                    if (match.Success) {
-                                        byte[] buf = new byte[match.Groups[1].Captures.Count];
-                                        int i = 0;
-                                        foreach (Capture capture in match.Groups[1].Captures)
-                                            buf[i++] = Byte.Parse(capture.ToString(), NumberStyles.AllowHexSpecifier);
-                                        return buf;
-                                    } else
-                                        return value;
-                            }
-                        } catch {
-                            throw new Exception(&quot;unable to interpret &quot; + value + &quot; as &quot; + fieldMap.Type);
-                        }
-
-                        throw new Exception(&quot;unsupported field type &quot; + fieldMap.Type);
-                    }
-
-                    throw new Exception(&quot;unknown field &quot; + name + &quot;.&quot; + block + &quot;.&quot; + field);
-                }
-
-                throw new Exception(&quot;unknown block &quot; + name + &quot;.&quot; + block); */
-    }
-
-    // ModifyIn: modify an incoming packet
-    private static Packet ModifyIn(Packet packet, IPEndPoint endPoint)
-    {
-        return Modify(packet, endPoint, Direction.Incoming);
-    }
-
-    // ModifyOut: modify an outgoing packet
-    private static Packet ModifyOut(Packet packet, IPEndPoint endPoint)
-    {
-        return Modify(packet, endPoint, Direction.Outgoing);
-    }
-
-    // Modify: modify a packet
-    private static Packet Modify(Packet packet, IPEndPoint endPoint, Direction direction)
-    {
-        if (modifiedPackets.Contains(packet.Type))
-        {
-            try
-            {
-                Hashtable changes = (Hashtable)modifiedPackets[packet.Type];
-                Type packetClass = packet.GetType();
-
-                foreach (BlockField bf in changes.Keys)
-                {
-                    //FIXME: support variable blocks
-
-                    FieldInfo blockField = packetClass.GetField(bf.block);
-                    //Type blockClass = blockField.FieldType;
-                    object blockObject = blockField.GetValue(packet);
-                    MagicSetField(blockObject, bf.field, changes[blockField]);
-                }
-            }
-            catch (Exception e)
-            {
-                Console.WriteLine(&quot;failed to modify &quot; + packet.Type + &quot;: &quot; + e.Message);
-                Console.WriteLine(e.StackTrace);
-            }
-        }
-
-        return packet;
-    }
-
-    // LogPacketIn: log an incoming packet
-    private static Packet LogPacketIn(Packet packet, IPEndPoint endPoint)
-    {
-	LogPacket(packet, endPoint, Direction.Incoming);
-        return packet;
-    }
-
-    // LogPacketOut: log an outgoing packet
-    private static Packet LogPacketOut(Packet packet, IPEndPoint endPoint)
-    {
-	LogPacket(packet, endPoint, Direction.Outgoing);
-        return packet;
-    }
-
-    // LogAll: register logging delegates for all packets
-    private static void LogAll()
-    {
-        Type packetTypeType = typeof(PacketType);
-        System.Reflection.MemberInfo[] packetTypes = packetTypeType.GetMembers();
-
-        for (int i = 0; i &lt; packetTypes.Length; i++)
-        {
-            if (packetTypes[i].MemberType == System.Reflection.MemberTypes.Field &amp;&amp; packetTypes[i].DeclaringType == packetTypeType)
-            {
-                string name = packetTypes[i].Name;
-                PacketType pType;
-
-                try
-                {
-                    pType = packetTypeFromName(name);
-                }
-                catch (Exception)
-                {
-                    continue;
-                }
-
-                loggedPackets[pType] = null;
-
-                proxy.AddDelegate(pType, Direction.Incoming, new PacketDelegate(LogPacketIn));
-                proxy.AddDelegate(pType, Direction.Outgoing, new PacketDelegate(LogPacketOut));
-            }
-        }
-    }
-
-    // NoLogAll: unregister logging delegates for all packets
-    private static void NoLogAll()
-    {
-        Type packetTypeType = typeof(PacketType);
-        System.Reflection.MemberInfo[] packetTypes = packetTypeType.GetMembers();
-
-        for (int i = 0; i &lt; packetTypes.Length; i++)
-        {
-            if (packetTypes[i].MemberType == System.Reflection.MemberTypes.Field &amp;&amp; packetTypes[i].DeclaringType == packetTypeType)
-            {
-                string name = packetTypes[i].Name;
-                PacketType pType;
-
-                try
-                {
-                    pType = packetTypeFromName(name);
-                }
-                catch (Exception)
-                {
-                    continue;
-                }
-
-                loggedPackets.Remove(pType);
-
-                proxy.RemoveDelegate(pType, Direction.Incoming, new PacketDelegate(LogPacketIn));
-                proxy.RemoveDelegate(pType, Direction.Outgoing, new PacketDelegate(LogPacketOut));
-            }
-        }
-    }
-
-    // LogPacket: dump a packet to the console
-    private static void LogPacket(Packet packet, IPEndPoint endPoint, Direction direction)
-    {
-        /* if (logGrep != null) {
-            bool match = false;
-            foreach (Block block in packet.Blocks())
-                foreach (Field field in block.Fields) {
-                    string value;
-                    if (field.Layout.Type == FieldType.Variable)
-                        value = DataConvert.toChoppedString(field.Data);
-                    else
-                        value = field.Data.ToString();
-                    if (Regex.Match(packet.Layout.Name + &quot;.&quot; + block.Layout.Name + &quot;.&quot; + field.Layout.Name + &quot; = &quot; + value, logGrep, RegexOptions.IgnoreCase).Success) {
-                        match = true;
-                        break;
-                    }
-
-                    // try matching variable fields in 0x notation
-                    if (field.Layout.Type == FieldType.Variable) {
-                        StringWriter sw = new StringWriter();
-                        sw.Write(&quot;0x&quot;);
-                        foreach (byte b in (byte[])field.Data)
-                            sw.Write(&quot;{0:x2}&quot;, b);
-                        if (Regex.Match(packet.Layout.Name + &quot;.&quot; + block.Layout.Name + &quot;.&quot; + field.Layout.Name + &quot; = &quot; + sw, logGrep, RegexOptions.IgnoreCase).Success) {
-                            match = true;
-                            break;
-                        }
-                    }
-                }
-            if (!match)
-                return;
-        } */
-
-        Console.WriteLine(&quot;{0} {1,21} {2,5} {3}{4}{5}&quot;
-                 , direction == Direction.Incoming ? &quot;&lt;--&quot; : &quot;--&gt;&quot;
-                 , endPoint
-                 , packet.Header.Sequence
-                 , InterpretOptions(packet.Header.Flags)
-                 , Environment.NewLine
-                 , packet
-                 );
-    }
-
-    // InterpretOptions: produce a string representing a packet's header options
-    private static string InterpretOptions(byte options)
-    {
-        return &quot;[&quot;
-             + ((options &amp; Helpers.MSG_APPENDED_ACKS) != 0 ? &quot;Ack&quot; : &quot;   &quot;)
-             + &quot; &quot;
-             + ((options &amp; Helpers.MSG_RESENT) != 0 ? &quot;Res&quot; : &quot;   &quot;)
-             + &quot; &quot;
-             + ((options &amp; Helpers.MSG_RELIABLE) != 0 ? &quot;Rel&quot; : &quot;   &quot;)
-             + &quot; &quot;
-             + ((options &amp; Helpers.MSG_ZEROCODED) != 0 ? &quot;Zer&quot; : &quot;   &quot;)
-             + &quot;]&quot;
-             ;
-    }
-}

Copied: branches/aditi/applications/SLProxy/Analyst.cs (from rev 775, trunk/applications/SLProxy/Analyst.cs)

Deleted: branches/aditi/applications/SLProxy/Analyst.csproj
===================================================================
--- trunk/applications/SLProxy/Analyst.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/Analyst.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,108 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;ProjectType&gt;Local&lt;/ProjectType&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{6222B134-AE5F-489A-8A77-423A721B7C62}&lt;/ProjectGuid&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ApplicationIcon&gt;
-    &lt;/ApplicationIcon&gt;
-    &lt;AssemblyKeyContainerName&gt;
-    &lt;/AssemblyKeyContainerName&gt;
-    &lt;AssemblyName&gt;Analyst&lt;/AssemblyName&gt;
-    &lt;AssemblyOriginatorKeyFile&gt;
-    &lt;/AssemblyOriginatorKeyFile&gt;
-    &lt;DefaultClientScript&gt;JScript&lt;/DefaultClientScript&gt;
-    &lt;DefaultHTMLPageLayout&gt;Grid&lt;/DefaultHTMLPageLayout&gt;
-    &lt;DefaultTargetSchema&gt;IE50&lt;/DefaultTargetSchema&gt;
-    &lt;DelaySign&gt;false&lt;/DelaySign&gt;
-    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
-    &lt;RootNamespace&gt;Analyst&lt;/RootNamespace&gt;
-    &lt;RunPostBuildEvent&gt;OnBuildSuccess&lt;/RunPostBuildEvent&gt;
-    &lt;StartupObject&gt;
-    &lt;/StartupObject&gt;
-    &lt;FileUpgradeFlags&gt;
-    &lt;/FileUpgradeFlags&gt;
-    &lt;UpgradeBackupLocation&gt;
-    &lt;/UpgradeBackupLocation&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;..\bin\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;false&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;none&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;System&quot;&gt;
-      &lt;Name&gt;System&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Data&quot;&gt;
-      &lt;Name&gt;System.Data&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Xml&quot;&gt;
-      &lt;Name&gt;System.XML&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;ProjectReference Include=&quot;..\..\libsecondlife-cs\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-    &lt;ProjectReference Include=&quot;SLProxy.csproj&quot;&gt;
-      &lt;Name&gt;SLProxy&lt;/Name&gt;
-      &lt;Project&gt;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&lt;/Project&gt;
-      &lt;Package&gt;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&lt;/Package&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;Analyst.cs&quot;&gt;
-      &lt;SubType&gt;Code&lt;/SubType&gt;
-    &lt;/Compile&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;PropertyGroup&gt;
-    &lt;PreBuildEvent&gt;
-    &lt;/PreBuildEvent&gt;
-    &lt;PostBuildEvent&gt;
-    &lt;/PostBuildEvent&gt;
-  &lt;/PropertyGroup&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SLProxy/Analyst.csproj (from rev 775, trunk/applications/SLProxy/Analyst.csproj)

Deleted: branches/aditi/applications/SLProxy/ChatConsole.cs
===================================================================
--- trunk/applications/SLProxy/ChatConsole.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/ChatConsole.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,107 +0,0 @@
-/*
- * ChatConsole.cs: sample SLProxy appliation that writes chat to the console.
- *   Typing on the console will send chat to Second Life.
- *
- * Copyright (c) 2006 Austin Jennings
- * Modified by Andrew Ortman (&quot;qode&quot;) on Decemeber 21, 2006 to work with the new pregen proxy.
- * All rights reserved.
- *
- * - Redistribution and use in source and binary forms, with or without 
- *   modification, are permitted provided that the following conditions are met:
- *
- * - Redistributions of source code must retain the above copyright notice, this
- *   list of conditions and the following disclaimer.
- * - Neither the name of the Second Life Reverse Engineering Team nor the names 
- *   of its contributors may be used to endorse or promote products derived from
- *   this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
- * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
- * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
- * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
- * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
- * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
- * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
- * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
- * POSSIBILITY OF SUCH DAMAGE.
- */
-
-using SLProxy;
-using libsecondlife;
-using libsecondlife.Packets;
-using Nwc.XmlRpc;
-
-using System;
-using System.Collections;
-using System.Net;
-using System.Threading;
-
-public class ChatConsole {
-	private static Proxy proxy;
-	private static LLUUID agentID;
-	private static LLUUID sessionID;
-
-	public static void Main(string[] args) {
-		// configure the proxy
-		ProxyConfig proxyConfig = new ProxyConfig(&quot;ChatConsole V2&quot;, &quot;Austin Jennings / Andrew Ortman&quot;, args);
-		proxy = new Proxy(proxyConfig);
-
-		// set a delegate for when the client logs in
-		proxy.SetLoginResponseDelegate(new XmlRpcResponseDelegate(Login));
-
-		// add a delegate for incoming chat
-		proxy.AddDelegate(PacketType.ChatFromSimulator, Direction.Incoming, new PacketDelegate(ChatFromSimulator));
-
-		// start the proxy
-		proxy.Start();
-	}
-
-	private static void Login(XmlRpcResponse response) {
-		Hashtable values = (Hashtable)response.Value;
-		if (values.Contains(&quot;agent_id&quot;) &amp;&amp; values.Contains(&quot;session_id&quot;)) {
-			// remember our agentID and sessionID
-			agentID = new LLUUID((string)values[&quot;agent_id&quot;]);
-			sessionID = new LLUUID((string)values[&quot;session_id&quot;]);
-
-			// start a new thread that reads lines from the console
-			(new Thread(new ThreadStart(ReadFromConsole))).Start();
-		}
-	}
-
-	private static void ReadFromConsole() {
-		// send text from the console in an infinite loop
-		for (;;) {
-			// read a line from the console
-			string message = Console.ReadLine();
-
-			// construct a ChatFromViewer packet
-            ChatFromViewerPacket chat = new ChatFromViewerPacket();
-            chat.ChatData.Channel = 0;
-            chat.ChatData.Message = Helpers.StringToField(message);
-            chat.ChatData.Type = (byte)1;
-
-            chat.AgentData.AgentID = agentID;
-            chat.AgentData.SessionID = sessionID;
-			// inject the packet
-			proxy.InjectPacket((Packet)chat, Direction.Outgoing);
-		}
-	}
-
-	private static Packet ChatFromSimulator(Packet packet, IPEndPoint sim) {
-		// deconstruct the packet
-        ChatFromSimulatorPacket chat = (ChatFromSimulatorPacket)packet;
-        string message = Helpers.FieldToString(chat.ChatData.Message);
-        string name = Helpers.FieldToString(chat.ChatData.FromName);
-        byte audible = chat.ChatData.Audible;
-        byte type = chat.ChatData.ChatType;
-
-		// if this was a normal, audible message, write it to the console
-		if (audible != 0 &amp;&amp; (type == 0 || type == 1 || type == 2))
-			Console.WriteLine(name + &quot;: &quot; + message);
-
-		// return the packet unmodified
-		return packet;
-	}
-}

Copied: branches/aditi/applications/SLProxy/ChatConsole.cs (from rev 775, trunk/applications/SLProxy/ChatConsole.cs)

Deleted: branches/aditi/applications/SLProxy/ChatConsole.csproj
===================================================================
--- trunk/applications/SLProxy/ChatConsole.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/ChatConsole.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,108 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;ProjectType&gt;Local&lt;/ProjectType&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}&lt;/ProjectGuid&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ApplicationIcon&gt;
-    &lt;/ApplicationIcon&gt;
-    &lt;AssemblyKeyContainerName&gt;
-    &lt;/AssemblyKeyContainerName&gt;
-    &lt;AssemblyName&gt;ChatConsole&lt;/AssemblyName&gt;
-    &lt;AssemblyOriginatorKeyFile&gt;
-    &lt;/AssemblyOriginatorKeyFile&gt;
-    &lt;DefaultClientScript&gt;JScript&lt;/DefaultClientScript&gt;
-    &lt;DefaultHTMLPageLayout&gt;Grid&lt;/DefaultHTMLPageLayout&gt;
-    &lt;DefaultTargetSchema&gt;IE50&lt;/DefaultTargetSchema&gt;
-    &lt;DelaySign&gt;false&lt;/DelaySign&gt;
-    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
-    &lt;RootNamespace&gt;ChatConsole&lt;/RootNamespace&gt;
-    &lt;RunPostBuildEvent&gt;OnBuildSuccess&lt;/RunPostBuildEvent&gt;
-    &lt;StartupObject&gt;
-    &lt;/StartupObject&gt;
-    &lt;FileUpgradeFlags&gt;
-    &lt;/FileUpgradeFlags&gt;
-    &lt;UpgradeBackupLocation&gt;
-    &lt;/UpgradeBackupLocation&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;..\bin\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;bin\Release\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;false&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;none&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;System&quot;&gt;
-      &lt;Name&gt;System&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Data&quot;&gt;
-      &lt;Name&gt;System.Data&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Xml&quot;&gt;
-      &lt;Name&gt;System.XML&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;ProjectReference Include=&quot;..\..\libsecondlife-cs\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-    &lt;ProjectReference Include=&quot;SLProxy.csproj&quot;&gt;
-      &lt;Name&gt;SLProxy&lt;/Name&gt;
-      &lt;Project&gt;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&lt;/Project&gt;
-      &lt;Package&gt;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&lt;/Package&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;ChatConsole.cs&quot;&gt;
-      &lt;SubType&gt;Code&lt;/SubType&gt;
-    &lt;/Compile&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;PropertyGroup&gt;
-    &lt;PreBuildEvent&gt;
-    &lt;/PreBuildEvent&gt;
-    &lt;PostBuildEvent&gt;
-    &lt;/PostBuildEvent&gt;
-  &lt;/PropertyGroup&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SLProxy/ChatConsole.csproj (from rev 775, trunk/applications/SLProxy/ChatConsole.csproj)

Deleted: branches/aditi/applications/SLProxy/README.txt
===================================================================
--- trunk/applications/SLProxy/README.txt	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/README.txt	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,375 +0,0 @@
-NOTE: THIS DEVELOPER BRANCH IS THE NEW PREGEN SLPROXY. THIS DOCUMENT
-MAY NOT BE UP TO DATE WITH THE NEW VERSION.
-
-Public Source - Release Canidate 1
-
-MODIFICATIONS BY &quot;ALPHA ZAIUS&quot; / ANDREW ORTMAN. QODE IN EFNET: #LIBSL
-AND #LIBSL-DEV
-
-SPECIAL THANKS TO &quot;mcortez&quot; IN EFNET (#libsl-dev) FOR A HELPFUL PATCH
-TO ANALYST AND SLPROXY-PREGEN TO KICKSTART ITS TESTING.
-
----------------------------------------------------------------------
-SLProxy is a library that works in conjunction with libsecondlife to
-allow applications to wedge themselves between the official Second
-Life client and servers.  SLProxy applications can inspect and modify
-any packet as it passes between the client and the servers; remove
-packets from the stream; and inject new packets into the stream.
-SLProxy automatically takes care of tracking circuits and modifying
-sequence numbers and acknowledgements to account for changes to the
-packet stream.
-
-The continued existence of this software of course rests on the good
-will of Linden Lab toward the Second Life reverse engineering effort.
-Please use common sense when designing applications and report any
-security holes you may find to <A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">security at lindenlab.com.</A>
-
-To use an SLProxy application, you must first start the proxy, then
-start Second Life with the switch `-loginuri <A HREF="http://localhost:8080/">http://localhost:8080/</A>'.
-In Windows, add this switch (without the quotes) to your Second Life
-shortcut.  In MacOS X, this can be accomplished by sending the
-following commands to the Terminal (assuming Second Life is installed
-in /Applications):
-
-	cd &quot;/Applications/Second Life.app&quot;
-	&quot;Contents/MacOS/Second Life&quot; -loginuri <A HREF="http://localhost:8080/">http://localhost:8080/</A>
-
-Note that for security reasons, by default, SLProxy applications must
-be running on the same computer as Second Life.  If you need to run a
-proxy on a different machine or port, start the proxy with the
---proxy-help switch and see the options available.
-
-SLProxy can only handle one client using a proxy at a time.
-
-BUILDING
-========
-
-To build SLProxy, you must check out the entire libsecondlife trunk
-with subversion:
-
-  svn co <A HREF="svn://svn.gna.org/svn/libsecondlife/trunk">svn://svn.gna.org/svn/libsecondlife/trunk</A> libsecondlife
-
-The libsecondlife-cs project must be built first; see
-libsecondlife-cs/README for instructions.  Building SLProxy should be
-straightforward with Microsoft Visual Studio.  If you're using Mono,
-you can build the solution with the included build script:
-
-  perl build
-
-The SLProxy library and its example applications will be built in
-bin/Debug.  In order to run the example applications, you must first
-add the libsecondlife-cs build directory to your MONO_PATH environment
-variable.  For example, if your libsecondlife-cs directory is
-~/libsecondlife/libsecondlife-cs and your shell is bash, you can type:
-
-  export MONO_PATH=$MONO_PATH:~/libsecondlife/libsecondlife-cs/bin/Debug/
-
-INCLUDED APPLICATIONS
-=====================
-
-Included with SLProxy are a few example application, which are covered
-in this section.
-
-1. Analyst
-----------
-
-Analyst makes SLProxy's packet inspection and modification
-functionality interactive.  When connected to Second Life through
-Analyst, you use the following commands by saying them using in-world
-chat:
-
-/log &lt;packet name&gt;
-
-  Packets of type &lt;packet name&gt; will be dumped to the console.  For
-  example, say `/log ChatFromSimulator' to get a packet dump of all
-  incoming chat.
-
-/-log &lt;packet name&gt;
-
-  Packets of type &lt;packet name&gt; will no longer be dumped to the
-  console.
-
-/log *
-
-  All packets will be dumped to the console.
-
-/-log *
-
-  No packets will be dumped to the console.
-
-/grep [regex]
-
-  Only log packets that have a field for which regex matches
-  &lt;packet name&gt;.&lt;block name&gt;.&lt;field name&gt; = &lt;value&gt;.  To stop
-  filtering, type /grep without an argument.  Matches are case
-  insensitive.  In the case of a variable field, Analyst will try to
-  convert it into a string; if that doesn't match, it will try
-  converting it into a hexidecimal numeral preceeded by 0x.
-
-/set &lt;packet name&gt; &lt;block name&gt; &lt;field name&gt; &lt;value&gt;
-
-  All forthcoming packets of type &lt;packet name&gt; will have the field
-  identified by &lt;block name&gt; and &lt;field name&gt; set to &lt;value&gt;.  For
-  example, if you say `/set ChatFromViewer ChatData Type 0',
-  everything you say thereafter will be whispered.  Values for
-  variable fields will be interpreted as strings unless they begin
-  with a 0x, in which case they will be treated as hexidecimal
-  numerals representing the contents of the field.
-
-/-set &lt;packet name&gt; &lt;block name&gt; &lt;field name&gt;
-
-  Packets of type &lt;packet name&gt; will no longer have the field
-  identified by &lt;block name&gt; and &lt;field name&gt; modified.
-
-/-set *
-
-  No fields will be modified.
-
-/inject &lt;packet file&gt; [value]
-
-  Inject the packet described by &lt;packet file&gt;.packet in the working
-  directory.  The [value] is optional and may be required by some
-  packet files.  `/in' is an alias for `/inject'.  The syntax of a
-  packet file is described in section 2.1.  SLProxy comes with two
-  example packet files: god.packet allows you to enable hacked god
-  mode by typing `/inject god', and whisper.packet allows you to
-  whisper by typing `/inject whisper &lt;message&gt;'.
-
-These commands will not be forwarded to the server, so other people
-won't hear you say them.
-
-Analyst accepts a --log-all command line switch, which causes the
-proxy to start out logging all packets as if you had typed `/log *'.
-This can be useful if you want to capture a complete dump of your
-session, including login.
-
-Analyst also accepts a --log-login command line switch, which causes
-the XML-RPC login request and response to dumped to the console.
-
-2.1 Packet files
-- - - - - - - -
-
-A packet file describes a packet that can be injected with the /inject
-command.  Please refer to god.packet and whisper.packet (in the
-bin/Debug/ directory) as examples.
-
-The first line of a packet file must contain the word `in' or `out',
-specifying whether the packet is incoming or outgoing, respectively,
-followed by the name of the packet.
-
-The remainder of the file specifies the packet's blocks and fields.  A
-block is described by placing its name in square brackets
-(e.g. `[GrantData]').  Following the the line specifying the block's
-name, the block's fields and values are specified, separated by equal
-signs (e.g. `GodLevel = 255'), one per line.
-
-The value of a field can be a literal value (e.g. `255'), or one of
-the following special values:
-
-$Value
-
-  the [value] specified by the user
-
-$UUID
-
-  a random UUID
-
-$AgentID
-
-  the user's AgentID
-
-$SessionID
-
-  the user's SessionID
-
-2. ChatConsole
---------------
-
-ChatConsole is a trivial SLProxy application intended as an example of
-how SLProxy applications can be written.  When connected to Second
-Life through ChatConsole, all in-world chat will be echoed to the
-console, and anything typed in the console will be echoed to the game as
-in-world chat.
-
-PUBLIC INTERFACE
-================
-
-This section describes the interface that SLProxy applications will
-use to interact with the packet stream.  Please see ChatConsole.cs for
-a simple example of how this interface can be used.
-
-SLProxy extends the functionality of libsecondlife, so we assume here
-that the reader is already familiar with libsecondlife's Packet and
-PacketBuilder classes.
-
-1. ProxyConfig class
---------------------
-
-An instance of ProxyConfig represents the configuration of a Proxy
-object, and must be provided when constructing a Proxy.  ProxyConfig
-has two constructors:
-
-	ProxyConfig(string userAgent, string author)
-	ProxyConfig(string userAgent, string author, string[] args)
-
-Both constructors require a user agent name and the author's email
-address.  These are sent to Second Life's login server to identify the
-client, and to allow Linden Lab to get in touch with authors whose
-applications may inadvertantly be causing problems.  The second
-constructor is preferred and takes an array of command-line arguments
-that allow the user to override certain network settings.  For a list
-of command line arguments, start your appliation with the --proxy-help
-switch.
-
-2. Proxy class
---------------
-
-The Proxy class represents an instance of an SLProxy and provides the
-methods necessary to modify the packet stream.  Proxy's sole
-constructor takes an instance of ProxyConfig.
-
-2.1 Login delegates
-- - - - - - - - - -
-
-You may specify that SLProxy should call a delegate method in your
-application when the user requests login or the server responds.
-
-	delegate void XmlRpcRequestDelegate(XmlRpcRequest request)
-	delegate void XmlRpcResponseDelegate(XmlRpcResponse response)
-	void SetLoginRequestDelegate(XmlRpcRequestDelegate loginRequestDelegate)
-	void SetLoginResponseDelegate(XmlRpcResponseDelegate loginResponseDelegate)
-
-A login response delegate, in particular, is useful for retrieving the
-agent_id and session_id, which are required when injecting certain
-types of packets.  See ChatConsole.cs for an example of how these can
-be retrieved.
-
-Note that all delegates must terminate (not go into an infinite loop),
-and must be thread-safe.
-
-2.2 Packet delegates
-- - - - - - - - - -
-
-Packet delegates allow you to inspect and modify packets as they pass
-between the client and the server:
-
-	delegate Packet PacketDelegate(Packet packet, IPEndPoint endPoint)
-	void AddDelegate(string packetName, Direction direction, PacketDelegate packetDelegate)
-	void RemoveDelegate(string packetName, Direction direction)
-
-AddDelegate adds a callback delegate for packets named packetName
-going direction.  Directions are either Direction.Incoming, meaning
-packets heading from the server to the client, or Direction.Outgoing,
-meaning packets heading from the client to the server.  Only one
-delegate can apply to a packet at a time; if you add a new delegate
-with the same packetName and direction, the old one will be removed.
-
-RemoveDelegate simply removes the delegate for the specified type of
-packet.
-
-PacketDelegate methods are passed a copy of the packet (in the form of
-a libsecondlife Packet object) and the IPEndPoint of the server that
-sent (or will receive) the packet.  PacketDelegate methods may do one
-of three things:
-
-1. Return the same packet, in which case it will be passed on.
-2. Return a new packet (built with libsecondlife), in which case the
-   new packet will substitute for the original.  SLProxy will
-   automatically copy the sequence number and appended ACKs from the
-   old packet to the new one.
-3. Return null, in which case the packet will not be passed on.
-
-SLProxy automatically takes care of ensuring that sequence numbers and
-acknowledgements are adjusted to account for changes made by the
-application.  When replacing a reliable packet with an unreliable
-packet or removing a reliable packet, a fake acknowledgement is
-injected.  When replacing an unreliable packet with a reliable packet,
-SLProxy ensures delivery and intercepts its acknowledgement.  Note
-that if a reliable packet is passed on but then lost on the network,
-Second Life will resend it and the delegate will be called again.  You
-can tell if a packet is being resent by checking if (packet.Data[0] &amp;
-Helpers.MSG_RESENT) is nonzero, although be advised that it's possible
-that the original packet never made it to the proxy and the packet
-will be marked RESENT the first time the proxy ever sees it.
-
-Note that all delegates must terminate (not go into an infinite loop),
-and must be thread-safe.
-
-2.3 Packet injection
-- - - - - - - - - -
-
-New packets may be injected into the stream at any point, either
-during a delegate callback or by another thread in your application.
-Packets are injected with the InjectPacket method:
-
-	void InjectPacket(Packet packet, Direction direction)
-
-This will inject a packet heading to either the client or to the
-active server, when direction is Direction.Incoming or
-Direction.Outgoing, respectively.  The packet's sequence number will
-be set automatically, and if the packet is reliable, SLProxy will
-ensure its delivery and intercept its acknowledgement.
-
-Injecting a packet immediately upon (or prior to) connection is not
-recommended, since the client and the server won't have initialized
-their session yet.
-
-2.4 Starting and stopping the proxy
-- - - - - - - - - - - - - - - - - -
-
-Once you've constructed a Proxy and added your delegates, you must
-start it with the Start method:
-
-	void Start()
-
-Once started, the proxy will begin listening for connections.  The
-Start method spawns new threads for the proxy and returns immediately.
-
-When your application is ready to shut down, you must call the Stop
-method:
-
-	void Stop()
-
-Note that this may not actually force the proxy to stop accepting
-connections; it merely guarantees that all foreground threads are
-stopped, allowing the application to exit cleanly.
-
-3. PacketUtility class
-----------------------
-
-The PacketUtility class provides a handful of static methods which may
-be useful when inspecting and modifying packets.
-
-3.1 Hashtable Unbuild(Packet packet)
-- - - - - - - - - - - - - - - - - -
-
-The Unbuild method takes a Packet object and returns a table of
-blocks, structured in a format suitable for passing to PacketUtility's
-GetField and SetField methods or PacketBuilder's BuildPacket method.
-
-For example, this should make an approximate copy of a packet:
-
-Hashtable packetBlocks = PacketUtility.Unbuild(packet);
-Packet packetCopy = PacketBuilder.BuildPacket(packet.Layout.Name, protocolManager, packetBlocks, packet.Data[0]);
-
-3.2 object GetField(Hashtable blocks, string block, string field)
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
-
-The GetField method takes a table of blocks (produced by
-PacketUtility.Unbuild) and extracts the value of a particular field.
-If the field is part of a variable block, an arbitrary instance of the
-field will be returned.  If the field does not exist, null will be
-returned.
-
-3.3 void SetField(Hashtable blocks, string block, string field, object value)
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
-
-The SetField method takes a table of blocks (produced by
-PacketUtility.Unbuild) and sets the value of a particular field.  If
-the field is part of a variable block, all instances of the field will
-be set.  If the field does not exist, SetField will have no effect.
-
-This can be used by a packet delegate method in conjunction with
-PacketUtility.Unbuild and PacketBuilder.BuildPacket to substitute a
-new packet that is a copy of the original packet with certain fields
-modified.

Copied: branches/aditi/applications/SLProxy/README.txt (from rev 775, trunk/applications/SLProxy/README.txt)

Deleted: branches/aditi/applications/SLProxy/SLProxy.build
===================================================================
--- trunk/applications/SLProxy/SLProxy.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/SLProxy.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,125 +0,0 @@
-&lt;?xml version=&quot;1.0&quot;?&gt;
-
-&lt;project name=&quot;libsecondlife&quot; default=&quot;build&quot;&gt;
-
-  &lt;!-- global framework settings --&gt;
-  &lt;property name=&quot;target.framework&quot; value=&quot;${framework::get-target-framework()}&quot; /&gt;
-  &lt;property name=&quot;assembly.dir&quot; value=&quot;${framework::get-assembly-directory(target.framework)}&quot; /&gt;
-
-  &lt;!-- global project settings --&gt;
-  &lt;xmlpeek
-    file=&quot;../../libsecondlife.build&quot;
-    xpath=&quot;/project/property[@name = 'project.version']/@value&quot;
-    property=&quot;project.version&quot; /&gt;
-  &lt;property name=&quot;build.number&quot;
-     value=&quot;${math::abs(math::floor(timespan::get-total-days(datetime::now()
-     - datetime::parse('01/01/2002'))))}&quot; /&gt;
-  &lt;property name=&quot;assembly&quot; value=&quot;SLProxy&quot;/&gt;
-  &lt;property name=&quot;bin_dir&quot;  value=&quot;../../bin&quot; /&gt;
-
-  &lt;!-- default configuration --&gt;
-  &lt;property name=&quot;project.config&quot; value=&quot;debug&quot; /&gt; &lt;!-- debug|release --&gt;
-
-  &lt;!-- named configurations --&gt;
-  &lt;target name=&quot;init&quot; description=&quot;Initializes build properties&quot;&gt;
-    &lt;call target=&quot;${project.config}&quot; /&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;debug&quot; description=&quot;configures a debug build&quot;&gt;
-    &lt;property name=&quot;build.debug&quot; value=&quot;true&quot; /&gt;
-    &lt;property name=&quot;package.name&quot;
-	value=&quot;${project::get-name()}-${project.version}-${project.config}&quot; /&gt;
-    &lt;property name=&quot;assembly.configuration&quot;
-      value=&quot;${framework::get-target-framework()}.${platform::get-name()} [${project.config}]&quot; /&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;release&quot; description=&quot;configures a release build&quot;&gt;
-    &lt;property name=&quot;project.config&quot; value=&quot;release&quot; /&gt;
-    &lt;property name=&quot;build.debug&quot; value=&quot;false&quot; /&gt;
-    &lt;property name=&quot;package.name&quot;
-      value=&quot;${project::get-name()}-${project.version}&quot; /&gt;
-    &lt;property name=&quot;assembly.configuration&quot;
-      value=&quot;${framework::get-target-framework()}.${platform::get-name()}&quot; /&gt;
-  &lt;/target&gt;
-
-  &lt;!-- build tasks --&gt;
-  &lt;target name=&quot;build&quot; depends=&quot;build-analyst build-chatconsole&quot;
-     description=&quot;build analyst and chatconsole&quot;&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;build-slproxy&quot; depends=&quot;init&quot;
-    description=&quot;Builds the binaries for the current configuration&quot;&gt;
-    &lt;echo message=&quot;Build Directory is ${bin_dir}/&quot; /&gt;
-    &lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;false&quot; /&gt;
-    &lt;csc
-      target=&quot;library&quot;
-      debug=&quot;${build.debug}&quot;
-      output=&quot;${bin_dir}/SLProxy.dll&quot;&gt;
-      &lt;sources failonempty=&quot;true&quot;&gt;
-        &lt;include name=&quot;SLProxy.cs&quot; /&gt;
-        &lt;!-- &lt;include name=&quot;legacy/*.cs&quot; /&gt; --&gt;
-      &lt;/sources&gt;
-      &lt;references basedir=&quot;${bin_dir}/&quot;&gt;
-        &lt;include name=&quot;libsecondlife.dll&quot;/&gt;
-      &lt;/references&gt;
-    &lt;/csc&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;build-analyst&quot;
-    depends=&quot;init build-slproxy&quot;
-    description=&quot;build SLProxy Analyst&quot;&gt;
-    &lt;echo message=&quot;Build Directory is ${bin_dir}/&quot; /&gt;
-    &lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;false&quot; /&gt;
-    &lt;csc
-      target=&quot;exe&quot;
-      debug=&quot;${build.debug}&quot;
-      output=&quot;${bin_dir}/Analyst.exe&quot;&gt;
-      &lt;sources failonempty=&quot;true&quot;&gt;
-        &lt;include name=&quot;Analyst.cs&quot; /&gt;
-      &lt;/sources&gt;
-      &lt;references basedir=&quot;${bin_dir}/&quot;&gt;
-        &lt;include name=&quot;libsecondlife.dll&quot;/&gt;
-        &lt;include name=&quot;SLProxy.dll&quot;/&gt;
-      &lt;/references&gt;
-    &lt;/csc&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;build-chatconsole&quot;
-    depends=&quot;init build-slproxy&quot;
-    description=&quot;build SLProxy ChatConsole&quot;&gt;
-    &lt;echo message=&quot;Build Directory is ${bin_dir}/&quot; /&gt;
-    &lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;false&quot; /&gt;
-    &lt;csc
-      target=&quot;exe&quot;
-      debug=&quot;${build.debug}&quot;
-      output=&quot;${bin_dir}/ChatConsole.exe&quot;&gt;
-      &lt;sources failonempty=&quot;true&quot;&gt;
-        &lt;include name=&quot;ChatConsole.cs&quot; /&gt;
-      &lt;/sources&gt;
-      &lt;references basedir=&quot;${bin_dir}/&quot;&gt;
-        &lt;include name=&quot;libsecondlife.dll&quot;/&gt;
-        &lt;include name=&quot;SLProxy.dll&quot;/&gt;
-      &lt;/references&gt;
-    &lt;/csc&gt;
-  &lt;/target&gt;
-
-  &lt;target name=&quot;clean&quot; depends=&quot;init&quot;
-    description=&quot;Deletes the current configuration&quot;&gt;
-    &lt;delete failonerror=&quot;false&quot;&gt;
-      &lt;fileset basedir=&quot;${bin_dir}/&quot;&gt;
-        &lt;include name=&quot;SLProxy.dll&quot; /&gt;
-        &lt;include name=&quot;SLProxy.dll.mdb&quot; /&gt;
-        &lt;include name=&quot;ChatConsole.exe&quot; /&gt;
-        &lt;include name=&quot;ChatConsole.exe.mdb&quot; /&gt;
-        &lt;include name=&quot;Analyst.exe&quot; /&gt;
-        &lt;include name=&quot;Analyst.exe.mdb&quot; /&gt;
-      &lt;/fileset&gt;
-    &lt;/delete&gt;
-  &lt;/target&gt;
-
-  &lt;target
-    name=&quot;*&quot;
-    description=&quot;Handles unknown targets&quot;&gt;
-    &lt;echo message=&quot;skipping unknown target&quot; /&gt;
-  &lt;/target&gt;
-&lt;/project&gt;

Copied: branches/aditi/applications/SLProxy/SLProxy.build (from rev 775, trunk/applications/SLProxy/SLProxy.build)

Deleted: branches/aditi/applications/SLProxy/SLProxy.cs
===================================================================
--- trunk/applications/SLProxy/SLProxy.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/SLProxy.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,1154 +0,0 @@
-/*
- * SLProxy.cs: implementation of Second Life proxy library
- *
- * Copyright (c) 2006 Austin Jennings
- * Pregen modifications made by Andrew Ortman on Dec 10, 2006 -&gt; Dec 20, 2006
- * 
- * 
- * All rights reserved.
- *
- * - Redistribution and use in source and binary forms, with or without 
- *   modification, are permitted provided that the following conditions are met:
- *
- * - Redistributions of source code must retain the above copyright notice, this
- *   list of conditions and the following disclaimer.
- * - Neither the name of the Second Life Reverse Engineering Team nor the names 
- *   of its contributors may be used to endorse or promote products derived from
- *   this software without specific prior written permission.
- * 
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
- * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
- * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
- * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
- * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
- * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
- * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
- * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
- * POSSIBILITY OF SUCH DAMAGE.
- */
-
-// #define DEBUG_SEQUENCE
-
-using Nwc.XmlRpc;
-using System;
-using System.Collections;
-using System.Collections.Generic;
-using System.IO;
-using System.Net;
-using System.Net.Sockets;
-using System.Text;
-using System.Text.RegularExpressions;
-using System.Threading;
-using System.Xml;
-using libsecondlife;
-using libsecondlife.Packets;
-
-
-// SLProxy: proxy library for Second Life
-namespace SLProxy {
-	// ProxyConfig: configuration for proxy objects
-	public class ProxyConfig {
-		// userAgent: name of the proxy application
-		public string userAgent;
-		// author: email address of the proxy application's author
-		public string author;
-		// loginPort: port that the login proxy will listen on
-		public ushort loginPort = 8080;
-		// clientFacingAddress: address from which to communicate with the client
-		public IPAddress clientFacingAddress = IPAddress.Loopback;
-		// remoteFacingAddress: address from which to communicate with the server
-		public IPAddress remoteFacingAddress = IPAddress.Any;
-		// remoteLoginUri: URI for Second Life's login server
-		public Uri remoteLoginUri = new Uri(&quot;<A HREF="https://login.agni.lindenlab.com/cgi-bin/login.cgi">https://login.agni.lindenlab.com/cgi-bin/login.cgi</A>&quot;);
-		// verbose: whether or not to print informative messages
-		public bool verbose = true;
-
-		// ProxyConfig: construct a default proxy configuration with the specified userAgent, author, and protocol
-		public ProxyConfig(string userAgent, string author) {
-			this.userAgent = userAgent;
-			this.author = author;
-		}
-
-		// ProxyConfig: construct a default proxy configuration, parsing command line arguments (try --proxy-help)
-		public ProxyConfig(string userAgent, string author, string[] args) : this(userAgent, author) {
-			Hashtable argumentParsers = new Hashtable();
-			argumentParsers[&quot;proxy-help&quot;] = new ArgumentParser(ParseHelp);
-			argumentParsers[&quot;proxy-login-port&quot;] = new ArgumentParser(ParseLoginPort);
-			argumentParsers[&quot;proxy-client-facing-address&quot;] = new ArgumentParser(ParseClientFacingAddress);
-			argumentParsers[&quot;proxy-remote-facing-address&quot;] = new ArgumentParser(ParseRemoteFacingAddress);
-			argumentParsers[&quot;proxy-remote-login-uri&quot;] = new ArgumentParser(ParseRemoteLoginUri);
-			argumentParsers[&quot;proxy-verbose&quot;] = new ArgumentParser(ParseVerbose);
-			argumentParsers[&quot;proxy-quiet&quot;] = new ArgumentParser(ParseQuiet);
-
-			foreach (string arg in args)
-				foreach (string argument in argumentParsers.Keys) {
-					Match match = (new Regex(&quot;^--&quot; + argument + &quot;(?:=(.*))?$&quot;)).Match(arg);
-					if (match.Success) {
-						string value;
-						if (match.Groups[1].Captures.Count == 1)
-							value = match.Groups[1].Captures[0].ToString();
-						else
-							value = null;
-						try {
-							((ArgumentParser)argumentParsers[argument])(value);
-						} catch {
-							Console.WriteLine(&quot;invalid value for --&quot; + argument);
-							ParseHelp(null);
-						}
-					}
-				}
-		}
-
-		private delegate void ArgumentParser(string value);
-
-		private void ParseHelp(string value) {
-			Console.WriteLine(&quot;Proxy command-line arguments:&quot;                                                   );
-			Console.WriteLine(&quot;  --proxy-help                        display this help&quot;                         );
-			Console.WriteLine(&quot;  --proxy-login-port=&lt;port&gt;           listen for logins on &lt;port&gt;&quot;               );
-			Console.WriteLine(&quot;  --proxy-client-facing-address=&lt;IP&gt;  communicate with client via &lt;IP&gt;&quot;          );
-			Console.WriteLine(&quot;  --proxy-remote-facing-address=&lt;IP&gt;  communicate with server via &lt;IP&gt;&quot;          );
-			Console.WriteLine(&quot;  --proxy-remote-login-uri=&lt;URI&gt;      use SL login server at &lt;URI&gt;&quot;              );
-			Console.WriteLine(&quot;  --proxy-verbose                     display proxy notifications&quot;               );
-			Console.WriteLine(&quot;  --proxy-quiet                       suppress proxy notifications&quot;              );
-
-			Environment.Exit(1);
-		}
-
-		private void ParseLoginPort(string value) {
-			loginPort = Convert.ToUInt16(value);
-		}
-
-		private void ParseClientFacingAddress(string value) {
-			clientFacingAddress = IPAddress.Parse(value);
-		}
-
-		private void ParseRemoteFacingAddress(string value) {
-			remoteFacingAddress = IPAddress.Parse(value);
-		}
-
-		private void ParseRemoteLoginUri(string value) {
-			remoteLoginUri = new Uri(value);
-		}
-
-		private void ParseVerbose(string value) {
-			if (value != null)
-				throw new Exception();
-
-			verbose = true;
-		}
-
-		private void ParseQuiet(string value) {
-			if (value != null)
-				throw new Exception();
-
-			verbose = false;
-		}
-	}
-
-	// Proxy: Second Life proxy server
-	// A Proxy instance is only prepared to deal with one client at a time.
-	public class Proxy {
-		private ProxyConfig proxyConfig;
-
-		/*
-		 * Proxy Management
-		 */
-
-		// Proxy: construct a proxy server with the given configuration
-		public Proxy(ProxyConfig proxyConfig) {
-			this.proxyConfig = proxyConfig;
-
-			InitializeLoginProxy();
-			InitializeSimProxy();
-		}
-
-		object keepAliveLock = new Object();
-
-		// Start: begin accepting clients
-		public void Start() { lock(this) {
-			System.Threading.Monitor.Enter(keepAliveLock);
-			(new Thread(new ThreadStart(KeepAlive))).Start();
-
-			RunSimProxy();
-			Thread runLoginProxy = new Thread(new ThreadStart(RunLoginProxy));
-			runLoginProxy.IsBackground = true;
-			runLoginProxy.Start();
-
-			IPEndPoint endPoint = (IPEndPoint)loginServer.LocalEndPoint;
-			IPAddress displayAddress;
-			if (endPoint.Address == IPAddress.Any)
-				displayAddress = IPAddress.Loopback;
-			else
-				displayAddress = endPoint.Address;
-			Log(&quot;proxy ready at <A HREF="http://">http://</A>&quot; + displayAddress + &quot;:&quot; + endPoint.Port + &quot;/&quot;, false);
-		}}
-
-		// Stop: allow foreground threads to die
-		public void Stop() { lock(this) {
-			System.Threading.Monitor.Exit(keepAliveLock);
-		}}
-
-		// KeepAlive: blocks until the proxy is free to shut down
-		public void KeepAlive() {
-            lock (keepAliveLock) { };
-		}
-
-		// SetLoginRequestDelegate: specify a callback loginRequestDelegate that will be called when the client requests login
-		public void SetLoginRequestDelegate(XmlRpcRequestDelegate loginRequestDelegate) { lock(this) {
-			this.loginRequestDelegate = loginRequestDelegate;
-		}}
-
-		// SetLoginResponseDelegate: specify a callback loginResponseDelegate that will be called when the server responds to login
-		public void SetLoginResponseDelegate(XmlRpcResponseDelegate loginResponseDelegate) { lock(this) {
-			this.loginResponseDelegate = loginResponseDelegate;
-		}}
-
-		// AddDelegate: add callback packetDelegate for packets of type packetName going direction
-		public void AddDelegate(PacketType packetType, Direction direction, PacketDelegate packetDelegate) { lock(this) {
-			Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates = (direction == Direction.Incoming ? incomingDelegates : outgoingDelegates);
-			if (!delegates.ContainsKey(packetType)) {
-				delegates[packetType] = new List&lt;PacketDelegate&gt;();
-			}
-			List&lt;PacketDelegate&gt; delegateArray = delegates[packetType];
-			if(!delegateArray.Contains(packetDelegate)) {
-				delegateArray.Add(packetDelegate);
-			}
-		}}
-
-		// RemoveDelegate: remove callback for packets of type packetName going direction
-		public void RemoveDelegate(PacketType packetType, Direction direction, PacketDelegate packetDelegate) { lock(this) {
-			Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates = (direction == Direction.Incoming ? incomingDelegates : outgoingDelegates);
-			if (!delegates.ContainsKey(packetType)) {
-				return;
-			}
-			List&lt;PacketDelegate&gt; delegateArray = delegates[packetType];
-			if(delegateArray.Contains(packetDelegate)) {
-				delegateArray.Remove(packetDelegate);
-			}
-		}}
-
-		private Packet callDelegates(Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates, Packet packet, IPEndPoint remoteEndPoint) {
-			PacketType origType = packet.Type;
-			foreach (PacketDelegate del in delegates[origType]) {
-				packet = del(packet, remoteEndPoint);
-
-				// FIXME: how should we handle the packet type changing?
-				if(packet == null || packet.Type != origType) break;
-			}
-			return packet;
-		}
-
-		// InjectPacket: send packet to the client or server when direction is Incoming or Outgoing, respectively
-		public void InjectPacket(Packet packet, Direction direction) { lock(this) {
-			if (activeCircuit == null) {
-				// no active circuit; queue the packet for injection once we have one
-				ArrayList queue = direction == Direction.Incoming ? queuedIncomingInjections : queuedOutgoingInjections;
-				queue.Add(packet);
-			} else
-				// tell the active sim proxy to inject the packet
-				((SimProxy)simProxies[activeCircuit]).Inject(packet, direction);
-		}}
-
-		// Log: write message to the console if in verbose mode
-		private void Log(object message, bool important) {
-			if (proxyConfig.verbose || important)
-				Console.WriteLine(message);
-		}
-
-		/*
-		 * Login Proxy
-		 */
-
-		private Socket loginServer;
-
-		// InitializeLoginProxy: initialize the login proxy
-		private void InitializeLoginProxy() {
-			loginServer = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
-			loginServer.Bind(new IPEndPoint(proxyConfig.clientFacingAddress, proxyConfig.loginPort));
-			loginServer.Listen(1);
-		}
-
-		// RunLoginProxy: process login requests from clients
-		private void RunLoginProxy() {
-		    try {
-			for (;;) {
-				Socket client = loginServer.Accept();
-				IPEndPoint clientEndPoint = (IPEndPoint)client.RemoteEndPoint;
-
-				Log(&quot;handling login request from &quot; + clientEndPoint, false);
-
-				NetworkStream networkStream = new NetworkStream(client);
-				StreamReader networkReader = new StreamReader(networkStream);
-				StreamWriter networkWriter = new StreamWriter(networkStream);
-
-				try {
-					ProxyLogin(networkReader, networkWriter);
-				} catch (Exception e) {
-					Log(&quot;login failed: &quot; + e.Message, false);
-				}
-
-				networkWriter.Close();
-				networkReader.Close();
-				networkStream.Close();
-
-				client.Close();
-
-				// send any packets queued for injection
-				if (activeCircuit != null) lock(this) {
-					SimProxy activeProxy = (SimProxy)simProxies[activeCircuit];
-					foreach (Packet packet in queuedOutgoingInjections)
-						activeProxy.Inject(packet, Direction.Outgoing);
-					queuedOutgoingInjections = new ArrayList();
-				}
-			}
-		    } catch (Exception e) {
-			Console.WriteLine(e.Message);
-			Console.WriteLine(e.StackTrace);
-		    }
-		}
-
-		// ProxyLogin: proxy a login request
-		private void ProxyLogin(StreamReader reader, StreamWriter writer) { lock(this) {
-			string line;
-			int contentLength = 0;
-
-			// read HTTP header
-			do {
-				// read one line of the header
-				line = reader.ReadLine();
-
-				// check for premature EOF
-				if (line == null)
-					throw new Exception(&quot;EOF in client HTTP header&quot;);
-
-				// look for Content-Length
-				Match match = (new Regex(@&quot;Content-Length: (\d+)$&quot;)).Match(line);
-				if (match.Success)
-					contentLength = Convert.ToInt32(match.Groups[1].Captures[0].ToString());
-			} while (line != &quot;&quot;);
-
-			// read the HTTP body into a buffer
-			char[] content = new char[contentLength];
-			reader.Read(content, 0, contentLength);
-
-			// convert the body into an XML-RPC request
-			XmlRpcRequest request = (XmlRpcRequest)(new XmlRpcRequestDeserializer()).Deserialize(new String(content));
-
-			// call the loginRequestDelegate
-			if (loginRequestDelegate != null)
-				try {
-					loginRequestDelegate(request);
-				} catch (Exception e) {
-					Log(&quot;exception in login request deligate: &quot; + e.Message, true);
-					Log(e.StackTrace, true);
-				}
-
-			// add our userAgent and author to the request
-			Hashtable requestParams = new Hashtable();
-			if (proxyConfig.userAgent != null)
-				requestParams[&quot;user-agent&quot;] = proxyConfig.userAgent;
-			if (proxyConfig.author != null)
-				requestParams[&quot;author&quot;] = proxyConfig.author;
-			request.Params.Add(requestParams);
-
-			// forward the XML-RPC request to the server
-			XmlRpcResponse response = (XmlRpcResponse)request.Send(proxyConfig.remoteLoginUri.ToString(),60000); //added 60 second timeout -- Andrew
-			Hashtable responseData = (Hashtable)response.Value;
-
-			// proxy any simulator address given in the XML-RPC response
-			if (responseData.Contains(&quot;sim_ip&quot;) &amp;&amp; responseData.Contains(&quot;sim_port&quot;)) {
-				IPEndPoint realSim = new IPEndPoint(IPAddress.Parse((string)responseData[&quot;sim_ip&quot;]), Convert.ToUInt16(responseData[&quot;sim_port&quot;]));
-				IPEndPoint fakeSim = ProxySim(realSim);
-				responseData[&quot;sim_ip&quot;] = fakeSim.Address.ToString();
-				responseData[&quot;sim_port&quot;] = fakeSim.Port;
-				activeCircuit = realSim;
-			}
-
-			// start a new proxy session
-			Reset();
-
-			// call the loginResponseDelegate
-			if (loginResponseDelegate != null) {
-				try {
-					loginResponseDelegate(response);
-				} catch (Exception e) {
-					Log(&quot;exception in login response delegate: &quot; + e.Message, true);
-					Log(e.StackTrace, true);
-				}
-			}
-
-			// forward the XML-RPC response to the client
-            writer.WriteLine(&quot;HTTP/1.0 200 OK&quot;);
-            writer.WriteLine(&quot;Content-type: text/xml&quot;);
-            writer.WriteLine();
-
-			XmlTextWriter responseWriter = new XmlTextWriter(writer);
-			XmlRpcResponseSerializer.Singleton.Serialize(responseWriter, response);
-			responseWriter.Close();
-		}}
-
-		/*
-		 * Sim Proxy
-		 */
-
-		private Socket simFacingSocket;
-		private IPEndPoint activeCircuit = null;
-		private Hashtable proxyEndPoints = new Hashtable();
-		private Hashtable simProxies = new Hashtable();
-		private Hashtable proxyHandlers = new Hashtable();
-		private XmlRpcRequestDelegate loginRequestDelegate = null;
-		private XmlRpcResponseDelegate loginResponseDelegate = null;
-		private Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; incomingDelegates = new Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt;();
-		private Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; outgoingDelegates = new Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt;();
-		private ArrayList queuedIncomingInjections = new ArrayList();
-		private ArrayList queuedOutgoingInjections = new ArrayList();
-
-		// InitializeSimProxy: initialize the sim proxy
-		private void InitializeSimProxy() {
-			InitializeAddressCheckers();
-
-			simFacingSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
-			simFacingSocket.Bind(new IPEndPoint(proxyConfig.remoteFacingAddress, 0));
-			Reset();
-		}
-
-		// Reset: start a new session
-		private void Reset() {
-			foreach (SimProxy simProxy in simProxies.Values)
-				simProxy.Reset();
-		}
-
-		private byte[] receiveBuffer = new byte[8192];
-		private byte[] zeroBuffer = new byte[8192];
-		private EndPoint remoteEndPoint = (EndPoint)new IPEndPoint(IPAddress.Any, 0);
-
-		// RunSimProxy: start listening for packets from remote sims
-		private void RunSimProxy() {
-			simFacingSocket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref remoteEndPoint, new AsyncCallback(ReceiveFromSim), null);
-		}
-
-		// ReceiveFromSim: packet received from a remote sim
-		private void ReceiveFromSim(IAsyncResult ar) { lock(this) try {
-			// pause listening and fetch the packet
-			bool needsZero = false;
-			bool needsCopy = true;
-			int length;
-			length = simFacingSocket.EndReceiveFrom(ar, ref remoteEndPoint);
-
-			if (proxyHandlers.Contains(remoteEndPoint)) {
-				// find the proxy responsible for forwarding this packet
-				SimProxy simProxy = (SimProxy)proxyHandlers[remoteEndPoint];
-
-				// interpret the packet according to the SL protocol
-				Packet packet;
-                int end = length - 1;
-
-                packet = Packet.BuildPacket(receiveBuffer, ref end, zeroBuffer);
-#if DEBUG_SEQUENCE
-				Console.WriteLine(&quot;&lt;- &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
-#endif
-
-				// check for ACKs we're waiting for
-				packet = simProxy.CheckAcks(packet, Direction.Incoming, ref length, ref needsCopy);
-
-				// modify sequence numbers to account for injections
-				uint oldSequence = packet.Header.Sequence;
-				packet = simProxy.ModifySequence(packet, Direction.Incoming, ref length, ref needsCopy);
-
-				// keep track of sequence numbers
-				if (packet.Header.Sequence &gt; simProxy.incomingSequence)
-					simProxy.incomingSequence = packet.Header.Sequence;
-
-				// check the packet for addresses that need proxying
-				if (incomingCheckers.Contains(packet.Type)) {
-					/* if (needsZero) {
-						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
-						packet.Header.Data = zeroBuffer;
-						needsZero = false;
-					} */
-
-					Packet newPacket = ((AddressChecker)incomingCheckers[packet.Type])(packet);
-					SwapPacket(packet, newPacket);
-					packet = newPacket;
-					needsCopy = false;
-				}
-
-				// pass the packet to any callback delegates
-				if (incomingDelegates.ContainsKey(packet.Type)) {
-					/* if (needsZero) {
-						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
-						packet.Header.Data = zeroBuffer;
-						needsCopy = true;
-					} */
-
-					if (needsCopy) {
-						byte[] newData = new byte[packet.Header.Data.Length];
-						Array.Copy(packet.Header.Data, 0, newData, 0, packet.Header.Data.Length);
-						packet.Header.Data = newData; // FIXME
-					}
-
-					try {
-						Packet newPacket = callDelegates(incomingDelegates, packet, (IPEndPoint)remoteEndPoint);
-						if (newPacket == null) {
-							if ((packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0)
-								simProxy.Inject(SpoofAck(oldSequence), Direction.Outgoing);
-
-							if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0)
-								packet = SeparateAck(packet);
-							else
-								packet = null;
-						} else {
-							bool oldReliable = (packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
-							bool newReliable = (newPacket.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
-							if (oldReliable &amp;&amp; !newReliable)
-								simProxy.Inject(SpoofAck(oldSequence), Direction.Outgoing);
-							else if (!oldReliable &amp;&amp; newReliable)
-								simProxy.WaitForAck(packet, Direction.Incoming);
-
-							SwapPacket(packet, newPacket);
-							packet = newPacket;
-						}
-					} catch (Exception e) {
-						Log(&quot;exception in incoming delegate: &quot; + e.Message, true);
-						Log(e.StackTrace, true);
-					}
-
-					if (packet != null)
-						simProxy.SendPacket(packet, false);
-				} else
-					simProxy.SendPacket(packet, needsZero);
-			} else
-				// ignore packets from unknown peers
-				Log(&quot;dropping packet from &quot; + remoteEndPoint, false);
-		} catch (Exception e) {
-			Console.WriteLine(e.Message);
-			Console.WriteLine(e.StackTrace);
-		} finally {
-			// resume listening
-			simFacingSocket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref remoteEndPoint, new AsyncCallback(ReceiveFromSim), null);
-		}}
-
-		// SendPacket: send a packet to a sim from our fake client endpoint
-		public void SendPacket(Packet packet, IPEndPoint endPoint, bool skipZero) {
-			byte[] buffer = packet.ToBytes();
-			if (skipZero || (packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
-				simFacingSocket.SendTo(buffer, buffer.Length, SocketFlags.None, endPoint);
-			else {
-				int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
-				simFacingSocket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, endPoint);
-			}
-			
-		}
-
-		// SpoofAck: create an ACK for the given packet
-		public Packet SpoofAck(uint sequence) {
-            PacketAckPacket spoof = new PacketAckPacket();
-            spoof.Packets = new PacketAckPacket.PacketsBlock[1];
-	    spoof.Packets[0] = new PacketAckPacket.PacketsBlock();
-            spoof.Packets[0].ID = sequence;
-            return (Packet)spoof;
-            //Legacy:
-            ////Hashtable blocks = new Hashtable();
-            ////Hashtable fields = new Hashtable();
-            ////fields[&quot;ID&quot;] = (uint)sequence;
-            ////blocks[fields] = &quot;Packets&quot;;
-            ////return .BuildPacket(&quot;PacketAck&quot;, proxyConfig.protocol, blocks, Helpers.MSG_ZEROCODED);
-		}
-
-		// SeparateAck: create a standalone PacketAck for packet's appended ACKs
-		public Packet SeparateAck(Packet packet) {
-            PacketAckPacket seperate = new PacketAckPacket();
-            int ackCount = ((packet.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : (int)packet.Header.Data[packet.Header.Data.Length - 1]);
-            seperate.Packets = new PacketAckPacket.PacketsBlock[ackCount];	
-		
-            for (int i = 0; i &lt; ackCount; ++i)
-            {
-            	int offset = packet.Header.Data.Length - (ackCount - i) * 4 - 1;
-                seperate.Packets[i].ID = (uint) ((packet.Header.Data[offset++] &lt;&lt;  0)
-				                                + (packet.Header.Data[offset++] &lt;&lt;  8)
-				                                + (packet.Header.Data[offset++] &lt;&lt; 16)
-				                                + (packet.Header.Data[offset++] &lt;&lt; 24))
-				                                ;
-            }
-
-            Packet ack = (Packet)seperate;
-            ack.Header.Sequence = packet.Header.Sequence;
-            return ack;
-		}
-
-		// SwapPacket: copy the sequence number and appended ACKs from one packet to another
-		public static void SwapPacket(Packet oldPacket, Packet newPacket) {
-			newPacket.Header.Sequence = oldPacket.Header.Sequence;
-
-			int oldAcks = (oldPacket.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : oldPacket.Header.AckList.Length;
-			int newAcks = (newPacket.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : newPacket.Header.AckList.Length;
-
-			if (oldAcks != 0 || newAcks != 0) {
-				
-               			uint[] newAckList = new uint[oldAcks];
-		                Array.Copy(oldPacket.Header.AckList, 0, newAckList, 0, oldAcks);
-
-				newPacket.Header.AckList = newAckList;
-				newPacket.Header.AppendedAcks = oldPacket.Header.AppendedAcks;
-                
-			}
-		}
-
-		// ProxySim: return the proxy for the specified sim, creating it if it doesn't exist
-		private IPEndPoint ProxySim(IPEndPoint simEndPoint) {
-			if (proxyEndPoints.Contains(simEndPoint))
-				// return the existing proxy
-				return (IPEndPoint)proxyEndPoints[simEndPoint];
-			else {
-				// return a new proxy
-				SimProxy simProxy = new SimProxy(proxyConfig, simEndPoint, this);
-				IPEndPoint fakeSim = simProxy.LocalEndPoint();
-				Log(&quot;creating proxy for &quot; + simEndPoint + &quot; at &quot; + fakeSim, false);
-				simProxy.Run();
-				proxyEndPoints.Add(simEndPoint, fakeSim);
-				simProxies.Add(simEndPoint, simProxy);
-				return fakeSim;
-			}
-		}
-
-		// AddHandler: remember which sim proxy corresponds to a given sim
-		private void AddHandler(EndPoint endPoint, SimProxy proxy) {
-			proxyHandlers.Add(endPoint, proxy);
-		}
-
-		// SimProxy: proxy for a single simulator
-		private class SimProxy {
-			private ProxyConfig proxyConfig;
-			private IPEndPoint remoteEndPoint;
-			private Proxy proxy;
-			private Socket socket;
-			public uint incomingSequence;
-			public uint outgoingSequence;
-			private ArrayList incomingInjections;
-			private ArrayList outgoingInjections;
-			private uint incomingOffset = 0;
-			private uint outgoingOffset = 0;
-			private Hashtable incomingAcks;
-			private Hashtable outgoingAcks;
-			private ArrayList incomingSeenAcks;
-			private ArrayList outgoingSeenAcks;
-
-			// SimProxy: construct a proxy for a single simulator
-			public SimProxy(ProxyConfig proxyConfig, IPEndPoint simEndPoint, Proxy proxy) {
-				this.proxyConfig = proxyConfig;
-				remoteEndPoint = new IPEndPoint(simEndPoint.Address, simEndPoint.Port);
-				this.proxy = proxy;
-				socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
-				socket.Bind(new IPEndPoint(proxyConfig.clientFacingAddress, 0));
-				proxy.AddHandler(remoteEndPoint, this);
-				Reset();
-			}
-
-			// Reset: start a new session
-			public void Reset() {
-				incomingSequence = 0;
-				outgoingSequence = 0;
-				incomingInjections = new ArrayList();
-				outgoingInjections = new ArrayList();
-				incomingAcks = new Hashtable();
-				outgoingAcks = new Hashtable();
-				incomingSeenAcks = new ArrayList();
-				outgoingSeenAcks = new ArrayList();
-			}
-
-			// BackgroundTasks: resend unacknowledged packets and keep data structures clean
-			private void BackgroundTasks() { try {
-				int tick = 1;
-				int incomingInjectionsPoint = 0;
-				int outgoingInjectionsPoint = 0;
-				int incomingSeenAcksPoint = 0;
-				int outgoingSeenAcksPoint = 0;
-
-				for (;; Thread.Sleep(1000)) lock(proxy) {
-					if ((tick = (tick + 1) % 60) == 0) {
-						for (int i = 0; i &lt; incomingInjectionsPoint; ++i) {
-							incomingInjections.RemoveAt(0);
-							++incomingOffset;
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;incomingOffset = &quot; + incomingOffset);
-#endif
-						}
-						incomingInjectionsPoint = incomingInjections.Count;
-
-						for (int i = 0; i &lt; outgoingInjectionsPoint; ++i) {
-							outgoingInjections.RemoveAt(0);
-							++outgoingOffset;
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;outgoingOffset = &quot; + outgoingOffset);
-#endif
-						}
-						outgoingInjectionsPoint = outgoingInjections.Count;
-
-						for (int i = 0; i &lt; incomingSeenAcksPoint; ++i) {
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;incomingAcks.Remove(&quot; + incomingSeenAcks[0] + &quot;)&quot;);
-#endif
-							incomingAcks.Remove(incomingSeenAcks[0]);
-							incomingSeenAcks.RemoveAt(0);
-						}
-						incomingSeenAcksPoint = incomingSeenAcks.Count;
-
-						for (int i = 0; i &lt; outgoingSeenAcksPoint; ++i) {
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;outgoingAcks.Remove(&quot; + outgoingSeenAcks[0] + &quot;)&quot;);
-#endif
-							outgoingAcks.Remove(outgoingSeenAcks[0]);
-							outgoingSeenAcks.RemoveAt(0);
-						}
-						outgoingSeenAcksPoint = outgoingSeenAcks.Count;
-					}
-
-					foreach (uint id in incomingAcks.Keys)
-						if (!incomingSeenAcks.Contains(id)) {
-							Packet packet = (Packet)incomingAcks[id];
-							packet.Header.Data[0] |= Helpers.MSG_RESENT;
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;RESEND &lt;- &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
-#endif
-							SendPacket(packet, false);
-						}
-
-					foreach (uint id in outgoingAcks.Keys)
-						if (!outgoingSeenAcks.Contains(id)) {
-							Packet packet = (Packet)outgoingAcks[id];
-							packet.Header.Data[0] |= Helpers.MSG_RESENT;
-#if DEBUG_SEQUENCE
-							Console.WriteLine(&quot;RESEND -&gt; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
-#endif
-							proxy.SendPacket(packet, remoteEndPoint, false);
-						}
-				}
-			} catch (Exception e) {
-				Console.WriteLine(e.Message);
-				Console.WriteLine(e.StackTrace);
-			}}
-
-			// LocalEndPoint: return the endpoint that the client should communicate with
-			public IPEndPoint LocalEndPoint() {
-				return (IPEndPoint)socket.LocalEndPoint;
-			}
-
-			private byte[] receiveBuffer = new byte[8192];
-			private byte[] zeroBuffer = new byte[8192];
-			private EndPoint clientEndPoint = new IPEndPoint(IPAddress.Any, 0);
-			bool firstReceive = true;
-
-			// Run: forward packets from the client to the sim
-			public void Run() {
-				Thread backgroundTasks = new Thread(new ThreadStart(BackgroundTasks));
-				backgroundTasks.IsBackground = true;
-				backgroundTasks.Start();
-				socket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref clientEndPoint, new AsyncCallback(ReceiveFromClient), null);
-			}
-
-			// ReceiveFromClient: packet received from the client
-			private void ReceiveFromClient(IAsyncResult ar) { lock(proxy) try {
-				// pause listening and fetch the packet
-				bool needsZero = false;
-				bool needsCopy = true;
-				int length;
-				length = socket.EndReceiveFrom(ar, ref clientEndPoint);
-
-				// interpret the packet according to the SL protocol
-		                int end = length - 1;
-				Packet packet = libsecondlife.Packets.Packet.BuildPacket(receiveBuffer,ref end, zeroBuffer);
-				
-#if DEBUG_SEQUENCE
-				Console.WriteLine(&quot;-&gt; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
-#endif
-                // check for ACKs we're waiting for
-				packet = CheckAcks(packet, Direction.Outgoing, ref length, ref needsCopy);
-
-				// modify sequence numbers to account for injections
-				uint oldSequence = packet.Header.Sequence;
-				packet = ModifySequence(packet, Direction.Outgoing, ref length, ref needsCopy);
-
-				// keep track of sequence numbers
-				if (packet.Header.Sequence &gt; outgoingSequence)
-                    outgoingSequence = packet.Header.Sequence ;
-
-				// check the packet for addresses that need proxying
-				if (proxy.outgoingCheckers.Contains(packet.Type)) {
-					/* if (packet.Header.Zerocoded) {
-						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
-						packet.Header.Data = zeroBuffer;
-						needsZero = false;
-					} */
-
-					Packet newPacket = ((AddressChecker)proxy.outgoingCheckers[packet.Type])(packet);
-					SwapPacket(packet, newPacket);
-					packet = newPacket;
-					length = packet.Header.Data.Length;
-					needsCopy = false;
-				}
-
-				// pass the packet to any callback delegates
-				if (proxy.outgoingDelegates.ContainsKey(packet.Type)) {
-					/* if (packet.Header.Zerocoded) {
-						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
-						packet.Header.Data = zeroBuffer;
-						needsCopy = true;
-					} */
-
-					if (needsCopy) {
-						byte[] newData = new byte[packet.Header.Data.Length];
-						Array.Copy(packet.Header.Data, 0, newData, 0, packet.Header.Data.Length);
-						packet.Header.Data = newData; // FIXME!!!
-					}
-
-					try {
-						Packet newPacket = proxy.callDelegates(proxy.outgoingDelegates, packet, remoteEndPoint);
-						if (newPacket == null) {
-							if ((packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0)
-								Inject(proxy.SpoofAck(oldSequence), Direction.Incoming);
-
-							if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0)
-								packet = proxy.SeparateAck(packet);
-							else
-								packet = null;
-						} else {
-							bool oldReliable = (packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
-							bool newReliable = (newPacket.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
-							if (oldReliable &amp;&amp; !newReliable)
-								Inject(proxy.SpoofAck(oldSequence), Direction.Incoming);
-							else if (!oldReliable &amp;&amp; newReliable)	
-								WaitForAck(packet, Direction.Outgoing);
-
-							SwapPacket(packet, newPacket);
-							packet = newPacket;
-						}
-					} catch (Exception e) {
-						proxy.Log(&quot;exception in outgoing delegate: &quot; + e.Message, true);
-						proxy.Log(e.StackTrace, true);
-					}
-
-					if (packet != null)
-						proxy.SendPacket(packet, remoteEndPoint, false);
-				} else
-					proxy.SendPacket(packet, remoteEndPoint, needsZero);
-
-				// send any packets queued for injection
-				if (firstReceive) {
-					firstReceive = false;
-					foreach (Packet queuedPacket in proxy.queuedIncomingInjections)
-						Inject(queuedPacket, Direction.Incoming);
-					proxy.queuedIncomingInjections = new ArrayList();
-				}
-			} catch (Exception e) {
-				Console.WriteLine(e.Message);
-				Console.WriteLine(e.StackTrace);
-			} finally {
-				// resume listening
-				socket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref clientEndPoint, new AsyncCallback(ReceiveFromClient), null);
-			}}
-
-			// SendPacket: send a packet from the sim to the client via our fake sim endpoint
-			public void SendPacket(Packet packet, bool skipZero) {
-				byte[] buffer = packet.ToBytes();
-				if (skipZero || (packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
-					socket.SendTo(buffer, buffer.Length, SocketFlags.None, clientEndPoint);
-				else {
-					int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
-					socket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, clientEndPoint);
-				}
-			}
-
-			// Inject: inject a packet
-			public void Inject(Packet packet, Direction direction) {
-				if (direction == Direction.Incoming) {
-					if (firstReceive) {
-						proxy.queuedIncomingInjections.Add(packet);
-						return;
-					}
-
-					incomingInjections.Add(++incomingSequence);
-					packet.Header.Sequence = incomingSequence;
-				} else {
-					outgoingInjections.Add(++outgoingSequence);
-					packet.Header.Sequence = outgoingSequence;
-				}
-
-#if DEBUG_SEQUENCE
-				Console.WriteLine(&quot;INJECT &quot; + (direction == Direction.Incoming ? &quot;&lt;-&quot; : &quot;-&gt;&quot;) + &quot; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
-
-#endif
-				if ((packet.Header.Data[0] &amp; Helpers.MSG_RELIABLE) != 0)
-					WaitForAck(packet, direction);
-
-				if (direction == Direction.Incoming) {
-					byte[] buffer = packet.ToBytes();
-					if ((packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
-						socket.SendTo(buffer, buffer.Length, SocketFlags.None, clientEndPoint);
-					else {
-						int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
-						socket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, clientEndPoint);
-					}
-				}
-				else
-					proxy.SendPacket(packet, remoteEndPoint, false);
-			}
-
-			// WaitForAck: take care of resending a packet until it's ACKed
-			public void WaitForAck(Packet packet, Direction direction) {
-				Hashtable table = direction == Direction.Incoming ? incomingAcks : outgoingAcks;
-				table.Add(packet.Header.Sequence, packet);
-			}
-
-			// CheckAcks: check for and remove ACKs of packets we've injected
-			public Packet CheckAcks(Packet packet, Direction direction, ref int length, ref bool needsCopy) {
-				Hashtable acks = direction == Direction.Incoming ? outgoingAcks : incomingAcks;
-				ArrayList seenAcks = direction == Direction.Incoming ? outgoingSeenAcks : incomingSeenAcks;
-
-				if (acks.Count == 0)
-					return packet;
-
-				// check for embedded ACKs
-				if (packet.Type == PacketType.PacketAck) {
-					bool changed = false;
-                    List&lt;PacketAckPacket.PacketsBlock&gt; newPacketBlocks = new List&lt;PacketAckPacket.PacketsBlock&gt;();
-					foreach (PacketAckPacket.PacketsBlock pb in ((PacketAckPacket)packet).Packets) {
-						uint id = pb.ID;
-#if DEBUG_SEQUENCE
-						string hrup = &quot;Check !&quot; + id;
-#endif
-                        if (acks.Contains(id))
-                        {
-#if DEBUG_SEQUENCE
-							hrup += &quot; get's&quot;;
-#endif
-                            seenAcks.Add(id);
-                            changed = true;
-                        }
-                        else
-                            newPacketBlocks.Add(pb);
-#if DEBUG_SEQUENCE
-						Console.WriteLine(hrup);
-#endif
-					}
-					if (changed)
-                    {
-                        PacketAckPacket newPacket = new PacketAckPacket();
-                        newPacket.Packets = new PacketAckPacket.PacketsBlock[newPacketBlocks.Count];
-                        
-                        int a = 0;
-                        foreach (PacketAckPacket.PacketsBlock pb in newPacketBlocks)
-                        {
-                            newPacket.Packets[a++] = pb;
-                        } 
-
-                        SwapPacket(packet, (Packet)newPacket);
-						packet = newPacket;
-						length = packet.Header.Data.Length;
-						needsCopy = false;
-					}
-				}
-
-				// check for appended ACKs
-				if ((packet.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) != 0) {
-					int ackCount = packet.Header.AckList.Length;
-					for (int i = 0; i &lt; ackCount;) {
-						uint ackID = packet.Header.AckList[i]; // FIXME FIXME FIXME
-#if DEBUG_SEQUENCE
-						string hrup = &quot;Check @&quot; + ackID;
-#endif
-						if (acks.Contains(ackID)) {
-#if DEBUG_SEQUENCE
-							hrup += &quot; get's&quot;;
-#endif
-							uint[] newAcks = new uint[ackCount-1];
-							Array.Copy(packet.Header.AckList, 0, newAcks, 0, i);
-							Array.Copy(packet.Header.AckList, i+1, newAcks, i, ackCount - i - 1);
-							packet.Header.AckList = newAcks;
-							--ackCount;
-							seenAcks.Add(ackID);
-							needsCopy = false;
-						} else
-							++i;
-#if DEBUG_SEQUENCE
-						Console.WriteLine(hrup);
-#endif
-					}
-					if (ackCount == 0) {
-						packet.Header.Flags ^= Helpers.MSG_APPENDED_ACKS;
-						packet.Header.AckList = new uint[0];
-					}
-				}
-
-				return packet;
-			}
-
-			// ModifySequence: modify a packet's sequence number and ACK IDs to account for injections
-			public Packet ModifySequence(Packet packet, Direction direction, ref int length, ref bool needsCopy) {
-				ArrayList ourInjections = direction == Direction.Outgoing ? outgoingInjections : incomingInjections;
-				ArrayList theirInjections = direction == Direction.Incoming ? outgoingInjections : incomingInjections;
-				uint ourOffset = direction == Direction.Outgoing ? outgoingOffset : incomingOffset;
-				uint theirOffset = direction == Direction.Incoming ? outgoingOffset : incomingOffset;
-
-				uint newSequence = (uint)(packet.Header.Sequence + ourOffset);
-				foreach (uint injection in ourInjections)
-					if (newSequence &gt;= injection)
-						++newSequence;
-#if DEBUG_SEQUENCE
-				Console.WriteLine(&quot;Mod #&quot; + packet.Header.Sequence + &quot; = &quot; + newSequence);
-#endif
-				packet.Header.Sequence = newSequence;
-
-				if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0) {
-					int ackCount = packet.Header.AckList.Length;
-					for (int i = 0; i &lt; ackCount; ++i) {
-						int offset = length - (ackCount - i) * 4 - 1;
-						uint ackID = packet.Header.AckList[i] - theirOffset;
-#if DEBUG_SEQUENCE
-						uint hrup = packet.Header.AckList[i];
-#endif
-						for (int j = theirInjections.Count - 1; j &gt;= 0; --j)
-							if (ackID &gt;= (uint)theirInjections[j])
-								--ackID;
-#if DEBUG_SEQUENCE
-						Console.WriteLine(&quot;Mod @&quot; + hrup + &quot; = &quot; + ackID);
-#endif
-						packet.Header.AckList[i] = ackID;
-					}
-				}
-
-				if (packet.Type == PacketType.PacketAck) {
-                    PacketAckPacket pap = (PacketAckPacket)packet;
-                    foreach(PacketAckPacket.PacketsBlock pb in pap.Packets) {
-                    	uint ackID = (uint)pb.ID - theirOffset;
-#if DEBUG_SEQUENCE
-						uint hrup = (uint)pb.ID;
-#endif
-						for (int i = theirInjections.Count - 1; i &gt;= 0; --i)
-							if (ackID &gt;= (uint)theirInjections[i])
-								--ackID;
-#if DEBUG_SEQUENCE
-						Console.WriteLine(&quot;Mod !&quot; + hrup + &quot; = &quot; + ackID);
-#endif
-						pb.ID = ackID;
-					
-					}
-                    //SwapPacket(packet, (Packet)pap);
-					// packet = (Packet)pap;
-					length = packet.Header.Data.Length;
-					needsCopy = false;
-				}
-
-				return packet;
-			}
-		}
-
-		// Checkers swap proxy addresses in for real addresses.  A few constraints:
-		//   - Checkers must not alter the incoming packet.
-		//   - Checkers must return a freshly built packet, even if nothing's changed.
-		//   - The incoming packet's buffer may be longer than the length of the data it contains.
-		//   - The incoming packet's buffer must not be used after the checker returns.
-		// This is all because checkers may be operating on data that's still in a scratch buffer.
-		delegate Packet AddressChecker(Packet packet);
-
-		Hashtable incomingCheckers = new Hashtable();
-		Hashtable outgoingCheckers = new Hashtable();
-
-		// InitializeAddressCheckers: initialize delegates that check packets for addresses that need proxying
-		private void InitializeAddressCheckers() {
-			// TODO: what do we do with mysteries and empty IPs?
-			AddMystery(PacketType.OpenCircuit);
-			//AddMystery(PacketType.AgentPresenceResponse);
-
-			incomingCheckers.Add(PacketType.TeleportFinish, new AddressChecker(CheckTeleportFinish));
-			incomingCheckers.Add(PacketType.AgentToNewRegion, new AddressChecker(CheckAgentToNewRegion));
-			incomingCheckers.Add(PacketType.CrossedRegion, new AddressChecker(CheckCrossedRegion));
-			incomingCheckers.Add(PacketType.EnableSimulator, new AddressChecker(CheckEnableSimulator));
-			//incomingCheckers.Add(&quot;UserLoginLocationReply&quot;, new AddressChecker(CheckUserLoginLocationReply));
-		}
-
-		// AddMystery: add a checker delegate that logs packets we're watching for development purposes
-		private void AddMystery(PacketType type) {
-			incomingCheckers.Add(type, new AddressChecker(LogIncomingMysteryPacket));
-			outgoingCheckers.Add(type, new AddressChecker(LogOutgoingMysteryPacket));
-		}
-
-		// GenericCheck: replace the sim address in a packet with our proxy address
-		private void GenericCheck(ref uint simIP, ref ushort simPort, bool active) {
-            IPAddress sim_ip = new IPAddress((long)simIP);
-
-            IPEndPoint realSim = new IPEndPoint(sim_ip, Convert.ToInt32(simPort));
-			IPEndPoint fakeSim = ProxySim(realSim);
-
-            simPort = (ushort)fakeSim.Port;
-            int i = 0;
-            byte[] bytes = fakeSim.Address.GetAddressBytes();
-            simIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-            
-            if (active)
-                activeCircuit = realSim;
-		}
-
-		// CheckTeleportFinish: check TeleportFinish packets
-		private Packet CheckTeleportFinish(Packet packet) {
-            TeleportFinishPacket tfp = (TeleportFinishPacket)packet;
-            GenericCheck(ref tfp.Info.SimIP, ref tfp.Info.SimPort, true);
-            return (Packet)tfp;
-		}
-
-		// CheckAgentToNewRegion: check AgentToNewRegion packets
-		private Packet CheckAgentToNewRegion(Packet packet) {
-            AgentToNewRegionPacket atnwp = (AgentToNewRegionPacket)packet;
-            GenericCheck(ref atnwp.RegionData.IP, ref atnwp.RegionData.Port, true);
-            return (Packet)atnwp;
-		}
-
-		// CheckEnableSimulator: check EnableSimulator packets
-		private Packet CheckEnableSimulator(Packet packet) {
-            EnableSimulatorPacket esp = (EnableSimulatorPacket)packet;
-            GenericCheck(ref esp.SimulatorInfo.IP, ref esp.SimulatorInfo.Port, false);
-            return (Packet)esp;
-		}
-
-		// CheckCrossedRegion: check CrossedRegion packets
-		private Packet CheckCrossedRegion(Packet packet) {
-            CrossedRegionPacket crp = (CrossedRegionPacket)packet;
-            GenericCheck(ref crp.RegionData.SimIP, ref crp.RegionData.SimPort, true);
-            return (Packet)crp;
-		}
-
-        // LogPacket: log a packet dump
-		private Packet LogPacket(Packet packet, string type) {
-			Log(type + &quot; packet:&quot;, true);
-			Log(packet, true);
-            return packet;
-		}
-
-		// LogIncomingMysteryPacket: log an incoming packet we're watching for development purposes
-		private Packet LogIncomingMysteryPacket(Packet packet) {
-			return LogPacket(packet, &quot;incoming mystery&quot;);
-		}
-
-		// LogOutgoingMysteryPacket: log an outgoing packet we're watching for development purposes
-		private Packet LogOutgoingMysteryPacket(Packet packet) {
-			return LogPacket(packet, &quot;outgoing mystery&quot;);
-		}
-	}
-
-	// XmlRpcRequestDelegate: specifies a delegate to be called for XML-RPC requests
-	public delegate void XmlRpcRequestDelegate(XmlRpcRequest request);
-
-	// XmlRpcResponseDelegate: specifies a delegate to be called for XML-RPC responses
-	public delegate void XmlRpcResponseDelegate(XmlRpcResponse response);
-
-	// PacketDelegate: specifies a delegate to be called when a packet passes through the proxy
-	public delegate Packet PacketDelegate(Packet packet, IPEndPoint endPoint);
-
-	// Direction: specifies whether a packet is going to the client (Incoming) or to a sim (Outgoing)
-	public enum Direction {
-		Incoming,
-		Outgoing
-	}
-}

Copied: branches/aditi/applications/SLProxy/SLProxy.cs (from rev 775, trunk/applications/SLProxy/SLProxy.cs)
===================================================================
--- trunk/applications/SLProxy/SLProxy.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/SLProxy.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -0,0 +1,1468 @@
+/*
+ * SLProxy.cs: implementation of Second Life proxy library
+ *
+ * Copyright (c) 2006 Austin Jennings
+ * Pregen modifications made by Andrew Ortman on Dec 10, 2006 -&gt; Dec 20, 2006
+ * 
+ * 
+ * All rights reserved.
+ *
+ * - Redistribution and use in source and binary forms, with or without 
+ *   modification, are permitted provided that the following conditions are met:
+ *
+ * - Redistributions of source code must retain the above copyright notice, this
+ *   list of conditions and the following disclaimer.
+ * - Neither the name of the Second Life Reverse Engineering Team nor the names 
+ *   of its contributors may be used to endorse or promote products derived from
+ *   this software without specific prior written permission.
+ * 
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
+ * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
+ * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
+ * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
+ * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
+ * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
+ * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
+ * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
+ * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
+ * POSSIBILITY OF SUCH DAMAGE.
+ */
+
+// #define DEBUG_SEQUENCE
+
+using Nwc.XmlRpc;
+using System;
+using System.Collections;
+using System.Collections.Generic;
+using System.IO;
+using System.Net;
+using System.Net.Sockets;
+using System.Text;
+using System.Text.RegularExpressions;
+using System.Threading;
+using System.Xml;
+using libsecondlife;
+using libsecondlife.Packets;
+
+// SLProxy: proxy library for Second Life
+namespace SLProxy {
+	// ProxyConfig: configuration for proxy objects
+	public class ProxyConfig {
+		// userAgent: name of the proxy application
+		public string userAgent;
+		// author: email address of the proxy application's author
+		public string author;
+		// loginPort: port that the login proxy will listen on
+		public ushort loginPort = 8080;
+		// clientFacingAddress: address from which to communicate with the client
+		public IPAddress clientFacingAddress = IPAddress.Loopback;
+		// remoteFacingAddress: address from which to communicate with the server
+		public IPAddress remoteFacingAddress = IPAddress.Any;
+		// remoteLoginUri: URI for Second Life's login server
+		public Uri remoteLoginUri = new Uri(&quot;<A HREF="https://login.agni.lindenlab.com/cgi-bin/login.cgi">https://login.agni.lindenlab.com/cgi-bin/login.cgi</A>&quot;);
+		// verbose: whether or not to print informative messages
+		public bool verbose = true;
+
+		// ProxyConfig: construct a default proxy configuration with the specified userAgent, author, and protocol
+		public ProxyConfig(string userAgent, string author) {
+			this.userAgent = userAgent;
+			this.author = author;
+		}
+
+		// ProxyConfig: construct a default proxy configuration, parsing command line arguments (try --proxy-help)
+		public ProxyConfig(string userAgent, string author, string[] args) : this(userAgent, author) {
+			Hashtable argumentParsers = new Hashtable();
+			argumentParsers[&quot;proxy-help&quot;] = new ArgumentParser(ParseHelp);
+			argumentParsers[&quot;proxy-login-port&quot;] = new ArgumentParser(ParseLoginPort);
+			argumentParsers[&quot;proxy-client-facing-address&quot;] = new ArgumentParser(ParseClientFacingAddress);
+			argumentParsers[&quot;proxy-remote-facing-address&quot;] = new ArgumentParser(ParseRemoteFacingAddress);
+			argumentParsers[&quot;proxy-remote-login-uri&quot;] = new ArgumentParser(ParseRemoteLoginUri);
+			argumentParsers[&quot;proxy-verbose&quot;] = new ArgumentParser(ParseVerbose);
+			argumentParsers[&quot;proxy-quiet&quot;] = new ArgumentParser(ParseQuiet);
+
+			foreach (string arg in args)
+				foreach (string argument in argumentParsers.Keys) {
+					Match match = (new Regex(&quot;^--&quot; + argument + &quot;(?:=(.*))?$&quot;)).Match(arg);
+					if (match.Success) {
+						string value;
+						if (match.Groups[1].Captures.Count == 1)
+							value = match.Groups[1].Captures[0].ToString();
+						else
+							value = null;
+						try {
+							((ArgumentParser)argumentParsers[argument])(value);
+						} catch {
+							Console.WriteLine(&quot;invalid value for --&quot; + argument);
+							ParseHelp(null);
+						}
+					}
+				}
+		}
+
+		private delegate void ArgumentParser(string value);
+
+		private void ParseHelp(string value) {
+			Console.WriteLine(&quot;Proxy command-line arguments:&quot;                                                   );
+			Console.WriteLine(&quot;  --proxy-help                        display this help&quot;                         );
+			Console.WriteLine(&quot;  --proxy-login-port=&lt;port&gt;           listen for logins on &lt;port&gt;&quot;               );
+			Console.WriteLine(&quot;  --proxy-client-facing-address=&lt;IP&gt;  communicate with client via &lt;IP&gt;&quot;          );
+			Console.WriteLine(&quot;  --proxy-remote-facing-address=&lt;IP&gt;  communicate with server via &lt;IP&gt;&quot;          );
+			Console.WriteLine(&quot;  --proxy-remote-login-uri=&lt;URI&gt;      use SL login server at &lt;URI&gt;&quot;              );
+			Console.WriteLine(&quot;  --proxy-verbose                     display proxy notifications&quot;               );
+			Console.WriteLine(&quot;  --proxy-quiet                       suppress proxy notifications&quot;              );
+
+			Environment.Exit(1);
+		}
+
+		private void ParseLoginPort(string value) {
+			loginPort = Convert.ToUInt16(value);
+		}
+
+		private void ParseClientFacingAddress(string value) {
+			clientFacingAddress = IPAddress.Parse(value);
+		}
+
+		private void ParseRemoteFacingAddress(string value) {
+			remoteFacingAddress = IPAddress.Parse(value);
+		}
+
+		private void ParseRemoteLoginUri(string value) {
+			remoteLoginUri = new Uri(value);
+		}
+
+		private void ParseVerbose(string value) {
+			if (value != null)
+				throw new Exception();
+
+			verbose = true;
+		}
+
+		private void ParseQuiet(string value) {
+			if (value != null)
+				throw new Exception();
+
+			verbose = false;
+		}
+	}
+
+	// Proxy: Second Life proxy server
+	// A Proxy instance is only prepared to deal with one client at a time.
+	public class Proxy {
+		private ProxyConfig proxyConfig;
+
+		/*
+		 * Proxy Management
+		 */
+
+		// Proxy: construct a proxy server with the given configuration
+		public Proxy(ProxyConfig proxyConfig) {
+			this.proxyConfig = proxyConfig;
+
+			InitializeLoginProxy();
+			InitializeSimProxy();
+		}
+
+		object keepAliveLock = new Object();
+
+		// Start: begin accepting clients
+		public void Start() { lock(this) {
+			System.Threading.Monitor.Enter(keepAliveLock);
+			(new Thread(new ThreadStart(KeepAlive))).Start();
+
+			RunSimProxy();
+			Thread runLoginProxy = new Thread(new ThreadStart(RunLoginProxy));
+			runLoginProxy.IsBackground = true;
+			runLoginProxy.Start();
+
+			IPEndPoint endPoint = (IPEndPoint)loginServer.LocalEndPoint;
+			IPAddress displayAddress;
+			if (endPoint.Address == IPAddress.Any)
+				displayAddress = IPAddress.Loopback;
+			else
+				displayAddress = endPoint.Address;
+			Log(&quot;proxy ready at <A HREF="http://">http://</A>&quot; + displayAddress + &quot;:&quot; + endPoint.Port + &quot;/&quot;, false);
+		}}
+
+		// Stop: allow foreground threads to die
+		public void Stop() { lock(this) {
+			System.Threading.Monitor.Exit(keepAliveLock);
+		}}
+
+		// KeepAlive: blocks until the proxy is free to shut down
+		public void KeepAlive() {
+            lock (keepAliveLock) { };
+		}
+
+		// SetLoginRequestDelegate: specify a callback loginRequestDelegate that will be called when the client requests login
+		public void SetLoginRequestDelegate(XmlRpcRequestDelegate loginRequestDelegate) { lock(this) {
+			this.loginRequestDelegate = loginRequestDelegate;
+		}}
+
+		// SetLoginResponseDelegate: specify a callback loginResponseDelegate that will be called when the server responds to login
+		public void SetLoginResponseDelegate(XmlRpcResponseDelegate loginResponseDelegate) { lock(this) {
+			this.loginResponseDelegate = loginResponseDelegate;
+		}}
+
+		// AddDelegate: add callback packetDelegate for packets of type packetName going direction
+		public void AddDelegate(PacketType packetType, Direction direction, PacketDelegate packetDelegate) { lock(this) {
+			Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates = (direction == Direction.Incoming ? incomingDelegates : outgoingDelegates);
+			if (!delegates.ContainsKey(packetType)) {
+				delegates[packetType] = new List&lt;PacketDelegate&gt;();
+			}
+			List&lt;PacketDelegate&gt; delegateArray = delegates[packetType];
+			if(!delegateArray.Contains(packetDelegate)) {
+				delegateArray.Add(packetDelegate);
+			}
+		}}
+
+		// RemoveDelegate: remove callback for packets of type packetName going direction
+		public void RemoveDelegate(PacketType packetType, Direction direction, PacketDelegate packetDelegate) { lock(this) {
+			Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates = (direction == Direction.Incoming ? incomingDelegates : outgoingDelegates);
+			if (!delegates.ContainsKey(packetType)) {
+				return;
+			}
+			List&lt;PacketDelegate&gt; delegateArray = delegates[packetType];
+			if(delegateArray.Contains(packetDelegate)) {
+				delegateArray.Remove(packetDelegate);
+			}
+		}}
+
+		private Packet callDelegates(Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; delegates, Packet packet, IPEndPoint remoteEndPoint) {
+			PacketType origType = packet.Type;
+			foreach (PacketDelegate del in delegates[origType]) {
+				packet = del(packet, remoteEndPoint);
+
+				// FIXME: how should we handle the packet type changing?
+				if(packet == null || packet.Type != origType) break;
+			}
+			return packet;
+		}
+
+		// InjectPacket: send packet to the client or server when direction is Incoming or Outgoing, respectively
+		public void InjectPacket(Packet packet, Direction direction) { lock(this) {
+			if (activeCircuit == null) {
+				// no active circuit; queue the packet for injection once we have one
+				ArrayList queue = direction == Direction.Incoming ? queuedIncomingInjections : queuedOutgoingInjections;
+				queue.Add(packet);
+			} else
+				// tell the active sim proxy to inject the packet
+				((SimProxy)simProxies[activeCircuit]).Inject(packet, direction);
+		}}
+
+		// Log: write message to the console if in verbose mode
+		private void Log(object message, bool important) {
+			if (proxyConfig.verbose || important)
+				Console.WriteLine(message);
+		}
+
+		/*
+		 * Login Proxy
+		 */
+
+		private Socket loginServer;
+		private int capsReqCount = 0;
+
+		// InitializeLoginProxy: initialize the login proxy
+		private void InitializeLoginProxy() {
+			loginServer = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
+			loginServer.Bind(new IPEndPoint(proxyConfig.clientFacingAddress, proxyConfig.loginPort));
+			loginServer.Listen(1);
+		}
+
+		// RunLoginProxy: process login requests from clients
+		private void RunLoginProxy() {
+		    try {
+			for (;;) {
+				Socket client = loginServer.Accept();
+				IPEndPoint clientEndPoint = (IPEndPoint)client.RemoteEndPoint;
+
+				Log(&quot;handling HTTP request from &quot; + clientEndPoint, false);
+
+
+				try {
+					Thread connThread = new Thread((ThreadStart)delegate { ProxyHTTP(client); });
+					connThread.Start();
+				} catch (Exception e) {
+					Log(&quot;login failed: &quot; + e.Message, false);
+				}
+
+
+				// send any packets queued for injection
+				if (activeCircuit != null) lock(this) {
+					SimProxy activeProxy = (SimProxy)simProxies[activeCircuit];
+					foreach (Packet packet in queuedOutgoingInjections)
+						activeProxy.Inject(packet, Direction.Outgoing);
+					queuedOutgoingInjections = new ArrayList();
+				}
+			}
+		    } catch (Exception e) {
+			Console.WriteLine(e.Message);
+			Console.WriteLine(e.StackTrace);
+		    }
+		}
+
+		private class HandyNetReader {
+			private NetworkStream netStream;
+			private const int BUF_SIZE = 8192;
+			private byte[] buf = new byte[BUF_SIZE];
+			private int bufFill = 0;
+	
+			public HandyNetReader(NetworkStream s) {
+				netStream = s;
+			}
+
+			public byte[] ReadLine() {
+				int i = -1;
+				while(true) {
+					i = Array.IndexOf(buf,(byte)'\n',0,bufFill);
+					if(i &gt;= 0) break;
+					if(bufFill &gt;= BUF_SIZE) return null;
+					if(!ReadMore()) return null;
+				}
+				byte[] ret = new byte[i];
+				Array.Copy(buf,ret,i);
+				Array.Copy(buf,i+1,buf,0,bufFill-(i+1));
+				bufFill -= i+1;
+				return ret;
+			}
+
+			private bool ReadMore() {
+				int n = netStream.Read(buf,bufFill,BUF_SIZE-bufFill);
+				bufFill += n;
+				return n &gt; 0;
+			}
+
+			public int Read(byte[] rbuf, int start, int len) {
+				int read = 0;
+				while(len &gt; bufFill) {
+					Array.Copy(buf,0,rbuf,start,bufFill);
+					start += bufFill; len -= bufFill;
+					read += bufFill; bufFill = 0;
+					if(!ReadMore()) break;
+				}
+				Array.Copy(buf,0,rbuf,start,len);
+				Array.Copy(buf,len,buf,0,bufFill-len);
+				bufFill -= len; read += len;
+				return read;
+			}
+		}
+
+		// ProxyHTTP: proxy a HTTP request
+		private void ProxyHTTP(Socket client) {
+			NetworkStream netStream = new NetworkStream(client);
+			HandyNetReader reader = new HandyNetReader(netStream);
+
+			string line; int reqNo;
+			int contentLength = 0;
+			Match match;
+			string uri; string meth;
+			Dictionary&lt;string,string&gt; headers = new Dictionary&lt;string,string&gt;();
+
+			lock(this) {
+				capsReqCount++; reqNo = capsReqCount;
+			}
+
+			line = Encoding.UTF8.GetString(reader.ReadLine()).Replace(&quot;\r&quot;,&quot;&quot;);
+
+			if (line == null)
+				throw new Exception(&quot;EOF in client HTTP header&quot;);
+
+			match = new Regex(@&quot;^(\S+)\s+(\S+)\s+(HTTP/\d\.\d)$&quot;).Match(line);
+
+			if(!match.Success) {
+				Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Bad request!&quot;);
+				byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 400 Bad Request\r\nContent-Length: 0\r\n\r\n&quot;);
+            			netStream.Write(wr,0,wr.Length);
+				netStream.Close();  client.Close();
+				return;
+			}
+		
+
+			meth = match.Groups[1].Captures[0].ToString();
+			uri = match.Groups[2].Captures[0].ToString();
+			Console.WriteLine(&quot;[&quot;+reqNo+&quot;] &quot;+meth+&quot;: &quot;+uri);
+
+			// read HTTP header
+			do {
+				// read one line of the header
+				line =  Encoding.UTF8.GetString(reader.ReadLine()).Replace(&quot;\r&quot;,&quot;&quot;);
+
+				// check for premature EOF
+				if (line == null)
+					throw new Exception(&quot;EOF in client HTTP header&quot;);
+
+				if(line == &quot;&quot;) break;
+
+				match = new Regex(@&quot;^([^:]+):\s*(.*)$&quot;).Match(line);
+		
+				if(!match.Success) {
+					Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Bad header: '&quot;+line+&quot;'&quot;);
+					byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 400 Bad Request\r\nContent-Length: 0\r\n\r\n&quot;);
+            				netStream.Write(wr,0,wr.Length);
+					netStream.Close();  client.Close();
+					return;
+				}
+				
+				string key = match.Groups[1].Captures[0].ToString();
+				string val = match.Groups[2].Captures[0].ToString();
+				headers[key.ToLower()] = val;
+
+				Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Set '&quot;+key.ToLower()+&quot;' = '&quot;+val+&quot;'&quot;);
+					
+			} while (line != &quot;&quot;);
+
+			if(headers.ContainsKey(&quot;content-length&quot;)) {
+				contentLength = Convert.ToInt32(headers[&quot;content-length&quot;]);
+				
+			}
+
+			// read the HTTP body into a buffer
+			byte[] content = new byte[contentLength];
+			reader.Read(content, 0, contentLength);
+
+			Console.WriteLine(&quot;[&quot;+reqNo+&quot;] request length = &quot;+contentLength+&quot;:\n&quot;+Encoding.UTF8.GetString(content)+&quot;\n-------------&quot;);
+
+			if(uri == &quot;/&quot;) {
+				ProxyLogin(netStream,content);
+			} else if(new Regex(@&quot;^/https?://.*$&quot;).Match(uri).Success) {
+				ProxyCaps(netStream,meth,uri.Substring(1),headers,content,reqNo);
+			} else {
+				Console.WriteLine(&quot;404 not found: &quot;+uri);
+				byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 404 Not Found\r\nContent-Length: 0\r\n\r\n&quot;);
+            			netStream.Write(wr,0,wr.Length);
+				netStream.Close();  client.Close();
+				return;
+			}
+
+			netStream.Close();
+			client.Close();
+
+		}
+
+		public  bool IgnoreCertificateValidation (System.Security.Cryptography.X509Certificates.X509Certificate certificate, int[] certificateErrors) {
+			return true;
+		}
+
+		private class CapInfo {
+			private string uri; 
+			private IPEndPoint sim; 
+			private string type;
+			public CapInfo(string URI, IPEndPoint Sim, string CapType) {
+				uri = URI; sim = Sim; type = CapType;
+			}
+			public string URI {
+				get { return uri; }
+			}
+			public string CapType {
+				get { return type; }
+			}
+			public IPEndPoint Sim {
+				get { return sim; }
+			}
+		}
+
+		private Dictionary&lt;string,CapInfo&gt; KnownCaps;
+
+		private void ProxyCaps(NetworkStream netStream, string meth, string uri, Dictionary&lt;string,string&gt; headers, byte[] content,int reqNo) {
+			string host; int port; string path; string proto;
+			string line;
+			Match match = new Regex(@&quot;^(https?)://([^:/]+)(:\d+)?(/.*)$&quot;).Match(uri);
+			if(!match.Success) {
+				Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Malformed proxy URI: &quot;+uri);
+				byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 404 Not Found\r\nContent-Length: 0\r\n\r\n&quot;);
+            			netStream.Write(wr,0,wr.Length);
+				return;
+			}
+			proto = match.Groups[1].Captures[0].ToString();
+			host = match.Groups[2].Captures[0].ToString();
+			path = match.Groups[4].Captures[0].ToString();
+			if(match.Groups[3].Captures.Count &gt; 0) {
+				port = Convert.ToInt32( match.Groups[3].Captures[0].ToString().Substring(1));
+			} else if(proto == &quot;https&quot;) {
+				port = 443;
+			} else {
+				port = 80;
+			}
+
+			WebRequest req = WebRequest.Create(uri);
+			foreach(string header in headers.Keys) {
+				if(header==&quot;accept&quot; || header==&quot;connection&quot; || 
+				   header==&quot;content-length&quot; || header==&quot;date&quot; || header==&quot;expect&quot; ||
+				   header==&quot;host&quot; || header==&quot;if-modified-since&quot; || header==&quot;referer&quot; || 
+				   header==&quot;transfer-encoding&quot; || header==&quot;user-agent&quot; || 
+				   header==&quot;proxy-connection&quot;) {
+					// can't touch these!
+				} else if(header == &quot;content-type&quot;) {
+					req.ContentType = headers[&quot;content-type&quot;];
+				} else {
+					req.Headers[header] = headers[header];
+				}
+			}
+			req.Method = meth; req.ContentLength = content.Length;
+			Stream reqStream = req.GetRequestStream();
+			reqStream.Write(content,0,content.Length);
+			reqStream.Close();
+			HttpWebResponse resp;
+			try {
+				resp = (HttpWebResponse)req.GetResponse();
+			} catch(WebException e) {
+				if(e.Status == WebExceptionStatus.Timeout || e.Status == WebExceptionStatus.SendFailure) {
+					Console.WriteLine(&quot;Request timeout&quot;);
+					byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 504 Proxy Request Timeout\r\nContent-Length: 0\r\n\r\n&quot;);
+            				netStream.Write(wr,0,wr.Length);
+					return;
+				} else if(e.Status == WebExceptionStatus.ProtocolError &amp;&amp; e.Response != null) {
+					resp = (HttpWebResponse)e.Response;
+				} else {
+					Console.WriteLine(&quot;Request error: &quot;+e.ToString());
+					byte[] wr = Encoding.ASCII.GetBytes(&quot;HTTP/1.0 502 Gateway Error\r\nContent-Length: 0\r\n\r\n&quot;); // FIXME
+            				netStream.Write(wr,0,wr.Length);
+					return;
+
+				}
+				
+			}
+
+			Stream respStream = resp.GetResponseStream();
+			int read; int length = 0;
+			byte[] respBuf = new byte[256];
+			do {
+				read = respStream.Read(respBuf,length,256);
+				if(read &gt; 0) {
+					length += read;
+					Array.Resize(ref respBuf,length+256);
+				}
+			} while(read &gt; 0);
+			Array.Resize(ref respBuf,length);
+
+			string consoleMsg = &quot;[&quot;+reqNo+&quot;] Response from &quot;+uri+&quot;\nStatus: &quot;+(int)resp.StatusCode+&quot; &quot;+resp.StatusDescription + &quot;\n&quot;;
+
+			{
+				byte[] wr = Encoding.UTF8.GetBytes(&quot;HTTP/1.0 &quot;+(int)resp.StatusCode+&quot; &quot;+resp.StatusDescription+&quot;\r\n&quot;);
+				netStream.Write(wr,0,wr.Length);
+			}
+
+			for(int i = 0; i &lt; resp.Headers.Count; i++) {
+				string key = resp.Headers.Keys[i];
+				string val = resp.Headers[i];
+				string lkey = key.ToLower();
+				if(lkey != &quot;content-length&quot; &amp;&amp; lkey != &quot;transfer-encoding&quot; &amp;&amp; lkey != &quot;connection&quot;) {
+					consoleMsg += key+&quot;: &quot;+val+&quot;\n&quot;;
+					byte[] wr = Encoding.UTF8.GetBytes(key+&quot;: &quot;+val+&quot;\r\n&quot;);
+					netStream.Write(wr,0,wr.Length);
+				}
+			}
+
+			consoleMsg += &quot;\n&quot;+Encoding.UTF8.GetString(respBuf)+&quot;\n--------&quot;;
+			Console.WriteLine(consoleMsg);
+
+			try {
+				if(resp.StatusCode == HttpStatusCode.OK) respBuf = CapsFixup(uri,respBuf);
+			} catch(Exception e) {
+				Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Couldn't fixup response: &quot;+e.ToString());
+			}
+
+			Console.WriteLine(&quot;[&quot;+reqNo+&quot;] Fixed-up response:\n&quot;+Encoding.UTF8.GetString(respBuf)+&quot;\n--------&quot;);
+
+	
+			{
+				byte[] wr = Encoding.UTF8.GetBytes(&quot;Content-Length: &quot;+respBuf.Length+&quot;\r\n\r\n&quot;);
+				netStream.Write(wr,0,wr.Length);
+			}
+
+
+			netStream.Write(respBuf,0,respBuf.Length);
+			
+			return;
+		}
+
+		private byte[] CapsFixup(string uri, byte[] data) {
+			if(!KnownCaps.ContainsKey(uri)) {
+				Console.WriteLine(&quot;Unknown caps URI: &quot;+uri);
+				return data;
+			}
+			CapInfo cap = KnownCaps[uri];
+			object resp = LLSD.LLSDDeserialize(data);
+			if(cap.CapType == &quot;SeedCapability&quot;) {
+				Hashtable m = (Hashtable)resp;
+				Hashtable nm = new Hashtable();
+				foreach(string key in m.Keys) {
+					string val = (string)m[key];
+					if(val != null &amp;&amp; val != &quot;&quot;) {
+						KnownCaps[val] = new CapInfo(val, cap.Sim, key);
+						nm[key] = &quot;<A HREF="http://127.0.0.1:8080/">http://127.0.0.1:8080/</A>&quot;+val;
+					} else {
+						nm[key] = val;
+					}
+				}
+				resp = nm;
+			} else if(cap.CapType == &quot;EventQueueGet&quot;) {
+				Console.WriteLine(LLSD.LLSDDump(resp,0));
+				foreach(Hashtable evt in (ArrayList)((Hashtable)resp)[&quot;events&quot;]) {
+					string message = (string)evt[&quot;message&quot;];
+					Hashtable body = (Hashtable)evt[&quot;body&quot;];
+					if(message == &quot;TeleportFinish&quot; || message == &quot;CrossedRegion&quot;) {
+						Hashtable info = null;
+						if(message == &quot;TeleportFinish&quot;)
+							info = (Hashtable) body[&quot;Info&quot;];
+						else
+							info = (Hashtable) body[&quot;RegionData&quot;];
+						byte[] bytes = (byte[]) info[&quot;SimIP&quot;];
+						uint simIP = (uint)(bytes[3] + (bytes[2] &lt;&lt; 8) + (bytes[1] &lt;&lt; 16) + (bytes[0] &lt;&lt; 24));
+						ushort simPort = (ushort)(long)info[&quot;SimPort&quot;];
+						string capsURL = (string)info[&quot;SeedCapability&quot;];
+						GenericCheck(ref simIP, ref simPort, ref capsURL, cap.Sim == activeCircuit);
+						info[&quot;SeedCapability&quot;] = capsURL;
+						bytes[3] = (byte)(simIP % 256);
+				                bytes[2] = (byte)((simIP &gt;&gt; 8) % 256);
+				                bytes[1] = (byte)((simIP &gt;&gt; 16) % 256);
+				                bytes[0] = (byte)((simIP &gt;&gt; 24) % 256);
+						info[&quot;SimIP&quot;] = bytes;
+						info[&quot;SimPort&quot;] = (long)simPort;
+					}
+				}
+			}
+			return LLSD.LLSDSerialize(resp);
+		}
+
+		private void ProxyLogin(NetworkStream netStream, byte[] content) { lock(this) {
+			// convert the body into an XML-RPC request
+			XmlRpcRequest request = (XmlRpcRequest)(new XmlRpcRequestDeserializer()).Deserialize(Encoding.UTF8.GetString(content));
+
+			// call the loginRequestDelegate
+			if (loginRequestDelegate != null)
+				try {
+					loginRequestDelegate(request);
+				} catch (Exception e) {
+					Log(&quot;exception in login request deligate: &quot; + e.Message, true);
+					Log(e.StackTrace, true);
+				}
+
+			// add our userAgent and author to the request
+			Hashtable requestParams = new Hashtable();
+			if (proxyConfig.userAgent != null)
+				requestParams[&quot;user-agent&quot;] = proxyConfig.userAgent;
+			if (proxyConfig.author != null)
+				requestParams[&quot;author&quot;] = proxyConfig.author;
+			request.Params.Add(requestParams);
+
+			// forward the XML-RPC request to the server
+			XmlRpcResponse response = (XmlRpcResponse)request.Send(proxyConfig.remoteLoginUri.ToString(),60000); //added 60 second timeout -- Andrew
+			Hashtable responseData = (Hashtable)response.Value;
+
+			// proxy any simulator address given in the XML-RPC response
+			if (responseData.Contains(&quot;sim_ip&quot;) &amp;&amp; responseData.Contains(&quot;sim_port&quot;)) {
+				IPEndPoint realSim = new IPEndPoint(IPAddress.Parse((string)responseData[&quot;sim_ip&quot;]), Convert.ToUInt16(responseData[&quot;sim_port&quot;]));
+				IPEndPoint fakeSim = ProxySim(realSim);
+				responseData[&quot;sim_ip&quot;] = fakeSim.Address.ToString();
+				responseData[&quot;sim_port&quot;] = fakeSim.Port;
+				activeCircuit = realSim;
+			}
+
+			// start a new proxy session
+			Reset();
+
+			if(responseData.Contains(&quot;seed_capability&quot;)) {
+				KnownCaps[(string)responseData[&quot;seed_capability&quot;]] = new CapInfo((string)responseData[&quot;seed_capability&quot;],activeCircuit,&quot;SeedCapability&quot;);
+				responseData[&quot;seed_capability&quot;] = &quot;<A HREF="http://127.0.0.1:8080/">http://127.0.0.1:8080/</A>&quot;+responseData[&quot;seed_capability&quot;];
+			}
+
+			// call the loginResponseDelegate
+			if (loginResponseDelegate != null) {
+				try {
+					loginResponseDelegate(response);
+				} catch (Exception e) {
+					Log(&quot;exception in login response delegate: &quot; + e.Message, true);
+					Log(e.StackTrace, true);
+				}
+			}
+
+			// forward the XML-RPC response to the client
+			StreamWriter writer = new StreamWriter(netStream);
+		        writer.WriteLine(&quot;HTTP/1.0 200 OK&quot;);
+            		writer.WriteLine(&quot;Content-type: text/xml&quot;);
+            		writer.WriteLine();
+
+			XmlTextWriter responseWriter = new XmlTextWriter(writer);
+			XmlRpcResponseSerializer.Singleton.Serialize(responseWriter, response);
+			responseWriter.Close(); writer.Close();
+		}}
+
+		/*
+		 * Sim Proxy
+		 */
+
+		private Socket simFacingSocket;
+		private IPEndPoint activeCircuit = null;
+		private Hashtable proxyEndPoints = new Hashtable();
+		private Hashtable simProxies = new Hashtable();
+		private Hashtable proxyHandlers = new Hashtable();
+		private XmlRpcRequestDelegate loginRequestDelegate = null;
+		private XmlRpcResponseDelegate loginResponseDelegate = null;
+		private Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; incomingDelegates = new Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt;();
+		private Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt; outgoingDelegates = new Dictionary&lt;PacketType, List&lt;PacketDelegate&gt;&gt;();
+		private ArrayList queuedIncomingInjections = new ArrayList();
+		private ArrayList queuedOutgoingInjections = new ArrayList();
+
+		// InitializeSimProxy: initialize the sim proxy
+		private void InitializeSimProxy() {
+			InitializeAddressCheckers();
+
+			simFacingSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
+			simFacingSocket.Bind(new IPEndPoint(proxyConfig.remoteFacingAddress, 0));
+			Reset();
+		}
+
+		// Reset: start a new session
+		private void Reset() {
+			foreach (SimProxy simProxy in simProxies.Values)
+				simProxy.Reset();
+			KnownCaps = new Dictionary&lt;string,CapInfo&gt;();
+		}
+
+		private byte[] receiveBuffer = new byte[8192];
+		private byte[] zeroBuffer = new byte[8192];
+		private EndPoint remoteEndPoint = (EndPoint)new IPEndPoint(IPAddress.Any, 0);
+
+		// RunSimProxy: start listening for packets from remote sims
+		private void RunSimProxy() {
+			simFacingSocket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref remoteEndPoint, new AsyncCallback(ReceiveFromSim), null);
+		}
+
+		// ReceiveFromSim: packet received from a remote sim
+		private void ReceiveFromSim(IAsyncResult ar) { lock(this) try {
+			// pause listening and fetch the packet
+			bool needsZero = false;
+			bool needsCopy = true;
+			int length;
+			length = simFacingSocket.EndReceiveFrom(ar, ref remoteEndPoint);
+
+			if (proxyHandlers.Contains(remoteEndPoint)) {
+				// find the proxy responsible for forwarding this packet
+				SimProxy simProxy = (SimProxy)proxyHandlers[remoteEndPoint];
+
+				// interpret the packet according to the SL protocol
+				Packet packet;
+                int end = length - 1;
+
+                packet = Packet.BuildPacket(receiveBuffer, ref end, zeroBuffer);
+#if DEBUG_SEQUENCE
+				Console.WriteLine(&quot;&lt;- &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
+#endif
+
+				// check for ACKs we're waiting for
+				packet = simProxy.CheckAcks(packet, Direction.Incoming, ref length, ref needsCopy);
+
+				// modify sequence numbers to account for injections
+				uint oldSequence = packet.Header.Sequence;
+				packet = simProxy.ModifySequence(packet, Direction.Incoming, ref length, ref needsCopy);
+
+				// keep track of sequence numbers
+				if (packet.Header.Sequence &gt; simProxy.incomingSequence)
+					simProxy.incomingSequence = packet.Header.Sequence;
+
+				// check the packet for addresses that need proxying
+				if (incomingCheckers.Contains(packet.Type)) {
+					/* if (needsZero) {
+						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
+						packet.Header.Data = zeroBuffer;
+						needsZero = false;
+					} */
+
+					Packet newPacket = ((AddressChecker)incomingCheckers[packet.Type])(packet);
+					SwapPacket(packet, newPacket);
+					packet = newPacket;
+					needsCopy = false;
+				}
+
+				// pass the packet to any callback delegates
+				if (incomingDelegates.ContainsKey(packet.Type)) {
+					/* if (needsZero) {
+						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
+						packet.Header.Data = zeroBuffer;
+						needsCopy = true;
+					} */
+
+					if (needsCopy) {
+						byte[] newData = new byte[packet.Header.Data.Length];
+						Array.Copy(packet.Header.Data, 0, newData, 0, packet.Header.Data.Length);
+						packet.Header.Data = newData; // FIXME
+					}
+
+					try {
+						Packet newPacket = callDelegates(incomingDelegates, packet, (IPEndPoint)remoteEndPoint);
+						if (newPacket == null) {
+							if ((packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0)
+								simProxy.Inject(SpoofAck(oldSequence), Direction.Outgoing);
+
+							if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0)
+								packet = SeparateAck(packet);
+							else
+								packet = null;
+						} else {
+							bool oldReliable = (packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
+							bool newReliable = (newPacket.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
+							if (oldReliable &amp;&amp; !newReliable)
+								simProxy.Inject(SpoofAck(oldSequence), Direction.Outgoing);
+							else if (!oldReliable &amp;&amp; newReliable)
+								simProxy.WaitForAck(packet, Direction.Incoming);
+
+							SwapPacket(packet, newPacket);
+							packet = newPacket;
+						}
+					} catch (Exception e) {
+						Log(&quot;exception in incoming delegate: &quot; + e.Message, true);
+						Log(e.StackTrace, true);
+					}
+
+					if (packet != null)
+						simProxy.SendPacket(packet, false);
+				} else
+					simProxy.SendPacket(packet, needsZero);
+			} else
+				// ignore packets from unknown peers
+				Log(&quot;dropping packet from &quot; + remoteEndPoint, false);
+		} catch (Exception e) {
+			Console.WriteLine(e.Message);
+			Console.WriteLine(e.StackTrace);
+		} finally {
+			// resume listening
+			simFacingSocket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref remoteEndPoint, new AsyncCallback(ReceiveFromSim), null);
+		}}
+
+		// SendPacket: send a packet to a sim from our fake client endpoint
+		public void SendPacket(Packet packet, IPEndPoint endPoint, bool skipZero) {
+			byte[] buffer = packet.ToBytes();
+			if (skipZero || (packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
+				simFacingSocket.SendTo(buffer, buffer.Length, SocketFlags.None, endPoint);
+			else {
+				int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
+				simFacingSocket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, endPoint);
+			}
+			
+		}
+
+		// SpoofAck: create an ACK for the given packet
+		public Packet SpoofAck(uint sequence) {
+            PacketAckPacket spoof = new PacketAckPacket();
+            spoof.Packets = new PacketAckPacket.PacketsBlock[1];
+	    spoof.Packets[0] = new PacketAckPacket.PacketsBlock();
+            spoof.Packets[0].ID = sequence;
+            return (Packet)spoof;
+            //Legacy:
+            ////Hashtable blocks = new Hashtable();
+            ////Hashtable fields = new Hashtable();
+            ////fields[&quot;ID&quot;] = (uint)sequence;
+            ////blocks[fields] = &quot;Packets&quot;;
+            ////return .BuildPacket(&quot;PacketAck&quot;, proxyConfig.protocol, blocks, Helpers.MSG_ZEROCODED);
+		}
+
+		// SeparateAck: create a standalone PacketAck for packet's appended ACKs
+		public Packet SeparateAck(Packet packet) {
+            PacketAckPacket seperate = new PacketAckPacket();
+            int ackCount = ((packet.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : (int)packet.Header.Data[packet.Header.Data.Length - 1]);
+            seperate.Packets = new PacketAckPacket.PacketsBlock[ackCount];	
+		
+            for (int i = 0; i &lt; ackCount; ++i)
+            {
+            	int offset = packet.Header.Data.Length - (ackCount - i) * 4 - 1;
+                seperate.Packets[i].ID = (uint) ((packet.Header.Data[offset++] &lt;&lt;  0)
+				                                + (packet.Header.Data[offset++] &lt;&lt;  8)
+				                                + (packet.Header.Data[offset++] &lt;&lt; 16)
+				                                + (packet.Header.Data[offset++] &lt;&lt; 24))
+				                                ;
+            }
+
+            Packet ack = (Packet)seperate;
+            ack.Header.Sequence = packet.Header.Sequence;
+            return ack;
+		}
+
+		// SwapPacket: copy the sequence number and appended ACKs from one packet to another
+		public static void SwapPacket(Packet oldPacket, Packet newPacket) {
+			newPacket.Header.Sequence = oldPacket.Header.Sequence;
+
+			int oldAcks = (oldPacket.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : oldPacket.Header.AckList.Length;
+			int newAcks = (newPacket.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) == 0 ? 0 : newPacket.Header.AckList.Length;
+
+			if (oldAcks != 0 || newAcks != 0) {
+				
+               			uint[] newAckList = new uint[oldAcks];
+		                Array.Copy(oldPacket.Header.AckList, 0, newAckList, 0, oldAcks);
+
+				newPacket.Header.AckList = newAckList;
+				newPacket.Header.AppendedAcks = oldPacket.Header.AppendedAcks;
+                
+			}
+		}
+
+		// ProxySim: return the proxy for the specified sim, creating it if it doesn't exist
+		private IPEndPoint ProxySim(IPEndPoint simEndPoint) {
+			if (proxyEndPoints.Contains(simEndPoint))
+				// return the existing proxy
+				return (IPEndPoint)proxyEndPoints[simEndPoint];
+			else {
+				// return a new proxy
+				SimProxy simProxy = new SimProxy(proxyConfig, simEndPoint, this);
+				IPEndPoint fakeSim = simProxy.LocalEndPoint();
+				Log(&quot;creating proxy for &quot; + simEndPoint + &quot; at &quot; + fakeSim, false);
+				simProxy.Run();
+				proxyEndPoints.Add(simEndPoint, fakeSim);
+				simProxies.Add(simEndPoint, simProxy);
+				return fakeSim;
+			}
+		}
+
+		// AddHandler: remember which sim proxy corresponds to a given sim
+		private void AddHandler(EndPoint endPoint, SimProxy proxy) {
+			proxyHandlers.Add(endPoint, proxy);
+		}
+
+		// SimProxy: proxy for a single simulator
+		private class SimProxy {
+			private ProxyConfig proxyConfig;
+			private IPEndPoint remoteEndPoint;
+			private Proxy proxy;
+			private Socket socket;
+			public uint incomingSequence;
+			public uint outgoingSequence;
+			private ArrayList incomingInjections;
+			private ArrayList outgoingInjections;
+			private uint incomingOffset = 0;
+			private uint outgoingOffset = 0;
+			private Hashtable incomingAcks;
+			private Hashtable outgoingAcks;
+			private ArrayList incomingSeenAcks;
+			private ArrayList outgoingSeenAcks;
+
+			// SimProxy: construct a proxy for a single simulator
+			public SimProxy(ProxyConfig proxyConfig, IPEndPoint simEndPoint, Proxy proxy) {
+				this.proxyConfig = proxyConfig;
+				remoteEndPoint = new IPEndPoint(simEndPoint.Address, simEndPoint.Port);
+				this.proxy = proxy;
+				socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
+				socket.Bind(new IPEndPoint(proxyConfig.clientFacingAddress, 0));
+				proxy.AddHandler(remoteEndPoint, this);
+				Reset();
+			}
+
+			// Reset: start a new session
+			public void Reset() {
+				incomingSequence = 0;
+				outgoingSequence = 0;
+				incomingInjections = new ArrayList();
+				outgoingInjections = new ArrayList();
+				incomingAcks = new Hashtable();
+				outgoingAcks = new Hashtable();
+				incomingSeenAcks = new ArrayList();
+				outgoingSeenAcks = new ArrayList();
+			}
+
+			// BackgroundTasks: resend unacknowledged packets and keep data structures clean
+			private void BackgroundTasks() { try {
+				int tick = 1;
+				int incomingInjectionsPoint = 0;
+				int outgoingInjectionsPoint = 0;
+				int incomingSeenAcksPoint = 0;
+				int outgoingSeenAcksPoint = 0;
+
+				for (;; Thread.Sleep(1000)) lock(proxy) {
+					if ((tick = (tick + 1) % 60) == 0) {
+						for (int i = 0; i &lt; incomingInjectionsPoint; ++i) {
+							incomingInjections.RemoveAt(0);
+							++incomingOffset;
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;incomingOffset = &quot; + incomingOffset);
+#endif
+						}
+						incomingInjectionsPoint = incomingInjections.Count;
+
+						for (int i = 0; i &lt; outgoingInjectionsPoint; ++i) {
+							outgoingInjections.RemoveAt(0);
+							++outgoingOffset;
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;outgoingOffset = &quot; + outgoingOffset);
+#endif
+						}
+						outgoingInjectionsPoint = outgoingInjections.Count;
+
+						for (int i = 0; i &lt; incomingSeenAcksPoint; ++i) {
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;incomingAcks.Remove(&quot; + incomingSeenAcks[0] + &quot;)&quot;);
+#endif
+							incomingAcks.Remove(incomingSeenAcks[0]);
+							incomingSeenAcks.RemoveAt(0);
+						}
+						incomingSeenAcksPoint = incomingSeenAcks.Count;
+
+						for (int i = 0; i &lt; outgoingSeenAcksPoint; ++i) {
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;outgoingAcks.Remove(&quot; + outgoingSeenAcks[0] + &quot;)&quot;);
+#endif
+							outgoingAcks.Remove(outgoingSeenAcks[0]);
+							outgoingSeenAcks.RemoveAt(0);
+						}
+						outgoingSeenAcksPoint = outgoingSeenAcks.Count;
+					}
+
+					foreach (uint id in incomingAcks.Keys)
+						if (!incomingSeenAcks.Contains(id)) {
+							Packet packet = (Packet)incomingAcks[id];
+							packet.Header.Data[0] |= Helpers.MSG_RESENT;
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;RESEND &lt;- &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
+#endif
+							SendPacket(packet, false);
+						}
+
+					foreach (uint id in outgoingAcks.Keys)
+						if (!outgoingSeenAcks.Contains(id)) {
+							Packet packet = (Packet)outgoingAcks[id];
+							packet.Header.Data[0] |= Helpers.MSG_RESENT;
+#if DEBUG_SEQUENCE
+							Console.WriteLine(&quot;RESEND -&gt; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
+#endif
+							proxy.SendPacket(packet, remoteEndPoint, false);
+						}
+				}
+			} catch (Exception e) {
+				Console.WriteLine(e.Message);
+				Console.WriteLine(e.StackTrace);
+			}}
+
+			// LocalEndPoint: return the endpoint that the client should communicate with
+			public IPEndPoint LocalEndPoint() {
+				return (IPEndPoint)socket.LocalEndPoint;
+			}
+
+			private byte[] receiveBuffer = new byte[8192];
+			private byte[] zeroBuffer = new byte[8192];
+			private EndPoint clientEndPoint = new IPEndPoint(IPAddress.Any, 0);
+			bool firstReceive = true;
+
+			// Run: forward packets from the client to the sim
+			public void Run() {
+				Thread backgroundTasks = new Thread(new ThreadStart(BackgroundTasks));
+				backgroundTasks.IsBackground = true;
+				backgroundTasks.Start();
+				socket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref clientEndPoint, new AsyncCallback(ReceiveFromClient), null);
+			}
+
+			// ReceiveFromClient: packet received from the client
+			private void ReceiveFromClient(IAsyncResult ar) { lock(proxy) try {
+				// pause listening and fetch the packet
+				bool needsZero = false;
+				bool needsCopy = true;
+				int length;
+				length = socket.EndReceiveFrom(ar, ref clientEndPoint);
+
+				// interpret the packet according to the SL protocol
+		                int end = length - 1;
+				Packet packet = libsecondlife.Packets.Packet.BuildPacket(receiveBuffer,ref end, zeroBuffer);
+				
+#if DEBUG_SEQUENCE
+				Console.WriteLine(&quot;-&gt; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
+#endif
+                // check for ACKs we're waiting for
+				packet = CheckAcks(packet, Direction.Outgoing, ref length, ref needsCopy);
+
+				// modify sequence numbers to account for injections
+				uint oldSequence = packet.Header.Sequence;
+				packet = ModifySequence(packet, Direction.Outgoing, ref length, ref needsCopy);
+
+				// keep track of sequence numbers
+				if (packet.Header.Sequence &gt; outgoingSequence)
+                    outgoingSequence = packet.Header.Sequence ;
+
+				// check the packet for addresses that need proxying
+				if (proxy.outgoingCheckers.Contains(packet.Type)) {
+					/* if (packet.Header.Zerocoded) {
+						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
+						packet.Header.Data = zeroBuffer;
+						needsZero = false;
+					} */
+
+					Packet newPacket = ((AddressChecker)proxy.outgoingCheckers[packet.Type])(packet);
+					SwapPacket(packet, newPacket);
+					packet = newPacket;
+					length = packet.Header.Data.Length;
+					needsCopy = false;
+				}
+
+				// pass the packet to any callback delegates
+				if (proxy.outgoingDelegates.ContainsKey(packet.Type)) {
+					/* if (packet.Header.Zerocoded) {
+						length = Helpers.ZeroDecode(packet.Header.Data, length, zeroBuffer);
+						packet.Header.Data = zeroBuffer;
+						needsCopy = true;
+					} */
+
+					if (needsCopy) {
+						byte[] newData = new byte[packet.Header.Data.Length];
+						Array.Copy(packet.Header.Data, 0, newData, 0, packet.Header.Data.Length);
+						packet.Header.Data = newData; // FIXME!!!
+					}
+
+					try {
+						Packet newPacket = proxy.callDelegates(proxy.outgoingDelegates, packet, remoteEndPoint);
+						if (newPacket == null) {
+							if ((packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0)
+								Inject(proxy.SpoofAck(oldSequence), Direction.Incoming);
+
+							if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0)
+								packet = proxy.SeparateAck(packet);
+							else
+								packet = null;
+						} else {
+							bool oldReliable = (packet.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
+							bool newReliable = (newPacket.Header.Flags &amp; Helpers.MSG_RELIABLE) != 0;
+							if (oldReliable &amp;&amp; !newReliable)
+								Inject(proxy.SpoofAck(oldSequence), Direction.Incoming);
+							else if (!oldReliable &amp;&amp; newReliable)	
+								WaitForAck(packet, Direction.Outgoing);
+
+							SwapPacket(packet, newPacket);
+							packet = newPacket;
+						}
+					} catch (Exception e) {
+						proxy.Log(&quot;exception in outgoing delegate: &quot; + e.Message, true);
+						proxy.Log(e.StackTrace, true);
+					}
+
+					if (packet != null)
+						proxy.SendPacket(packet, remoteEndPoint, false);
+				} else
+					proxy.SendPacket(packet, remoteEndPoint, needsZero);
+
+				// send any packets queued for injection
+				if (firstReceive) {
+					firstReceive = false;
+					foreach (Packet queuedPacket in proxy.queuedIncomingInjections)
+						Inject(queuedPacket, Direction.Incoming);
+					proxy.queuedIncomingInjections = new ArrayList();
+				}
+			} catch (Exception e) {
+				Console.WriteLine(e.Message);
+				Console.WriteLine(e.StackTrace);
+			} finally {
+				// resume listening
+				socket.BeginReceiveFrom(receiveBuffer, 0, receiveBuffer.Length, SocketFlags.None, ref clientEndPoint, new AsyncCallback(ReceiveFromClient), null);
+			}}
+
+			// SendPacket: send a packet from the sim to the client via our fake sim endpoint
+			public void SendPacket(Packet packet, bool skipZero) {
+				byte[] buffer = packet.ToBytes();
+				if (skipZero || (packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
+					socket.SendTo(buffer, buffer.Length, SocketFlags.None, clientEndPoint);
+				else {
+					int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
+					socket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, clientEndPoint);
+				}
+			}
+
+			// Inject: inject a packet
+			public void Inject(Packet packet, Direction direction) {
+				if (direction == Direction.Incoming) {
+					if (firstReceive) {
+						proxy.queuedIncomingInjections.Add(packet);
+						return;
+					}
+
+					incomingInjections.Add(++incomingSequence);
+					packet.Header.Sequence = incomingSequence;
+				} else {
+					outgoingInjections.Add(++outgoingSequence);
+					packet.Header.Sequence = outgoingSequence;
+				}
+
+#if DEBUG_SEQUENCE
+				Console.WriteLine(&quot;INJECT &quot; + (direction == Direction.Incoming ? &quot;&lt;-&quot; : &quot;-&gt;&quot;) + &quot; &quot; + packet.Type + &quot; #&quot; + packet.Header.Sequence);
+
+#endif
+				if ((packet.Header.Data[0] &amp; Helpers.MSG_RELIABLE) != 0)
+					WaitForAck(packet, direction);
+
+				if (direction == Direction.Incoming) {
+					byte[] buffer = packet.ToBytes();
+					if ((packet.Header.Data[0] &amp; Helpers.MSG_ZEROCODED) == 0)
+						socket.SendTo(buffer, buffer.Length, SocketFlags.None, clientEndPoint);
+					else {
+						int zeroLength = Helpers.ZeroEncode(buffer, buffer.Length, zeroBuffer);
+						socket.SendTo(zeroBuffer, zeroLength, SocketFlags.None, clientEndPoint);
+					}
+				}
+				else
+					proxy.SendPacket(packet, remoteEndPoint, false);
+			}
+
+			// WaitForAck: take care of resending a packet until it's ACKed
+			public void WaitForAck(Packet packet, Direction direction) {
+				Hashtable table = direction == Direction.Incoming ? incomingAcks : outgoingAcks;
+				table.Add(packet.Header.Sequence, packet);
+			}
+
+			// CheckAcks: check for and remove ACKs of packets we've injected
+			public Packet CheckAcks(Packet packet, Direction direction, ref int length, ref bool needsCopy) {
+				Hashtable acks = direction == Direction.Incoming ? outgoingAcks : incomingAcks;
+				ArrayList seenAcks = direction == Direction.Incoming ? outgoingSeenAcks : incomingSeenAcks;
+
+				if (acks.Count == 0)
+					return packet;
+
+				// check for embedded ACKs
+				if (packet.Type == PacketType.PacketAck) {
+					bool changed = false;
+                    List&lt;PacketAckPacket.PacketsBlock&gt; newPacketBlocks = new List&lt;PacketAckPacket.PacketsBlock&gt;();
+					foreach (PacketAckPacket.PacketsBlock pb in ((PacketAckPacket)packet).Packets) {
+						uint id = pb.ID;
+#if DEBUG_SEQUENCE
+						string hrup = &quot;Check !&quot; + id;
+#endif
+                        if (acks.Contains(id))
+                        {
+#if DEBUG_SEQUENCE
+							hrup += &quot; get's&quot;;
+#endif
+                            seenAcks.Add(id);
+                            changed = true;
+                        }
+                        else
+                            newPacketBlocks.Add(pb);
+#if DEBUG_SEQUENCE
+						Console.WriteLine(hrup);
+#endif
+					}
+					if (changed)
+                    {
+                        PacketAckPacket newPacket = new PacketAckPacket();
+                        newPacket.Packets = new PacketAckPacket.PacketsBlock[newPacketBlocks.Count];
+                        
+                        int a = 0;
+                        foreach (PacketAckPacket.PacketsBlock pb in newPacketBlocks)
+                        {
+                            newPacket.Packets[a++] = pb;
+                        } 
+
+                        SwapPacket(packet, (Packet)newPacket);
+						packet = newPacket;
+						length = packet.Header.Data.Length;
+						needsCopy = false;
+					}
+				}
+
+				// check for appended ACKs
+				if ((packet.Header.Data[0] &amp; Helpers.MSG_APPENDED_ACKS) != 0) {
+					int ackCount = packet.Header.AckList.Length;
+					for (int i = 0; i &lt; ackCount;) {
+						uint ackID = packet.Header.AckList[i]; // FIXME FIXME FIXME
+#if DEBUG_SEQUENCE
+						string hrup = &quot;Check @&quot; + ackID;
+#endif
+						if (acks.Contains(ackID)) {
+#if DEBUG_SEQUENCE
+							hrup += &quot; get's&quot;;
+#endif
+							uint[] newAcks = new uint[ackCount-1];
+							Array.Copy(packet.Header.AckList, 0, newAcks, 0, i);
+							Array.Copy(packet.Header.AckList, i+1, newAcks, i, ackCount - i - 1);
+							packet.Header.AckList = newAcks;
+							--ackCount;
+							seenAcks.Add(ackID);
+							needsCopy = false;
+						} else
+							++i;
+#if DEBUG_SEQUENCE
+						Console.WriteLine(hrup);
+#endif
+					}
+					if (ackCount == 0) {
+						packet.Header.Flags ^= Helpers.MSG_APPENDED_ACKS;
+						packet.Header.AckList = new uint[0];
+					}
+				}
+
+				return packet;
+			}
+
+			// ModifySequence: modify a packet's sequence number and ACK IDs to account for injections
+			public Packet ModifySequence(Packet packet, Direction direction, ref int length, ref bool needsCopy) {
+				ArrayList ourInjections = direction == Direction.Outgoing ? outgoingInjections : incomingInjections;
+				ArrayList theirInjections = direction == Direction.Incoming ? outgoingInjections : incomingInjections;
+				uint ourOffset = direction == Direction.Outgoing ? outgoingOffset : incomingOffset;
+				uint theirOffset = direction == Direction.Incoming ? outgoingOffset : incomingOffset;
+
+				uint newSequence = (uint)(packet.Header.Sequence + ourOffset);
+				foreach (uint injection in ourInjections)
+					if (newSequence &gt;= injection)
+						++newSequence;
+#if DEBUG_SEQUENCE
+				Console.WriteLine(&quot;Mod #&quot; + packet.Header.Sequence + &quot; = &quot; + newSequence);
+#endif
+				packet.Header.Sequence = newSequence;
+
+				if ((packet.Header.Flags &amp; Helpers.MSG_APPENDED_ACKS) != 0) {
+					int ackCount = packet.Header.AckList.Length;
+					for (int i = 0; i &lt; ackCount; ++i) {
+						int offset = length - (ackCount - i) * 4 - 1;
+						uint ackID = packet.Header.AckList[i] - theirOffset;
+#if DEBUG_SEQUENCE
+						uint hrup = packet.Header.AckList[i];
+#endif
+						for (int j = theirInjections.Count - 1; j &gt;= 0; --j)
+							if (ackID &gt;= (uint)theirInjections[j])
+								--ackID;
+#if DEBUG_SEQUENCE
+						Console.WriteLine(&quot;Mod @&quot; + hrup + &quot; = &quot; + ackID);
+#endif
+						packet.Header.AckList[i] = ackID;
+					}
+				}
+
+				if (packet.Type == PacketType.PacketAck) {
+                    PacketAckPacket pap = (PacketAckPacket)packet;
+                    foreach(PacketAckPacket.PacketsBlock pb in pap.Packets) {
+                    	uint ackID = (uint)pb.ID - theirOffset;
+#if DEBUG_SEQUENCE
+						uint hrup = (uint)pb.ID;
+#endif
+						for (int i = theirInjections.Count - 1; i &gt;= 0; --i)
+							if (ackID &gt;= (uint)theirInjections[i])
+								--ackID;
+#if DEBUG_SEQUENCE
+						Console.WriteLine(&quot;Mod !&quot; + hrup + &quot; = &quot; + ackID);
+#endif
+						pb.ID = ackID;
+					
+					}
+                    //SwapPacket(packet, (Packet)pap);
+					// packet = (Packet)pap;
+					length = packet.Header.Data.Length;
+					needsCopy = false;
+				}
+
+				return packet;
+			}
+		}
+
+		// Checkers swap proxy addresses in for real addresses.  A few constraints:
+		//   - Checkers must not alter the incoming packet.
+		//   - Checkers must return a freshly built packet, even if nothing's changed.
+		//   - The incoming packet's buffer may be longer than the length of the data it contains.
+		//   - The incoming packet's buffer must not be used after the checker returns.
+		// This is all because checkers may be operating on data that's still in a scratch buffer.
+		delegate Packet AddressChecker(Packet packet);
+
+		Hashtable incomingCheckers = new Hashtable();
+		Hashtable outgoingCheckers = new Hashtable();
+
+		// InitializeAddressCheckers: initialize delegates that check packets for addresses that need proxying
+		private void InitializeAddressCheckers() {
+			// TODO: what do we do with mysteries and empty IPs?
+			AddMystery(PacketType.OpenCircuit);
+			//AddMystery(PacketType.AgentPresenceResponse);
+
+			incomingCheckers.Add(PacketType.TeleportFinish, new AddressChecker(CheckTeleportFinish));
+			incomingCheckers.Add(PacketType.AgentToNewRegion, new AddressChecker(CheckAgentToNewRegion));
+			incomingCheckers.Add(PacketType.CrossedRegion, new AddressChecker(CheckCrossedRegion));
+			incomingCheckers.Add(PacketType.EnableSimulator, new AddressChecker(CheckEnableSimulator));
+			//incomingCheckers.Add(&quot;UserLoginLocationReply&quot;, new AddressChecker(CheckUserLoginLocationReply));
+		}
+
+		// AddMystery: add a checker delegate that logs packets we're watching for development purposes
+		private void AddMystery(PacketType type) {
+			incomingCheckers.Add(type, new AddressChecker(LogIncomingMysteryPacket));
+			outgoingCheckers.Add(type, new AddressChecker(LogOutgoingMysteryPacket));
+		}
+
+		// GenericCheck: replace the sim address in a packet with our proxy address
+		private void GenericCheck(ref uint simIP, ref ushort simPort, ref string simCaps, bool active) {
+            	    IPAddress sim_ip = new IPAddress((long)simIP);
+
+		    IPEndPoint realSim = new IPEndPoint(sim_ip, Convert.ToInt32(simPort));
+	 	    IPEndPoint fakeSim = ProxySim(realSim);
+
+		    if(simCaps != null &amp;&amp; simCaps.Length &gt; 0) {
+			    KnownCaps[simCaps] = new CapInfo(simCaps,realSim,&quot;SeedCapability&quot;);
+			    simCaps = &quot;<A HREF="http://127.0.0.1:8080/">http://127.0.0.1:8080/</A>&quot;+simCaps;
+		    }
+
+		    Console.WriteLine(&quot;FIXUP: &quot;+realSim.ToString()+&quot; -&gt; &quot;+fakeSim.ToString());
+
+	            simPort = (ushort)fakeSim.Port;
+        	    int i = 0;
+	            byte[] bytes = fakeSim.Address.GetAddressBytes();
+        	    simIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+            
+	            if (active)
+        	        activeCircuit = realSim;
+		}
+
+		// CheckTeleportFinish: check TeleportFinish packets
+		private Packet CheckTeleportFinish(Packet packet) {
+            		TeleportFinishPacket tfp = (TeleportFinishPacket)packet;
+			string simCaps = Encoding.UTF8.GetString(tfp.Info.SeedCapability).Replace(&quot;\0&quot;,&quot;&quot;);
+		        GenericCheck(ref tfp.Info.SimIP, ref tfp.Info.SimPort, ref simCaps, true);
+			tfp.Info.SeedCapability = Encoding.UTF8.GetBytes(simCaps);
+            		return (Packet)tfp;
+		}
+
+		// CheckAgentToNewRegion: check AgentToNewRegion packets
+		private Packet CheckAgentToNewRegion(Packet packet) {
+            		AgentToNewRegionPacket atnwp = (AgentToNewRegionPacket)packet;
+			string simCaps = null; // FIXME: why doesn't this have a SeedCapability field?
+            		GenericCheck(ref atnwp.RegionData.IP, ref atnwp.RegionData.Port, ref simCaps, true);
+            		return (Packet)atnwp;
+		}
+
+		// CheckEnableSimulator: check EnableSimulator packets
+		private Packet CheckEnableSimulator(Packet packet) {
+            	EnableSimulatorPacket esp = (EnableSimulatorPacket)packet;
+		string simCaps = null;
+            	GenericCheck(ref esp.SimulatorInfo.IP, ref esp.SimulatorInfo.Port, ref simCaps, false);
+            	return (Packet)esp;
+		}
+
+		// CheckCrossedRegion: check CrossedRegion packets
+		private Packet CheckCrossedRegion(Packet packet) {
+            	CrossedRegionPacket crp = (CrossedRegionPacket)packet;
+		string simCaps = Encoding.UTF8.GetString(crp.RegionData.SeedCapability).Replace(&quot;\0&quot;,&quot;&quot;);
+            	GenericCheck(ref crp.RegionData.SimIP, ref crp.RegionData.SimPort, ref simCaps, true);
+		crp.RegionData.SeedCapability = Encoding.UTF8.GetBytes(simCaps);
+            	return (Packet)crp;
+		}
+
+        // LogPacket: log a packet dump
+		private Packet LogPacket(Packet packet, string type) {
+			Log(type + &quot; packet:&quot;, true);
+			Log(packet, true);
+            return packet;
+		}
+
+		// LogIncomingMysteryPacket: log an incoming packet we're watching for development purposes
+		private Packet LogIncomingMysteryPacket(Packet packet) {
+			return LogPacket(packet, &quot;incoming mystery&quot;);
+		}
+
+		// LogOutgoingMysteryPacket: log an outgoing packet we're watching for development purposes
+		private Packet LogOutgoingMysteryPacket(Packet packet) {
+			return LogPacket(packet, &quot;outgoing mystery&quot;);
+		}
+	}
+
+	// XmlRpcRequestDelegate: specifies a delegate to be called for XML-RPC requests
+	public delegate void XmlRpcRequestDelegate(XmlRpcRequest request);
+
+	// XmlRpcResponseDelegate: specifies a delegate to be called for XML-RPC responses
+	public delegate void XmlRpcResponseDelegate(XmlRpcResponse response);
+
+	// PacketDelegate: specifies a delegate to be called when a packet passes through the proxy
+	public delegate Packet PacketDelegate(Packet packet, IPEndPoint endPoint);
+
+	// Direction: specifies whether a packet is going to the client (Incoming) or to a sim (Outgoing)
+	public enum Direction {
+		Incoming,
+		Outgoing
+	}
+}

Deleted: branches/aditi/applications/SLProxy/SLProxy.csproj
===================================================================
--- trunk/applications/SLProxy/SLProxy.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/SLProxy.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,106 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;ProjectType&gt;Local&lt;/ProjectType&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&lt;/ProjectGuid&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ApplicationIcon&gt;
-    &lt;/ApplicationIcon&gt;
-    &lt;AssemblyKeyContainerName&gt;
-    &lt;/AssemblyKeyContainerName&gt;
-    &lt;AssemblyName&gt;SLProxy&lt;/AssemblyName&gt;
-    &lt;AssemblyOriginatorKeyFile&gt;
-    &lt;/AssemblyOriginatorKeyFile&gt;
-    &lt;DefaultClientScript&gt;JScript&lt;/DefaultClientScript&gt;
-    &lt;DefaultHTMLPageLayout&gt;Grid&lt;/DefaultHTMLPageLayout&gt;
-    &lt;DefaultTargetSchema&gt;IE50&lt;/DefaultTargetSchema&gt;
-    &lt;DelaySign&gt;false&lt;/DelaySign&gt;
-    &lt;OutputType&gt;Library&lt;/OutputType&gt;
-    &lt;RootNamespace&gt;SLProxy&lt;/RootNamespace&gt;
-    &lt;RunPostBuildEvent&gt;OnBuildSuccess&lt;/RunPostBuildEvent&gt;
-    &lt;StartupObject&gt;
-    &lt;/StartupObject&gt;
-    &lt;FileUpgradeFlags&gt;
-    &lt;/FileUpgradeFlags&gt;
-    &lt;UpgradeBackupLocation&gt;
-    &lt;/UpgradeBackupLocation&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;..\bin\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;UseVSHostingProcess&gt;false&lt;/UseVSHostingProcess&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-    &lt;AllowUnsafeBlocks&gt;false&lt;/AllowUnsafeBlocks&gt;
-    &lt;BaseAddress&gt;285212672&lt;/BaseAddress&gt;
-    &lt;CheckForOverflowUnderflow&gt;false&lt;/CheckForOverflowUnderflow&gt;
-    &lt;ConfigurationOverrideFile&gt;
-    &lt;/ConfigurationOverrideFile&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;DocumentationFile&gt;
-    &lt;/DocumentationFile&gt;
-    &lt;DebugSymbols&gt;false&lt;/DebugSymbols&gt;
-    &lt;FileAlignment&gt;4096&lt;/FileAlignment&gt;
-    &lt;NoStdLib&gt;false&lt;/NoStdLib&gt;
-    &lt;NoWarn&gt;
-    &lt;/NoWarn&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;RegisterForComInterop&gt;false&lt;/RegisterForComInterop&gt;
-    &lt;RemoveIntegerChecks&gt;false&lt;/RemoveIntegerChecks&gt;
-    &lt;TreatWarningsAsErrors&gt;false&lt;/TreatWarningsAsErrors&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-    &lt;DebugType&gt;none&lt;/DebugType&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;System&quot;&gt;
-      &lt;Name&gt;System&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Data&quot;&gt;
-      &lt;Name&gt;System.Data&lt;/Name&gt;
-    &lt;/Reference&gt;
-    &lt;Reference Include=&quot;System.Xml&quot;&gt;
-      &lt;Name&gt;System.XML&lt;/Name&gt;
-    &lt;/Reference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;SLProxy.cs&quot;&gt;
-      &lt;SubType&gt;Code&lt;/SubType&gt;
-    &lt;/Compile&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;ProjectReference Include=&quot;..\..\libsecondlife-cs\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;PropertyGroup&gt;
-    &lt;PreBuildEvent&gt;
-    &lt;/PreBuildEvent&gt;
-    &lt;PostBuildEvent&gt;
-    &lt;/PostBuildEvent&gt;
-  &lt;/PropertyGroup&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SLProxy/SLProxy.csproj (from rev 775, trunk/applications/SLProxy/SLProxy.csproj)

Deleted: branches/aditi/applications/SLProxy/SLProxy.sln
===================================================================
--- trunk/applications/SLProxy/SLProxy.sln	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SLProxy/SLProxy.sln	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,49 +0,0 @@
-Microsoft Visual Studio Solution File, Format Version 9.00
-# Visual Studio 2005
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;SLProxy&quot;, &quot;SLProxy.csproj&quot;, &quot;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&quot;
-EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;Analyst&quot;, &quot;Analyst.csproj&quot;, &quot;{6222B134-AE5F-489A-8A77-423A721B7C62}&quot;
-EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;ChatConsole&quot;, &quot;ChatConsole.csproj&quot;, &quot;{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}&quot;
-EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife&quot;, &quot;..\libsecondlife-cs\libsecondlife.csproj&quot;, &quot;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&quot;
-EndProject
-Global
-	GlobalSection(SolutionConfigurationPlatforms) = preSolution
-		Debug|.NET 1.1 = Debug|.NET 1.1
-		Debug|Any CPU = Debug|Any CPU
-		Release|.NET 1.1 = Release|.NET 1.1
-		Release|Any CPU = Release|Any CPU
-	EndGlobalSection
-	GlobalSection(ProjectConfigurationPlatforms) = postSolution
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|Any CPU.Build.0 = Release|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|Any CPU.Build.0 = Release|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|Any CPU.Build.0 = Release|Any CPU
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|.NET 1.1.ActiveCfg = Debug|.NET 1.1
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|.NET 1.1.Build.0 = Debug|.NET 1.1
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|.NET 1.1.ActiveCfg = Release|.NET 1.1
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|.NET 1.1.Build.0 = Release|.NET 1.1
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|Any CPU.Build.0 = Release|Any CPU
-	EndGlobalSection
-	GlobalSection(SolutionProperties) = preSolution
-		HideSolutionNode = FALSE
-	EndGlobalSection
-EndGlobal

Copied: branches/aditi/applications/SLProxy/SLProxy.sln (from rev 775, trunk/applications/SLProxy/SLProxy.sln)

Copied: branches/aditi/applications/SecondGlance (from rev 775, trunk/applications/SecondGlance)

Copied: branches/aditi/applications/SecondGlance/Properties (from rev 775, trunk/applications/SecondGlance/Properties)

Deleted: branches/aditi/applications/SecondGlance/Properties/AssemblyInfo.cs
===================================================================
--- trunk/applications/SecondGlance/Properties/AssemblyInfo.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/Properties/AssemblyInfo.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,33 +0,0 @@
-&#65279;using System.Reflection;
-using System.Runtime.CompilerServices;
-using System.Runtime.InteropServices;
-
-// General Information about an assembly is controlled through the following 
-// set of attributes. Change these attribute values to modify the information
-// associated with an assembly.
-[assembly: AssemblyTitle(&quot;SecondGlance&quot;)]
-[assembly: AssemblyDescription(&quot;&quot;)]
-[assembly: AssemblyConfiguration(&quot;&quot;)]
-[assembly: AssemblyCompany(&quot;&quot;)]
-[assembly: AssemblyProduct(&quot;SecondGlance&quot;)]
-[assembly: AssemblyCopyright(&quot;Copyright &#169;  2006&quot;)]
-[assembly: AssemblyTrademark(&quot;&quot;)]
-[assembly: AssemblyCulture(&quot;&quot;)]
-
-// Setting ComVisible to false makes the types in this assembly not visible 
-// to COM components.  If you need to access a type in this assembly from 
-// COM, set the ComVisible attribute to true on that type.
-[assembly: ComVisible(false)]
-
-// The following GUID is for the ID of the typelib if this project is exposed to COM
-[assembly: Guid(&quot;02456c47-f074-4302-a3a3-01a719de9d20&quot;)]
-
-// Version information for an assembly consists of the following four values:
-//
-//      Major Version
-//      Minor Version 
-//      Build Number
-//      Revision
-//
-[assembly: AssemblyVersion(&quot;1.0.0.0&quot;)]
-[assembly: AssemblyFileVersion(&quot;1.0.0.0&quot;)]

Copied: branches/aditi/applications/SecondGlance/Properties/AssemblyInfo.cs (from rev 775, trunk/applications/SecondGlance/Properties/AssemblyInfo.cs)

Deleted: branches/aditi/applications/SecondGlance/Properties/Resources.Designer.cs
===================================================================
--- trunk/applications/SecondGlance/Properties/Resources.Designer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/Properties/Resources.Designer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,71 +0,0 @@
-&#65279;//------------------------------------------------------------------------------
-// &lt;auto-generated&gt;
-//     This code was generated by a tool.
-//     Runtime Version:2.0.50727.308
-//
-//     Changes to this file may cause incorrect behavior and will be lost if
-//     the code is regenerated.
-// &lt;/auto-generated&gt;
-//------------------------------------------------------------------------------
-
-namespace SecondGlance.Properties
-{
-
-
-    /// &lt;summary&gt;
-    ///   A strongly-typed resource class, for looking up localized strings, etc.
-    /// &lt;/summary&gt;
-    // This class was auto-generated by the StronglyTypedResourceBuilder
-    // class via a tool like ResGen or Visual Studio.
-    // To add or remove a member, edit your .ResX file then rerun ResGen
-    // with the /str option, or rebuild your VS project.
-    [global::System.CodeDom.Compiler.GeneratedCodeAttribute(&quot;System.Resources.Tools.StronglyTypedResourceBuilder&quot;, &quot;2.0.0.0&quot;)]
-    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
-    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
-    internal class Resources
-    {
-
-        private static global::System.Resources.ResourceManager resourceMan;
-
-        private static global::System.Globalization.CultureInfo resourceCulture;
-
-        [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute(&quot;Microsoft.Performance&quot;, &quot;CA1811:AvoidUncalledPrivateCode&quot;)]
-        internal Resources()
-        {
-        }
-
-        /// &lt;summary&gt;
-        ///   Returns the cached ResourceManager instance used by this class.
-        /// &lt;/summary&gt;
-        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
-        internal static global::System.Resources.ResourceManager ResourceManager
-        {
-            get
-            {
-                if ((resourceMan == null))
-                {
-                    global::System.Resources.ResourceManager temp = new global::System.Resources.ResourceManager(&quot;SecondGlance.Properties.Resources&quot;, typeof(Resources).Assembly);
-                    resourceMan = temp;
-                }
-                return resourceMan;
-            }
-        }
-
-        /// &lt;summary&gt;
-        ///   Overrides the current thread's CurrentUICulture property for all
-        ///   resource lookups using this strongly typed resource class.
-        /// &lt;/summary&gt;
-        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
-        internal static global::System.Globalization.CultureInfo Culture
-        {
-            get
-            {
-                return resourceCulture;
-            }
-            set
-            {
-                resourceCulture = value;
-            }
-        }
-    }
-}

Copied: branches/aditi/applications/SecondGlance/Properties/Resources.Designer.cs (from rev 775, trunk/applications/SecondGlance/Properties/Resources.Designer.cs)

Deleted: branches/aditi/applications/SecondGlance/Properties/Resources.resx
===================================================================
--- trunk/applications/SecondGlance/Properties/Resources.resx	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/Properties/Resources.resx	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,117 +0,0 @@
-&#65279;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
-&lt;root&gt;
-  &lt;!-- 
-    Microsoft ResX Schema 
-    
-    Version 2.0
-    
-    The primary goals of this format is to allow a simple XML format 
-    that is mostly human readable. The generation and parsing of the 
-    various data types are done through the TypeConverter classes 
-    associated with the data types.
-    
-    Example:
-    
-    ... ado.net/XML headers &amp; schema ...
-    &lt;resheader name=&quot;resmimetype&quot;&gt;text/microsoft-resx&lt;/resheader&gt;
-    &lt;resheader name=&quot;version&quot;&gt;2.0&lt;/resheader&gt;
-    &lt;resheader name=&quot;reader&quot;&gt;System.Resources.ResXResourceReader, System.Windows.Forms, ...&lt;/resheader&gt;
-    &lt;resheader name=&quot;writer&quot;&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, ...&lt;/resheader&gt;
-    &lt;data name=&quot;Name1&quot;&gt;&lt;value&gt;this is my long string&lt;/value&gt;&lt;comment&gt;this is a comment&lt;/comment&gt;&lt;/data&gt;
-    &lt;data name=&quot;Color1&quot; type=&quot;System.Drawing.Color, System.Drawing&quot;&gt;Blue&lt;/data&gt;
-    &lt;data name=&quot;Bitmap1&quot; mimetype=&quot;application/x-microsoft.net.object.binary.base64&quot;&gt;
-        &lt;value&gt;[base64 mime encoded serialized .NET Framework object]&lt;/value&gt;
-    &lt;/data&gt;
-    &lt;data name=&quot;Icon1&quot; type=&quot;System.Drawing.Icon, System.Drawing&quot; mimetype=&quot;application/x-microsoft.net.object.bytearray.base64&quot;&gt;
-        &lt;value&gt;[base64 mime encoded string representing a byte array form of the .NET Framework object]&lt;/value&gt;
-        &lt;comment&gt;This is a comment&lt;/comment&gt;
-    &lt;/data&gt;
-                
-    There are any number of &quot;resheader&quot; rows that contain simple 
-    name/value pairs.
-    
-    Each data row contains a name, and value. The row also contains a 
-    type or mimetype. Type corresponds to a .NET class that support 
-    text/value conversion through the TypeConverter architecture. 
-    Classes that don't support this are serialized and stored with the 
-    mimetype set.
-    
-    The mimetype is used for serialized objects, and tells the 
-    ResXResourceReader how to depersist the object. This is currently not 
-    extensible. For a given mimetype the value must be set accordingly:
-    
-    Note - application/x-microsoft.net.object.binary.base64 is the format 
-    that the ResXResourceWriter will generate, however the reader can 
-    read any of the formats listed below.
-    
-    mimetype: application/x-microsoft.net.object.binary.base64
-    value   : The object must be serialized with 
-            : System.Serialization.Formatters.Binary.BinaryFormatter
-            : and then encoded with base64 encoding.
-    
-    mimetype: application/x-microsoft.net.object.soap.base64
-    value   : The object must be serialized with 
-            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
-            : and then encoded with base64 encoding.
-
-    mimetype: application/x-microsoft.net.object.bytearray.base64
-    value   : The object must be serialized into a byte array 
-            : using a System.ComponentModel.TypeConverter
-            : and then encoded with base64 encoding.
-    --&gt;
-  &lt;xsd:schema id=&quot;root&quot; xmlns=&quot;&quot; xmlns:xsd=&quot;<A HREF="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</A>&quot; xmlns:msdata=&quot;urn:schemas-microsoft-com:xml-msdata&quot;&gt;
-    &lt;xsd:element name=&quot;root&quot; msdata:IsDataSet=&quot;true&quot;&gt;
-      &lt;xsd:complexType&gt;
-        &lt;xsd:choice maxOccurs=&quot;unbounded&quot;&gt;
-          &lt;xsd:element name=&quot;metadata&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;assembly&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:attribute name=&quot;alias&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;data&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-                &lt;xsd:element name=&quot;comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;2&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-              &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;3&quot; /&gt;
-              &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;4&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;resheader&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-        &lt;/xsd:choice&gt;
-      &lt;/xsd:complexType&gt;
-    &lt;/xsd:element&gt;
-  &lt;/xsd:schema&gt;
-  &lt;resheader name=&quot;resmimetype&quot;&gt;
-    &lt;value&gt;text/microsoft-resx&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;version&quot;&gt;
-    &lt;value&gt;2.0&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;reader&quot;&gt;
-    &lt;value&gt;System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;writer&quot;&gt;
-    &lt;value&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
-  &lt;/resheader&gt;
-&lt;/root&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SecondGlance/Properties/Resources.resx (from rev 775, trunk/applications/SecondGlance/Properties/Resources.resx)

Deleted: branches/aditi/applications/SecondGlance/Properties/Settings.Designer.cs
===================================================================
--- trunk/applications/SecondGlance/Properties/Settings.Designer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/Properties/Settings.Designer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,30 +0,0 @@
-&#65279;//------------------------------------------------------------------------------
-// &lt;auto-generated&gt;
-//     This code was generated by a tool.
-//     Runtime Version:2.0.50727.308
-//
-//     Changes to this file may cause incorrect behavior and will be lost if
-//     the code is regenerated.
-// &lt;/auto-generated&gt;
-//------------------------------------------------------------------------------
-
-namespace SecondGlance.Properties
-{
-
-
-    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
-    [global::System.CodeDom.Compiler.GeneratedCodeAttribute(&quot;Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator&quot;, &quot;8.0.0.0&quot;)]
-    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase
-    {
-
-        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));
-
-        public static Settings Default
-        {
-            get
-            {
-                return defaultInstance;
-            }
-        }
-    }
-}

Copied: branches/aditi/applications/SecondGlance/Properties/Settings.Designer.cs (from rev 775, trunk/applications/SecondGlance/Properties/Settings.Designer.cs)

Deleted: branches/aditi/applications/SecondGlance/Properties/Settings.settings
===================================================================
--- trunk/applications/SecondGlance/Properties/Settings.settings	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/Properties/Settings.settings	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,7 +0,0 @@
-&#65279;&lt;?xml version='1.0' encoding='utf-8'?&gt;
-&lt;SettingsFile xmlns=&quot;<A HREF="http://schemas.microsoft.com/VisualStudio/2004/01/settings">http://schemas.microsoft.com/VisualStudio/2004/01/settings</A>&quot; CurrentProfile=&quot;(Default)&quot;&gt;
-  &lt;Profiles&gt;
-    &lt;Profile Name=&quot;(Default)&quot; /&gt;
-  &lt;/Profiles&gt;
-  &lt;Settings /&gt;
-&lt;/SettingsFile&gt;

Copied: branches/aditi/applications/SecondGlance/Properties/Settings.settings (from rev 775, trunk/applications/SecondGlance/Properties/Settings.settings)

Deleted: branches/aditi/applications/SecondGlance/SecondGlance.cs
===================================================================
--- trunk/applications/SecondGlance/SecondGlance.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/SecondGlance.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,20 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Windows.Forms;
-
-namespace SecondGlance
-{
-    static class SecondGlance
-    {
-        /// &lt;summary&gt;
-        /// The main entry point for the application.
-        /// &lt;/summary&gt;
-        [STAThread]
-        static void Main()
-        {
-            Application.EnableVisualStyles();
-            Application.SetCompatibleTextRenderingDefault(false);
-            Application.Run(new frmSecondGlance());
-        }
-    }
-}
\ No newline at end of file

Copied: branches/aditi/applications/SecondGlance/SecondGlance.cs (from rev 775, trunk/applications/SecondGlance/SecondGlance.cs)

Deleted: branches/aditi/applications/SecondGlance/SecondGlance.csproj
===================================================================
--- trunk/applications/SecondGlance/SecondGlance.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/SecondGlance.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,87 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{D72C92D1-559A-48A7-93F5-99F4E99F3F98}&lt;/ProjectGuid&gt;
-    &lt;OutputType&gt;WinExe&lt;/OutputType&gt;
-    &lt;AppDesignerFolder&gt;Properties&lt;/AppDesignerFolder&gt;
-    &lt;RootNamespace&gt;SecondGlance&lt;/RootNamespace&gt;
-    &lt;AssemblyName&gt;SecondGlance&lt;/AssemblyName&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;OutputPath&gt;bin\Debug\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;DebugType&gt;pdbonly&lt;/DebugType&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;System&quot; /&gt;
-    &lt;Reference Include=&quot;System.Data&quot; /&gt;
-    &lt;Reference Include=&quot;System.Drawing&quot; /&gt;
-    &lt;Reference Include=&quot;System.Windows.Forms&quot; /&gt;
-    &lt;Reference Include=&quot;System.Xml&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;frmSecondGlance.cs&quot;&gt;
-      &lt;SubType&gt;Form&lt;/SubType&gt;
-    &lt;/Compile&gt;
-    &lt;Compile Include=&quot;frmSecondGlance.Designer.cs&quot;&gt;
-      &lt;DependentUpon&gt;frmSecondGlance.cs&lt;/DependentUpon&gt;
-    &lt;/Compile&gt;
-    &lt;Compile Include=&quot;SecondGlance.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Properties\AssemblyInfo.cs&quot; /&gt;
-    &lt;EmbeddedResource Include=&quot;frmSecondGlance.resx&quot;&gt;
-      &lt;SubType&gt;Designer&lt;/SubType&gt;
-      &lt;DependentUpon&gt;frmSecondGlance.cs&lt;/DependentUpon&gt;
-    &lt;/EmbeddedResource&gt;
-    &lt;EmbeddedResource Include=&quot;Properties\Resources.resx&quot;&gt;
-      &lt;Generator&gt;ResXFileCodeGenerator&lt;/Generator&gt;
-      &lt;LastGenOutput&gt;Resources.Designer.cs&lt;/LastGenOutput&gt;
-      &lt;SubType&gt;Designer&lt;/SubType&gt;
-    &lt;/EmbeddedResource&gt;
-    &lt;Compile Include=&quot;Properties\Resources.Designer.cs&quot;&gt;
-      &lt;AutoGen&gt;True&lt;/AutoGen&gt;
-      &lt;DependentUpon&gt;Resources.resx&lt;/DependentUpon&gt;
-    &lt;/Compile&gt;
-    &lt;None Include=&quot;Properties\Settings.settings&quot;&gt;
-      &lt;Generator&gt;SettingsSingleFileGenerator&lt;/Generator&gt;
-      &lt;LastGenOutput&gt;Settings.Designer.cs&lt;/LastGenOutput&gt;
-    &lt;/None&gt;
-    &lt;Compile Include=&quot;Properties\Settings.Designer.cs&quot;&gt;
-      &lt;AutoGen&gt;True&lt;/AutoGen&gt;
-      &lt;DependentUpon&gt;Settings.settings&lt;/DependentUpon&gt;
-      &lt;DesignTimeSharedInput&gt;True&lt;/DesignTimeSharedInput&gt;
-    &lt;/Compile&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;ProjectReference Include=&quot;..\..\libsecondlife-cs\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-    &lt;ProjectReference Include=&quot;..\SLProxy\SLProxy.csproj&quot;&gt;
-      &lt;Project&gt;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&lt;/Project&gt;
-      &lt;Name&gt;SLProxy&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
-       Other similar extension points exist, see Microsoft.Common.targets.
-  &lt;Target Name=&quot;BeforeBuild&quot;&gt;
-  &lt;/Target&gt;
-  &lt;Target Name=&quot;AfterBuild&quot;&gt;
-  &lt;/Target&gt;
-  --&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SecondGlance/SecondGlance.csproj (from rev 775, trunk/applications/SecondGlance/SecondGlance.csproj)

Deleted: branches/aditi/applications/SecondGlance/frmSecondGlance.Designer.cs
===================================================================
--- trunk/applications/SecondGlance/frmSecondGlance.Designer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/frmSecondGlance.Designer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,232 +0,0 @@
-namespace SecondGlance
-{
-    partial class frmSecondGlance
-    {
-        /// &lt;summary&gt;
-        /// Required designer variable.
-        /// &lt;/summary&gt;
-        private System.ComponentModel.IContainer components = null;
-
-        /// &lt;summary&gt;
-        /// Clean up any resources being used.
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;disposing&quot;&gt;true if managed resources should be disposed; otherwise, false.&lt;/param&gt;
-        protected override void Dispose(bool disposing)
-        {
-            if (disposing &amp;&amp; (components != null))
-            {
-                components.Dispose();
-            }
-            base.Dispose(disposing);
-        }
-
-        #region Windows Form Designer generated code
-
-        /// &lt;summary&gt;
-        /// Required method for Designer support - do not modify
-        /// the contents of this method with the code editor.
-        /// &lt;/summary&gt;
-        private void InitializeComponent()
-        {
-            this.panel1 = new System.Windows.Forms.Panel();
-            this.splitContainer1 = new System.Windows.Forms.SplitContainer();
-            this.menuStrip1 = new System.Windows.Forms.MenuStrip();
-            this.fileToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.newToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.openToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.toolStripMenuItem1 = new System.Windows.Forms.ToolStripSeparator();
-            this.saveToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.toolStripMenuItem2 = new System.Windows.Forms.ToolStripSeparator();
-            this.exitToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.aboutToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
-            this.cboToLog = new System.Windows.Forms.ComboBox();
-            this.cmdAddLogger = new System.Windows.Forms.Button();
-            this.cmdDontLog = new System.Windows.Forms.Button();
-            this.cboLogged = new System.Windows.Forms.ComboBox();
-            this.lstPackets = new System.Windows.Forms.ListBox();
-            this.panel1.SuspendLayout();
-            this.splitContainer1.Panel1.SuspendLayout();
-            this.splitContainer1.SuspendLayout();
-            this.menuStrip1.SuspendLayout();
-            this.SuspendLayout();
-            // 
-            // panel1
-            // 
-            this.panel1.Controls.Add(this.splitContainer1);
-            this.panel1.Location = new System.Drawing.Point(29, 100);
-            this.panel1.Name = &quot;panel1&quot;;
-            this.panel1.Size = new System.Drawing.Size(664, 333);
-            this.panel1.TabIndex = 0;
-            // 
-            // splitContainer1
-            // 
-            this.splitContainer1.Dock = System.Windows.Forms.DockStyle.Fill;
-            this.splitContainer1.Location = new System.Drawing.Point(0, 0);
-            this.splitContainer1.Name = &quot;splitContainer1&quot;;
-            // 
-            // splitContainer1.Panel1
-            // 
-            this.splitContainer1.Panel1.Controls.Add(this.lstPackets);
-            this.splitContainer1.Size = new System.Drawing.Size(664, 333);
-            this.splitContainer1.SplitterDistance = 294;
-            this.splitContainer1.TabIndex = 0;
-            // 
-            // menuStrip1
-            // 
-            this.menuStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
-            this.fileToolStripMenuItem,
-            this.aboutToolStripMenuItem});
-            this.menuStrip1.Location = new System.Drawing.Point(0, 0);
-            this.menuStrip1.Name = &quot;menuStrip1&quot;;
-            this.menuStrip1.Size = new System.Drawing.Size(705, 24);
-            this.menuStrip1.TabIndex = 1;
-            this.menuStrip1.Text = &quot;menuStrip1&quot;;
-            // 
-            // fileToolStripMenuItem
-            // 
-            this.fileToolStripMenuItem.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
-            this.newToolStripMenuItem,
-            this.openToolStripMenuItem,
-            this.toolStripMenuItem1,
-            this.saveToolStripMenuItem,
-            this.toolStripMenuItem2,
-            this.exitToolStripMenuItem});
-            this.fileToolStripMenuItem.Name = &quot;fileToolStripMenuItem&quot;;
-            this.fileToolStripMenuItem.Size = new System.Drawing.Size(37, 20);
-            this.fileToolStripMenuItem.Text = &quot;File&quot;;
-            // 
-            // newToolStripMenuItem
-            // 
-            this.newToolStripMenuItem.Name = &quot;newToolStripMenuItem&quot;;
-            this.newToolStripMenuItem.ShortcutKeys = ((System.Windows.Forms.Keys)((System.Windows.Forms.Keys.Control | System.Windows.Forms.Keys.N)));
-            this.newToolStripMenuItem.Size = new System.Drawing.Size(188, 22);
-            this.newToolStripMenuItem.Text = &quot;New Session&quot;;
-            // 
-            // openToolStripMenuItem
-            // 
-            this.openToolStripMenuItem.Name = &quot;openToolStripMenuItem&quot;;
-            this.openToolStripMenuItem.ShortcutKeys = ((System.Windows.Forms.Keys)((System.Windows.Forms.Keys.Control | System.Windows.Forms.Keys.O)));
-            this.openToolStripMenuItem.Size = new System.Drawing.Size(188, 22);
-            this.openToolStripMenuItem.Text = &quot;Open Session&quot;;
-            // 
-            // toolStripMenuItem1
-            // 
-            this.toolStripMenuItem1.Name = &quot;toolStripMenuItem1&quot;;
-            this.toolStripMenuItem1.Size = new System.Drawing.Size(185, 6);
-            // 
-            // saveToolStripMenuItem
-            // 
-            this.saveToolStripMenuItem.Name = &quot;saveToolStripMenuItem&quot;;
-            this.saveToolStripMenuItem.ShortcutKeys = ((System.Windows.Forms.Keys)((System.Windows.Forms.Keys.Control | System.Windows.Forms.Keys.S)));
-            this.saveToolStripMenuItem.Size = new System.Drawing.Size(188, 22);
-            this.saveToolStripMenuItem.Text = &quot;Save Session&quot;;
-            // 
-            // toolStripMenuItem2
-            // 
-            this.toolStripMenuItem2.Name = &quot;toolStripMenuItem2&quot;;
-            this.toolStripMenuItem2.Size = new System.Drawing.Size(185, 6);
-            // 
-            // exitToolStripMenuItem
-            // 
-            this.exitToolStripMenuItem.Name = &quot;exitToolStripMenuItem&quot;;
-            this.exitToolStripMenuItem.Size = new System.Drawing.Size(188, 22);
-            this.exitToolStripMenuItem.Text = &quot;Exit&quot;;
-            // 
-            // aboutToolStripMenuItem
-            // 
-            this.aboutToolStripMenuItem.Name = &quot;aboutToolStripMenuItem&quot;;
-            this.aboutToolStripMenuItem.Size = new System.Drawing.Size(52, 20);
-            this.aboutToolStripMenuItem.Text = &quot;About&quot;;
-            // 
-            // cboToLog
-            // 
-            this.cboToLog.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
-            this.cboToLog.FormattingEnabled = true;
-            this.cboToLog.Location = new System.Drawing.Point(12, 27);
-            this.cboToLog.Name = &quot;cboToLog&quot;;
-            this.cboToLog.Size = new System.Drawing.Size(150, 21);
-            this.cboToLog.TabIndex = 4;
-            // 
-            // cmdAddLogger
-            // 
-            this.cmdAddLogger.Location = new System.Drawing.Point(168, 25);
-            this.cmdAddLogger.Name = &quot;cmdAddLogger&quot;;
-            this.cmdAddLogger.Size = new System.Drawing.Size(75, 23);
-            this.cmdAddLogger.TabIndex = 5;
-            this.cmdAddLogger.Text = &quot;Log&quot;;
-            this.cmdAddLogger.UseVisualStyleBackColor = true;
-            this.cmdAddLogger.Click += new System.EventHandler(this.cmdAddLogger_Click);
-            // 
-            // cmdDontLog
-            // 
-            this.cmdDontLog.Location = new System.Drawing.Point(430, 25);
-            this.cmdDontLog.Name = &quot;cmdDontLog&quot;;
-            this.cmdDontLog.Size = new System.Drawing.Size(75, 23);
-            this.cmdDontLog.TabIndex = 7;
-            this.cmdDontLog.Text = &quot;Don\'t Log&quot;;
-            this.cmdDontLog.UseVisualStyleBackColor = true;
-            this.cmdDontLog.Click += new System.EventHandler(this.cmdDontLog_Click);
-            // 
-            // cboLogged
-            // 
-            this.cboLogged.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
-            this.cboLogged.FormattingEnabled = true;
-            this.cboLogged.Location = new System.Drawing.Point(274, 27);
-            this.cboLogged.Name = &quot;cboLogged&quot;;
-            this.cboLogged.Size = new System.Drawing.Size(150, 21);
-            this.cboLogged.TabIndex = 6;
-            // 
-            // lstPackets
-            // 
-            this.lstPackets.FormattingEnabled = true;
-            this.lstPackets.Location = new System.Drawing.Point(26, 40);
-            this.lstPackets.Name = &quot;lstPackets&quot;;
-            this.lstPackets.Size = new System.Drawing.Size(243, 277);
-            this.lstPackets.TabIndex = 1;
-            // 
-            // frmSecondGlance
-            // 
-            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
-            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
-            this.ClientSize = new System.Drawing.Size(705, 498);
-            this.Controls.Add(this.cmdDontLog);
-            this.Controls.Add(this.cboLogged);
-            this.Controls.Add(this.cmdAddLogger);
-            this.Controls.Add(this.cboToLog);
-            this.Controls.Add(this.panel1);
-            this.Controls.Add(this.menuStrip1);
-            this.MainMenuStrip = this.menuStrip1;
-            this.Name = &quot;frmSecondGlance&quot;;
-            this.Text = &quot;Second Glance&quot;;
-            this.FormClosing += new System.Windows.Forms.FormClosingEventHandler(this.frmSecondGlance_FormClosing);
-            this.panel1.ResumeLayout(false);
-            this.splitContainer1.Panel1.ResumeLayout(false);
-            this.splitContainer1.ResumeLayout(false);
-            this.menuStrip1.ResumeLayout(false);
-            this.menuStrip1.PerformLayout();
-            this.ResumeLayout(false);
-            this.PerformLayout();
-
-        }
-
-        #endregion
-
-        private System.Windows.Forms.Panel panel1;
-        private System.Windows.Forms.SplitContainer splitContainer1;
-        private System.Windows.Forms.MenuStrip menuStrip1;
-        private System.Windows.Forms.ToolStripMenuItem fileToolStripMenuItem;
-        private System.Windows.Forms.ToolStripMenuItem newToolStripMenuItem;
-        private System.Windows.Forms.ToolStripMenuItem openToolStripMenuItem;
-        private System.Windows.Forms.ToolStripSeparator toolStripMenuItem1;
-        private System.Windows.Forms.ToolStripMenuItem saveToolStripMenuItem;
-        private System.Windows.Forms.ToolStripSeparator toolStripMenuItem2;
-        private System.Windows.Forms.ToolStripMenuItem exitToolStripMenuItem;
-        private System.Windows.Forms.ToolStripMenuItem aboutToolStripMenuItem;
-        private System.Windows.Forms.ComboBox cboToLog;
-        private System.Windows.Forms.Button cmdAddLogger;
-        private System.Windows.Forms.Button cmdDontLog;
-        private System.Windows.Forms.ComboBox cboLogged;
-        private System.Windows.Forms.ListBox lstPackets;
-    }
-}
-

Copied: branches/aditi/applications/SecondGlance/frmSecondGlance.Designer.cs (from rev 775, trunk/applications/SecondGlance/frmSecondGlance.Designer.cs)

Deleted: branches/aditi/applications/SecondGlance/frmSecondGlance.cs
===================================================================
--- trunk/applications/SecondGlance/frmSecondGlance.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/frmSecondGlance.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,154 +0,0 @@
-/*
- *
- * Copyright (c) 2007 John Hurliman
- * All rights reserved.
- *
- * - Redistribution and use in source and binary forms, with or without 
- *   modification, are permitted provided that the following conditions are met:
- *
- * - Redistributions of source code must retain the above copyright notice, this
- *   list of conditions and the following disclaimer.
- * - Neither the name of the Second Life Reverse Engineering Team nor the names 
- *   of its contributors may be used to endorse or promote products derived from
- *   this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
- * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
- * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
- * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
- * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
- * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
- * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
- * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
- * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
- * POSSIBILITY OF SUCH DAMAGE.
- */
-
-using System;
-using System.Collections.Generic;
-using System.ComponentModel;
-using System.Data;
-using System.Drawing;
-using System.Net;
-using System.Windows.Forms;
-using libsecondlife;
-using libsecondlife.Packets;
-using SLProxy;
-
-namespace SecondGlance
-{
-    public partial class frmSecondGlance : Form
-    {
-        private Proxy Proxy;
-        private Queue&lt;LoggedPacket&gt; Inbox = new Queue&lt;LoggedPacket&gt;();
-        private System.Timers.Timer DisplayTimer = new System.Timers.Timer(200);
-
-        public frmSecondGlance()
-        {
-            InitializeComponent();
-
-            PacketType[] types = (PacketType[])Enum.GetValues(typeof(PacketType));
-
-            // Fill up the &quot;To Log&quot; combo box with options
-            foreach (PacketType type in types)
-            {
-                if (type != PacketType.Default) cboToLog.Items.Add(type);
-            }
-
-            // Set the default selection to the first entry
-            cboToLog.SelectedIndex = 0;
-
-            // Setup the proxy
-            ProxyConfig proxyConfig = new ProxyConfig(&quot;Second Glance&quot;, &quot;John Hurliman &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">jhurliman at wsu.edu</A>&gt;&quot;, 
-                new string[0]);
-            Proxy = new Proxy(proxyConfig);
-
-            Proxy.Start();
-
-            // Start the timer that moves packets from the queue and displays them
-            DisplayTimer.Elapsed += new System.Timers.ElapsedEventHandler(DisplayTimer_Elapsed);
-            DisplayTimer.Start();
-        }
-
-        void DisplayTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
-        {
-            this.BeginInvoke(new MethodInvoker(UpdateDisplay));
-        }
-
-        void UpdateDisplay()
-        {
-            lock (Inbox)
-            {
-                while (Inbox.Count &gt; 0)
-                {
-                    lstPackets.Items.Add(Inbox.Dequeue());
-                }
-            }
-        }
-
-        private void frmSecondGlance_FormClosing(object sender, FormClosingEventArgs e)
-        {
-            DisplayTimer.Stop();
-            Proxy.Stop();
-        }
-
-        private void cmdAddLogger_Click(object sender, EventArgs e)
-        {
-            if (!cboLogged.Items.Contains(cboToLog.SelectedItem))
-            {
-                PacketType type = (PacketType)cboToLog.SelectedItem;
-
-                cboLogged.Items.Add(type);
-
-                Proxy.AddDelegate(type, Direction.Incoming, new PacketDelegate(IncomingPacketHandler));
-                Proxy.AddDelegate(type, Direction.Outgoing, new PacketDelegate(OutgoingPacketHandler));
-            }
-        }
-
-        private void cmdDontLog_Click(object sender, EventArgs e)
-        {
-            ;
-        }
-
-        private Packet IncomingPacketHandler(Packet packet, IPEndPoint sim)
-        {
-            return PacketHandler(packet, sim, Direction.Incoming);
-        }
-
-        private Packet OutgoingPacketHandler(Packet packet, IPEndPoint sim)
-        {
-            return PacketHandler(packet, sim, Direction.Outgoing);
-        }
-
-        private Packet PacketHandler(Packet packet, IPEndPoint sim, Direction direction)
-        {
-            LoggedPacket logged = new LoggedPacket();
-            logged.Packet = packet;
-            logged.Sim = sim;
-            logged.Direction = direction;
-
-            lock (Inbox)
-                Inbox.Enqueue(logged);
-
-            // TODO: Packet modifications
-
-            return packet;
-        }
-    }
-
-    public class LoggedPacket
-    {
-        public Packet Packet;
-        public IPEndPoint Sim;
-        public Direction Direction;
-
-        public override string ToString()
-        {
-            string text = (Direction == Direction.Incoming) ? &quot;&lt;-- &quot; : &quot;--&gt; &quot;;
-            text += Sim.ToString() + &quot; &quot; + Packet.Type.ToString();
-
-            return text;
-        }
-    }
-}

Copied: branches/aditi/applications/SecondGlance/frmSecondGlance.cs (from rev 775, trunk/applications/SecondGlance/frmSecondGlance.cs)

Deleted: branches/aditi/applications/SecondGlance/frmSecondGlance.resx
===================================================================
--- trunk/applications/SecondGlance/frmSecondGlance.resx	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/applications/SecondGlance/frmSecondGlance.resx	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,123 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
-&lt;root&gt;
-  &lt;!-- 
-    Microsoft ResX Schema 
-    
-    Version 2.0
-    
-    The primary goals of this format is to allow a simple XML format 
-    that is mostly human readable. The generation and parsing of the 
-    various data types are done through the TypeConverter classes 
-    associated with the data types.
-    
-    Example:
-    
-    ... ado.net/XML headers &amp; schema ...
-    &lt;resheader name=&quot;resmimetype&quot;&gt;text/microsoft-resx&lt;/resheader&gt;
-    &lt;resheader name=&quot;version&quot;&gt;2.0&lt;/resheader&gt;
-    &lt;resheader name=&quot;reader&quot;&gt;System.Resources.ResXResourceReader, System.Windows.Forms, ...&lt;/resheader&gt;
-    &lt;resheader name=&quot;writer&quot;&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, ...&lt;/resheader&gt;
-    &lt;data name=&quot;Name1&quot;&gt;&lt;value&gt;this is my long string&lt;/value&gt;&lt;comment&gt;this is a comment&lt;/comment&gt;&lt;/data&gt;
-    &lt;data name=&quot;Color1&quot; type=&quot;System.Drawing.Color, System.Drawing&quot;&gt;Blue&lt;/data&gt;
-    &lt;data name=&quot;Bitmap1&quot; mimetype=&quot;application/x-microsoft.net.object.binary.base64&quot;&gt;
-        &lt;value&gt;[base64 mime encoded serialized .NET Framework object]&lt;/value&gt;
-    &lt;/data&gt;
-    &lt;data name=&quot;Icon1&quot; type=&quot;System.Drawing.Icon, System.Drawing&quot; mimetype=&quot;application/x-microsoft.net.object.bytearray.base64&quot;&gt;
-        &lt;value&gt;[base64 mime encoded string representing a byte array form of the .NET Framework object]&lt;/value&gt;
-        &lt;comment&gt;This is a comment&lt;/comment&gt;
-    &lt;/data&gt;
-                
-    There are any number of &quot;resheader&quot; rows that contain simple 
-    name/value pairs.
-    
-    Each data row contains a name, and value. The row also contains a 
-    type or mimetype. Type corresponds to a .NET class that support 
-    text/value conversion through the TypeConverter architecture. 
-    Classes that don't support this are serialized and stored with the 
-    mimetype set.
-    
-    The mimetype is used for serialized objects, and tells the 
-    ResXResourceReader how to depersist the object. This is currently not 
-    extensible. For a given mimetype the value must be set accordingly:
-    
-    Note - application/x-microsoft.net.object.binary.base64 is the format 
-    that the ResXResourceWriter will generate, however the reader can 
-    read any of the formats listed below.
-    
-    mimetype: application/x-microsoft.net.object.binary.base64
-    value   : The object must be serialized with 
-            : System.Runtime.Serialization.Formatters.Binary.BinaryFormatter
-            : and then encoded with base64 encoding.
-    
-    mimetype: application/x-microsoft.net.object.soap.base64
-    value   : The object must be serialized with 
-            : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
-            : and then encoded with base64 encoding.
-
-    mimetype: application/x-microsoft.net.object.bytearray.base64
-    value   : The object must be serialized into a byte array 
-            : using a System.ComponentModel.TypeConverter
-            : and then encoded with base64 encoding.
-    --&gt;
-  &lt;xsd:schema id=&quot;root&quot; xmlns=&quot;&quot; xmlns:xsd=&quot;<A HREF="http://www.w3.org/2001/XMLSchema">http://www.w3.org/2001/XMLSchema</A>&quot; xmlns:msdata=&quot;urn:schemas-microsoft-com:xml-msdata&quot;&gt;
-    &lt;xsd:import namespace=&quot;<A HREF="http://www.w3.org/XML/1998/namespace">http://www.w3.org/XML/1998/namespace</A>&quot; /&gt;
-    &lt;xsd:element name=&quot;root&quot; msdata:IsDataSet=&quot;true&quot;&gt;
-      &lt;xsd:complexType&gt;
-        &lt;xsd:choice maxOccurs=&quot;unbounded&quot;&gt;
-          &lt;xsd:element name=&quot;metadata&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; use=&quot;required&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute ref=&quot;xml:space&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;assembly&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:attribute name=&quot;alias&quot; type=&quot;xsd:string&quot; /&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;data&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-                &lt;xsd:element name=&quot;comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;2&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-              &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;3&quot; /&gt;
-              &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;4&quot; /&gt;
-              &lt;xsd:attribute ref=&quot;xml:space&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-          &lt;xsd:element name=&quot;resheader&quot;&gt;
-            &lt;xsd:complexType&gt;
-              &lt;xsd:sequence&gt;
-                &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
-              &lt;/xsd:sequence&gt;
-              &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; /&gt;
-            &lt;/xsd:complexType&gt;
-          &lt;/xsd:element&gt;
-        &lt;/xsd:choice&gt;
-      &lt;/xsd:complexType&gt;
-    &lt;/xsd:element&gt;
-  &lt;/xsd:schema&gt;
-  &lt;resheader name=&quot;resmimetype&quot;&gt;
-    &lt;value&gt;text/microsoft-resx&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;version&quot;&gt;
-    &lt;value&gt;2.0&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;reader&quot;&gt;
-    &lt;value&gt;System.Resources.ResXResourceReader, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;resheader name=&quot;writer&quot;&gt;
-    &lt;value&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
-  &lt;/resheader&gt;
-  &lt;metadata name=&quot;menuStrip1.TrayLocation&quot; type=&quot;System.Drawing.Point, System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot;&gt;
-    &lt;value&gt;17, 17&lt;/value&gt;
-  &lt;/metadata&gt;
-&lt;/root&gt;
\ No newline at end of file

Copied: branches/aditi/applications/SecondGlance/frmSecondGlance.resx (from rev 775, trunk/applications/SecondGlance/frmSecondGlance.resx)

Copied: branches/aditi/libsecondlife-cs/AssetSystem/AppearanceManager.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/AppearanceManager.cs)

Modified: branches/aditi/libsecondlife-cs/AssetSystem/Asset.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/Asset.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/Asset.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -36,7 +36,9 @@
 	public class Asset
 	{
 		public const sbyte ASSET_TYPE_NOTECARD = 7;
-		public const sbyte ASSET_TYPE_IMAGE    = 0;
+        public const sbyte ASSET_TYPE_IMAGE    = 0;
+        public const sbyte ASSET_TYPE_WEARABLE_BODY = 13;
+        public const sbyte ASSET_TYPE_WEARABLE_CLOTHING = 5;
 
 		public LLUUID AssetID;
 
@@ -44,15 +46,14 @@
 		public bool Tempfile;
 
 
-		private byte[] assetdata;
-		public byte[] AssetData
-		{
-			get { return assetdata; }
-			set
-			{
-				assetdata = value;
-			}
-		}
+		internal byte[] _AssetData;
+        public byte[] AssetData
+        {
+            get
+            {
+                return _AssetData;
+            }
+        }
 
 
         /// &lt;summary&gt;
@@ -66,7 +67,7 @@
 			AssetID		= assetID;
 			Type		= (sbyte)type;
 			Tempfile	= tempfile;
-			AssetData	= assetData;
+			_AssetData	= assetData;
 		}
 
         /// &lt;summary&gt;
@@ -79,7 +80,7 @@
 			AssetID		= assetID;
 			Type		= (sbyte)type;
 			Tempfile	= false;
-			AssetData	= assetData;
+			_AssetData	= assetData;
 		}
 
         /// &lt;summary&gt;
@@ -87,7 +88,12 @@
         /// &lt;/summary&gt;
 		public string AssetDataToString()
 		{
-            return Helpers.FieldToString((byte[])AssetData);
+            return Helpers.FieldToString((byte[])_AssetData);
 		}
+
+        public virtual void SetAssetData(byte[] data)
+        {
+            _AssetData = data;
+        }
 	}
 }

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetImage.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetImage.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetImage.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -39,7 +39,7 @@
 		{
 			get
 			{
-				return base.AssetData;
+				return AssetData;
 			}
 		}
 

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -43,8 +43,6 @@
 	/// &lt;/summary&gt;
 	public class AssetManager
 	{
-
-
 		public const int SINK_FEE_IMAGE = 1;
 
 		private SecondLife slClient;
@@ -59,6 +57,10 @@
 		{
 			slClient = client;
 
+            // Need to know when we're Connected/Disconnected to clear state
+            slClient.Network.OnDisconnected += new NetworkManager.DisconnectCallback(Network_OnDisconnected);
+            slClient.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+
 			// Used to upload small assets, or as an initial start packet for large transfers
             slClient.Network.RegisterCallback(PacketType.AssetUploadComplete, new NetworkManager.PacketCallback(AssetUploadCompleteCallbackHandler));
 			// Transfer Packets for downloading large assets
@@ -69,9 +71,24 @@
             slClient.Network.RegisterCallback(PacketType.RequestXfer, new NetworkManager.PacketCallback(RequestXferCallbackHandler));
 		}
 
+        void Network_OnConnected(object sender)
+        {
+            ClearState();
+        }
 
+        void Network_OnDisconnected(NetworkManager.DisconnectType reason, string message)
+        {
+            ClearState();
+        }
+
+        private void ClearState()
+        {
+            htDownloadRequests.Clear();
+            curUploadRequest = null;
+        }
+
         /// &lt;summary&gt;
-        /// Handle the appropriate sink fee assoiacted with an asset upload
+        /// Handle the appropriate sink fee associated with an asset upload
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;sinkType&quot;&gt;&lt;/param&gt;
         public void SinkFee(int sinkType)
@@ -79,7 +96,7 @@
 			switch( sinkType )
 			{
 				case SINK_FEE_IMAGE:
-					slClient.Self.GiveMoney( LLUUID.Zero, 10, &quot;Image Upload&quot; );
+					slClient.Self.GiveMoney( LLUUID.Zero, slClient.Settings.UPLOAD_COST, &quot;Image Upload&quot; );
 					break;
 				default:
 					throw new Exception(&quot;AssetManager: Unknown sinktype (&quot; + sinkType + &quot;)&quot;);
@@ -100,12 +117,12 @@
 
             try
             {
-                curUploadRequest = new AssetRequestUpload(slClient, LLUUID.GenerateUUID(), asset);
+                curUploadRequest = new AssetRequestUpload(slClient, LLUUID.Random(), asset);
 
                 LLUUID assetID = curUploadRequest.DoUpload();
                 if (asset.Type == Asset.ASSET_TYPE_IMAGE)
                 {
-                    //SinkFee(SINK_FEE_IMAGE);
+                    SinkFee(SINK_FEE_IMAGE);
                 }
                 return assetID;
             }
@@ -121,7 +138,7 @@
         /// &lt;param name=&quot;item&quot;&gt;&lt;/param&gt;
 		public void GetInventoryAsset( InventoryItem item )
 		{
-			LLUUID TransferID = LLUUID.GenerateUUID();
+			LLUUID TransferID = LLUUID.Random();
 
             AssetRequestDownload request = new AssetRequestDownload(TransferID);
             request.Size = int.MaxValue; // Number of bytes expected
@@ -130,11 +147,24 @@
 
             htDownloadRequests[TransferID] = request;
 
-			Packet packet = AssetPacketHelpers.TransferRequest(slClient.Network.SessionID, slClient.Network.AgentID, TransferID, item );
-			slClient.Network.SendPacket(packet);
+            // prep packet based on asset type
+            Packet packet;
+            switch (item.Type)
+            {
+                case 5:  //Shirt
+                case 13: //Bodyshape
+                    packet = AssetPacketHelpers.TransferRequestDirect(slClient.Network.SessionID, slClient.Network.AgentID, TransferID, item.AssetID, item.Type);
+                    break;
+                default:
+			        packet = AssetPacketHelpers.TransferRequest(slClient.Network.SessionID, slClient.Network.AgentID, TransferID, item );
+                    break;
+            }
 
+            // Send packet
+            slClient.Network.SendPacket(packet);
+
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             request.Completed.WaitOne();
@@ -148,7 +178,7 @@
         /// &lt;param name=&quot;asset&quot;&gt;&lt;/param&gt;
         public void GetInventoryAsset(Asset asset)
 		{
-			LLUUID TransferID = LLUUID.GenerateUUID();
+			LLUUID TransferID = LLUUID.Random();
 
             AssetRequestDownload request = new AssetRequestDownload(TransferID);
             request.Size = int.MaxValue; // Number of bytes expected
@@ -157,16 +187,16 @@
 
             htDownloadRequests[TransferID] = request;
 
-			Packet packet = AssetPacketHelpers.TransferRequest4BodyShape(slClient.Network.SessionID, slClient.Network.AgentID, TransferID, asset );
+            Packet packet = AssetPacketHelpers.TransferRequestDirect(slClient.Network.SessionID, slClient.Network.AgentID, TransferID, asset.AssetID, asset.Type);
 			slClient.Network.SendPacket(packet);
 
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             request.Completed.WaitOne();
 
-            asset.AssetData = request.AssetData;
+            asset.SetAssetData(request.AssetData);
             
 		}
 
@@ -174,7 +204,7 @@
         private void AssetUploadCompleteCallbackHandler(Packet packet, Simulator simulator)
 		{
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             Packets.AssetUploadCompletePacket reply = (AssetUploadCompletePacket)packet;
@@ -185,7 +215,7 @@
         private void RequestXferCallbackHandler(Packet packet, Simulator simulator)
 		{
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             RequestXferPacket reply = (RequestXferPacket)packet;
@@ -199,7 +229,7 @@
         private void ConfirmXferPacketCallbackHandler(Packet packet, Simulator simulator)
         {
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             ConfirmXferPacketPacket reply = (ConfirmXferPacketPacket)packet;
@@ -211,7 +241,7 @@
         private void TransferInfoCallbackHandler(Packet packet, Simulator simulator)
         {
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             TransferInfoPacket reply = (TransferInfoPacket)packet;
@@ -247,7 +277,7 @@
         private void TransferPacketCallbackHandler(Packet packet, Simulator simulator)
         {
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             TransferPacketPacket reply = (TransferPacketPacket)packet;
@@ -263,17 +293,23 @@
                 return;
             }
 
-            lock (request)
+            // Add data to data dictionary.
+            request.AssetDataReceived[reply.TransferData.Packet] = Data;
+            request.Received += Data.Length;
+
+
+
+            // If we've gotten all the data, mark it completed.
+            if (request.Received &gt;= request.Size)
             {
-                Array.Copy(Data, 0, request.AssetData, request.Received, Data.Length);
-                request.Received += Data.Length;
-
-                // If we've gotten all the data, mark it completed.
-                if (request.Received &gt;= request.Size)
+                int curPos = 0;
+                foreach (KeyValuePair&lt;int,byte[]&gt; kvp in request.AssetDataReceived)
                 {
-                    Console.WriteLine(&quot;Download Complete&quot;);
-                    request.Completed.Set();
+                    Array.Copy(kvp.Value, 0, request.AssetData, curPos, kvp.Value.Length);
+                    curPos += kvp.Value.Length;
                 }
+
+                request.Completed.Set();
             }
         }
 	}

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetNotecard.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetNotecard.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetNotecard.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -64,7 +64,7 @@
         public AssetNotecard(LLUUID assetID, byte[] assetData)
             : base(assetID, Asset.ASSET_TYPE_NOTECARD, false, null)
 		{
-			base.AssetData = assetData;
+			_AssetData = assetData;
 
 			string temp	= System.Text.Encoding.UTF8.GetString(assetData).Trim();
 
@@ -108,7 +108,7 @@
 			byte[] assetData = new byte[stringBytes.Length + 1];
 			Array.Copy(stringBytes, 0, assetData, 0, stringBytes.Length);
 
-			base.AssetData = assetData;
+			SetAssetData( assetData );
 		}
 	}
 }

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetPacketHelpers.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetPacketHelpers.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetPacketHelpers.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -45,7 +45,7 @@
         /// &lt;param name=&quot;asset&quot;&gt;&lt;/param&gt;
         public static Packet AssetUploadRequest(Asset asset, LLUUID TransactionID)
 		{
-            if (asset.AssetData.Length &gt; 1000)
+            if (asset._AssetData.Length &gt; 1000)
             {
                 throw new Exception(&quot;Asset too large to use AssetUploadRequest, use AssetUploadRequestHaderOnly() instead.&quot;);
             }
@@ -54,7 +54,7 @@
             p.AssetBlock.TransactionID = TransactionID;
             p.AssetBlock.Type          = asset.Type;
             p.AssetBlock.Tempfile      = asset.Tempfile;
-            p.AssetBlock.AssetData     = asset.AssetData;
+            p.AssetBlock.AssetData     = asset._AssetData;
             p.AssetBlock.StoreLocal    = false;
 
             return p;
@@ -113,7 +113,7 @@
         /// &lt;param name=&quot;item&quot;&gt;&lt;/param&gt;
         public static Packet TransferRequest(LLUUID SessionID, LLUUID AgentID, LLUUID TransferID, InventoryItem item)
 		{
-            if (item.Asset.Type != 7)
+            if (item.Type != 7)
             {
                 Console.WriteLine(&quot;Warning: TransferRequest may not work for items other then notecards of type 7&quot;);
             }
@@ -152,20 +152,18 @@
             return p;
         }
 
-        public static Packet TransferRequest4BodyShape(LLUUID SessionID, LLUUID AgentID, LLUUID TransferID, Asset asset)
+        /**
+         * This doesn't seem to work for all asset types... Last noted not working was Notecards
+         **/
+        public static Packet TransferRequestDirect(LLUUID SessionID, LLUUID AgentID, LLUUID TransferID, LLUUID AssetID, sbyte Type)
         {
-            if (asset.Type != 13)
-            {
-                Console.WriteLine(&quot;Warning: TransferRequest4BodyShape may not work for items of types other then 13&quot;);
-            }
-
             byte[] param = new byte[20];
             int pos = 0;
 
-            Array.Copy(asset.AssetID.Data, 0, param, pos, 16);
+            Array.Copy(AssetID.Data, 0, param, pos, 16);
             pos += 16;
 
-            param[pos] = (byte)asset.Type;
+            param[pos] = (byte)Type;
             pos += 1;
 
 

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestDownload.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestDownload.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestDownload.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -49,6 +49,7 @@
         public int Size;
         public int Received;
         public byte[] AssetData;
+        public SortedList&lt;int, byte[]&gt; AssetDataReceived = new SortedList&lt;int, byte[]&gt;();
 
         private uint _LastPacketTime;
         public uint LastPacketTime { get { return _LastPacketTime; } }
@@ -57,6 +58,7 @@
 
         public AssetRequestDownload(LLUUID TransID)
         {
+            
             TransactionID = TransID;
             UpdateLastPacketTime();
         }

Modified: branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestUpload.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestUpload.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/AssetRequestUpload.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -78,7 +78,7 @@
 
             CurrentPacket = 0;
             resendCount = 0;
-            _NumPackets = asset.AssetData.Length / 1000;
+            _NumPackets = asset._AssetData.Length / 1000;
             if (_NumPackets &lt; 1)
             {
                 _NumPackets = 1;
@@ -91,10 +91,9 @@
 
             while (this.Completed.WaitOne(1000, true) == false &amp;&amp; this.resendCount &lt; 20) // only resend 20 times
             {
-                //Console.WriteLine(&quot;WaitOne() timeout while uploading&quot;);
                 if (this.SecondsSinceLastPacket &gt; 2)
                 {
-                    Console.WriteLine(&quot;Resending Packet (more than 2 seconds since last confirm)&quot;);
+                    slClient.Log(&quot;Resending Packet (more than 2 seconds since last confirm)&quot;, Helpers.LogLevel.Info);
                     this.SendCurrentPacket();
                     resendCount++;
                 }
@@ -121,7 +120,7 @@
         {
             Packet packet;
 
-            if (this.MyAsset.AssetData.Length &gt; 1000)
+            if (this.MyAsset._AssetData.Length &gt; 1000)
             {
                 packet = AssetPacketHelpers.AssetUploadRequestHeaderOnly(this.MyAsset, this.TransactionID);
             }
@@ -131,13 +130,13 @@
             }
 
             slClient.Network.SendPacket(packet);
-#if DEBUG_PACKETS
-                Console.WriteLine(packet);
-#endif
-#if DEBUG_HEADERS
-                Console.WriteLine(packet.Header);
-#endif
 
+            #if DEBUG_PACKETS
+                slClient.DebugLog(packet);
+            #endif
+            #if DEBUG_HEADERS
+            slClient.DebugLog(packet.Header.ToString());
+            #endif
         }
 
         internal void RequestXfer(ulong XferID)
@@ -167,7 +166,6 @@
 
         private void SendCurrentPacket()
         {
-            //            Console.WriteLine(&quot;Sending &quot; + tr.CurrentPacket + &quot; / &quot; + tr.NumPackets);
             Packet uploadPacket;
 
             // technically we don't need this lock, because no state is updated here!
@@ -177,7 +175,7 @@
                 uint packetNum = CurrentPacket; 
                 if (packetNum == 0)
                 {
-                    if (MyAsset.AssetData.Length &lt;= 1000)
+                    if (MyAsset._AssetData.Length &lt;= 1000)
                         throw new Exception(&quot;Should not use xfer for small assets&quot;);
                     int dataSize = 1000;
 
@@ -185,24 +183,24 @@
 
                     // Prefix the first Xfer packet with the data length
                     // FIXME: Apply endianness patch
-                    Array.Copy(BitConverter.GetBytes((int)MyAsset.AssetData.Length), 0, packetData, 0, 4);
-                    Array.Copy(MyAsset.AssetData, 0, packetData, 4, dataSize);
+                    Array.Copy(BitConverter.GetBytes((int)MyAsset._AssetData.Length), 0, packetData, 0, 4);
+                    Array.Copy(MyAsset._AssetData, 0, packetData, 4, dataSize);
 
                     uploadPacket = AssetPacketHelpers.SendXferPacket(XferID, packetData, packetNum);
                 }
                 else if (packetNum &lt; this.NumPackets)
                 {
                     byte[] packetData = new byte[1000];
-                    Array.Copy(this.MyAsset.AssetData, packetNum * 1000, packetData, 0, 1000);
+                    Array.Copy(this.MyAsset._AssetData, packetNum * 1000, packetData, 0, 1000);
 
                     uploadPacket = AssetPacketHelpers.SendXferPacket(this.XferID, packetData, packetNum);
                 }
                 else
                 {
                     // The last packet has to be handled slightly differently
-                    int lastLen = this.MyAsset.AssetData.Length - (this.NumPackets * 1000);
+                    int lastLen = this.MyAsset._AssetData.Length - (this.NumPackets * 1000);
                     byte[] packetData = new byte[lastLen];
-                    Array.Copy(this.MyAsset.AssetData, this.NumPackets * 1000, packetData, 0, lastLen);
+                    Array.Copy(this.MyAsset._AssetData, this.NumPackets * 1000, packetData, 0, lastLen);
 
                     uint lastPacket = (uint)int.MaxValue + (uint)this.NumPackets + (uint)1;
                     uploadPacket = AssetPacketHelpers.SendXferPacket(this.XferID, packetData, lastPacket);
@@ -211,12 +209,12 @@
 
             slClient.Network.SendPacket(uploadPacket);
 
-#if DEBUG_PACKETS
-                Console.WriteLine(uploadPacket);
-#endif
-#if DEBUG_HEADERS
-            Console.WriteLine(uploadPacket.Header);
-#endif
+            #if DEBUG_PACKETS
+                slClient.DebugLog(uploadPacket);
+            #endif
+            #if DEBUG_HEADERS
+                slClient.DebugLog(uploadPacket.Header.ToString());
+            #endif
         }
 
         internal void UploadComplete(LLUUID assetID, bool success)
@@ -230,7 +228,7 @@
             else
                 StatusMsg = &quot;Server returned failed&quot;;
 
-            Console.WriteLine(&quot;Upload Complete&quot;);
+            slClient.Log(&quot;Upload complete&quot;, Helpers.LogLevel.Info);
             Completed.Set();
         }
     }

Copied: branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/AssetWearable.cs)

Copied: branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable_Body.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/AssetWearable_Body.cs)

Copied: branches/aditi/libsecondlife-cs/AssetSystem/AssetWearable_Clothing.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/AssetWearable_Clothing.cs)

Deleted: branches/aditi/libsecondlife-cs/AssetSystem/BodyPart.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/BodyPart.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/BodyPart.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,224 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Text;
-using libsecondlife;
-using libsecondlife.Packets;
-
-namespace libsecondlife.AssetSystem
-{
-    public class BodyPart
-    {
-        public string name = &quot;&quot;;
-        public uint type = 0;
-
-        public string sale_type = &quot;not&quot;;
-        public uint sale_price = 10;
-
-        public LLUUID creator_id = new LLUUID();
-        public LLUUID owner_id = new LLUUID();
-        public LLUUID last_owner_id = new LLUUID();
-        public LLUUID group_id = new LLUUID();
-
-        public uint base_mask = 0;
-        public uint owner_mask = 0;
-        public uint group_mask = 0;
-        public uint everyone_mask = 0;
-        public uint next_owner_mask = 0;
-
-        public Dictionary&lt;uint, float&gt; parameters = new Dictionary&lt;uint, float&gt;();
-        public Dictionary&lt;uint, LLUUID&gt; textures = new Dictionary&lt;uint, LLUUID&gt;();
-        
-        private static string intToHex(uint i)
-        {
-            return string.Format(&quot;{0:x8}&quot;, i);
-        }
-
-        public static byte[] BodyPartToByteData(BodyPart bp)
-        {
-            string data = &quot;LLWearable version 22\n&quot;;
-            data += bp.name + &quot;\n\n&quot;;
-            data += &quot;\tpermissions 0\n\t{\n&quot;;
-            data += &quot;\t\tbase_mask\t&quot; + intToHex(bp.base_mask);
-            data += &quot;\n\t\towner_mask\t&quot; + intToHex(bp.owner_mask);
-            data += &quot;\n\t\tgroup_mask\t&quot; + intToHex(bp.group_mask);
-            data += &quot;\n\t\teveryone_mask\t&quot; + intToHex(bp.everyone_mask);
-            data += &quot;\n\t\tnext_owner_mask\t&quot; + intToHex(bp.next_owner_mask);
-            data += &quot;\n\t\tcreator_id\t&quot; + bp.creator_id.ToStringHyphenated();
-            data += &quot;\n\t\towner_id\t&quot; + bp.owner_id.ToStringHyphenated();
-            data += &quot;\n\t\tlast_owner_id\t&quot; + bp.last_owner_id.ToStringHyphenated();
-            data += &quot;\n\t\tgroup_id\t&quot; + bp.group_id.ToStringHyphenated();
-            data += &quot;\n\t}&quot;;
-            data += &quot;\n\tsale_info\t0&quot;;
-            data += &quot;\n\t{&quot;;
-            data += &quot;\n\t\tsale_type\t&quot; + bp.sale_type;
-            data += &quot;\n\t\tsale_price\t&quot; + bp.sale_price;
-            data += &quot;\n\t}&quot;;
-            data += &quot;\ntype &quot; + bp.type;
-            data += &quot;\nparameters &quot; + bp.parameters.Count;
-            foreach (KeyValuePair&lt;uint, float&gt; param in bp.parameters)
-            {
-                string prm = string.Format(&quot;{0:f1}&quot;, param.Value);
-                if(prm == &quot;-1.0&quot; || prm == &quot;1.0&quot; || prm == &quot;0.0&quot;)
-                {
-                    switch(prm)
-                    {
-                        case &quot;-1.0&quot;:
-                            prm = &quot;-1&quot;;
-                            break;
-                        case &quot;0.0&quot;:
-                            prm = &quot;0&quot;;
-                            break;
-                        case &quot;1.0&quot;:
-                            prm = &quot;1&quot;;
-                            break;
-                    }
-                }
-                data += &quot;\n&quot; + param.Key + &quot; &quot; + prm;
-            }
-            data += &quot;\ntextures &quot; + bp.textures.Count;
-            foreach (KeyValuePair&lt;uint, LLUUID&gt; texture in bp.textures)
-            {
-                data += &quot;\n&quot; + texture.Key + &quot; &quot; + texture.Value.ToStringHyphenated();
-            }
-
-            return System.Text.Encoding.ASCII.GetBytes(data.ToCharArray());
-        }
-        /// &lt;summary&gt;
-        /// Converts byte[] data from a data transfer into a bodypart class
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;data&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public static BodyPart ByteDataToBodyPart(byte[] data)
-        {
-            BodyPart bp = new BodyPart(); 
-
-            byte state = 0;
-            const byte parameters_block = 4;
-            const byte textures_block = 6;
-            
-            Exception Corrupted = new Exception(&quot;Corrupted Body Part data&quot;);
-            string whole_enchilada = System.Text.Encoding.ASCII.GetString(data);
-            
-            //this seperates the whole enchilada into two, the header and the body.
-            string[] seperated_enchilada = whole_enchilada.Split(new string[] { &quot;\n\n&quot; }, StringSplitOptions.RemoveEmptyEntries);
-            if (seperated_enchilada.Length != 2) throw Corrupted;
-
-            //this parses out the name out of the header
-            string[] header = seperated_enchilada[0].Split('\n');
-            if (header.Length &lt; 2) throw Corrupted;
-            bp.name = header[1];
-
-            string[] body = seperated_enchilada[1].Split('\n');
-            foreach(string blk in body)
-            {
-               string block = blk.Trim();
-               if (block == &quot;{&quot; || block == &quot;}&quot;) continue; //I hate those things..
-               if (block == &quot;&quot;) continue;
-               //use the markers...
-               if(block.StartsWith(&quot;parameters &quot;))
-               {
-                   state = parameters_block; 
-                   continue;
-               }
-               else if(block.StartsWith(&quot;textures &quot;))
-               {
-                   state = textures_block;
-                   continue;
-               }
-               
-               if(state == 0)
-               {
-                   if(block.StartsWith(&quot;type &quot;))
-                   {
-                       bp.type = uint.Parse(block.Substring(5));
-                   }
-                   else
-                   {
-                       string[] split_field = block.Split('\t');
-                       
-                       if(split_field.Length == 2)
-                       {
-                           switch(split_field[0])
-                           {
-                               case &quot;base_mask&quot;:
-                                   bp.base_mask = uint.Parse(split_field[1], System.Globalization.NumberStyles.HexNumber);
-                                   break;
-                               case &quot;owner_mask&quot;:
-                                   bp.owner_mask = uint.Parse(split_field[1], System.Globalization.NumberStyles.HexNumber);
-                                   break;
-                               case &quot;group_mask&quot;:
-                                   bp.group_mask = uint.Parse(split_field[1], System.Globalization.NumberStyles.HexNumber);
-                                   break;
-                               case &quot;everyone_mask&quot;:
-                                   bp.everyone_mask = uint.Parse(split_field[1], System.Globalization.NumberStyles.HexNumber);
-                                   break;
-                               case &quot;next_owner_mask&quot;:
-                                   bp.next_owner_mask = uint.Parse(split_field[1], System.Globalization.NumberStyles.HexNumber);
-                                   break;
-                               case &quot;creator_id&quot;:
-                                   bp.creator_id = new LLUUID(split_field[1]);
-                                   break;
-                               case &quot;owner_id&quot;:
-                                   bp.owner_id = new LLUUID(split_field[1]);
-                                   break;
-                               case &quot;last_owner_id&quot;:
-                                   bp.last_owner_id = new LLUUID(split_field[1]);
-                                   break;
-                               case &quot;group_id&quot;:
-                                   bp.group_id = new LLUUID(split_field[1]);
-                                   break;
-                               case &quot;sale_type&quot;:
-                                   bp.sale_type = split_field[1];
-                                   break;
-                               case &quot;sale_price&quot;:
-                                   bp.sale_price = uint.Parse(split_field[1]);
-                                   break;
-                               default: break;
-                           }
-                       }
-                   }
-               }
-               else if (state == parameters_block)
-               {
-                   string[] split_up = block.Split(' ');
-                   if (split_up.Length != 2) throw Corrupted;
-                   
-                   if (bp.parameters.ContainsKey(uint.Parse(split_up[0]))) bp.parameters.Remove(uint.Parse(split_up[0]));
-                   bp.parameters.Add(uint.Parse(split_up[0]), float.Parse(split_up[1]));
-               }
-               else if (state == textures_block)
-               {
-                   string[] split_up = block.Split(' ');
-                   if (split_up.Length != 2) throw Corrupted;
-
-                   if (bp.parameters.ContainsKey(uint.Parse(split_up[0]))) bp.parameters.Remove(uint.Parse(split_up[0]));
-                   bp.textures.Add(uint.Parse(split_up[0]), new LLUUID(split_up[1]));
-               }
-               
-            }
-
-            return bp;
-        }
-        public BodyPart() { } //blank construction
-
-        public BodyPart(byte[] data)
-        {
-            BodyPart bp = BodyPart.ByteDataToBodyPart(data);
-            this.base_mask = bp.base_mask;
-            this.creator_id = bp.creator_id;
-            this.everyone_mask = bp.everyone_mask;
-            this.group_id = bp.group_id;
-            this.group_mask = bp.group_mask;
-            this.last_owner_id = bp.last_owner_id;
-            this.name = bp.name;
-            this.next_owner_mask = bp.next_owner_mask;
-            this.owner_id = bp.owner_id;
-            this.owner_mask = bp.owner_mask;
-            this.parameters = bp.parameters;
-            this.textures = bp.textures;
-            this.type = bp.type;
-            this.sale_price = bp.sale_price;
-            this.sale_type = bp.sale_type;
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/AssetSystem/BodyPart_Depricated.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/BodyPart_Depricated.cs)

Modified: branches/aditi/libsecondlife-cs/AssetSystem/ImageManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AssetSystem/ImageManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AssetSystem/ImageManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -42,14 +42,14 @@
     public delegate void ImageRetrievedCallback(LLUUID id, byte[] data, bool cached, string statusmsg); //this delegate is called when an image completed.
 
     /// &lt;summary&gt;
-	/// Manages the uploading and downloading of Images from SecondLife
-	/// &lt;/summary&gt;
-	public class ImageManager
-	{
+    /// Manages the uploading and downloading of Images from SecondLife
+    /// &lt;/summary&gt;
+    public class ImageManager
+    {
 
         private SecondLife slClient;
 
-        public enum CacheTypes {None, Memory, Disk};
+        public enum CacheTypes { None, Memory, Disk };
         private CacheTypes CacheType;
         private string CacheDirectory = &quot;ImageCache&quot;;
         private Dictionary&lt;LLUUID, Byte[]&gt; CacheTable = new Dictionary&lt;LLUUID, byte[]&gt;();
@@ -57,40 +57,40 @@
 
         private ImagePacketHelpers ImagePacketHelper;
 
-		private Dictionary&lt;LLUUID, TransferRequest&gt; htDownloadRequests = new Dictionary&lt;LLUUID,TransferRequest&gt;();
+        private Dictionary&lt;LLUUID, TransferRequest&gt; htDownloadRequests = new Dictionary&lt;LLUUID, TransferRequest&gt;();
 
         public ImageRetrievedCallback OnImageRetrieved;
 
-		private class TransferRequest
-		{
+        private class TransferRequest
+        {
             public ManualResetEvent ReceivedHeaderPacket = new ManualResetEvent(false);
             public ManualResetEvent Completed = new ManualResetEvent(false);
 
-			public bool Status;
-			public string StatusMsg;
+            public bool Status;
+            public string StatusMsg;
 
-			public uint Size;
-			public uint Received;
-			public uint LastPacket;
-			public byte[] AssetData;
+            public uint Size;
+            public uint Received;
+            public uint LastPacket;
+            public byte[] AssetData;
 
             public int BaseDataReceived;
 
-			public TransferRequest()
-			{
-				Status		= false;
-				StatusMsg	= &quot;&quot;;
+            public TransferRequest()
+            {
+                Status = false;
+                StatusMsg = &quot;&quot;;
 
-				AssetData	= null;
+                AssetData = null;
                 BaseDataReceived = 0;
-			}
-		}
+            }
+        }
 
         /// &lt;summary&gt;
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
         public ImageManager(SecondLife client)
-		{
+        {
             Init(client, CacheTypes.None, null);
         }
 
@@ -140,12 +140,11 @@
                 }
                 catch (Exception e)
                 {
-                    Console.WriteLine(&quot;ERROR: Disk Cache directory could not be established, defaulting to Memory Cache.&quot;);
-                    Console.WriteLine(e.Message);
+                    slClient.Log(&quot;Disk Cache directory could not be established, defaulting to Memory Cache: &quot; + Environment.NewLine +
+                        e.ToString(), Helpers.LogLevel.Warning);
 
                     CacheType = CacheTypes.Memory;
                 }
-
             }
 
             // Image Packet Helpers
@@ -252,7 +251,7 @@
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;ImageID&quot;&gt;The Image's AssetID&lt;/param&gt;
         public byte[] RequestImage(LLUUID ImageID)
-		{
+        {
             byte[] imgData = CachedImage(ImageID);
             if (imgData != null)
             {
@@ -281,17 +280,17 @@
             }
 
             // Wait for transfer to complete.
-            tr.Completed.WaitOne();
+            tr.Completed.WaitOne(20000, false);
 
-			if( tr.Status == true )
-			{
-				return tr.AssetData;
-			} 
-			else 
-			{
-				throw new Exception( &quot;RequestImage: &quot; + tr.StatusMsg );
-			}
-		}
+            if (tr.Status == true)
+            {
+                return tr.AssetData;
+            }
+            else
+            {
+                throw new Exception(&quot;RequestImage: &quot; + tr.StatusMsg);
+            }
+        }
 
         /// &lt;summary&gt;
         /// Requests an image from SecondLife.
@@ -336,17 +335,17 @@
         /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         public void ImageDataCallbackHandler(Packet packet, Simulator simulator)
-		{
-            #if DEBUG_PACKETS
-                Console.WriteLine(packet);
-            #endif
+        {
+#if DEBUG_PACKETS
+                slClient.DebugLog(packet);
+#endif
 
             ImageDataPacket reply = (ImageDataPacket)packet;
 
-			LLUUID ImageID = reply.ImageID.ID;
-			ushort Packets = reply.ImageID.Packets;
-			uint   Size    = reply.ImageID.Size;
-			byte[] Data    = reply.ImageData.Data;
+            LLUUID ImageID = reply.ImageID.ID;
+            // unused?		ushort Packets = reply.ImageID.Packets;
+            uint Size = reply.ImageID.Size;
+            byte[] Data = reply.ImageData.Data;
 
             // Lookup the request that this packet is for
             TransferRequest tr;
@@ -364,28 +363,28 @@
             }
 
             // Initialize the request so that it's data buffer is the right size for the image
-			tr.Size = Size;
-			tr.AssetData = new byte[tr.Size];
+            tr.Size = Size;
+            tr.AssetData = new byte[tr.Size];
             tr.BaseDataReceived = Data.Length;
 
             // Copy the first block of image data into the request.
-			Array.Copy(Data, 0, tr.AssetData, tr.Received, Data.Length);
-			tr.Received += (uint)Data.Length;
+            Array.Copy(Data, 0, tr.AssetData, tr.Received, Data.Length);
+            tr.Received += (uint)Data.Length;
 
             // Mark that the TransferRequest has received this header packet
             tr.ReceivedHeaderPacket.Set();
 
-			// If we've gotten all the data, mark it completed.
-			if( tr.Received &gt;= tr.Size )
-			{
-				tr.Status	 = true;
+            // If we've gotten all the data, mark it completed.
+            if (tr.Received &gt;= tr.Size)
+            {
+                tr.Status = true;
                 tr.Completed.Set();
 
                 // Fire off image downloaded event
                 CacheImage(ImageID, tr.AssetData);
                 FireImageRetrieved(ImageID, tr.AssetData, false);
-			}
-		}
+            }
+        }
 
         /// &lt;summary&gt;
         /// Handles the remaining Image data that did not fit in the initial ImageData packet
@@ -393,13 +392,13 @@
         /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         public void ImagePacketCallbackHandler(Packet packet, Simulator simulator)
-		{
-            #if DEBUG_PACKETS
-                Console.WriteLine(packet);
-            #endif
+        {
+#if DEBUG_PACKETS
+                slClient.DebugLog(packet);
+#endif
 
             ImagePacketPacket reply = (ImagePacketPacket)packet;
-            
+
             LLUUID ImageID = reply.ImageID.ID;
 
             // Lookup the request for this packet
@@ -408,11 +407,11 @@
             {
                 tr = (TransferRequest)htDownloadRequests[ImageID];
             }
-			if( tr == null )
-			{
+            if (tr == null)
+            {
                 // Received a packet that doesn't belong to any requests in our queue, strange...
-				return;
-			}
+                return;
+            }
 
 
             // TODO: Received data should probably be put into a temporary collection that's indected by ImageID.Packet
@@ -429,42 +428,42 @@
             Array.Copy(reply.ImageData.Data, 0, tr.AssetData, tr.BaseDataReceived + (1000 * (reply.ImageID.Packet - 1)), reply.ImageData.Data.Length);
             tr.Received += (uint)reply.ImageData.Data.Length;
 
-			// If we've gotten all the data, mark it completed.
-			if( tr.Received &gt;= tr.Size )
-			{
+            // If we've gotten all the data, mark it completed.
+            if (tr.Received &gt;= tr.Size)
+            {
                 tr.Status = true;
                 tr.Completed.Set();
 
                 // Fire off image downloaded event
                 CacheImage(ImageID, tr.AssetData);
                 FireImageRetrieved(ImageID, tr.AssetData, false);
-			}		
-		}
+            }
+        }
 
         /// &lt;summary&gt;
         ///
         /// &lt;/summary&gt;
         public void ImageNotInDatabaseCallbackHandler(Packet packet, Simulator simulator)
         {
-            #if DEBUG_PACKETS
-                Console.WriteLine(packet);
-            #endif
+#if DEBUG_PACKETS
+                slClient.DebugLog(packet);
+#endif
 
             ImageNotInDatabasePacket reply = (ImageNotInDatabasePacket)packet;
 
             LLUUID ImageID = reply.ImageID.ID;
 
             // Lookup the request for this packet
-			TransferRequest tr;
+            TransferRequest tr;
             lock (htDownloadRequests)
             {
                 tr = (TransferRequest)htDownloadRequests[ImageID];
             }
-			if( tr == null )
-			{
+            if (tr == null)
+            {
                 // Received a packet that doesn't belong to any requests in our queue, strange...
-				return;
-			}
+                return;
+            }
 
             tr.Status = false;
             tr.StatusMsg = &quot;Image not in database&quot;;

Copied: branches/aditi/libsecondlife-cs/AssetSystem/_BodyShapeParams_.cs (from rev 775, trunk/libsecondlife-cs/AssetSystem/_BodyShapeParams_.cs)

Modified: branches/aditi/libsecondlife-cs/Avatar.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Avatar.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Avatar.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -33,70 +33,6 @@
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;Message&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;Audible&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;Type&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;Sourcetype&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;FromName&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;ID&quot;&gt;&lt;/param&gt;
-    public delegate void ChatCallback(string message, byte audible, byte type, byte sourcetype,
-        string fromName, LLUUID id, LLUUID ownerid, LLVector3 position);
-
-    /// &lt;summary&gt;
-    /// Triggered when the L$ account balance for this avatar changes
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;balance&quot;&gt;The new account balance&lt;/param&gt;
-    public delegate void BalanceCallback(int balance);
-
-    /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;fromAgentID&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;fromAgentName&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;toAgentID&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;parentEstateID&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;regionID&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;dialog&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;groupIM&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;imSessionID&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;timestamp&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;offline&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;binaryBucket&quot;&gt;&lt;/param&gt;
-    public delegate void InstantMessageCallback(LLUUID fromAgentID, string fromAgentName, 
-        LLUUID toAgentID, uint parentEstateID, LLUUID regionID, LLVector3 position, 
-        byte dialog, bool groupIM, LLUUID imSessionID, DateTime timestamp, string message, 
-        byte offline, byte[] binaryBucket);
-
-    /// &lt;summary&gt;
-    /// Triggered for any status updates of a teleport (progress, failed, succeeded)
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;message&quot;&gt;A message about the current teleport status&lt;/param&gt;
-    public delegate void TeleportCallback(string message, TeleportStatus status);
-
-    /// &lt;summary&gt;
-    /// Name Conversion for Teleport Status flag/bit
-    /// &lt;/summary&gt;
-    public enum TeleportStatus
-    {
-        None,
-        Start,
-        Progress,
-        Failed,
-        Finished
-    }
-
-    public enum InstantMessageDialog
-    {
-        RequestTeleport = 22,
-        AcceptTeleport = 23,
-        DenyTeleport = 24
-    }
-
-    /// &lt;summary&gt;
     /// Basic class to hold other Avatar's data.
     /// &lt;/summary&gt;
     public class Avatar
@@ -107,6 +43,8 @@
         [Flags]
         public enum AgentUpdateFlags
         {
+            /// &lt;summary&gt;Empty flag&lt;/summary&gt;
+            NONE = 0,
             /// &lt;summary&gt;Move Forward (SL Keybinding: W/Up Arrow)&lt;/summary&gt;
             AGENT_CONTROL_AT_POS = 0x1 &lt;&lt; CONTROL_AT_POS_INDEX,
             /// &lt;summary&gt;Move Backward (SL Keybinding: S/Down Arrow)&lt;/summary&gt;
@@ -133,17 +71,17 @@
             AGENT_CONTROL_FAST_LEFT = 0x1 &lt;&lt; CONTROL_FAST_LEFT_INDEX,
             /// &lt;summary&gt;ORed with AGENT_CONTROL_UP_* if the keyboard is being used&lt;/summary&gt;
             AGENT_CONTROL_FAST_UP = 0x1 &lt;&lt; CONTROL_FAST_UP_INDEX,
-            /// &lt;summary&gt;&lt;/summary&gt;
+            /// &lt;summary&gt;Fly&lt;/summary&gt;
             AGENT_CONTROL_FLY = 0x1 &lt;&lt; CONTROL_FLY_INDEX,
             /// &lt;summary&gt;&lt;/summary&gt;
             AGENT_CONTROL_STOP = 0x1 &lt;&lt; CONTROL_STOP_INDEX,
-            /// &lt;summary&gt;&lt;/summary&gt;
+            /// &lt;summary&gt;Finish our current animation&lt;/summary&gt;
             AGENT_CONTROL_FINISH_ANIM = 0x1 &lt;&lt; CONTROL_FINISH_ANIM_INDEX,
-            /// &lt;summary&gt;&lt;/summary&gt;
+            /// &lt;summary&gt;Stand up from the ground or a prim seat&lt;/summary&gt;
             AGENT_CONTROL_STAND_UP = 0x1 &lt;&lt; CONTROL_STAND_UP_INDEX,
-            /// &lt;summary&gt;&lt;/summary&gt;
+            /// &lt;summary&gt;Sit on the ground at our current location&lt;/summary&gt;
             AGENT_CONTROL_SIT_ON_GROUND = 0x1 &lt;&lt; CONTROL_SIT_ON_GROUND_INDEX,
-            /// &lt;summary&gt;&lt;/summary&gt;
+            /// &lt;summary&gt;Whether mouselook is currently enabled&lt;/summary&gt;
             AGENT_CONTROL_MOUSELOOK = 0x1 &lt;&lt; CONTROL_MOUSELOOK_INDEX,
             /// &lt;summary&gt;Legacy, used if a key was pressed for less than a certain amount of time&lt;/summary&gt;
             AGENT_CONTROL_NUDGE_AT_POS = 0x1 &lt;&lt; CONTROL_NUDGE_AT_POS_INDEX,
@@ -174,989 +112,150 @@
             AGENT_CONTROL_ML_LBUTTON_UP = 0x1 &lt;&lt; CONTROL_ML_LBUTTON_UP_INDEX
         }
 
-        /// &lt;summary&gt;The Avatar's UUID, asset server&lt;/summary&gt;
-        public LLUUID ID;
-        /// &lt;summary&gt;Avatar ID in Region (sim) it is in&lt;/summary&gt;
-        public uint LocalID;
-        /// &lt;summary&gt;Full Name of Avatar&lt;/summary&gt;
-        public string Name;
-        /// &lt;summary&gt;Active Group of Avatar&lt;/summary&gt;
-        public string GroupName;
-        /// &lt;summary&gt;Online Status of Avatar&lt;/summary&gt;
-        public bool Online;
-        /// &lt;summary&gt;Location of Avatar (x,y,z probably)&lt;/summary&gt;
-        public LLVector3 Position;
-        /// &lt;summary&gt;Rotational Position of Avatar&lt;/summary&gt;
-        public LLQuaternion Rotation;
-        /// &lt;summary&gt;Region (aka sim) the Avatar is in&lt;/summary&gt;
-        public Region CurrentRegion;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string BornOn;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID ProfileImage;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID PartnerID;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string AboutText;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public uint WantToMask;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string WantToText;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public uint SkillsMask;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string SkillsText;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string FirstLifeText;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID FirstLifeImage;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public bool Identified;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public bool Transacted;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public bool AllowPublish;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public bool MaturePublish;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string CharterMember;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public float Behavior;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public float Appearance;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public float Building;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string LanguagesText;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public TextureEntry Textures;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string ProfileURL;
-
-        protected const int CONTROL_AT_POS_INDEX = 0;
-        protected const int CONTROL_AT_NEG_INDEX = 1;
-        protected const int CONTROL_LEFT_POS_INDEX = 2;
-        protected const int CONTROL_LEFT_NEG_INDEX = 3;
-        protected const int CONTROL_UP_POS_INDEX = 4;
-        protected const int CONTROL_UP_NEG_INDEX = 5;
-        protected const int CONTROL_PITCH_POS_INDEX = 6;
-        protected const int CONTROL_PITCH_NEG_INDEX = 7;
-        protected const int CONTROL_YAW_POS_INDEX = 8;
-        protected const int CONTROL_YAW_NEG_INDEX = 9;
-        protected const int CONTROL_FAST_AT_INDEX = 10;
-        protected const int CONTROL_FAST_LEFT_INDEX = 11;
-        protected const int CONTROL_FAST_UP_INDEX = 12;
-        protected const int CONTROL_FLY_INDEX = 13;
-        protected const int CONTROL_STOP_INDEX = 14;
-        protected const int CONTROL_FINISH_ANIM_INDEX = 15;
-        protected const int CONTROL_STAND_UP_INDEX = 16;
-        protected const int CONTROL_SIT_ON_GROUND_INDEX = 17;
-        protected const int CONTROL_MOUSELOOK_INDEX = 18;
-        protected const int CONTROL_NUDGE_AT_POS_INDEX = 19;
-        protected const int CONTROL_NUDGE_AT_NEG_INDEX = 20;
-        protected const int CONTROL_NUDGE_LEFT_POS_INDEX = 21;
-        protected const int CONTROL_NUDGE_LEFT_NEG_INDEX = 22;
-        protected const int CONTROL_NUDGE_UP_POS_INDEX = 23;
-        protected const int CONTROL_NUDGE_UP_NEG_INDEX = 24;
-        protected const int CONTROL_TURN_LEFT_INDEX = 25;
-        protected const int CONTROL_TURN_RIGHT_INDEX = 26;
-        protected const int CONTROL_AWAY_INDEX = 27;
-        protected const int CONTROL_LBUTTON_DOWN_INDEX = 28;
-        protected const int CONTROL_LBUTTON_UP_INDEX = 29;
-        protected const int CONTROL_ML_LBUTTON_DOWN_INDEX = 30;
-        protected const int CONTROL_ML_LBUTTON_UP_INDEX = 31;
-        protected const int TOTAL_CONTROLS = 32;
-    }
-
-    /// &lt;summary&gt;
-    /// Class to hold Client Avatar's data
-    /// &lt;/summary&gt;
-    public class MainAvatar
-    {
-        /// &lt;summary&gt;Callback for incoming chat packets&lt;/summary&gt;
-        public event ChatCallback OnChat;
-        /// &lt;summary&gt;Callback for incoming IMs&lt;/summary&gt;
-        public event InstantMessageCallback OnInstantMessage;
-        /// &lt;summary&gt;Callback for Teleport request update&lt;/summary&gt;
-        public event TeleportCallback OnTeleport;
-        /// &lt;summary&gt;Callback for incoming change in L$ balance&lt;/summary&gt;
-        public event BalanceCallback OnBalanceUpdated;
-
-        /// &lt;summary&gt;Your (client) Avatar UUID, asset server&lt;/summary&gt;
-        public LLUUID ID = LLUUID.Zero;
-        /// &lt;summary&gt;Your (client) Avatar ID, local to Region/sim&lt;/summary&gt;
-        public uint LocalID;
-        /// &lt;summary&gt;Avatar First Name (i.e. Philip)&lt;/summary&gt;
-        public string FirstName = &quot;&quot;;
-        /// &lt;summary&gt;Avatar Last Name (i.e. Linden)&lt;/summary&gt;
-        public string LastName = &quot;&quot;;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public string TeleportMessage;
-        /// &lt;summary&gt;Current position of avatar&lt;/summary&gt;
-        public LLVector3 Position = LLVector3.Zero;
-        /// &lt;summary&gt;Current rotation of avatar&lt;/summary&gt;
-        public LLQuaternion Rotation = LLQuaternion.Identity;
-        /// &lt;summary&gt;The point the avatar is currently looking at
-        /// (may not stay updated)&lt;/summary&gt;
-        public LLVector3 LookAt = LLVector3.Zero;
-        /// &lt;summary&gt;Position avatar client will goto when login to 'home' or during
-        /// teleport request to 'home' region.&lt;/summary&gt;
-        public LLVector3 HomePosition = LLVector3.Zero;
-        /// &lt;summary&gt;LookAt point saved/restored with HomePosition&lt;/summary&gt;
-        public LLVector3 HomeLookAt = LLVector3.Zero;
-        /// &lt;summary&gt;Gets the health of the agent&lt;/summary&gt;
-        protected float health;
-        public float Health
-        {
-            get { return health; }
-        }
-        /// &lt;summary&gt;Gets the current balance of the agent&lt;/summary&gt;
-        protected int balance;
-        public int Balance
-        {
-            get { return balance; }
-        }
-
-        private SecondLife Client;
-        private TeleportCallback OnBeginTeleport;
-        private TeleportStatus TeleportStat;
-        private Timer TeleportTimer;
-        private bool TeleportTimeout;
-        private uint HeightWidthGenCounter;
-
         /// &lt;summary&gt;
-        /// Constructor, aka 'CallBack Central' - Setup callbacks for packets related to our avatar
+        /// Positive and negative ratings
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
-        public MainAvatar(SecondLife client)
+        public struct Statistics
         {
-            NetworkManager.PacketCallback callback;
-            Client = client;
-            TeleportMessage = &quot;&quot;;
-
-            // Coarse location callback
-            Client.Network.RegisterCallback(PacketType.CoarseLocationUpdate, new NetworkManager.PacketCallback(CoarseLocationHandler));
-
-            // Teleport callbacks
-            callback = new NetworkManager.PacketCallback(TeleportHandler);
-            Client.Network.RegisterCallback(PacketType.TeleportStart, callback);
-            Client.Network.RegisterCallback(PacketType.TeleportProgress, callback);
-            Client.Network.RegisterCallback(PacketType.TeleportFailed, callback);
-            Client.Network.RegisterCallback(PacketType.TeleportFinish, callback);
-
-            // Instant Message callback
-            Client.Network.RegisterCallback(PacketType.ImprovedInstantMessage, new NetworkManager.PacketCallback(InstantMessageHandler));
-
-            // Chat callback
-            Client.Network.RegisterCallback(PacketType.ChatFromSimulator, new NetworkManager.PacketCallback(ChatHandler));
-
-            TeleportTimer = new Timer(18000);
-            TeleportTimer.Elapsed += new ElapsedEventHandler(TeleportTimerEvent);
-            TeleportTimeout = false;
-
-            // Movement complete callback
-            Client.Network.RegisterCallback(PacketType.AgentMovementComplete, new NetworkManager.PacketCallback(MovementCompleteHandler));
-
-            // Health callback
-            Client.Network.RegisterCallback(PacketType.HealthMessage, new NetworkManager.PacketCallback(HealthHandler));
-
-            // Money callbacks
-            callback = new NetworkManager.PacketCallback(BalanceHandler);
-            Client.Network.RegisterCallback(PacketType.MoneyBalanceReply, callback);
-            Client.Network.RegisterCallback(PacketType.MoneySummaryReply, callback);
-            Client.Network.RegisterCallback(PacketType.AdjustBalance, callback);
+            /// &lt;summary&gt;Positive ratings for Behavior&lt;/summary&gt;
+            public int BehaviorPositive;
+            /// &lt;summary&gt;Negative ratings for Behavior&lt;/summary&gt;
+            public int BehaviorNegative;
+            /// &lt;summary&gt;Positive ratings for Appearance&lt;/summary&gt;
+            public int AppearancePositive;
+            /// &lt;summary&gt;Negative ratings for Appearance&lt;/summary&gt;
+            public int AppearanceNegative;
+            /// &lt;summary&gt;Positive ratings for Building&lt;/summary&gt;
+            public int BuildingPositive;
+            /// &lt;summary&gt;Negative ratings for Building&lt;/summary&gt;
+            public int BuildingNegative;
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Avatar properties including about text, profile URL, image IDs and 
+        /// publishing settings
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;target&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
-        public void InstantMessage(LLUUID target, string message)
+        public struct Properties
         {
-            InstantMessage(FirstName + &quot; &quot; + LastName, LLUUID.GenerateUUID(), target, message, null, LLUUID.GenerateUUID());
+            /// &lt;summary&gt;Should this profile be published on the web&lt;/summary&gt;
+            public bool AllowPublish;
+            /// &lt;summary&gt;First Life about text&lt;/summary&gt;
+            public string FirstLifeText;
+            /// &lt;summary&gt;First Life image ID&lt;/summary&gt;
+            public LLUUID FirstLifeImage;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public LLUUID Partner;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public string AboutText;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public string BornOn;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public string CharterMember;
+            /// &lt;summary&gt;Profile image ID&lt;/summary&gt;
+            public LLUUID ProfileImage;
+            /// &lt;summary&gt;Is this a mature profile&lt;/summary&gt;
+            public bool MaturePublish;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public bool Identified;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public bool Transacted;
+            /// &lt;summary&gt;Web URL for this profile&lt;/summary&gt;
+            public string ProfileURL;
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Avatar interests including spoken languages, skills, and &quot;want to&quot;
+        /// choices
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;target&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;IMSessionID&quot;&gt;&lt;/param&gt;
-        public void InstantMessage(LLUUID target, string message, LLUUID IMSessionID)
+        public struct Interests
         {
-            InstantMessage(FirstName + &quot; &quot; + LastName, LLUUID.GenerateUUID(), target, message, null, IMSessionID);
+            /// &lt;summary&gt;Languages profile field&lt;/summary&gt;
+            public string LanguagesText;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public uint SkillsMask;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public string SkillsText;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public uint WantToMask;
+            /// &lt;summary&gt;&lt;/summary&gt;
+            public string WantToText;
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;fromName&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;sessionID&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;target&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;conferenceIDs&quot;&gt;&lt;/param&gt;
-        public void InstantMessage(string fromName, LLUUID sessionID, LLUUID target, string message, LLUUID[] conferenceIDs)
-        {
-            InstantMessage(fromName, sessionID, target, message, conferenceIDs, LLUUID.GenerateUUID());
-        }
 
-        /// &lt;summary&gt;
-        /// Generate an Instant Message (Full Arguments).
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;fromName&quot;&gt;Client's Avatar&lt;/param&gt;
-        /// &lt;param name=&quot;sessionID&quot;&gt;SessionID of current connection to grid&lt;/param&gt;
-        /// &lt;param name=&quot;target&quot;&gt;UUID of target Av.&lt;/param&gt;
-        /// &lt;param name=&quot;message&quot;&gt;Text Message being sent.&lt;/param&gt;
-        /// &lt;param name=&quot;conferenceIDs&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;IMSessionID&quot;&gt;&lt;/param&gt;
-        /// 
-        /// TODO: Have fromName grabbed from elsewhere and remove argument, to prevent inadvertant spoofing.
-        /// 
-        public void InstantMessage(string fromName, LLUUID sessionID, LLUUID target, string message, 
-            LLUUID[] conferenceIDs, LLUUID IMSessionID)
-        {
-            ImprovedInstantMessagePacket im = new ImprovedInstantMessagePacket();
-            im.AgentData.AgentID = this.ID;
-            im.AgentData.SessionID = Client.Network.SessionID;
-            im.MessageBlock.Dialog = 0;
-            im.MessageBlock.FromAgentName = Helpers.StringToField(fromName);
-            im.MessageBlock.FromGroup = false;
-            im.MessageBlock.ID = IMSessionID;
-            im.MessageBlock.Message = Helpers.StringToField(message);
-            im.MessageBlock.Offline = 1;
-            im.MessageBlock.ToAgentID = target;
-            if (conferenceIDs != null &amp;&amp; conferenceIDs.Length &gt; 0)
-            {
-                im.MessageBlock.BinaryBucket = new byte[16 * conferenceIDs.Length];
+        /// &lt;summary&gt;UUID for this avatar&lt;/summary&gt;
+        public LLUUID ID = LLUUID.Zero;
+        /// &lt;summary&gt;Temporary ID for this avatar, local to the current region&lt;/summary&gt;
+        public uint LocalID = 0;
+        /// &lt;summary&gt;Full name&lt;/summary&gt;
+        public string Name = String.Empty;
+        /// &lt;summary&gt;Active group&lt;/summary&gt;
+        public string GroupName = String.Empty;
+        /// &lt;summary&gt;Online status&lt;/summary&gt;
+        public bool Online = false;
+        /// &lt;summary&gt;Positive and negative ratings&lt;/summary&gt;
+        public Statistics ProfileStatistics = new Statistics();
+        /// &lt;summary&gt;Avatar properties including about text, profile URL, image IDs and 
+        /// publishing settings&lt;/summary&gt;
+        public Properties ProfileProperties = new Properties();
+        /// &lt;summary&gt;Avatar interests including spoken languages, skills, and &quot;want to&quot;
+        /// choices&lt;/summary&gt;
+        public Interests ProfileInterests = new Interests();
+        /// &lt;summary&gt;Local location, relative to the sim or what the avatar is
+        /// sitting on&lt;/summary&gt;
+        public LLVector3 Position = LLVector3.Zero;
+        /// &lt;summary&gt;Rotational position, relative to the sim or what the avatar
+        /// is sitting on&lt;/summary&gt;
+        public LLQuaternion Rotation = LLQuaternion.Identity;
+        /// &lt;summary&gt;Region the avatar is in&lt;/summary&gt;
+        public Region CurrentRegion = null;
+        /// &lt;summary&gt;Textures for this avatars clothing&lt;/summary&gt;
+        public TextureEntry Textures = new TextureEntry();
 
-                for (int i = 0; i &lt; conferenceIDs.Length; ++i)
-                {
-                    Array.Copy(conferenceIDs[i].Data, 0, im.MessageBlock.BinaryBucket, i * 16, 16);
-                }
-            }
-            else
-            {
-                im.MessageBlock.BinaryBucket = new byte[0];
-            }
-
-            // These fields are mandatory, even if we don't have valid values for them
-            im.MessageBlock.Position = LLVector3.Zero;
-                //TODO: Allow region id to be correctly set by caller or fetched from Client.*
-            im.MessageBlock.RegionID = LLUUID.Zero; 
-
-
-            // Send the message
-            Client.Network.SendPacket((Packet)im);
-        }
-
-        /// &lt;summary&gt;
-        /// Conversion type to denote Chat Packet types in an easier-to-understand format
-        /// &lt;/summary&gt;
-        public enum ChatType
+        /// &lt;summary&gt;Gets the local ID of the prim the avatar is sitting on,
+        /// zero if the avatar is not currently sitting&lt;/summary&gt;
+        public uint SittingOn
         {
-            /// &lt;summary&gt;Whispers (5m radius)&lt;/summary&gt;
-            Whisper = 0,
-            /// &lt;summary&gt;Normal chat (10/20m radius) - Why is this here twice?&lt;/summary&gt;
-            Normal = 1,
-            /// &lt;summary&gt;Shouting! (100m radius)&lt;/summary&gt;
-            Shout = 2,
-            /// &lt;summary&gt;Normal chat (10/20m radius) - Why is this here twice?&lt;/summary&gt;
-            Say = 3,
-            /// &lt;summary&gt;Event message when an Avatar has begun to type&lt;/summary&gt;
-            StartTyping = 4,
-            /// &lt;summary&gt;Event message when an Avatar has stopped typing&lt;/summary&gt;
-            StopTyping = 5
+            get { return sittingOn; }
         }
 
-        /// &lt;summary&gt;
-        /// Send a Chat message.
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;message&quot;&gt;The Message you're sending out.&lt;/param&gt;
-        /// &lt;param name=&quot;channel&quot;&gt;Channel number (0 would be default 'Say' message, other numbers 
-        /// denote the equivalent of /# in normal client).&lt;/param&gt;
-        /// &lt;param name=&quot;type&quot;&gt;Chat Type, see above.&lt;/param&gt;
-        public void Chat(string message, int channel, ChatType type)
-        {
-            ChatFromViewerPacket chat = new ChatFromViewerPacket();
-            chat.AgentData.AgentID = this.ID;
-            chat.AgentData.SessionID = Client.Network.SessionID;
-            chat.ChatData.Channel = channel;
-            chat.ChatData.Message = Helpers.StringToField(message);
-            chat.ChatData.Type = (byte)type;
+        internal uint sittingOn = 0;
 
-            Client.Network.SendPacket((Packet)chat);
-        }
+        private const int CONTROL_AT_POS_INDEX = 0;
+        private const int CONTROL_AT_NEG_INDEX = 1;
+        private const int CONTROL_LEFT_POS_INDEX = 2;
+        private const int CONTROL_LEFT_NEG_INDEX = 3;
+        private const int CONTROL_UP_POS_INDEX = 4;
+        private const int CONTROL_UP_NEG_INDEX = 5;
+        private const int CONTROL_PITCH_POS_INDEX = 6;
+        private const int CONTROL_PITCH_NEG_INDEX = 7;
+        private const int CONTROL_YAW_POS_INDEX = 8;
+        private const int CONTROL_YAW_NEG_INDEX = 9;
+        private const int CONTROL_FAST_AT_INDEX = 10;
+        private const int CONTROL_FAST_LEFT_INDEX = 11;
+        private const int CONTROL_FAST_UP_INDEX = 12;
+        private const int CONTROL_FLY_INDEX = 13;
+        private const int CONTROL_STOP_INDEX = 14;
+        private const int CONTROL_FINISH_ANIM_INDEX = 15;
+        private const int CONTROL_STAND_UP_INDEX = 16;
+        private const int CONTROL_SIT_ON_GROUND_INDEX = 17;
+        private const int CONTROL_MOUSELOOK_INDEX = 18;
+        private const int CONTROL_NUDGE_AT_POS_INDEX = 19;
+        private const int CONTROL_NUDGE_AT_NEG_INDEX = 20;
+        private const int CONTROL_NUDGE_LEFT_POS_INDEX = 21;
+        private const int CONTROL_NUDGE_LEFT_NEG_INDEX = 22;
+        private const int CONTROL_NUDGE_UP_POS_INDEX = 23;
+        private const int CONTROL_NUDGE_UP_NEG_INDEX = 24;
+        private const int CONTROL_TURN_LEFT_INDEX = 25;
+        private const int CONTROL_TURN_RIGHT_INDEX = 26;
+        private const int CONTROL_AWAY_INDEX = 27;
+        private const int CONTROL_LBUTTON_DOWN_INDEX = 28;
+        private const int CONTROL_LBUTTON_UP_INDEX = 29;
+        private const int CONTROL_ML_LBUTTON_DOWN_INDEX = 30;
+        private const int CONTROL_ML_LBUTTON_UP_INDEX = 31;
+        private const int TOTAL_CONTROLS = 32;
 
-        /// &lt;summary&gt;
-        /// Set the height and the width of your avatar. This is used to scale
-        /// the avatar mesh.
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;height&quot;&gt;New height of the avatar&lt;/param&gt;
-        /// &lt;param name=&quot;width&quot;&gt;New width of the avatar&lt;/param&gt;
-        public void SetHeightWidth(ushort height, ushort width)
+        public Avatar()
         {
-            AgentHeightWidthPacket heightwidth = new AgentHeightWidthPacket();
-            heightwidth.AgentData.AgentID = Client.Network.AgentID;
-            heightwidth.AgentData.SessionID = Client.Network.SessionID;
-            heightwidth.AgentData.CircuitCode = Client.Network.CurrentSim.CircuitCode;
-            heightwidth.HeightWidthBlock.Height = height;
-            heightwidth.HeightWidthBlock.Width = width;
-            heightwidth.HeightWidthBlock.GenCounter = HeightWidthGenCounter++;
-
-            Client.Network.SendPacket((Packet)heightwidth);
         }
-
-        /// &lt;summary&gt;
-        /// Give Money to destination Avatar
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;target&quot;&gt;UUID of the Target Avatar&lt;/param&gt;
-        /// &lt;param name=&quot;amount&quot;&gt;Amount in L$&lt;/param&gt;
-        /// &lt;param name=&quot;description&quot;&gt;Reason (optional normally)&lt;/param&gt;
-        public void GiveMoney(LLUUID target, int amount, string description)
-        {
-            // 5001 - transaction type for av to av money transfers
-            
-            GiveMoney(target, amount, description, 5001);
-        }
-
-        /// &lt;summary&gt;
-        /// Toggle running on or off
-        /// &lt;/summary&gt;
-        public void SetAlwaysRun(bool running)
-        {
-            SetAlwaysRunPacket run = new SetAlwaysRunPacket();
-            run.AgentData.AgentID = Client.Network.AgentID;
-            run.AgentData.SessionID = Client.Network.SessionID;
-            run.AgentData.AlwaysRun = running;
-            Client.Network.SendPacket(run);
-        }
-
-        /// &lt;summary&gt;
-        /// Give Money to destionation Object or Avatar
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;target&quot;&gt;UUID of the Target Object/Avatar&lt;/param&gt;
-        /// &lt;param name=&quot;amount&quot;&gt;Amount in L$&lt;/param&gt;
-        /// &lt;param name=&quot;description&quot;&gt;Reason (Optional normally)&lt;/param&gt;
-        /// &lt;param name=&quot;transactiontype&quot;&gt;The type of transaction.  Currently only 5001 is
-        /// documented for Av-&gt;Av money transfers.&lt;/param&gt;
-        public void GiveMoney(LLUUID target, int amount, string description, int transactiontype)
-        {
-            MoneyTransferRequestPacket money = new MoneyTransferRequestPacket();
-            money.AgentData.AgentID = this.ID;
-            money.AgentData.SessionID = Client.Network.SessionID;
-            money.MoneyData.Description = Helpers.StringToField(description);
-            money.MoneyData.DestID = target;
-            money.MoneyData.SourceID = this.ID;
-            money.MoneyData.TransactionType = transactiontype;
-            money.MoneyData.AggregatePermInventory = 0; //TODO: whats this?
-            money.MoneyData.AggregatePermNextOwner = 0; //TODO: whats this?
-            money.MoneyData.Flags = 0; //TODO: whats this?
-            money.MoneyData.Amount = amount;
-
-            Client.Network.SendPacket((Packet)money);
-        }
-
-        /// &lt;summary&gt;
-        /// Send an AgentAnimation packet that will toggle animations on or off
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;animations&quot;&gt;A list of animation UUIDs, and whether to
-        /// turn that animation on or off&lt;/param&gt;
-        public void Animate(Dictionary&lt;LLUUID, bool&gt; animations)
-        {
-            AgentAnimationPacket animate = new AgentAnimationPacket();
-
-            animate.AgentData.AgentID = Client.Network.AgentID;
-            animate.AgentData.SessionID = Client.Network.SessionID;
-            animate.AnimationList = new AgentAnimationPacket.AnimationListBlock[animations.Count];
-            int i = 0;
-
-            foreach (KeyValuePair&lt;LLUUID, bool&gt; animation in animations)
-            {
-                animate.AnimationList[i] = new AgentAnimationPacket.AnimationListBlock();
-                animate.AnimationList[i].AnimID = animation.Key;
-                animate.AnimationList[i].StartAnim = animation.Value;
-
-                i++;
-            }
-
-            Client.Network.SendPacket(animate);
-        }
-
-        /// &lt;summary&gt;
-        /// Use the autopilot sim function to move the avatar to a new position
-        /// &lt;/summary&gt;
-        /// &lt;remarks&gt;The z value is currently not handled properly by the simulator&lt;/remarks&gt;
-        /// &lt;param name=&quot;globalX&quot;&gt;Integer value for the global X coordinate to move to&lt;/param&gt;
-        /// &lt;param name=&quot;globalY&quot;&gt;Integer value for the global Y coordinate to move to&lt;/param&gt;
-        /// &lt;param name=&quot;z&quot;&gt;Floating-point value for the Z coordinate to move to&lt;/param&gt;
-        /// &lt;example&gt;AutoPilot(252620, 247078, 20.2674);&lt;/example&gt;
-        public void AutoPilot(ulong globalX, ulong globalY, float z)
-        {
-            GenericMessagePacket autopilot = new GenericMessagePacket();
-
-            autopilot.AgentData.AgentID = Client.Network.AgentID;
-            autopilot.AgentData.SessionID = Client.Network.SessionID;
-            autopilot.MethodData.Invoice = LLUUID.Zero;
-            autopilot.MethodData.Method = Helpers.StringToField(&quot;autopilot&quot;);
-            autopilot.ParamList = new GenericMessagePacket.ParamListBlock[3];
-            autopilot.ParamList[0] = new GenericMessagePacket.ParamListBlock();
-            autopilot.ParamList[0].Parameter = Helpers.StringToField(globalX.ToString());
-            autopilot.ParamList[1] = new GenericMessagePacket.ParamListBlock();
-            autopilot.ParamList[1].Parameter = Helpers.StringToField(globalY.ToString());
-            autopilot.ParamList[2] = new GenericMessagePacket.ParamListBlock();
-            // TODO: Do we need to prevent z coordinates from being sent in 1.4827e-18 notation?
-            autopilot.ParamList[2].Parameter = Helpers.StringToField(z.ToString());
-
-            Client.Network.SendPacket(autopilot);
-        }
-
-        /// &lt;summary&gt;
-        /// Use the autopilot sim function to move the avatar to a new position
-        /// &lt;/summary&gt;
-        /// &lt;remarks&gt;The z value is currently not handled properly by the simulator&lt;/remarks&gt;
-        /// &lt;param name=&quot;localX&quot;&gt;Integer value for the local X coordinate to move to&lt;/param&gt;
-        /// &lt;param name=&quot;localY&quot;&gt;Integer value for the local Y coordinate to move to&lt;/param&gt;
-        /// &lt;param name=&quot;z&quot;&gt;Floating-point value for the Z coordinate to move to&lt;/param&gt;
-        /// &lt;example&gt;AutoPilot(252620, 247078, 20.2674);&lt;/example&gt;
-        public void AutoPilotLocal(int localX, int localY, float z)
-        {
-            GridRegion gr = Client.Network.CurrentSim.Region.GridRegionData;
-            ulong GridCornerX = ((ulong)gr.X * (ulong)256) + (ulong)localX;
-            ulong GridCornerY = ((ulong)gr.Y * (ulong)256) + (ulong)localY;
-            AutoPilot(GridCornerX, GridCornerY, z);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;regionHandle&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;tc&quot;&gt;&lt;/param&gt;
-        public void BeginTeleport(ulong regionHandle, LLVector3 position, TeleportCallback tc)
-        {
-            BeginTeleport(regionHandle, position, new LLVector3(position.X + 1.0f, position.Y, position.Z), tc);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;regionHandle&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;lookAt&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;tc&quot;&gt;&lt;/param&gt;
-        public void BeginTeleport(ulong regionHandle, LLVector3 position, LLVector3 lookAt, TeleportCallback tc)
-        {
-            OnBeginTeleport = tc;
-
-            TeleportLocationRequestPacket teleport = new TeleportLocationRequestPacket();
-            teleport.AgentData.AgentID = Client.Network.AgentID;
-            teleport.AgentData.SessionID = Client.Network.SessionID;
-            teleport.Info.LookAt = lookAt;
-            teleport.Info.Position = position;
-            teleport.Info.RegionHandle = regionHandle;
-
-            Client.Log(&quot;Teleporting to region &quot; + regionHandle.ToString(), Helpers.LogLevel.Info);
-
-            Client.Network.SendPacket(teleport);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;regionHandle&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Teleport(ulong regionHandle, LLVector3 position)
-        {
-            return Teleport(regionHandle, position, new LLVector3(position.X + 1.0f, position.Y, position.Z));
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;regionHandle&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;lookAt&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Teleport(ulong regionHandle, LLVector3 position, LLVector3 lookAt)
-        {
-            TeleportStat = TeleportStatus.None;
-
-            TeleportLocationRequestPacket teleport = new TeleportLocationRequestPacket();
-            teleport.AgentData.AgentID = Client.Network.AgentID;
-            teleport.AgentData.SessionID = Client.Network.SessionID;
-            teleport.Info.LookAt = lookAt;
-            teleport.Info.Position = position;
-            
-            teleport.Info.RegionHandle = regionHandle;
-
-            Client.Log(&quot;Teleporting to region &quot; + regionHandle.ToString(), Helpers.LogLevel.Info);
-
-            // Start the timeout check
-            TeleportTimeout = false;
-            TeleportTimer.Start();
-
-            Client.Network.SendPacket(teleport);
-
-            while (TeleportStat != TeleportStatus.Failed &amp;&amp; TeleportStat != TeleportStatus.Finished &amp;&amp; !TeleportTimeout)
-            {
-                Client.Tick();
-            }
-
-            TeleportTimer.Stop();
-
-            if (TeleportTimeout)
-            {
-                TeleportMessage = &quot;Teleport timed out.&quot;;
-                TeleportStat = TeleportStatus.Failed;
-
-                if (OnTeleport != null) { OnTeleport(TeleportMessage, TeleportStat); }
-            }
-            else
-            {
-                if (OnTeleport != null) { OnTeleport(TeleportMessage, TeleportStat); }
-            }
-
-            return (TeleportStat == TeleportStatus.Finished);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;simName&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Teleport(string simName, LLVector3 position)
-        {
-            //position.Z = 0; //why was this here?
-            return Teleport(simName, position, new LLVector3(0, 1.0F, 0));
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;simName&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;position&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;lookAt&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Teleport(string simName, LLVector3 position, LLVector3 lookAt)
-        {
-            int attempts = 0;
-            TeleportStat = TeleportStatus.None;
-
-            simName = simName.ToLower();
-
-            GridRegion region = Client.Grid.GetGridRegion(simName);
-
-            if (region != null)
-            {
-                return Teleport(region.RegionHandle, position, lookAt);
-            }
-            else
-            {
-                while (attempts++ &lt; 5)
-                {
-                    region = Client.Grid.GetGridRegion(simName);
-
-                    if (region != null)
-                    {
-                        return Teleport(region.RegionHandle, position, lookAt);
-                    }
-                    else
-                    {
-                        // Request the region info again
-                        Client.Grid.AddSim(simName);
-                        
-                        System.Threading.Thread.Sleep(1000);
-                    }
-                }
-            }
-
-            if (OnTeleport != null)
-            {
-                TeleportMessage = &quot;Unable to resolve name: &quot; + simName;
-                TeleportStat = TeleportStatus.Failed;
-                OnTeleport(TeleportMessage, TeleportStat);
-            }
-
-            return false;
-        }
-
-        /// &lt;summary&gt;
-        /// Respond to a teleport lure by either accepting it and initiating 
-        /// the teleport, or denying it
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;requesterID&quot;&gt;UUID of the avatar requesting the teleport&lt;/param&gt;
-        /// &lt;param name=&quot;accept&quot;&gt;Accept the teleport request or deny it&lt;/param&gt;
-        public void TeleportLureRespond(LLUUID requesterID, bool accept)
-        {
-            ImprovedInstantMessagePacket im = new ImprovedInstantMessagePacket();
-
-            im.AgentData.AgentID = Client.Network.AgentID;
-            im.AgentData.SessionID = Client.Network.SessionID;
-            im.MessageBlock.BinaryBucket = new byte[0];
-            im.MessageBlock.FromAgentName = Helpers.StringToField(this.FirstName + &quot; &quot; + this.LastName);
-            im.MessageBlock.FromGroup = false;
-            im.MessageBlock.ID = Client.Network.AgentID;
-            im.MessageBlock.Message = new byte[0];
-            im.MessageBlock.Offline = 0;
-            im.MessageBlock.ParentEstateID = 0;
-            im.MessageBlock.Position = this.Position;
-            im.MessageBlock.RegionID = LLUUID.Zero;
-            im.MessageBlock.Timestamp = 0;
-            im.MessageBlock.ToAgentID = requesterID;
-
-            if (accept)
-            {
-                im.MessageBlock.Dialog = (byte)InstantMessageDialog.AcceptTeleport;
-                
-                Client.Network.SendPacket(im);
-
-                TeleportLureRequestPacket lure = new TeleportLureRequestPacket();
-
-                lure.Info.AgentID = Client.Network.AgentID;
-                lure.Info.SessionID = Client.Network.SessionID;
-                lure.Info.LureID = Client.Network.AgentID;
-                lure.Info.TeleportFlags = 4; // TODO: What does this mean?
-
-                Client.Network.SendPacket(lure);
-            }
-            else
-            {
-                im.MessageBlock.Dialog = (byte)InstantMessageDialog.DenyTeleport;
-
-                Client.Network.SendPacket(im);
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// Grabs an object
-        /// &lt;/summary&gt;
-        public void Grab(uint objectLocalID)
-        {
-            ObjectGrabPacket grab = new ObjectGrabPacket();
-            grab.AgentData.AgentID = Client.Network.AgentID;
-            grab.AgentData.SessionID = Client.Network.SessionID;
-            grab.ObjectData.LocalID = objectLocalID;
-            grab.ObjectData.GrabOffset = new LLVector3(0, 0, 0);
-            Client.Network.SendPacket(grab);
-        }
-
-        /// &lt;summary&gt;
-        /// Drags on an object
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;objectID&quot;&gt;Strangely, LLUID instead of local ID&lt;/param&gt;
-        /// &lt;param name=&quot;grabPosition&quot;&gt;Drag target in region coordinates&lt;/param&gt;
-        public void GrabUpdate(LLUUID objectID, LLVector3 grabPosition)
-        {
-            ObjectGrabUpdatePacket grab = new ObjectGrabUpdatePacket();
-            grab.AgentData.AgentID = Client.Network.AgentID;
-            grab.AgentData.SessionID = Client.Network.SessionID;
-            grab.ObjectData.ObjectID = objectID;
-            grab.ObjectData.GrabOffsetInitial = new LLVector3(0, 0, 0);
-            grab.ObjectData.GrabPosition = grabPosition;
-            grab.ObjectData.TimeSinceLast = 0;
-            Client.Network.SendPacket(grab);
-        }
-
-        /// &lt;summary&gt;
-        /// Releases a grabbed object
-        /// &lt;/summary&gt;
-        public void DeGrab(uint objectLocalID)
-        {
-            ObjectDeGrabPacket degrab = new ObjectDeGrabPacket();
-            degrab.AgentData.AgentID = Client.Network.AgentID;
-            degrab.AgentData.SessionID = Client.Network.SessionID;
-            degrab.ObjectData.LocalID = objectLocalID;
-            Client.Network.SendPacket(degrab);
-        }
-
-        /// &lt;summary&gt;
-        /// Touches an object
-        /// &lt;/summary&gt;
-        public void Touch(uint objectLocalID)
-        {
-            Client.Self.Grab(objectLocalID);
-            Client.Self.DeGrab(objectLocalID);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
-        public void CompleteAgentMovement(Simulator simulator)
-        {
-            CompleteAgentMovementPacket move = new CompleteAgentMovementPacket();
-
-            move.AgentData.AgentID = Client.Network.AgentID;
-            move.AgentData.SessionID = Client.Network.SessionID;
-            move.AgentData.CircuitCode = simulator.CircuitCode;
-
-            Client.Network.SendPacket(move, simulator);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;reliable&quot;&gt;&lt;/param&gt;
-        public void UpdateCamera(Avatar.AgentUpdateFlags controlFlags, LLVector3 position, LLVector3 forwardAxis,
-            LLVector3 leftAxis, LLVector3 upAxis, LLQuaternion bodyRotation, LLQuaternion headRotation, float farClip,
-            bool reliable)
-        {
-            AgentUpdatePacket update = new AgentUpdatePacket();
-            update.AgentData.AgentID = Client.Network.AgentID;
-            update.AgentData.SessionID = Client.Network.SessionID;
-            update.AgentData.State = 0;
-            // Semi-sane default values
-            update.AgentData.BodyRotation = bodyRotation; //new LLQuaternion(0, 0.6519076f, 0, 0);
-            update.AgentData.HeadRotation = headRotation; //LLQuaternion.Identity;
-            update.AgentData.CameraCenter = position; //new LLVector3(9.549901f, 7.033957f, 11.75f);
-            update.AgentData.CameraAtAxis = forwardAxis; //new LLVector3(0.7f, 0.7f, 0);
-            update.AgentData.CameraLeftAxis = leftAxis; //new LLVector3(-0.7f, 0.7f, 0);
-            update.AgentData.CameraUpAxis = upAxis; //new LLVector3(0.1822026f, 0.9828722f, 0);
-            update.AgentData.Far = farClip;
-            update.AgentData.ControlFlags = (uint)controlFlags;
-            update.AgentData.Flags = 0;
-            update.Header.Reliable = reliable;
-
-            Client.Network.SendPacket(update);
-
-            // Send an AgentFOV packet widening our field of vision
-            /*AgentFOVPacket fovPacket = new AgentFOVPacket();
-            fovPacket.AgentData.AgentID = this.ID;
-            fovPacket.AgentData.SessionID = Client.Network.SessionID;
-            fovPacket.AgentData.CircuitCode = simulator.CircuitCode;
-            fovPacket.FOVBlock.GenCounter = 0;
-            fovPacket.FOVBlock.VerticalAngle = 6.28318531f;
-            fovPacket.Header.Reliable = true;
-            Client.Network.SendPacket((Packet)fovPacket);*/
-        }
-
-        /// &lt;summary&gt;
-        /// [UNUSED - for now]
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
-        private void CoarseLocationHandler(Packet packet, Simulator simulator)
-        {
-            // TODO: This will be useful one day
-        }
-
-        /// &lt;summary&gt;
-        /// Take an incoming ImprovedInstantMessage packet, auto-parse, and if
-        ///   OnInstantMessage is defined call that with the appropriate arguments.
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;Incoming ImprovedInstantMessagePacket&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
-        private void InstantMessageHandler(Packet packet, Simulator simulator)
-        {
-            if (packet.Type == PacketType.ImprovedInstantMessage)
-            {
-                ImprovedInstantMessagePacket im = (ImprovedInstantMessagePacket)packet;
-                
-                if (OnInstantMessage != null)
-                {
-                    OnInstantMessage(
-                        im.AgentData.AgentID
-                        , Helpers.FieldToString(im.MessageBlock.FromAgentName),
-                        im.MessageBlock.ToAgentID
-                        , im.MessageBlock.ParentEstateID
-                        , im.MessageBlock.RegionID
-                        , im.MessageBlock.Position
-                        , im.MessageBlock.Dialog
-                        , im.MessageBlock.FromGroup
-                        , im.MessageBlock.ID
-                        , new DateTime(im.MessageBlock.Timestamp)
-                        , Helpers.FieldToString(im.MessageBlock.Message)
-                        , im.MessageBlock.Offline
-                        , im.MessageBlock.BinaryBucket
-                        );
-                }
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// Take an incoming Chat packet, auto-parse, and if OnChat is defined call 
-        ///   that with the appropriate arguments.
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;Incoming ChatFromSimulatorPacket&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
-        private void ChatHandler(Packet packet, Simulator simulator)
-        {
-            if (packet.Type == PacketType.ChatFromSimulator)
-            {
-                ChatFromSimulatorPacket chat = (ChatFromSimulatorPacket)packet;
-
-                if (OnChat != null)
-                {
-                    OnChat(Helpers.FieldToString(chat.ChatData.Message)
-                            , chat.ChatData.Audible
-                            , chat.ChatData.ChatType
-                            , chat.ChatData.SourceType
-                            , Helpers.FieldToString(chat.ChatData.FromName)
-                            , chat.ChatData.SourceID
-                            , chat.ChatData.OwnerID
-                            , chat.ChatData.Position
-                            );
-                }
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// Update client's Position and LookAt from incoming packet
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;Incoming AgentMovementCompletePacket&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
-        private void MovementCompleteHandler(Packet packet, Simulator simulator)
-        {
-            AgentMovementCompletePacket movement = (AgentMovementCompletePacket)packet;
-
-            this.Position = movement.Data.Position;
-            this.LookAt = movement.Data.LookAt;
-        }
-
-        /// &lt;summary&gt;
-        /// Update Client Avatar's health via incoming packet
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;Incoming HealthMessagePacket&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
-        private void HealthHandler(Packet packet, Simulator simulator)
-        {
-            health = ((HealthMessagePacket)packet).HealthData.Health;
-        }
-
-        /// &lt;summary&gt;
-        /// Update Client Avatar's L$ balance from incoming packet
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;Incoming MoneyBalanceReplyPacket&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
-        private void BalanceHandler(Packet packet, Simulator simulator)
-        {
-            if (packet.Type == PacketType.MoneyBalanceReply)
-            {
-                balance = ((MoneyBalanceReplyPacket)packet).MoneyData.MoneyBalance;
-            }
-            else if (packet.Type == PacketType.MoneySummaryReply)
-            {
-                balance = ((MoneySummaryReplyPacket)packet).MoneyData.Balance;
-            }
-            else if (packet.Type == PacketType.AdjustBalance)
-            {
-                balance += ((AdjustBalancePacket)packet).AgentData.Delta;
-            }
-
-            if (OnBalanceUpdated != null)
-            {
-                OnBalanceUpdated(balance);
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
-        private void TeleportHandler(Packet packet, Simulator simulator)
-        {
-            if (packet.Type == PacketType.TeleportStart)
-            {
-                Client.DebugLog(&quot;TeleportStart received from &quot; + simulator.ToString());
-
-                TeleportMessage = &quot;Teleport started&quot;;
-                TeleportStat = TeleportStatus.Start;
-
-                if (OnBeginTeleport != null)
-                {
-                    OnBeginTeleport(TeleportMessage, TeleportStat);
-                }
-            }
-            else if (packet.Type == PacketType.TeleportProgress)
-            {
-                Client.DebugLog(&quot;TeleportProgress received from &quot; + simulator.ToString());
-
-                TeleportMessage = Helpers.FieldToString(((TeleportProgressPacket)packet).Info.Message);
-                TeleportStat = TeleportStatus.Progress;
-
-                if (OnBeginTeleport != null)
-                {
-                    OnBeginTeleport(TeleportMessage, TeleportStat);
-                }
-            }
-            else if (packet.Type == PacketType.TeleportFailed)
-            {
-                Client.DebugLog(&quot;TeleportFailed received from &quot; + simulator.ToString());
-
-                TeleportMessage = Helpers.FieldToString(((TeleportFailedPacket)packet).Info.Reason);
-                TeleportStat = TeleportStatus.Failed;
-
-                if (OnBeginTeleport != null)
-                {
-                    OnBeginTeleport(TeleportMessage, TeleportStat);
-                }
-
-                OnBeginTeleport = null;
-            }
-            else if (packet.Type == PacketType.TeleportFinish)
-            {
-                Client.DebugLog(&quot;TeleportFinish received from &quot; + simulator.ToString());
-
-                TeleportFinishPacket finish = (TeleportFinishPacket)packet;
-
-                // Connect to the new sim
-                Simulator sim = Client.Network.Connect(new IPAddress((long)finish.Info.SimIP), finish.Info.SimPort, 
-                    simulator.CircuitCode, true);
-                
-                if (sim != null)
-                {
-                    TeleportMessage = &quot;Teleport finished&quot;;
-                    TeleportStat = TeleportStatus.Finished;
-
-                    // Move the avatar in to the new sim
-                    CompleteAgentMovementPacket move = new CompleteAgentMovementPacket();
-                    move.AgentData.AgentID = Client.Network.AgentID;
-                    move.AgentData.SessionID = Client.Network.SessionID;
-                    move.AgentData.CircuitCode = simulator.CircuitCode;
-                    Client.Network.SendPacket(move, sim);
-
-                    Client.Log(&quot;Moved to new sim &quot; + sim.ToString(), Helpers.LogLevel.Info);
-
-                    if (OnBeginTeleport != null)
-                    {
-                        OnBeginTeleport(TeleportMessage, TeleportStat);
-                    }
-                    else
-                    {
-                        // Sleep a little while so we can collect parcel information
-                        // FIXME: This doesn't belong in libsecondlife
-                        System.Threading.Thread.Sleep(1000);
-                    }
-                }
-                else
-                {
-                    TeleportMessage = &quot;Failed to connect to the new sim after a teleport&quot;;
-                    TeleportStat = TeleportStatus.Failed;
-
-                    Client.Log(TeleportMessage, Helpers.LogLevel.Warning);
-
-                    if (OnBeginTeleport != null)
-                    {
-                        OnBeginTeleport(TeleportMessage, TeleportStat);
-                    }
-                }
-
-                OnBeginTeleport = null;
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;source&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;ea&quot;&gt;&lt;/param&gt;
-        private void TeleportTimerEvent(object source, System.Timers.ElapsedEventArgs ea)
-        {
-            TeleportTimeout = true;
-        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/AvatarManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/AvatarManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/AvatarManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -32,215 +32,151 @@
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// 
+    /// Retrieve friend status notifications, and retrieve avatar names and
+    /// profiles
     /// &lt;/summary&gt;
     public class AvatarManager
     {
         /// &lt;summary&gt;
         /// Triggered after friend request packet is sent out
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;AgentID&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;Online&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;agentID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;online&quot;&gt;&lt;/param&gt;
         public delegate void FriendNotificationCallback(LLUUID agentID, bool online);
         /// &lt;summary&gt;
         /// Triggered when a UUIDNameReply is received
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;names&quot;&gt;&lt;/param&gt;
-        public delegate void AgentNamesCallback(Dictionary&lt;LLUUID, string&gt; names);
+        public delegate void AvatarNamesCallback(Dictionary&lt;LLUUID, string&gt; names);
         /// &lt;summary&gt;
-        /// 
+        /// Triggered when a response for avatar statistics (ratings) is returned
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;avatar&quot;&gt;&lt;/param&gt;
-        public delegate void AvatarPropertiesCallback(Avatar avatar);
+        /// &lt;param name=&quot;avatarID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;statistics&quot;&gt;&lt;/param&gt;
+        public delegate void AvatarStatisticsCallback(LLUUID avatarID, Avatar.Statistics statistics);
         /// &lt;summary&gt;
-        /// 
+        /// Triggered when a response for avatar interests is returned
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;avatar&quot;&gt;&lt;/param&gt;
-        public delegate void AvatarNameCallback(Avatar avatar);
+        /// &lt;param name=&quot;avatarID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;interests&quot;&gt;&lt;/param&gt;
+        public delegate void AvatarInterestsCallback(LLUUID avatarID, Avatar.Interests interests);
         /// &lt;summary&gt;
-        /// 
+        /// Triggered when avatar properties are received (AvatarPropertiesReply)
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;avatar&quot;&gt;&lt;/param&gt;
-        public delegate void AvatarStatisticsCallback(Avatar avatar);
+        /// &lt;param name=&quot;avatarID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;properties&quot;&gt;&lt;/param&gt;
+        public delegate void AvatarPropertiesCallback(LLUUID avatarID, Avatar.Properties properties);
         /// &lt;summary&gt;
-        /// 
+        /// Triggered when a name search reply is received (AvatarPickerReply)
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;avatar&quot;&gt;&lt;/param&gt;
-        public delegate void AvatarInterestsCallback(Avatar avatar);
+        /// &lt;param name=&quot;queryID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;avatars&quot;&gt;&lt;/param&gt;
+        public delegate void AvatarNameSearchCallback(LLUUID queryID, Dictionary&lt;LLUUID, string&gt; avatars);
 
+
         /// &lt;summary&gt;Triggered whenever a friend comes online or goes offline&lt;/summary&gt;
         public event FriendNotificationCallback OnFriendNotification;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public event AvatarNamesCallback OnAvatarNames;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public event AvatarStatisticsCallback OnAvatarStatistics;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public event AvatarInterestsCallback OnAvatarInterests;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public event AvatarPropertiesCallback OnAvatarProperties;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public event AvatarNameSearchCallback OnAvatarNameSearch;
 
         private SecondLife Client;
-        private Dictionary&lt;LLUUID, Avatar&gt; Avatars;
-        private AgentNamesCallback OnAgentNames;
-        private Dictionary&lt;LLUUID, AvatarPropertiesCallback&gt; AvatarPropertiesCallbacks;
-	    private Dictionary&lt;LLUUID, AvatarStatisticsCallback&gt; AvatarStatisticsCallbacks;
-        private Dictionary&lt;LLUUID, AvatarInterestsCallback&gt; AvatarInterestsCallbacks;
 
         /// &lt;summary&gt;
-        /// 
+        /// Represents other avatars
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
         public AvatarManager(SecondLife client)
         {
             Client = client;
-            Avatars = new Dictionary&lt;LLUUID, Avatar&gt;();
-            //Callback Dictionaries
-            AvatarPropertiesCallbacks = new Dictionary&lt;LLUUID, AvatarPropertiesCallback&gt;();
-	        AvatarStatisticsCallbacks = new Dictionary&lt;LLUUID, AvatarStatisticsCallback&gt;();
-            AvatarInterestsCallbacks = new Dictionary&lt;LLUUID, AvatarInterestsCallback&gt;();
+
             // Friend notification callback
             NetworkManager.PacketCallback callback = new NetworkManager.PacketCallback(FriendNotificationHandler);
             Client.Network.RegisterCallback(PacketType.OnlineNotification, callback);
             Client.Network.RegisterCallback(PacketType.OfflineNotification, callback);
-            Client.Network.RegisterCallback(PacketType.UUIDNameReply, new NetworkManager.PacketCallback(GetAgentNameHandler));
+
+            // Avatar profile callbacks
             Client.Network.RegisterCallback(PacketType.AvatarPropertiesReply, new NetworkManager.PacketCallback(AvatarPropertiesHandler));
             Client.Network.RegisterCallback(PacketType.AvatarStatisticsReply, new NetworkManager.PacketCallback(AvatarStatisticsHandler));
             Client.Network.RegisterCallback(PacketType.AvatarInterestsReply, new NetworkManager.PacketCallback(AvatarInterestsHandler));
-        }
-              
 
-        /// &lt;summary&gt;
-        /// Add an Avatar into the Avatars Dictionary
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;avatar&quot;&gt;Filled-out Avatar class to insert&lt;/param&gt;
-        public void AddAvatar(Avatar avatar)
-        {
-            lock (Avatars)
-            {
-                Avatars[avatar.ID] = avatar;
-            }
+            // Other callbacks
+            Client.Network.RegisterCallback(PacketType.UUIDNameReply, new NetworkManager.PacketCallback(AvatarNameHandler));
+            Client.Network.RegisterCallback(PacketType.AvatarPickerReply, new NetworkManager.PacketCallback(AvatarPickerReplyHandler));
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Request a single avatar name
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Contains(LLUUID id)
+        /// &lt;param name=&quot;id&quot;&gt;The avatar key to retrieve a name for&lt;/param&gt;
+        public void RequestAvatarName(LLUUID id)
         {
-            return Avatars.ContainsKey(id);
-        }
+            UUIDNameRequestPacket request = new UUIDNameRequestPacket();
+            request.UUIDNameBlock = new UUIDNameRequestPacket.UUIDNameBlockBlock[1];
+            request.UUIDNameBlock[0] = new UUIDNameRequestPacket.UUIDNameBlockBlock();
+            request.UUIDNameBlock[0].ID = id;
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;a&quot;&gt;&lt;/param&gt;
-        public void UpdateAvatar(Avatar a)
-        {
-            //Basic profile properties
-            AvatarPropertiesUpdatePacket apup = new AvatarPropertiesUpdatePacket();
-            AvatarPropertiesUpdatePacket.AgentDataBlock adb = new AvatarPropertiesUpdatePacket.AgentDataBlock();
-            adb.AgentID = a.ID;
-            adb.SessionID = Client.Network.SessionID;
-            apup.AgentData = adb;
-            AvatarPropertiesUpdatePacket.PropertiesDataBlock pdb = new AvatarPropertiesUpdatePacket.PropertiesDataBlock();
-            pdb.AllowPublish = a.AllowPublish;
-            pdb.FLAboutText = Helpers.StringToField(a.FirstLifeText);
-            pdb.FLImageID = a.FirstLifeImage;
-            pdb.ImageID = a.ProfileImage;
-            pdb.MaturePublish = a.MaturePublish;
-            pdb.ProfileURL = Helpers.StringToField(a.ProfileURL);
-            apup.PropertiesData = pdb;
-            //Intrests
-            AvatarInterestsUpdatePacket aiup = new AvatarInterestsUpdatePacket();
-            AvatarInterestsUpdatePacket.AgentDataBlock iadb = new AvatarInterestsUpdatePacket.AgentDataBlock();
-            iadb.AgentID = a.ID;
-            iadb.SessionID = Client.Network.SessionID;
-            aiup.AgentData = iadb;
-            AvatarInterestsUpdatePacket.PropertiesDataBlock ipdb = new AvatarInterestsUpdatePacket.PropertiesDataBlock();
-            ipdb.LanguagesText = Helpers.StringToField(a.LanguagesText);
-            ipdb.SkillsMask = a.SkillsMask;
-            ipdb.SkillsText = Helpers.StringToField(a.SkillsText);
-            ipdb.WantToMask = a.WantToMask;
-            ipdb.WantToText = Helpers.StringToField(a.WantToText);
-            aiup.PropertiesData = ipdb;
-            //Send packets
-            Client.Network.SendPacket(apup);
-            Client.Network.SendPacket(aiup);
+            Client.Network.SendPacket(request);
         }
 
         /// &lt;summary&gt;
-        /// This function will only check if the avatar name exists locally,
-        /// it will not do any networking calls to fetch the name
+        /// Request a list of avatar names
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;The avatar name, or an empty string if it's not found&lt;/returns&gt;
-        public string LocalAvatarNameLookup(LLUUID id)
+        /// &lt;param name=&quot;ids&quot;&gt;The avatar keys to retrieve names for&lt;/param&gt;
+        public void RequestAvatarNames(List&lt;LLUUID&gt; ids)
         {
-            string name = &quot;&quot;;
+            UUIDNameRequestPacket request = new UUIDNameRequestPacket();
+            request.UUIDNameBlock = new UUIDNameRequestPacket.UUIDNameBlockBlock[ids.Count];
 
-            lock (Avatars)
+            for (int i = 0; i &lt; ids.Count; i++)
             {
-                if (Avatars.ContainsKey(id))
-                {
-                    name = Avatars[id].Name;
-                }
+                request.UUIDNameBlock[i] = new UUIDNameRequestPacket.UUIDNameBlockBlock();
+                request.UUIDNameBlock[i].ID = ids[i];
             }
 
-            return name;
+            Client.Network.SendPacket(request);
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Start a request for Avatar Properties
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
-        public void BeginGetAvatarName(LLUUID id, AgentNamesCallback anc)
+        /// &lt;param name=&quot;avatarid&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;aic&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;asc&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;apc&quot;&gt;&lt;/param&gt;
+        public void RequestAvatarProperties(LLUUID avatarid)
         {
-            // TODO: BeginGetAvatarNames is pretty bulky, rewrite a simple version here
+            AvatarPropertiesRequestPacket aprp = new AvatarPropertiesRequestPacket();
+            
+            aprp.AgentData.AgentID = Client.Network.AgentID;
+            aprp.AgentData.SessionID = Client.Network.SessionID;
+            aprp.AgentData.AvatarID = avatarid;
 
-            List&lt;LLUUID&gt; ids = new List&lt;LLUUID&gt;();
-            ids.Add(id);
-
-            BeginGetAvatarNames(ids, anc);
+            Client.Network.SendPacket(aprp);
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Search for an avatar (first name, last name, and uuid)
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;ids&quot;&gt;&lt;/param&gt;
-        public void BeginGetAvatarNames(List&lt;LLUUID&gt; ids, AgentNamesCallback anc)
+        /// &lt;param name=&quot;name&quot;&gt;The name to search for&lt;/param&gt;
+        /// &lt;param name=&quot;queryID&quot;&gt;An ID to associate with this query&lt;/param&gt;
+        public void RequestAvatarNameSearch(string name, LLUUID queryID)
         {
-            if (anc != null)
-            {
-                OnAgentNames = anc;
-            }
+            AvatarPickerRequestPacket aprp = new AvatarPickerRequestPacket();
 
-            Dictionary&lt;LLUUID, string&gt; havenames = new Dictionary&lt;LLUUID,string&gt;();
-            List&lt;LLUUID&gt; neednames = new List&lt;LLUUID&gt;();
+            aprp.AgentData.AgentID = Client.Network.AgentID;
+            aprp.AgentData.SessionID = Client.Network.SessionID;
+            aprp.AgentData.QueryID = queryID;
+            aprp.Data.Name = Helpers.StringToField(name);
 
-            // Fire callbacks for the ones we already have cached
-            foreach (LLUUID id in ids)
-            {
-                if (Avatars.ContainsKey(id))
-                {
-                    havenames[id] = Avatars[id].Name;
-                }
-                else
-                {
-                    neednames.Add(id);
-                }
-            }
-
-            if (havenames.Count &gt; 0 &amp;&amp; OnAgentNames != null)
-            {
-                OnAgentNames(havenames);
-            }
-
-            if (neednames.Count &gt; 0)
-            {
-                UUIDNameRequestPacket request = new UUIDNameRequestPacket();
-
-                request.UUIDNameBlock = new UUIDNameRequestPacket.UUIDNameBlockBlock[neednames.Count];
-
-                for (int i = 0; i &lt; neednames.Count; i++)
-                {
-                    request.UUIDNameBlock[i] = new UUIDNameRequestPacket.UUIDNameBlockBlock();
-                    request.UUIDNameBlock[i].ID = neednames[i];
-                }
-
-                Client.Network.SendPacket(request);
-            }
+            Client.Network.SendPacket(aprp);
         }
 
         /// &lt;summary&gt;
@@ -248,216 +184,151 @@
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;packet&quot;&gt;Incoming Packet to process&lt;/param&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;Unused&lt;/param&gt;
-        private void GetAgentNameHandler(Packet packet, Simulator simulator)
+        private void AvatarNameHandler(Packet packet, Simulator simulator)
         {
-            Dictionary&lt;LLUUID, string&gt; names = new Dictionary&lt;LLUUID, string&gt;();
-            UUIDNameReplyPacket reply = (UUIDNameReplyPacket)packet;
-
-            lock (Avatars)
+            if (OnAvatarNames != null)
             {
+                Dictionary&lt;LLUUID, string&gt; names = new Dictionary&lt;LLUUID, string&gt;();
+                UUIDNameReplyPacket reply = (UUIDNameReplyPacket)packet;
+
                 foreach (UUIDNameReplyPacket.UUIDNameBlockBlock block in reply.UUIDNameBlock)
                 {
-                    if (!Avatars.ContainsKey(block.ID))
-                    {
-                        Avatars[block.ID] = new Avatar();
-                        Avatars[block.ID].ID = block.ID;
-                    }
-
-                    Avatars[block.ID].Name = Helpers.FieldToString(block.FirstName) +
+                    names[block.ID] = Helpers.FieldToString(block.FirstName) +
                         &quot; &quot; + Helpers.FieldToString(block.LastName);
-
-                    names[block.ID] = Avatars[block.ID].Name;
                 }
+                
+                OnAvatarNames(names);
             }
-
-            if (OnAgentNames != null)
-            {
-                OnAgentNames(names);
-            }
         }
 
+        /// &lt;summary&gt;
+        /// Handle incoming friend notifications
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         private void FriendNotificationHandler(Packet packet, Simulator simulator)
         {
-            List&lt;LLUUID&gt; requestids = new List&lt;LLUUID&gt;();
-
-            if (packet.Type == PacketType.OnlineNotification)
+            if (OnFriendNotification != null)
             {
-                // If the agent is online...
-                foreach (OnlineNotificationPacket.AgentBlockBlock block in ((OnlineNotificationPacket)packet).AgentBlock)
+                if (packet.Type == PacketType.OnlineNotification)
                 {
-                    lock (Avatars)
-                    {
-                        if (!Avatars.ContainsKey(block.AgentID))
-                        {
-                            // Mark this avatar for a name request
-                            requestids.Add(block.AgentID);
-
-                            Avatars[block.AgentID] = new Avatar();
-                            Avatars[block.AgentID].ID = block.AgentID;
-                        }
-
-                        Avatars[block.AgentID].Online = true;
-                    }
-
-                    if (OnFriendNotification != null)
-                    {
+                    // If the agent is online
+                    foreach (OnlineNotificationPacket.AgentBlockBlock block in ((OnlineNotificationPacket)packet).AgentBlock)
                         OnFriendNotification(block.AgentID, true);
-                    }
                 }
+                else if (packet.Type == PacketType.OfflineNotification)
+                {
+                    // If the agent is offline
+                    foreach (OfflineNotificationPacket.AgentBlockBlock block in ((OfflineNotificationPacket)packet).AgentBlock)
+                        OnFriendNotification(block.AgentID, true);
+                }
             }
-            else if (packet.Type == PacketType.OfflineNotification)
+        }
+
+        /// &lt;summary&gt;
+        /// Handles incoming avatar statistics, such as ratings
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        private void AvatarStatisticsHandler(Packet packet, Simulator simulator)
+        {
+            if (OnAvatarStatistics != null)
             {
-                // If the agent is Offline...
-                foreach (OfflineNotificationPacket.AgentBlockBlock block in ((OfflineNotificationPacket)packet).AgentBlock)
+                AvatarStatisticsReplyPacket asr = (AvatarStatisticsReplyPacket)packet;
+                Avatar.Statistics stats = new Avatar.Statistics();
+
+                foreach (AvatarStatisticsReplyPacket.StatisticsDataBlock b in asr.StatisticsData)
                 {
-                    lock (Avatars)
-                    {
-                        if (!Avatars.ContainsKey(block.AgentID))
-                        {
-                            // Mark this avatar for a name request
-                            requestids.Add(block.AgentID);
+                    string n = Helpers.FieldToString(b.Name);
 
-                            Avatars[block.AgentID] = new Avatar();
-                            Avatars[block.AgentID].ID = block.AgentID;
-                        }
-
-                        Avatars[block.AgentID].Online = false;
-                    }
-
-                    if (OnFriendNotification != null)
+                    switch (n)
                     {
-                        OnFriendNotification(block.AgentID, true);
+                        case &quot;Behavior&quot;:
+                            stats.BehaviorPositive = b.Positive;
+                            stats.BehaviorNegative = b.Negative;
+                            break;
+                        case &quot;Appearance&quot;:
+                            stats.AppearancePositive = b.Positive;
+                            stats.AppearanceNegative = b.Negative;
+                            break;
+                        case &quot;Building&quot;:
+                            stats.AppearancePositive = b.Positive;
+                            stats.AppearanceNegative = b.Negative;
+                            break;
+                        default:
+                            Client.Log(&quot;Got an AvatarStatistics block with the name &quot; + n, Helpers.LogLevel.Warning);
+                            break;
                     }
                 }
-            }
 
-            if (requestids.Count &gt; 0)
-            {
-                BeginGetAvatarNames(requestids, null);
+                OnAvatarStatistics(asr.AvatarData.AvatarID, stats);
             }
         }
 
-        private void AvatarStatisticsHandler(Packet packet, Simulator simulator)
+        /// &lt;summary&gt;
+        /// Process incoming avatar properties (profile data)
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;sim&quot;&gt;&lt;/param&gt;
+        private void AvatarPropertiesHandler(Packet packet, Simulator sim)
         {
-	    AvatarStatisticsReplyPacket asr = (AvatarStatisticsReplyPacket)packet;
-            lock(Avatars)
+            if (OnAvatarProperties != null)
             {
-		Avatar av;
-		if (!Avatars.ContainsKey(asr.AvatarData.AvatarID))
-		{
-			 av = new Avatar();
-			 av.ID = asr.AvatarData.AvatarID;
-		}
-		else
-		{
-			 av = Avatars[asr.AvatarData.AvatarID];
-		}
+                AvatarPropertiesReplyPacket reply = (AvatarPropertiesReplyPacket)packet;
+                Avatar.Properties properties = new Avatar.Properties();
 
-                foreach(AvatarStatisticsReplyPacket.StatisticsDataBlock b in asr.StatisticsData)
-		{
-			string n = Helpers.FieldToString(b.Name);
-			if(n.Equals(&quot;Behavior&quot;))
-			{
-				av.Behavior = b.Positive;
-			}
-			else if(n.Equals(&quot;Appearance&quot;))
-			{
-				av.Appearance = b.Positive;
-			}
-			else if(n.Equals(&quot;Building&quot;))
-			{
-				av.Building = b.Positive;
-			}
-		}
-		
-		//Call it
-        if (AvatarStatisticsCallbacks.ContainsKey(av.ID) &amp;&amp; AvatarStatisticsCallbacks[av.ID] != null)
-	                AvatarStatisticsCallbacks[av.ID](av);
+                properties.ProfileImage = reply.PropertiesData.ImageID;
+                properties.FirstLifeImage = reply.PropertiesData.FLImageID;
+                properties.Partner = reply.PropertiesData.PartnerID;
+                properties.AboutText = Helpers.FieldToString(reply.PropertiesData.AboutText);
+                properties.FirstLifeText = Helpers.FieldToString(reply.PropertiesData.FLAboutText);
+                properties.BornOn = Helpers.FieldToString(reply.PropertiesData.BornOn);
+                properties.CharterMember = Helpers.FieldToString(reply.PropertiesData.CharterMember);
+                properties.AllowPublish = reply.PropertiesData.AllowPublish;
+                properties.MaturePublish = reply.PropertiesData.MaturePublish;
+                properties.Identified = reply.PropertiesData.Identified;
+                properties.Transacted = reply.PropertiesData.Transacted;
+                properties.ProfileURL = Helpers.FieldToString(reply.PropertiesData.ProfileURL);
+
+                OnAvatarProperties(reply.AgentData.AvatarID, properties);
             }
         }
 
-        private void AvatarPropertiesHandler(Packet packet, Simulator sim)
+        /// &lt;summary&gt;
+        /// Process incoming Avatar Interests information
+        /// &lt;/summary&gt;
+        private void AvatarInterestsHandler(Packet packet, Simulator simulator)
         {
-            Avatar av;
-            AvatarPropertiesReplyPacket reply = (AvatarPropertiesReplyPacket)packet;
-            lock(Avatars)
+            if (OnAvatarInterests != null)
             {
-            if (!Avatars.ContainsKey(reply.AgentData.AvatarID))
-            {
-                //not in our &quot;cache&quot;, create a new object
-                av = new Avatar();
+                AvatarInterestsReplyPacket airp = (AvatarInterestsReplyPacket)packet;
+                Avatar.Interests interests = new Avatar.Interests();
+
+                interests.WantToMask = airp.PropertiesData.WantToMask;
+                interests.WantToText = Helpers.FieldToString(airp.PropertiesData.WantToText);
+                interests.SkillsMask = airp.PropertiesData.SkillsMask;
+                interests.SkillsText = Helpers.FieldToString(airp.PropertiesData.SkillsText);
+                interests.LanguagesText = Helpers.FieldToString(airp.PropertiesData.LanguagesText);
+
+                OnAvatarInterests(airp.AgentData.AvatarID, interests);
             }
-            else
-            {
-                //Cache hit, modify existing avatar
-                av = Avatars[reply.AgentData.AvatarID];
-            }
-            av.ID = reply.AgentData.AvatarID;
-            av.ProfileImage = reply.PropertiesData.ImageID;
-            av.FirstLifeImage = reply.PropertiesData.FLImageID;
-            av.PartnerID = reply.PropertiesData.PartnerID;
-            av.AboutText = Helpers.FieldToString(reply.PropertiesData.AboutText);
-	    
-            av.FirstLifeText = Helpers.FieldToString(reply.PropertiesData.FLAboutText);
-            av.BornOn = Helpers.FieldToString(reply.PropertiesData.BornOn);
-            av.CharterMember = Helpers.FieldToString(reply.PropertiesData.CharterMember);
-            av.AllowPublish = reply.PropertiesData.AllowPublish;
-            av.MaturePublish = reply.PropertiesData.MaturePublish;
-            av.Identified = reply.PropertiesData.Identified;
-            av.Transacted = reply.PropertiesData.Transacted;
-            av.ProfileURL = Helpers.FieldToString(reply.PropertiesData.ProfileURL);
-            //reassign in the cache
-            Avatars[av.ID] = av;
-            //Heaven forbid that we actually get a packet we didn't ask for.
-            if (AvatarPropertiesCallbacks.ContainsKey(av.ID) &amp;&amp; AvatarPropertiesCallbacks[av.ID] != null)
-                AvatarPropertiesCallbacks[av.ID](av);
-            }
         }
 
-        public void BeginAvatarPropertiesRequest(LLUUID avatarid, AvatarPropertiesCallback apc, AvatarStatisticsCallback asc, AvatarInterestsCallback aic)
+        private void AvatarPickerReplyHandler(Packet packet, Simulator simulator)
         {
-            //Set teh callback!
-            AvatarPropertiesCallbacks[avatarid] = apc;
-	        AvatarStatisticsCallbacks[avatarid] = asc;
-            AvatarInterestsCallbacks[avatarid] = aic;
-            //Oh noes
-            //Packet construction, good times
-            AvatarPropertiesRequestPacket aprp = new AvatarPropertiesRequestPacket();
-            AvatarPropertiesRequestPacket.AgentDataBlock adb = new AvatarPropertiesRequestPacket.AgentDataBlock();
-            adb.AgentID = Client.Network.AgentID;
-            adb.SessionID = Client.Network.SessionID;
-            adb.AvatarID = avatarid;
-            aprp.AgentData = adb;
-            //send the packet!
-            Client.Network.SendPacket(aprp);
-        }
-
-        private void AvatarInterestsHandler(Packet packet, Simulator simulator)
-        {
-            AvatarInterestsReplyPacket airp = (AvatarInterestsReplyPacket)packet;
-            Avatar av;
-            lock (Avatars)
+            if (OnAvatarNameSearch != null)
             {
-                if (!Avatars.ContainsKey(airp.AgentData.AvatarID))
+                AvatarPickerReplyPacket reply = (AvatarPickerReplyPacket)packet;
+                Dictionary&lt;LLUUID, string&gt; avatars = new Dictionary&lt;LLUUID,string&gt;();
+
+                foreach (AvatarPickerReplyPacket.DataBlock block in reply.Data)
                 {
-                    //not in our &quot;cache&quot;, create a new object
-                    av = new Avatar();
-                    av.ID = airp.AgentData.AvatarID;
+                    avatars[block.AvatarID] = Helpers.FieldToString(block.FirstName) +
+                        &quot; &quot; + Helpers.FieldToString(block.LastName);
                 }
-                else
-                {
-                    //Cache hit, modify existing avatar
-                    av = Avatars[airp.AgentData.AvatarID];
-                }
-                //The rest of the properties, thanks LL.
-                av.WantToMask = airp.PropertiesData.WantToMask;
-                av.WantToText = Helpers.FieldToString(airp.PropertiesData.WantToText);
-                av.SkillsMask = airp.PropertiesData.SkillsMask;
-                av.SkillsText = Helpers.FieldToString(airp.PropertiesData.SkillsText);
-                av.LanguagesText = Helpers.FieldToString(airp.PropertiesData.LanguagesText);
+
+                OnAvatarNameSearch(reply.AgentData.QueryID, avatars);
             }
-            if (AvatarInterestsCallbacks.ContainsKey(airp.AgentData.AvatarID) &amp;&amp; AvatarInterestsCallbacks[airp.AgentData.AvatarID] != null)
-                AvatarInterestsCallbacks[airp.AgentData.AvatarID](av);
         }
     }
 }

Modified: branches/aditi/libsecondlife-cs/EstateTools.cs
===================================================================
--- branches/aditi/libsecondlife-cs/EstateTools.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/EstateTools.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -29,14 +29,14 @@
 namespace libsecondlife
 {
 	/// &lt;summary&gt;
-	/// Summary description for EstateTools.
+	/// Estate level administration and utilities
 	/// &lt;/summary&gt;
 	public class EstateTools
 	{
 		private SecondLife Client;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor for EstateTools class
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
 		public EstateTools(SecondLife client)
@@ -45,15 +45,15 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Kick an Avatar from an estate
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;prey&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;prey&quot;&gt;Key of Avatar to kick&lt;/param&gt;
 		public void KickUser(LLUUID prey) 
 		{
             EstateOwnerMessagePacket estate = new EstateOwnerMessagePacket();
             estate.AgentData.AgentID = Client.Network.AgentID;
             estate.AgentData.SessionID = Client.Network.SessionID;
-            estate.MethodData.Invoice = LLUUID.GenerateUUID();
+            estate.MethodData.Invoice = LLUUID.Random();
             estate.MethodData.Method = Helpers.StringToField(&quot;kick&quot;);
             estate.ParamList = new EstateOwnerMessagePacket.ParamListBlock[2];
             estate.ParamList[0].Parameter = Helpers.StringToField(Client.Network.AgentID.ToStringHyphenated());
@@ -63,9 +63,9 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Ban an Avatar from an estate
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;prey&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;prey&quot;&gt;Key of Avatar to ban&lt;/param&gt;
 		public void BanUser(LLUUID prey) 
 		{
             // FIXME:

Modified: branches/aditi/libsecondlife-cs/GridManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/GridManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/GridManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -95,8 +95,12 @@
         public event GridRegionCallback OnRegionAdd;
 
         /// &lt;summary&gt;A dictionary of all the regions, indexed by region ID&lt;/summary&gt;
-		public Dictionary&lt;string, GridRegion&gt; Regions;
-        /// &lt;summary&gt;Current direction of the sun&lt;/summary&gt;
+		public Dictionary&lt;string, GridRegion&gt; Regions = new Dictionary&lt;string, GridRegion&gt;();
+
+		/// &lt;summary&gt;A dictionary of all the regions, indexed by region handle&lt;/summary&gt;
+		public Dictionary&lt;ulong, GridRegion&gt; RegionsByHandle = new Dictionary&lt;ulong,GridRegion&gt;();
+
+		/// &lt;summary&gt;Current direction of the sun&lt;/summary&gt;
         public LLVector3 SunDirection;
 
 		private SecondLife Client;
@@ -111,7 +115,6 @@
 		public GridManager(SecondLife client)
 		{
 			Client = client;
-			Regions = new Dictionary&lt;string, GridRegion&gt;();
             SunDirection = LLVector3.Zero;
 
             Client.Network.RegisterCallback(PacketType.MapBlockReply, new NetworkManager.PacketCallback(MapBlockReplyHandler));
@@ -186,7 +189,7 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Begin process to get information for a Region
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;name&quot;&gt;Region Name you're requesting data for&lt;/param&gt;
         /// &lt;param name=&quot;grc&quot;&gt;CallBack being used to process the response&lt;/param&gt;
@@ -250,7 +253,7 @@
         /// Populate Grid info based on data from MapBlockReplyPacket
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;packet&quot;&gt;Incoming MapBlockReplyPacket packet&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;Unused&lt;/param&gt;
 		private void MapBlockReplyHandler(Packet packet, Simulator simulator) 
 		{
 			GridRegion region;
@@ -277,6 +280,11 @@
                         Regions[region.Name.ToLower()] = region;
                     }
 
+					lock (RegionsByHandle)
+					{
+						RegionsByHandle[region.RegionHandle] = region;
+					}
+
                     if (OnRegionAddInternal != null &amp;&amp; BeginGetGridRegionName == region.Name.ToLower())
                     {
                         OnRegionAddInternal(region);
@@ -293,7 +301,7 @@
         /// Get sim time from the appropriate packet
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;packet&quot;&gt;Incoming SimulatorViewerTimeMessagePacket from SL&lt;/param&gt;
-        /// &lt;param name=&quot;simulator&quot;&gt;[UNUSED]&lt;/param&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;Unused&lt;/param&gt;
         private void TimeMessageHandler(Packet packet, Simulator simulator)
         {
             SunDirection = ((SimulatorViewerTimeMessagePacket)packet).TimeInfo.SunDirection;

Modified: branches/aditi/libsecondlife-cs/GroupManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/GroupManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/GroupManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -31,25 +31,25 @@
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// 
+    /// Avatar group management
     /// &lt;/summary&gt;
     public class GroupMember
     {
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Member&lt;/summary&gt;
         public LLUUID ID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total land contribution&lt;/summary&gt;
         public int Contribution;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Online status information&lt;/summary&gt;
         public string OnlineStatus;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Abilities that the Group Member has&lt;/summary&gt;
         public ulong Powers;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Current group title&lt;/summary&gt;
         public string Title;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Is a group owner&lt;/summary&gt;
         public bool IsOwner;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
         public GroupMember(LLUUID id)
@@ -59,25 +59,25 @@
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Role manager for a group
     /// &lt;/summary&gt;
     public class GroupRole
     {
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Role&lt;/summary&gt;
         public LLUUID ID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Name of Role&lt;/summary&gt;
         public string Name;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Group Title associated with Role&lt;/summary&gt;
         public string Title;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Description of Role&lt;/summary&gt;
         public string Description;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Abilities Associated with Role&lt;/summary&gt;
         public ulong Powers;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor for Group Roles
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;id&quot;&gt;Key associated with Group Role&lt;/param&gt;
         public GroupRole(LLUUID id)
         {
             ID = id;
@@ -85,13 +85,13 @@
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Class to represent Group Title
     /// &lt;/summary&gt;
     public class GroupTitle
     {
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Group Title&lt;/summary&gt;
         public string Title;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Whether title is Active&lt;/summary&gt;
         public bool Selected;
     }
 
@@ -100,23 +100,23 @@
     /// &lt;/summary&gt;
     public class Group
     {
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group&lt;/summary&gt;
         public LLUUID ID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Insignia&lt;/summary&gt;
         public LLUUID InsigniaID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Founder&lt;/summary&gt;
         public LLUUID FounderID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Role for Owners&lt;/summary&gt;
         public LLUUID OwnerRole;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Name of Group&lt;/summary&gt;
         public string Name;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Text of Group Charter&lt;/summary&gt;
         public string Charter;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Title of &quot;everyone&quot; role&lt;/summary&gt;
         public string MemberTitle;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Is the group open for enrolement to everyone&lt;/summary&gt;
         public bool OpenEnrollment;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Will group show up in search&lt;/summary&gt;
         public bool ShowInList;
         /// &lt;summary&gt;&lt;/summary&gt;
         public ulong Powers;
@@ -124,9 +124,9 @@
         public bool AcceptNotices;
         /// &lt;summary&gt;&lt;/summary&gt;
         public bool AllowPublish;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Is the group Mature&lt;/summary&gt;
         public bool MaturePublish;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Cost of group membership&lt;/summary&gt;
         public int MembershipFee;
         /// &lt;summary&gt;&lt;/summary&gt;
         public int Money;
@@ -138,9 +138,9 @@
         public int GroupRolesCount;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;id&quot;&gt;Key of Group&lt;/param&gt;
         public Group(LLUUID id)
         {
             ID = id;
@@ -158,21 +158,21 @@
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Profile of a group
     /// &lt;/summary&gt;
     public class GroupProfile
     {
         /// &lt;summary&gt;&lt;/summary&gt;
         public LLUUID ID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Insignia&lt;/summary&gt;
         public LLUUID InsigniaID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Founder&lt;/summary&gt;
         public LLUUID FounderID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Group Role for Owners&lt;/summary&gt;
         public LLUUID OwnerRole;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Name of Group&lt;/summary&gt;
         public string Name;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Text of Group Charter&lt;/summary&gt;
         public string Charter;
         /// &lt;summary&gt;&lt;/summary&gt;
         public string MemberTitle;
@@ -201,15 +201,15 @@
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// A group Vote
     /// &lt;/summary&gt;
     public class Vote
     {
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of Avatar who created Vote&lt;/summary&gt;
         public LLUUID Candidate;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Text of the Vote proposal&lt;/summary&gt;
         public string VoteString;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total number of votes&lt;/summary&gt;
         public int NumVotes;
     }
 
@@ -451,7 +451,7 @@
         /// &lt;param name=&quot;gmc&quot;&gt;&lt;/param&gt;
         public void BeginGetGroupMembers(LLUUID group, GroupMembersCallback gmc)
         {
-            LLUUID requestID = LLUUID.GenerateUUID();
+            LLUUID requestID = LLUUID.Random();
 
             lock (GroupMembersCaches)
             {
@@ -477,7 +477,7 @@
         /// &lt;param name=&quot;grc&quot;&gt;&lt;/param&gt;
         public void BeginGetGroupRoles(LLUUID group, GroupRolesCallback grc)
         {
-            LLUUID requestID = LLUUID.GenerateUUID();
+            LLUUID requestID = LLUUID.Random();
 
             lock (GroupRolesCaches)
             {
@@ -503,7 +503,7 @@
         /// &lt;param name=&quot;gtc&quot;&gt;&lt;/param&gt;
         public void BeginGetGroupTitles(LLUUID group, GroupTitlesCallback gtc)
         {
-            LLUUID requestID = LLUUID.GenerateUUID();
+            LLUUID requestID = LLUUID.Random();
 
             GroupTitlesCallbacks[group] = gtc;
 

Modified: branches/aditi/libsecondlife-cs/Helpers.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Helpers.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Helpers.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,489 +25,607 @@
  */
 
 using System;
+using System.Collections.Generic;
+using System.Xml;
+using System.Xml.Serialization;
 using System.Text;
+using libsecondlife.Packets;
 
 namespace libsecondlife
 {
-/// &lt;summary&gt;
-/// Static helper functions and global variables
-/// &lt;/summary&gt;
-public class Helpers
-{
-    /// &lt;summary&gt;The version of libsecondlife (not the SL protocol itself)&lt;/summary&gt;
-    public readonly static string VERSION = &quot;libsecondlife 0.0.9&quot;;
-    /// &lt;summary&gt;This header flag signals that ACKs are appended to the packet&lt;/summary&gt;
-    public const byte MSG_APPENDED_ACKS = 0x10;
-    /// &lt;summary&gt;This header flag signals that this packet has been sent before&lt;/summary&gt;
-    public const byte MSG_RESENT = 0x20;
-    /// &lt;summary&gt;This header flags signals that an ACK is expected for this packet&lt;/summary&gt;
-    public const byte MSG_RELIABLE = 0x40;
-    /// &lt;summary&gt;This header flag signals that the message is compressed using zerocoding&lt;/summary&gt;
-    public const byte MSG_ZEROCODED = 0x80;
-
     /// &lt;summary&gt;
-    /// Passed to SecondLife.Log() to identify the severity of a log entry
+    /// Static helper functions and global variables
     /// &lt;/summary&gt;
-    public enum LogLevel
+    public class Helpers
     {
-        /// &lt;summary&gt;Non-noisy useful information, may be helpful in 
-        /// debugging a problem&lt;/summary&gt;
-        Info,
-        /// &lt;summary&gt;A non-critical error occurred. A warning will not 
-        /// prevent the rest of libsecondlife from operating as usual, 
-        /// although it may be indicative of an underlying issue&lt;/summary&gt;
-        Warning,
-        /// &lt;summary&gt;A critical error has occurred. Generally this will 
-        /// be followed by the network layer shutting down, although the 
-        /// stability of libsecondlife after an error is uncertain&lt;/summary&gt;
-        Error,
-        /// &lt;summary&gt;Used for internal testing, this logging level can 
-        /// generate very noisy (long and/or repetitive) messages. Don't
-        /// pass this to the Log() function, use DebugLog() instead.
+        /// &lt;summary&gt;This header flag signals that ACKs are appended to the packet&lt;/summary&gt;
+        public const byte MSG_APPENDED_ACKS = 0x10;
+        /// &lt;summary&gt;This header flag signals that this packet has been sent before&lt;/summary&gt;
+        public const byte MSG_RESENT = 0x20;
+        /// &lt;summary&gt;This header flags signals that an ACK is expected for this packet&lt;/summary&gt;
+        public const byte MSG_RELIABLE = 0x40;
+        /// &lt;summary&gt;This header flag signals that the message is compressed using zerocoding&lt;/summary&gt;
+        public const byte MSG_ZEROCODED = 0x80;
+
+        /// &lt;summary&gt;
+        /// Passed to SecondLife.Log() to identify the severity of a log entry
         /// &lt;/summary&gt;
-        Debug
-    };
+        public enum LogLevel
+        {
+            /// &lt;summary&gt;Non-noisy useful information, may be helpful in 
+            /// debugging a problem&lt;/summary&gt;
+            Info,
+            /// &lt;summary&gt;A non-critical error occurred. A warning will not 
+            /// prevent the rest of libsecondlife from operating as usual, 
+            /// although it may be indicative of an underlying issue&lt;/summary&gt;
+            Warning,
+            /// &lt;summary&gt;A critical error has occurred. Generally this will 
+            /// be followed by the network layer shutting down, although the 
+            /// stability of libsecondlife after an error is uncertain&lt;/summary&gt;
+            Error,
+            /// &lt;summary&gt;Used for internal testing, this logging level can 
+            /// generate very noisy (long and/or repetitive) messages. Don't
+            /// pass this to the Log() function, use DebugLog() instead.
+            /// &lt;/summary&gt;
+            Debug
+        };
 
-    /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    [Flags]
-    public enum PermissionWho
-    {
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Group = 4,
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Everyone = 8,
-        /// &lt;summary&gt;&lt;/summary&gt;
-        NextOwner = 16
-    }
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        [Flags]
+        public enum PermissionWho
+        {
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Group = 4,
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Everyone = 8,
+            /// &lt;summary&gt;&lt;/summary&gt;
+            NextOwner = 16
+        }
 
-    /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    [Flags]
-    public enum PermissionType
-    {
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Copy = 0x00008000,
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Modify = 0x00004000,
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Move = 0x00080000,
-        /// &lt;summary&gt;&lt;/summary&gt;
-        Transfer = 0x00002000
-    }
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        [Flags]
+        public enum PermissionType
+        {
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Copy = 0x00008000,
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Modify = 0x00004000,
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Move = 0x00080000,
+            /// &lt;summary&gt;&lt;/summary&gt;
+            Transfer = 0x00002000
+        }
 
-    /// &lt;summary&gt;
-    /// Packs to 32-bit unsigned integers in to a 64-bit unsigned integer
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;a&quot;&gt;The left-hand (or X) value&lt;/param&gt;
-    /// &lt;param name=&quot;b&quot;&gt;The right-hand (or Y) value&lt;/param&gt;
-    /// &lt;returns&gt;A 64-bit integer containing the two 32-bit input values&lt;/returns&gt;
-    public static ulong UIntsToLong(uint a, uint b)
-    {
-        return (ulong)(((ulong)a &lt;&lt; 32) + (ulong)b);
-    }
+        /// &lt;summary&gt;
+        /// Packs to 32-bit unsigned integers in to a 64-bit unsigned integer
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;a&quot;&gt;The left-hand (or X) value&lt;/param&gt;
+        /// &lt;param name=&quot;b&quot;&gt;The right-hand (or Y) value&lt;/param&gt;
+        /// &lt;returns&gt;A 64-bit integer containing the two 32-bit input values&lt;/returns&gt;
+        public static ulong UIntsToLong(uint a, uint b)
+        {
+            return (ulong)(((ulong)a &lt;&lt; 32) + (ulong)b);
+        }
 
-    /// &lt;summary&gt;
-    /// Unpacks two 32-bit unsigned integers from a 64-bit unsigned integer
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;a&quot;&gt;The 64-bit input integer&lt;/param&gt;
-    /// &lt;param name=&quot;b&quot;&gt;The left-hand (or X) output value&lt;/param&gt;
-    /// &lt;param name=&quot;c&quot;&gt;The right-hand (or Y) output value&lt;/param&gt;
-    public static void LongToUInts(ulong a, out uint b, out uint c)
-    {
-        b = (uint)(a &gt;&gt; 32);
-        c = (uint)(a &amp; 0x00000000FFFFFFFF);
-    }
+        /// &lt;summary&gt;
+        /// Unpacks two 32-bit unsigned integers from a 64-bit unsigned integer
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;a&quot;&gt;The 64-bit input integer&lt;/param&gt;
+        /// &lt;param name=&quot;b&quot;&gt;The left-hand (or X) output value&lt;/param&gt;
+        /// &lt;param name=&quot;c&quot;&gt;The right-hand (or Y) output value&lt;/param&gt;
+        public static void LongToUInts(ulong a, out uint b, out uint c)
+        {
+            b = (uint)(a &gt;&gt; 32);
+            c = (uint)(a &amp; 0x00000000FFFFFFFF);
+        }
 
-    /// &lt;summary&gt;
-    /// Convert a variable length field (byte array) to a string.
-    /// &lt;/summary&gt;
-    /// &lt;remarks&gt;If the byte array has unprintable characters in it, a 
-    /// hex dump will be put in the string instead&lt;/remarks&gt;
-    /// &lt;param name=&quot;bytes&quot;&gt;The byte array to convert to a string&lt;/param&gt;
-    /// &lt;returns&gt;A UTF8 string, minus the null terminator&lt;/returns&gt;
-    public static string FieldToString(byte[] bytes)
-    {
-        return FieldToString(bytes, &quot;&quot;);
-    }
-
-    /// &lt;summary&gt;
-    /// Convert a variable length field (byte array) to a string, with a
-    /// field name prepended to each line of the output.
-    /// &lt;/summary&gt;
-    /// &lt;remarks&gt;If the byte array has unprintable characters in it, a 
-    /// hex dump will be put in the string instead&lt;/remarks&gt;
-    /// &lt;param name=&quot;bytes&quot;&gt;The byte array to convert to a string&lt;/param&gt;
-    /// &lt;param name=&quot;fieldName&quot;&gt;A field name to prepend to each line of output&lt;/param&gt;
-    /// &lt;returns&gt;A UTF8 string, minus the null terminator&lt;/returns&gt;
-    public static string FieldToString(byte[] bytes, string fieldName)
-    {
-        string output = &quot;&quot;;
-        bool printable = true;
-
-        for (int i = 0; i &lt; bytes.Length; ++i)
+        /// &lt;summary&gt;
+        /// Convert a variable length field (byte array) to a string.
+        /// &lt;/summary&gt;
+        /// &lt;remarks&gt;If the byte array has unprintable characters in it, a 
+        /// hex dump will be put in the string instead&lt;/remarks&gt;
+        /// &lt;param name=&quot;bytes&quot;&gt;The byte array to convert to a string&lt;/param&gt;
+        /// &lt;returns&gt;A UTF8 string, minus the null terminator&lt;/returns&gt;
+        public static string FieldToString(byte[] bytes)
         {
-            // Check if there are any unprintable characters in the array
-            if ((bytes[i] &lt; 0x20 || bytes[i] &gt; 0x7E) &amp;&amp; bytes[i] != 0x09
-                &amp;&amp; bytes[i] != 0x0D &amp;&amp; bytes[i] != 0x0A &amp;&amp; bytes[i] != 0x00)
-            {
-                printable = false;
-                break;
-            }
+            return FieldToString(bytes, &quot;&quot;);
         }
 
-        if (printable)
+        /// &lt;summary&gt;
+        /// Convert a variable length field (byte array) to a string, with a
+        /// field name prepended to each line of the output.
+        /// &lt;/summary&gt;
+        /// &lt;remarks&gt;If the byte array has unprintable characters in it, a 
+        /// hex dump will be put in the string instead&lt;/remarks&gt;
+        /// &lt;param name=&quot;bytes&quot;&gt;The byte array to convert to a string&lt;/param&gt;
+        /// &lt;param name=&quot;fieldName&quot;&gt;A field name to prepend to each line of output&lt;/param&gt;
+        /// &lt;returns&gt;A UTF8 string, minus the null terminator&lt;/returns&gt;
+        public static string FieldToString(byte[] bytes, string fieldName)
         {
-            if (fieldName.Length &gt; 0)
+            string output = &quot;&quot;;
+            bool printable = true;
+
+            for (int i = 0; i &lt; bytes.Length; ++i)
             {
-                output += fieldName + &quot;: &quot;;
+                // Check if there are any unprintable characters in the array
+                if ((bytes[i] &lt; 0x20 || bytes[i] &gt; 0x7E) &amp;&amp; bytes[i] != 0x09
+                    &amp;&amp; bytes[i] != 0x0D &amp;&amp; bytes[i] != 0x0A &amp;&amp; bytes[i] != 0x00)
+                {
+                    printable = false;
+                    break;
+                }
             }
 
-            output += System.Text.Encoding.UTF8.GetString(bytes).Replace(&quot;\0&quot;, &quot;&quot;);
-        }
-        else
-        {
-            for (int i = 0; i &lt; bytes.Length; i += 16)
+            if (printable)
             {
-                if (i != 0) { output += &quot;\n&quot;; }
-                if (fieldName != &quot;&quot;) { output += fieldName + &quot;: &quot;; }
+                if (fieldName.Length &gt; 0)
+                {
+                    output += fieldName + &quot;: &quot;;
+                }
 
-                for (int j = 0; j &lt; 16; j++)
+                output += System.Text.Encoding.UTF8.GetString(bytes).Replace(&quot;\0&quot;, &quot;&quot;);
+            }
+            else
+            {
+                for (int i = 0; i &lt; bytes.Length; i += 16)
                 {
-                    if ((i + j) &lt; bytes.Length)
+                    if (i != 0) { output += &quot;\n&quot;; }
+                    if (fieldName != &quot;&quot;) { output += fieldName + &quot;: &quot;; }
+
+                    for (int j = 0; j &lt; 16; j++)
                     {
-                        string s = String.Format(&quot;{0:X} &quot;, bytes[i + j]);
-                        if (s.Length == 2)
+                        if ((i + j) &lt; bytes.Length)
                         {
-                            s = &quot;0&quot; + s;
+                            string s = String.Format(&quot;{0:X} &quot;, bytes[i + j]);
+                            if (s.Length == 2)
+                            {
+                                s = &quot;0&quot; + s;
+                            }
+
+                            output += s;
                         }
+                        else
+                        {
+                            output += &quot;   &quot;;
+                        }
+                    }
 
-                        output += s;
-                    }
-                    else
+                    for (int j = 0; j &lt; 16 &amp;&amp; (i + j) &lt; bytes.Length; j++)
                     {
-                        output += &quot;   &quot;;
+                        if (bytes[i + j] &gt;= 0x20 &amp;&amp; bytes[i + j] &lt; 0x7E)
+                        {
+                            output += (char)bytes[i + j];
+                        }
+                        else
+                        {
+                            output += &quot;.&quot;;
+                        }
                     }
                 }
+            }
 
-                for (int j = 0; j &lt; 16 &amp;&amp; (i + j) &lt; bytes.Length; j++)
+            return output;
+        }
+
+        public static string FieldToHexDump(byte[] bytes, string fieldName)
+        {
+            string output = &quot;&quot;;
+                for (int i = 0; i &lt; bytes.Length; i += 16)
                 {
-                    if (bytes[i + j] &gt;= 0x20 &amp;&amp; bytes[i + j] &lt; 0x7E)
+                    if (i != 0) { output += &quot;\n&quot;; }
+                    if (fieldName != &quot;&quot;) { output += fieldName + &quot;: &quot;; }
+
+                    for (int j = 0; j &lt; 16; j++)
                     {
-                        output += (char)bytes[i + j];
+                        if ((i + j) &lt; bytes.Length)
+                        {
+                            string s = String.Format(&quot;{0:X} &quot;, bytes[i + j]);
+                            if (s.Length == 2)
+                            {
+                                s = &quot;0&quot; + s;
+                            }
+
+                            output += s;
+                        }
+                        else
+                        {
+                            output += &quot;   &quot;;
+                        }
                     }
-                    else
+
+                    for (int j = 0; j &lt; 16 &amp;&amp; (i + j) &lt; bytes.Length; j++)
                     {
-                        output += &quot;.&quot;;
+                        if (bytes[i + j] &gt;= 0x20 &amp;&amp; bytes[i + j] &lt; 0x7E)
+                        {
+                            output += (char)bytes[i + j];
+                        }
+                        else
+                        {
+                            output += &quot;.&quot;;
+                        }
                     }
                 }
-            }
+		return output;
+	}
+
+        /// &lt;summary&gt;
+        /// Convert a UTF8 string to a byte array
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;str&quot;&gt;The string to convert to a byte array&lt;/param&gt;
+        /// &lt;returns&gt;A null-terminated byte array&lt;/returns&gt;
+        public static byte[] StringToField(string str)
+        {
+            if (str.Length == 0) { return new byte[0]; }
+            if (!str.EndsWith(&quot;\0&quot;)) { str += &quot;\0&quot;; }
+            return System.Text.UTF8Encoding.UTF8.GetBytes(str);
         }
 
-        return output;
-    }
+        //public static byte[] HexStringToBytes(string hexString)
+        //{
+        //    string newString = &quot;&quot;;
+        //    char c;
 
-    /// &lt;summary&gt;
-    /// Convert a UTF8 string to a byte array
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;str&quot;&gt;The string to convert to a byte array&lt;/param&gt;
-    /// &lt;returns&gt;A null-terminated byte array&lt;/returns&gt;
-    public static byte[] StringToField(string str)
-    {
-        if (!str.EndsWith(&quot;\0&quot;)) { str += &quot;\0&quot;; }
-        return System.Text.UTF8Encoding.UTF8.GetBytes(str);
-    }
+        //    // remove all none A-F, 0-9, characters
+        //    for (int i = 0; i &lt; hexString.Length; i++)
+        //    {
+        //        c = hexString[i];
+        //        if (IsHexDigit(c))
+        //            newString += c;
+        //    }
 
-    public static uint GetUnixTime()
-    {
-        return (uint)(DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;
-    }
+        //    // if odd number of characters, discard last character
+        //    if (newString.Length % 2 != 0)
+        //    {
+        //        newString = newString.Substring(0, newString.Length - 1);
+        //    }
 
-    /// &lt;summary&gt;
-    /// Calculates the distance between two vectors
-    /// &lt;/summary&gt;
-    public static float VecDist(LLVector3 pointA, LLVector3 pointB)
-    {
-        float xd = pointB.X - pointA.X;
-        float yd = pointB.Y - pointA.Y;
-        float zd = pointB.Z - pointA.Z;
-        return (float)Math.Sqrt(xd * xd + yd * yd + zd * zd);
-    }
+        //    int byteLength = newString.Length / 2;
+        //    byte[] bytes = new byte[byteLength];
+        //    string hex;
+        //    int j = 0;
+        //    for (int i = 0; i &lt; bytes.Length; i++)
+        //    {
+        //        hex = new String(new Char[] { newString[j], newString[j + 1] });
+        //        bytes[i] = HexToByte(hex);
+        //        j = j + 2;
+        //    }
+        //    return bytes;
+        //}
 
-    /// &lt;summary&gt;
-    /// Calculate the magnitude of the supplied vector
-    /// &lt;/summary&gt;
-    public static float VecMag(LLVector3 vector)
-    {
-        return (float)Math.Sqrt(vector.X * vector.X + vector.Y * vector.Y + vector.Z * vector.Z);
-    }
+        public static uint GetUnixTime()
+        {
+            return (uint)(DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0)).TotalSeconds;
+        }
 
-    /// &lt;summary&gt;
-    /// Return the supplied vector in normalized form
-    /// &lt;/summary&gt;
-    public static LLVector3 VecNorm(LLVector3 vector)
-    {
-        float mag = VecMag(vector);
-        return new LLVector3(vector.X/mag,vector.Y/mag,vector.Z/mag);
-    }
+        /// &lt;summary&gt;
+        /// Calculates the distance between two vectors
+        /// &lt;/summary&gt;
+        public static float VecDist(LLVector3 pointA, LLVector3 pointB)
+        {
+            float xd = pointB.X - pointA.X;
+            float yd = pointB.Y - pointA.Y;
+            float zd = pointB.Z - pointA.Z;
+            return (float)Math.Sqrt(xd * xd + yd * yd + zd * zd);
+        }
 
-    /// &lt;summary&gt;
-    /// Calculate the rotation between two vectors
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;a&quot;&gt;Directional vector, such as 1,0,0 for the forward face&lt;/param&gt;
-    /// &lt;param name=&quot;b&quot;&gt;Target vector - normalize first with VecNorm&lt;/param&gt;
-    public static LLQuaternion RotBetween(LLVector3 a, LLVector3 b)
-    {
-        //A and B should both be normalized
-        //dotProduct is 0 if a and b are perpendicular. I think that's normal?
-        float dotProduct = (a.X * b.X) + (a.Y * b.Y) + (a.Z * b.Z);
+        /// &lt;summary&gt;
+        /// Calculate the magnitude of the supplied vector
+        /// &lt;/summary&gt;
+        public static float VecMag(LLVector3 vector)
+        {
+            return (float)Math.Sqrt(vector.X * vector.X + vector.Y * vector.Y + vector.Z * vector.Z);
+        }
 
-        LLVector3 crossProduct = new LLVector3();
-        crossProduct.X = a.Y * b.Z - a.Z * b.Y;
-        crossProduct.Y = a.Z * b.X - a.X * b.Z;
-        crossProduct.Z = a.X * b.Y - a.Y * b.X;
+        /// &lt;summary&gt;
+        /// Return the supplied vector in normalized form
+        /// &lt;/summary&gt;
+        public static LLVector3 VecNorm(LLVector3 vector)
+        {
+            float mag = VecMag(vector);
+            return new LLVector3(vector.X / mag, vector.Y / mag, vector.Z / mag);
+        }
 
-        //float scalarProduct = (a.X * b.Y) + (a.Y * b.Z) + (a.Z * b.X); //not used?
-        float magProduct = VecMag(a) * VecMag(b);
-        double angle = Math.Acos(dotProduct / magProduct);
+        /// &lt;summary&gt;
+        /// Calculate the rotation between two vectors
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;a&quot;&gt;Directional vector, such as 1,0,0 for the forward face&lt;/param&gt;
+        /// &lt;param name=&quot;b&quot;&gt;Target vector - normalize first with VecNorm&lt;/param&gt;
+        public static LLQuaternion RotBetween(LLVector3 a, LLVector3 b)
+        {
+            //A and B should both be normalized
+            //dotProduct is 0 if a and b are perpendicular. I think that's normal?
+            float dotProduct = (a.X * b.X) + (a.Y * b.Y) + (a.Z * b.Z);
 
-        LLVector3 axis = VecNorm(crossProduct);
-        float s = (float)Math.Sin(angle / 2);
-        return new LLQuaternion(axis.X * s, axis.Y * s, axis.Z * s, (float)Math.Cos(angle / 2));
-    }
+            LLVector3 crossProduct = new LLVector3();
+            crossProduct.X = a.Y * b.Z - a.Z * b.Y;
+            crossProduct.Y = a.Z * b.X - a.X * b.Z;
+            crossProduct.Z = a.X * b.Y - a.Y * b.X;
 
-    /// &lt;summary&gt;
-    /// Decode a zerocoded byte array, used to decompress packets marked
-    /// with the zerocoded flag
-    /// &lt;/summary&gt;
-    /// &lt;remarks&gt;Any time a zero is encountered, the next byte is a count 
-    /// of how many zeroes to expand. One zero is encoded with 0x00 0x01, 
-    /// two zeroes is 0x00 0x02, three zeroes is 0x00 0x03, etc. The 
-    /// first four bytes are copied directly to the output buffer.
-    /// &lt;/remarks&gt;
-    /// &lt;param name=&quot;src&quot;&gt;The byte array to decode&lt;/param&gt;
-    /// &lt;param name=&quot;srclen&quot;&gt;The length of the byte array to decode&lt;/param&gt;
-    /// &lt;param name=&quot;dest&quot;&gt;The output byte array to decode to&lt;/param&gt;
-    /// &lt;returns&gt;The length of the output buffer&lt;/returns&gt;
-    public static int ZeroDecode(byte[] src, int srclen, byte[] dest)
-    {
-        uint zerolen = 0;
+            //float scalarProduct = (a.X * b.Y) + (a.Y * b.Z) + (a.Z * b.X); //not used?
+            float magProduct = VecMag(a) * VecMag(b);
+            double angle = Math.Acos(dotProduct / magProduct);
 
-        Array.Copy(src, 0, dest, 0, 4);
-        zerolen += 4;
+            LLVector3 axis = VecNorm(crossProduct);
+            float s = (float)Math.Sin(angle / 2);
+            return new LLQuaternion(axis.X * s, axis.Y * s, axis.Z * s, (float)Math.Cos(angle / 2));
+        }
 
-        //int bodylen;
-        //if ((src[0] &amp; MSG_APPENDED_ACKS) == 0)
-        //{
-        //    bodylen = srclen;
-        //}
-        //else
-        //{
-        //    bodylen = srclen - src[srclen - 1] * 4 - 1;
-        //}
-        int bodylen = srclen;
+        /// &lt;summary&gt;
+        /// Decode a zerocoded byte array, used to decompress packets marked
+        /// with the zerocoded flag
+        /// &lt;/summary&gt;
+        /// &lt;remarks&gt;Any time a zero is encountered, the next byte is a count 
+        /// of how many zeroes to expand. One zero is encoded with 0x00 0x01, 
+        /// two zeroes is 0x00 0x02, three zeroes is 0x00 0x03, etc. The 
+        /// first four bytes are copied directly to the output buffer.
+        /// &lt;/remarks&gt;
+        /// &lt;param name=&quot;src&quot;&gt;The byte array to decode&lt;/param&gt;
+        /// &lt;param name=&quot;srclen&quot;&gt;The length of the byte array to decode. This 
+        /// would be the length of the packet up to (but not including) any
+        /// appended ACKs&lt;/param&gt;
+        /// &lt;param name=&quot;dest&quot;&gt;The output byte array to decode to&lt;/param&gt;
+        /// &lt;returns&gt;The length of the output buffer&lt;/returns&gt;
+        public static int ZeroDecode(byte[] src, int srclen, byte[] dest)
+        {
+            uint zerolen = 0;
+            int bodylen = 0;
+            uint i = 0;
 
-        uint i;
-        for (i = zerolen; i &lt; bodylen; i++)
-        {
-            if (src[i] == 0x00)
+            try
             {
-                for (byte j = 0; j &lt; src[i + 1]; j++)
+                Array.Copy(src, 0, dest, 0, 4);
+                zerolen = 4;
+                bodylen = srclen;
+
+                //if ((src[0] &amp; MSG_APPENDED_ACKS) == 0)
+                //{
+                //    bodylen = srclen;
+                //}
+                //else
+                //{
+                //    bodylen = srclen - src[srclen - 1] * 4 - 1;
+                //}
+
+                for (i = zerolen; i &lt; bodylen; i++)
                 {
-                    dest[zerolen++] = 0x00;
+                    if (src[i] == 0x00)
+                    {
+                        for (byte j = 0; j &lt; src[i + 1]; j++)
+                        {
+                            dest[zerolen++] = 0x00;
+                        }
+
+                        i++;
+                    }
+                    else
+                    {
+                        dest[zerolen++] = src[i];
+                    }
                 }
 
-                i++;
+                // Copy appended ACKs
+                for (; i &lt; srclen; i++)
+                {
+                    dest[zerolen++] = src[i];
+                }
+
+                return (int)zerolen;
             }
-            else
+            catch (Exception e)
             {
-                dest[zerolen++] = src[i];
+                Console.WriteLine(&quot;Zerodecoding error: &quot; + Environment.NewLine +
+                    &quot;i=&quot; + i + &quot;srclen=&quot; + srclen + &quot;, bodylen=&quot; + bodylen + &quot;, zerolen=&quot; + zerolen + Environment.NewLine +
+                    FieldToString(src, &quot;src&quot;) + Environment.NewLine + 
+                    e.ToString());
             }
+
+            return 0;
         }
 
-        // HACK: Fix truncated zerocoded messages
-        for (uint j = zerolen; j &lt; zerolen + 16; j++)
+        /// &lt;summary&gt;
+        /// Decode enough of a byte array to get the packet ID.  Data before and
+        /// after the packet ID is undefined.
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;src&quot;&gt;The byte array to decode&lt;/param&gt;
+        /// &lt;param name=&quot;dest&quot;&gt;The output byte array to encode to&lt;/param&gt;
+        public static void ZeroDecodeCommand(byte[] src, byte[] dest)
         {
-            dest[j] = 0;
+            for (int srcPos = 4, destPos = 4; destPos &lt; 8; ++srcPos)
+            {
+                if (src[srcPos] == 0x00)
+                {
+                    for (byte j = 0; j &lt; src[srcPos + 1]; ++j)
+                    {
+                        dest[destPos++] = 0x00;
+                    }
+
+                    ++srcPos;
+                }
+                else
+                {
+                    dest[destPos++] = src[srcPos];
+                }
+            }
         }
-        zerolen += 16;
 
-        // copy appended ACKs
-        for (; i &lt; srclen; i++)
+        /// &lt;summary&gt;
+        /// Encode a byte array with zerocoding. Used to compress packets marked
+        /// with the zerocoded flag. Any zeroes in the array are compressed down
+        /// to a single zero byte followed by a count of how many zeroes to expand
+        /// out. A single zero becomes 0x00 0x01, two zeroes becomes 0x00 0x02,
+        /// three zeroes becomes 0x00 0x03, etc. The first four bytes are copied
+        /// directly to the output buffer.
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;src&quot;&gt;The byte array to encode&lt;/param&gt;
+        /// &lt;param name=&quot;srclen&quot;&gt;The length of the byte array to encode&lt;/param&gt;
+        /// &lt;param name=&quot;dest&quot;&gt;The output byte array to encode to&lt;/param&gt;
+        /// &lt;returns&gt;The length of the output buffer&lt;/returns&gt;
+        public static int ZeroEncode(byte[] src, int srclen, byte[] dest)
         {
-            dest[zerolen++] = src[i];
-        }
+            uint zerolen = 0;
+            byte zerocount = 0;
 
-        return (int)zerolen;
-    }
+            Array.Copy(src, 0, dest, 0, 4);
+            zerolen += 4;
 
-    /// &lt;summary&gt;
-    /// Decode enough of a byte array to get the packet ID.  Data before and
-    /// after the packet ID is undefined.
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;src&quot;&gt;The byte array to decode&lt;/param&gt;
-    /// &lt;param name=&quot;dest&quot;&gt;The output byte array to encode to&lt;/param&gt;
-    public static void ZeroDecodeCommand(byte[] src, byte[] dest)
-    {
-        for (int srcPos = 4, destPos = 4; destPos &lt; 8; ++srcPos)
-        {
-            if (src[srcPos] == 0x00)
+            int bodylen;
+            if ((src[0] &amp; MSG_APPENDED_ACKS) == 0)
             {
-                for (byte j = 0; j &lt; src[srcPos + 1]; ++j)
-                {
-                    dest[destPos++] = 0x00;
-                }
-
-                ++srcPos;
+                bodylen = srclen;
             }
             else
             {
-                dest[destPos++] = src[srcPos];
+                bodylen = srclen - src[srclen - 1] * 4 - 1;
             }
-        }
-    }
 
-    /// &lt;summary&gt;
-    /// Encode a byte array with zerocoding. Used to compress packets marked
-    /// with the zerocoded flag. Any zeroes in the array are compressed down
-    /// to a single zero byte followed by a count of how many zeroes to expand
-    /// out. A single zero becomes 0x00 0x01, two zeroes becomes 0x00 0x02,
-    /// three zeroes becomes 0x00 0x03, etc. The first four bytes are copied
-    /// directly to the output buffer.
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;src&quot;&gt;The byte array to encode&lt;/param&gt;
-    /// &lt;param name=&quot;srclen&quot;&gt;The length of the byte array to encode&lt;/param&gt;
-    /// &lt;param name=&quot;dest&quot;&gt;The output byte array to encode to&lt;/param&gt;
-    /// &lt;returns&gt;The length of the output buffer&lt;/returns&gt;
-    public static int ZeroEncode(byte[] src, int srclen, byte[] dest)
-    {
-        uint zerolen = 0;
-        byte zerocount = 0;
-
-        Array.Copy(src, 0, dest, 0, 4);
-        zerolen += 4;
-
-        int bodylen;
-        if ((src[0] &amp; MSG_APPENDED_ACKS) == 0)
-        {
-            bodylen = srclen;
-        }
-        else
-        {
-            bodylen = srclen - src[srclen - 1] * 4 - 1;
-        }
-
-        uint i;
-        for (i = zerolen; i &lt; bodylen; i++)
-        {
-            if (src[i] == 0x00)
+            uint i;
+            for (i = zerolen; i &lt; bodylen; i++)
             {
-                zerocount++;
-
-                if (zerocount == 0)
+                if (src[i] == 0x00)
                 {
-                    dest[zerolen++] = 0x00;
-                    dest[zerolen++] = 0xff;
                     zerocount++;
+
+                    if (zerocount == 0)
+                    {
+                        dest[zerolen++] = 0x00;
+                        dest[zerolen++] = 0xff;
+                        zerocount++;
+                    }
                 }
-            }
-            else
-            {
-                if (zerocount != 0)
+                else
                 {
-                    dest[zerolen++] = 0x00;
-                    dest[zerolen++] = (byte)zerocount;
-                    zerocount = 0;
+                    if (zerocount != 0)
+                    {
+                        dest[zerolen++] = 0x00;
+                        dest[zerolen++] = (byte)zerocount;
+                        zerocount = 0;
+                    }
+
+                    dest[zerolen++] = src[i];
                 }
+            }
 
+            if (zerocount != 0)
+            {
+                dest[zerolen++] = 0x00;
+                dest[zerolen++] = (byte)zerocount;
+            }
+
+            // copy appended ACKs
+            for (; i &lt; srclen; i++)
+            {
                 dest[zerolen++] = src[i];
             }
-        }
 
-        if (zerocount != 0)
-        {
-            dest[zerolen++] = 0x00;
-            dest[zerolen++] = (byte)zerocount;
+            return (int)zerolen;
         }
 
-        // copy appended ACKs
-        for (; i &lt; srclen; i++)
+        /// &lt;summary&gt;
+        /// Calculates the CRC (cyclic redundancy check) needed to upload inventory.
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;creationDate&quot;&gt;Creation date&lt;/param&gt;
+        /// &lt;param name=&quot;saleType&quot;&gt;Sale type&lt;/param&gt;
+        /// &lt;param name=&quot;invType&quot;&gt;Inventory type&lt;/param&gt;
+        /// &lt;param name=&quot;type&quot;&gt;Type&lt;/param&gt;
+        /// &lt;param name=&quot;assetID&quot;&gt;Asset ID&lt;/param&gt;
+        /// &lt;param name=&quot;groupID&quot;&gt;Group ID&lt;/param&gt;
+        /// &lt;param name=&quot;salePrice&quot;&gt;Sale price&lt;/param&gt;
+        /// &lt;param name=&quot;ownerID&quot;&gt;Owner ID&lt;/param&gt;
+        /// &lt;param name=&quot;creatorID&quot;&gt;Creator ID&lt;/param&gt;
+        /// &lt;param name=&quot;itemID&quot;&gt;Item ID&lt;/param&gt;
+        /// &lt;param name=&quot;folderID&quot;&gt;Folder ID&lt;/param&gt;
+        /// &lt;param name=&quot;everyoneMask&quot;&gt;Everyone mask (permissions)&lt;/param&gt;
+        /// &lt;param name=&quot;flags&quot;&gt;Flags&lt;/param&gt;
+        /// &lt;param name=&quot;nextOwnerMask&quot;&gt;Next owner mask (permissions)&lt;/param&gt;
+        /// &lt;param name=&quot;groupMask&quot;&gt;Group mask (permissions)&lt;/param&gt;
+        /// &lt;param name=&quot;ownerMask&quot;&gt;Owner mask (permisions)&lt;/param&gt;
+        /// &lt;returns&gt;The calculated CRC&lt;/returns&gt;
+        public static uint InventoryCRC(int creationDate, byte saleType, sbyte invType, sbyte type,
+            LLUUID assetID, LLUUID groupID, int salePrice, LLUUID ownerID, LLUUID creatorID,
+            LLUUID itemID, LLUUID folderID, uint everyoneMask, uint flags, uint nextOwnerMask,
+            uint groupMask, uint ownerMask)
         {
-            dest[zerolen++] = src[i];
-        }
+            uint CRC = 0;
 
-        return (int)zerolen;
-    }
+            // IDs
+            CRC += assetID.CRC(); // AssetID
+            CRC += folderID.CRC(); // FolderID
+            CRC += itemID.CRC(); // ItemID
 
-    /// &lt;summary&gt;
-    /// Calculates the CRC (cyclic redundancy check) needed to upload inventory.
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;creationDate&quot;&gt;Creation date&lt;/param&gt;
-    /// &lt;param name=&quot;saleType&quot;&gt;Sale type&lt;/param&gt;
-    /// &lt;param name=&quot;invType&quot;&gt;Inventory type&lt;/param&gt;
-    /// &lt;param name=&quot;type&quot;&gt;Type&lt;/param&gt;
-    /// &lt;param name=&quot;assetID&quot;&gt;Asset ID&lt;/param&gt;
-    /// &lt;param name=&quot;groupID&quot;&gt;Group ID&lt;/param&gt;
-    /// &lt;param name=&quot;salePrice&quot;&gt;Sale price&lt;/param&gt;
-    /// &lt;param name=&quot;ownerID&quot;&gt;Owner ID&lt;/param&gt;
-    /// &lt;param name=&quot;creatorID&quot;&gt;Creator ID&lt;/param&gt;
-    /// &lt;param name=&quot;itemID&quot;&gt;Item ID&lt;/param&gt;
-    /// &lt;param name=&quot;folderID&quot;&gt;Folder ID&lt;/param&gt;
-    /// &lt;param name=&quot;everyoneMask&quot;&gt;Everyone mask (permissions)&lt;/param&gt;
-    /// &lt;param name=&quot;flags&quot;&gt;Flags&lt;/param&gt;
-    /// &lt;param name=&quot;nextOwnerMask&quot;&gt;Next owner mask (permissions)&lt;/param&gt;
-    /// &lt;param name=&quot;groupMask&quot;&gt;Group mask (permissions)&lt;/param&gt;
-    /// &lt;param name=&quot;ownerMask&quot;&gt;Owner mask (permisions)&lt;/param&gt;
-    /// &lt;returns&gt;The calculated CRC&lt;/returns&gt;
-    public static uint InventoryCRC(int creationDate, byte saleType, sbyte invType, sbyte type,
-        LLUUID assetID, LLUUID groupID, int salePrice, LLUUID ownerID, LLUUID creatorID,
-        LLUUID itemID, LLUUID folderID, uint everyoneMask, uint flags, uint nextOwnerMask,
-        uint groupMask, uint ownerMask)
-    {
-        uint CRC = 0;
+            // Permission stuff
+            CRC += creatorID.CRC(); // CreatorID
+            CRC += ownerID.CRC(); // OwnerID
+            CRC += groupID.CRC(); // GroupID
 
-        // IDs
-        CRC += assetID.CRC(); // AssetID
-        CRC += folderID.CRC(); // FolderID
-        CRC += itemID.CRC(); // ItemID
+            // CRC += another 4 words which always seem to be zero -- unclear if this is a LLUUID or what
+            CRC += ownerMask;
+            CRC += nextOwnerMask;
+            CRC += everyoneMask;
+            CRC += groupMask;
 
-        // Permission stuff
-        CRC += creatorID.CRC(); // CreatorID
-        CRC += ownerID.CRC(); // OwnerID
-        CRC += groupID.CRC(); // GroupID
+            // The rest of the CRC fields
+            CRC += flags; // Flags
+            CRC += (uint)invType; // InvType
+            CRC += (uint)type; // Type 
+            CRC += (uint)creationDate; // CreationDate
+            CRC += (uint)salePrice;    // SalePrice
+            CRC += (uint)((uint)saleType * 0x07073096); // SaleType
 
-        // CRC += another 4 words which always seem to be zero -- unclear if this is a LLUUID or what
-        CRC += ownerMask;
-        CRC += nextOwnerMask;
-        CRC += everyoneMask;
-        CRC += groupMask;
+            return CRC;
+        }
 
-        // The rest of the CRC fields
-        CRC += flags; // Flags
-        CRC += (uint)invType; // InvType
-        CRC += (uint)type; // Type 
-        CRC += (uint)creationDate; // CreationDate
-        CRC += (uint)salePrice;    // SalePrice
-        CRC += (uint)((uint)saleType * 0x07073096); // SaleType
+        /// &lt;summary&gt;
+        /// Calculate the MD5 hash of a given string
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;password&quot;&gt;The password to hash&lt;/param&gt;
+        /// &lt;returns&gt;An MD5 hash in string format, with $1$ prepended&lt;/returns&gt;
+        public static string MD5(string password)
+        {
+            StringBuilder digest = new StringBuilder();
+            System.Security.Cryptography.MD5 md5 = new System.Security.Cryptography.MD5CryptoServiceProvider();
+            byte[] hash = md5.ComputeHash(Encoding.ASCII.GetBytes(password));
 
-        return CRC;
-    }
+            // Convert the hash to a hex string
+            foreach (byte b in hash)
+            {
+                digest.AppendFormat(&quot;{0:x2}&quot;, b);
+            }
 
-    public static string MD5(string password)
-    {
-        StringBuilder digest = new StringBuilder();
-        System.Security.Cryptography.MD5 md5 = new System.Security.Cryptography.MD5CryptoServiceProvider();
-        byte[] hash = md5.ComputeHash(Encoding.ASCII.GetBytes(password));
+            return &quot;$1$&quot; + digest.ToString();
+        }
 
-        // Convert the hash to a hex string
-        foreach (byte b in hash)
+        public static void PacketListToXml(List&lt;Packet&gt; packets, XmlWriter xmlWriter)
         {
-            digest.AppendFormat(&quot;{0:x2}&quot;, b);
+            //XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
+            //ns.Add(&quot;&quot;, &quot;&quot;);
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;Packet&gt;));
+            serializer.Serialize(xmlWriter, packets);
         }
 
-        return &quot;$1$&quot; + digest.ToString();
+        public static void PrimListToXml(List&lt;PrimObject&gt; list, XmlWriter xmlWriter)
+        {
+            //XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
+            //ns.Add(&quot;&quot;, &quot;&quot;);
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;PrimObject&gt;));
+            serializer.Serialize(xmlWriter, list);
+        }
+
+        public static List&lt;PrimObject&gt; PrimListFromXml(XmlReader reader)
+        {
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;PrimObject&gt;));
+            object list = serializer.Deserialize(reader);
+            return (List&lt;PrimObject&gt;)list;
+        }
+
+        public static List&lt;Packet&gt; PacketListFromXml(XmlReader reader)
+        {
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;Packet&gt;));
+            object list = serializer.Deserialize(reader);
+            return (List&lt;Packet&gt;)list;
+        }
     }
 }
-}
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/InventorySystem/DownloadRequest_Folder.cs (from rev 775, trunk/libsecondlife-cs/InventorySystem/DownloadRequest_Folder.cs)

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryBase.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryBase.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryBase.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -33,6 +33,11 @@
         abstract public string toXML(bool outputAssets);
 
         /// &lt;summary&gt;
+        /// Get a short string describing this item's type
+        /// &lt;/summary&gt;
+        abstract public string GetDisplayType();
+
+        /// &lt;summary&gt;
         /// Utility function to simply making text XML safe
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;str&quot;&gt;&lt;/param&gt;

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryFolder.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryFolder.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryFolder.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -9,6 +9,8 @@
     /// &lt;/summary&gt;
     public class InventoryFolder : InventoryBase
     {
+        public enum FolderUpdateFlag { None, NoRecurse, Recurse };
+
         public string Name
         {
             get { return _Name; }
@@ -33,10 +35,10 @@
             set
             {
                 InventoryFolder ifParent = iManager.getFolder(this.ParentID);
-                ifParent.alContents.Remove(this);
+                ifParent._Contents.Remove(this);
 
                 ifParent = iManager.getFolder(value);
-                ifParent.alContents.Add(this);
+                ifParent._Contents.Add(this);
 
                 this._ParentID = value;
 
@@ -50,8 +52,9 @@
             get { return _Type; }
         }
 
-        public List&lt;InventoryBase&gt; alContents = new List&lt;InventoryBase&gt;();
+        internal List&lt;InventoryBase&gt; _Contents = new List&lt;InventoryBase&gt;();
 
+
         internal InventoryFolder(InventoryManager manager)
             : base(manager)
         {
@@ -88,7 +91,46 @@
             this._Type = sbyte.Parse(htData[&quot;type_default&quot;].ToString());
         }
 
+        /// &lt;summary&gt;
+        /// Get the contents of this folder
+        /// &lt;/summary&gt;
+        /// &lt;returns&gt;Contents of this folder&lt;/returns&gt;
+        public List&lt;InventoryBase&gt; GetContents()
+        {
+            return _Contents;
+        }
 
+        /// &lt;summary&gt;
+        /// Request a download of this folder's content information.
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;Recurse&quot;&gt;Indicate if we should recursively download content information.&lt;/param&gt;
+        /// &lt;returns&gt;The Request object for this download&lt;/returns&gt;
+        public DownloadRequest_Folder RequestDownloadContents(bool recurse)
+        {
+            _Contents.Clear();
+
+            DownloadRequest_Folder dr = new DownloadRequest_Folder(FolderID, recurse);
+            iManager.RequestFolder(dr);
+
+            return dr;
+        }
+
+        /// &lt;summary&gt;
+        /// Request a download of this folder's content information.
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;Recurse&quot;&gt;Indicate if we should recursively download content information.&lt;/param&gt;
+        /// &lt;param name=&quot;Items&quot;&gt;Indicate if item data should be downloaded too (true), or only folders(false)&lt;/param&gt;
+        /// &lt;returns&gt;The Request object for this download&lt;/returns&gt;
+        public DownloadRequest_Folder RequestDownloadContents(bool recurse, bool items)
+        {
+            _Contents.Clear();
+
+            DownloadRequest_Folder dr = new DownloadRequest_Folder(FolderID, recurse, items);
+            iManager.RequestFolder(dr);
+
+            return dr;
+        }
+
         public InventoryFolder CreateFolder(string name)
         {
             return base.iManager.FolderCreate(name, FolderID);
@@ -96,7 +138,7 @@
 
         public void Delete()
         {
-            iManager.getFolder(this.ParentID).alContents.Remove(this);
+            iManager.getFolder(this.ParentID)._Contents.Remove(this);
             iManager.FolderRemove(this);
         }
 
@@ -123,7 +165,7 @@
         public List&lt;InventoryBase&gt; GetItemByName(string name)
         {
             List&lt;InventoryBase&gt; items = new List&lt;InventoryBase&gt;();
-            foreach (InventoryBase ib in alContents)
+            foreach (InventoryBase ib in _Contents)
             {
                 if (ib is InventoryFolder)
                 {
@@ -141,6 +183,11 @@
             return items;
         }
 
+        public override string GetDisplayType()
+        {
+            return &quot;Folder&quot;;
+        }
+
         /// &lt;summary&gt;
         /// Output this folder as XML
         /// &lt;/summary&gt;
@@ -155,7 +202,7 @@
             output += &quot;Type = '&quot; + Type + &quot;' &quot;;
             output += &quot;&gt;\n&quot;;
 
-            foreach (Object oContent in alContents)
+            foreach (Object oContent in _Contents)
             {
                 output += ((InventoryBase)oContent).toXML(outputAssets);
             }

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryImage.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryImage.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryImage.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -10,7 +10,6 @@
 	/// &lt;/summary&gt;
 	public class InventoryImage : InventoryItem
 	{
-
 		public byte[] J2CData
 		{
 			get
@@ -33,7 +32,7 @@
 
 			set
 			{
-				base._Asset = new AssetImage( LLUUID.GenerateUUID(), value );
+				base._Asset = new AssetImage( LLUUID.Random(), value );
 				LLUUID TransactionID = base.iManager.AssetManager.UploadAsset( Asset );
                 base.SetAssetTransactionIDs( Asset.AssetID, TransactionID );
 			}
@@ -78,25 +77,31 @@
 
 		override internal void SetAssetData( byte[] assetData )
 		{
-			if( Asset == null )
+			if( _Asset == null )
 			{
-				if( AssetID != null )
+				if( _AssetID != null )
 				{
-					_Asset = new AssetImage( AssetID, assetData );
+					_Asset = new AssetImage( _AssetID, assetData );
 				} 
 				else 
 				{
-					_Asset   = new AssetImage( LLUUID.GenerateUUID(), assetData );
+					_Asset   = new AssetImage( LLUUID.Random(), assetData );
 					_AssetID = _Asset.AssetID;
 				}
 			} 
 			else 
 			{
-				Asset.AssetData = assetData;
+				Asset.SetAssetData(assetData);
 			}
 
 		}
 
+        public override string GetDisplayType()
+        {
+            return &quot;Image&quot;;
+        }
+
+
         /// &lt;summary&gt;
         /// Output this image as XML
         /// &lt;/summary&gt;

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryItem.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryItem.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryItem.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -37,8 +37,8 @@
                     throw new Exception(&quot;Target Folder [&quot; + value + &quot;] does not exist.&quot;);
                 }
 
-                base.iManager.getFolder(this.FolderID).alContents.Remove(this);
-                iTargetFolder.alContents.Add(this);
+                base.iManager.getFolder(this.FolderID)._Contents.Remove(this);
+                iTargetFolder._Contents.Add(this);
 
                 _FolderID = value;
                 UpdateItem();
@@ -421,7 +421,7 @@
         /// &lt;/summary&gt;
         public void Delete()
         {
-            base.iManager.getFolder(this.FolderID).alContents.Remove(this);
+            base.iManager.getFolder(this.FolderID)._Contents.Remove(this);
             base.iManager.ItemRemove(this);
 
         }
@@ -439,16 +439,21 @@
                 }
                 else
                 {
-                    _Asset = new Asset(LLUUID.GenerateUUID(), Type, assetData);
+                    _Asset = new Asset(LLUUID.Random(), Type, assetData);
                     _AssetID = _Asset.AssetID;
                 }
             }
             else
             {
-                _Asset.AssetData = assetData;
+                _Asset.SetAssetData(assetData);
             }
         }
 
+        public override string GetDisplayType()
+        {
+            return &quot;Unknown_Item&quot;;
+        }
+
         /// &lt;summary&gt;
         /// Output this item as XML
         /// &lt;/summary&gt;

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -27,6 +27,7 @@
 //#define DEBUG_PACKETS
 
 using System;
+using System.Collections;
 using System.Collections.Generic;
 using System.Threading;
 
@@ -46,6 +47,7 @@
 
         // Reference to the SLClient Library
         private SecondLife slClient;
+        private ManualResetEvent InventoryManagerInitialized = new ManualResetEvent(false);
 
         // Reference to the Asset Manager
         private static AssetManager slAssetManager;
@@ -56,15 +58,12 @@
 
         public InventoryPacketHelper InvPacketHelper = null;
 
-        // UUID of Root Inventory Folder
-        private LLUUID uuidRootFolder;
-
         // Setup a dictionary to easily lookup folders by UUID
         private Dictionary&lt;LLUUID, InventoryFolder&gt; htFoldersByUUID = new Dictionary&lt;LLUUID, InventoryFolder&gt;();
 
         // Setup a dictionary to track download progress
-        private Dictionary&lt;LLUUID, DescendentRequest&gt; htFolderDownloadStatus;
-        private List&lt;DescendentRequest&gt; alFolderRequestQueue;
+        private Dictionary&lt;LLUUID, DownloadRequest_Folder&gt; FolderDownloadStatus = new Dictionary&lt;LLUUID, DownloadRequest_Folder&gt;();
+        private List&lt;DownloadRequest_Folder&gt; alFolderRequestQueue = new List&lt;DownloadRequest_Folder&gt;();
 
         // Used to track current item being created
         private InventoryItem iiCreationInProgress;
@@ -73,20 +72,17 @@
         private int LastPacketRecievedAtTick;
 
         // Each InventorySystem needs to be initialized with a client and root folder.
-        public InventoryManager(SecondLife client, LLUUID rootFolder)
+        public InventoryManager(SecondLife client)
         {
             slClient = client;
-            if (slAssetManager == null)
-            {
-                slAssetManager = new AssetManager(slClient);
-            }
+            slAssetManager = slClient.Assets;
 
-            InvPacketHelper = new InventoryPacketHelper(slClient.Network.AgentID, slClient.Network.SessionID);
+            InvPacketHelper = new InventoryPacketHelper(slClient);
 
-            uuidRootFolder = rootFolder;
+            // Need to know what when we're connected/disconnected
+            slClient.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+            slClient.Network.OnDisconnected += new NetworkManager.DisconnectCallback(Network_OnDisconnected);
 
-            resetFoldersByUUID();
-
             // Setup the callback for Inventory Downloads
             slClient.Network.RegisterCallback(PacketType.InventoryDescendents, new NetworkManager.PacketCallback(InventoryDescendentsHandler));
 
@@ -95,25 +91,35 @@
 
         }
 
-        // Used primarily for debugging and testing
-        public AssetManager getAssetManager()
+        void Network_OnDisconnected(NetworkManager.DisconnectType reason, string message)
         {
-            Console.WriteLine(&quot;It is not recommended that you access the asset manager directly&quot;);
-            return AssetManager;
+            // Clear out current state
+            ClearState();
         }
 
-        private void resetFoldersByUUID()
+        void Network_OnConnected(object sender)
         {
-            // Init folder structure with root
-            htFoldersByUUID = new Dictionary&lt;LLUUID,InventoryFolder&gt;();
+            // Clear out current state
+            ClearState();
+        }
 
-            InventoryFolder ifRootFolder = new InventoryFolder(this, &quot;My Inventory&quot;, uuidRootFolder, null);
-            htFoldersByUUID[uuidRootFolder] = ifRootFolder;
+        private void ClearState()
+        {
+            htFoldersByUUID.Clear();
+            FolderDownloadStatus.Clear();
+            alFolderRequestQueue.Clear();
+
+            if (slClient.Self.InventoryRootFolderUUID != null)
+            {
+                // Init folder structure with root
+                InventoryFolder ifRootFolder = new InventoryFolder(this, &quot;My Inventory&quot;, slClient.Self.InventoryRootFolderUUID, null);
+                htFoldersByUUID[slClient.Self.InventoryRootFolderUUID] = ifRootFolder;
+            }
         }
 
         public InventoryFolder getRootFolder()
         {
-            return htFoldersByUUID[uuidRootFolder];
+            return htFoldersByUUID[slClient.Self.InventoryRootFolderUUID];
         }
 
         public InventoryFolder getFolder(LLUUID folderID)
@@ -157,7 +163,7 @@
         {
             string sCurFolder = qFolderPath.Dequeue();
 
-            foreach (InventoryBase ibFolder in ifRoot.alContents)
+            foreach (InventoryBase ibFolder in ifRoot._Contents)
             {
                 if (ibFolder is libsecondlife.InventorySystem.InventoryFolder)
                 {
@@ -178,29 +184,33 @@
             return null;
         }
 
-        private void RequestFolder(DescendentRequest dr)
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;dr&quot;&gt;&lt;/param&gt;
+        internal void RequestFolder(DownloadRequest_Folder dr)
         {
             Packet packet = InvPacketHelper.FetchInventoryDescendents(
                             dr.FolderID
                             , dr.FetchFolders
                             , dr.FetchItems);
 
-            htFolderDownloadStatus[dr.FolderID] = dr;
+            FolderDownloadStatus[dr.FolderID] = dr;
 
             slClient.Network.SendPacket(packet);
         }
 
         internal InventoryFolder FolderCreate(String name, LLUUID parentid)
         {
-            InventoryFolder ifolder = new InventoryFolder(this, name, LLUUID.GenerateUUID(), parentid);
+            InventoryFolder ifolder = new InventoryFolder(this, name, LLUUID.Random(), parentid);
             ifolder._Type = -1;
 
             if (htFoldersByUUID.ContainsKey(ifolder.ParentID))
             {
-                if (((InventoryFolder)htFoldersByUUID[ifolder.ParentID]).alContents.Contains(ifolder) == false)
+                if (((InventoryFolder)htFoldersByUUID[ifolder.ParentID])._Contents.Contains(ifolder) == false)
                 {
                     // Add new folder to the contents of the parent folder.
-                    ((InventoryFolder)htFoldersByUUID[ifolder.ParentID]).alContents.Add(ifolder);
+                    ((InventoryFolder)htFoldersByUUID[ifolder.ParentID])._Contents.Add(ifolder);
                 }
             }
             else
@@ -265,7 +275,7 @@
                     slClient.Network.SendPacket(packet);
 
 #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
 #endif
                 } while (!ItemCreationCompleted.WaitOne(5000, false));
             }
@@ -281,7 +291,7 @@
             slClient.Network.SendPacket(packet);
 
             #if DEBUG_PACKETS
-                Console.WriteLine(packet); 
+                slClient.DebugLog(packet); 
             #endif         
         }
 
@@ -291,13 +301,13 @@
             slClient.Network.SendPacket(packet);
 
             #if DEBUG_PACKETS
-                Console.WriteLine(packet); 
+                slClient.DebugLog(packet); 
             #endif         
         }
 
         internal void ItemGiveTo(InventoryItem iitem, LLUUID ToAgentID)
         {
-            LLUUID MessageID = LLUUID.GenerateUUID();
+            LLUUID MessageID = LLUUID.Random();
 
             Packet packet = InvPacketHelper.GiveItemViaImprovedInstantMessage(
                 MessageID
@@ -310,20 +320,20 @@
             slClient.Network.SendPacket(packet);
 
             #if DEBUG_PACKETS
-                Console.WriteLine(packet); 
+                slClient.DebugLog(packet); 
             #endif         
         }
 
         internal void ItemRemove(InventoryItem iitem)
         {
             InventoryFolder ifolder = getFolder(iitem.FolderID);
-            ifolder.alContents.Remove(iitem);
+            ifolder._Contents.Remove(iitem);
 
             Packet packet = InvPacketHelper.RemoveInventoryItem(iitem.ItemID);
             slClient.Network.SendPacket(packet);
 
             #if DEBUG_PACKETS
-                Console.WriteLine(packet); 
+                slClient.DebugLog(packet); 
             #endif         
         }
 
@@ -359,16 +369,16 @@
 
         public void DownloadInventory()
         {
-            resetFoldersByUUID();
+            ClearState();
 
-            if (htFolderDownloadStatus == null)
+            if (FolderDownloadStatus == null)
             {
                 // Create status table
-                htFolderDownloadStatus = new Dictionary&lt;LLUUID,DescendentRequest&gt;();
+                FolderDownloadStatus = new Dictionary&lt;LLUUID, DownloadRequest_Folder&gt;();
             }
             else
             {
-                if (htFolderDownloadStatus.Count != 0)
+                if (FolderDownloadStatus.Count != 0)
                 {
                     throw new Exception(&quot;Inventory Download requested while previous download in progress.&quot;);
                 }
@@ -376,7 +386,7 @@
 
             if (alFolderRequestQueue == null)
             {
-                alFolderRequestQueue = new List&lt;DescendentRequest&gt;();
+                alFolderRequestQueue = new List&lt;DownloadRequest_Folder&gt;();
             }
 
             // Set last packet received to now, just so out time-out timer works
@@ -384,13 +394,13 @@
 
             // Send Packet requesting the root Folder, 
             // this should recurse through all folders
-            RequestFolder(new DescendentRequest(uuidRootFolder));
+            RequestFolder(new DownloadRequest_Folder(slClient.Self.InventoryRootFolderUUID));
 
-            while ((htFolderDownloadStatus.Count &gt; 0) || (alFolderRequestQueue.Count &gt; 0))
+            while ((FolderDownloadStatus.Count &gt; 0) || (alFolderRequestQueue.Count &gt; 0))
             {
-                if (htFolderDownloadStatus.Count == 0)
+                if (FolderDownloadStatus.Count == 0)
                 {
-                    DescendentRequest dr = alFolderRequestQueue[0];
+                    DownloadRequest_Folder dr = alFolderRequestQueue[0];
                     alFolderRequestQueue.RemoveAt(0);
                     RequestFolder(dr);
                 }
@@ -398,34 +408,28 @@
                 int curTick = Environment.TickCount;
                 if ((curTick - LastPacketRecievedAtTick) &gt; 10000)
                 {
-                    Console.WriteLine(&quot;Time-out while waiting for packets (&quot; + ((curTick - LastPacketRecievedAtTick) / 1000) + &quot; seconds since last packet)&quot;);
-                    Console.WriteLine(&quot;Current Status:&quot;);
+                    slClient.Log(&quot;Time-out while waiting for packets (&quot; +
+                        ((curTick - LastPacketRecievedAtTick) / 1000) + &quot; seconds since last packet)&quot;,
+                        Helpers.LogLevel.Warning);
 
                     // have to make a seperate list otherwise we run into modifying the original array
                     // while still enumerating it.
-                    List&lt;DescendentRequest&gt; alRestartList = new List&lt;DescendentRequest&gt;();
+                    List&lt;DownloadRequest_Folder&gt; alRestartList = new List&lt;DownloadRequest_Folder&gt;();
 
-                    //if (htFolderDownloadStatus[0] != null)
-                    //{
-                    //    Console.WriteLine(htFolderDownloadStatus[0].GetType());
-                    //}
 
-                    foreach (DescendentRequest dr in htFolderDownloadStatus.Values)
+                    foreach (DownloadRequest_Folder dr in FolderDownloadStatus.Values)
                     {
-                        Console.WriteLine(dr.FolderID + &quot; &quot; + dr.Expected + &quot; / &quot; + dr.Received + &quot; / &quot; + dr.LastReceivedAtTick);
-
                         alRestartList.Add(dr);
                     }
 
                     LastPacketRecievedAtTick = Environment.TickCount;
-                    foreach (DescendentRequest dr in alRestartList)
+                    foreach (DownloadRequest_Folder dr in alRestartList)
                     {
                         RequestFolder(dr);
                     }
+                }
 
-                }
                 slClient.Tick();
-
             }
         }
 
@@ -434,7 +438,7 @@
         public void UpdateCreateInventoryItemHandler(Packet packet, Simulator simulator)
         {
             #if DEBUG_PACKETS
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet);
             #endif
 
             if (iiCreationInProgress != null)
@@ -472,26 +476,41 @@
             }
             else
             {
-                Console.WriteLine(packet);
+                slClient.DebugLog(packet.ToString());
                 throw new Exception(&quot;Received a packet for item creation, but no such response was expected.  This is probably a bad thing...&quot;);
             }
         }
 
-
+        /// &lt;summary&gt;
+        /// Returned in response to a InventoryDescendantRequest.  Contains information about the
+        /// contents of a folder.
+        /// &lt;/summary&gt;
+        /// &lt;seealso cref=&quot;InventoryManager.RequestFolder&quot;/&gt;
+        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         public void InventoryDescendentsHandler(Packet packet, Simulator simulator)
         {
             InventoryDescendentsPacket reply = (InventoryDescendentsPacket)packet;
 
+            // The UUID of this folder.
+            LLUUID uuidFolderID = reply.AgentData.FolderID;
+
+            // Get the original Descendent Request for this Packet
+            DownloadRequest_Folder dr = (DownloadRequest_Folder)FolderDownloadStatus[uuidFolderID];
+
+            // Update Inventory Manager's last tick point, used for timeouts and such
             LastPacketRecievedAtTick = Environment.TickCount;
 
+            // Some temp variables to be reused as we're parsing the packet
             InventoryItem invItem;
             InventoryFolder invFolder;
 
-            LLUUID uuidFolderID = LLUUID.Zero;
-
-            int iDescendentsExpected = int.MaxValue;
+            // Used to count the number of descendants received to see if we're finished or not.
+            int iDescendentsExpected = reply.AgentData.Descendents;
             int iDescendentsReceivedThisBlock = 0;
 
+
+
             foreach (InventoryDescendentsPacket.ItemDataBlock itemBlock in reply.ItemData)
             {
                 // There is always an item block, even if there isn't any items
@@ -502,8 +521,8 @@
 
                     if (itemBlock.ItemID == LLUUID.Zero)
                     {
-                        // this shouldn't ever happen, but unless you've uploaded an invalid item
-                        // to yourself while developping inventory code
+                        // this shouldn't ever happen, unless you've uploaded an invalid item
+                        // to yourself while developping inventory code :-(
                     }
                     else
                     {
@@ -511,7 +530,7 @@
 
                         InventoryFolder ifolder = (InventoryFolder)htFoldersByUUID[invItem.FolderID];
 
-                        if (ifolder.alContents.Contains(invItem) == false)
+                        if (ifolder._Contents.Contains(invItem) == false)
                         {
                             if ((invItem.InvType == 7) &amp;&amp; (invItem.Type == Asset.ASSET_TYPE_NOTECARD))
                             {
@@ -525,7 +544,19 @@
                                 invItem = temp;
                             }
 
-                            ifolder.alContents.Add(invItem);
+                            if ((invItem.InvType == 18) &amp;&amp; 
+                                (
+                                    (invItem.Type == Asset.ASSET_TYPE_WEARABLE_BODY)
+                                    || (invItem.Type == Asset.ASSET_TYPE_WEARABLE_CLOTHING)
+                                )
+                               )
+
+                            {
+                                InventoryItem temp = new InventoryWearable(this, invItem);
+                                invItem = temp;
+                            }
+
+                            ifolder._Contents.Add(invItem);
                         }
                     }
                 }
@@ -537,7 +568,7 @@
                 String name = System.Text.Encoding.UTF8.GetString(folderBlock.Name).Trim().Replace(&quot;\0&quot;, &quot;&quot;);
                 LLUUID folderid = folderBlock.FolderID;
                 LLUUID parentid = folderBlock.ParentID;
-                sbyte type = folderBlock.Type;
+// unused?      sbyte type = folderBlock.Type;
 
                 // There is always an folder block, even if there isn't any folders
                 // the &quot;filler&quot; block will not have a name
@@ -549,9 +580,9 @@
 
                     // Add folder to Parent
                     InventoryFolder ifolder = (InventoryFolder)htFoldersByUUID[invFolder.ParentID];
-                    if (ifolder.alContents.Contains(invFolder) == false)
+                    if (ifolder._Contents.Contains(invFolder) == false)
                     {
-                        ifolder.alContents.Add(invFolder);
+                        ifolder._Contents.Add(invFolder);
                     }
 
 
@@ -559,45 +590,45 @@
                     htFoldersByUUID[invFolder.FolderID] = invFolder;
 
 
-                    // It's not the root, should be safe to &quot;recurse&quot;
-                    if (!invFolder.FolderID.Equals(uuidRootFolder))
+                    // Do we recurse?
+                    if (dr.Recurse)
                     {
-                        bool alreadyQueued = false;
-                        foreach (DescendentRequest dr in alFolderRequestQueue)
+                        // It's not the root, should be safe to &quot;recurse&quot;
+                        if (!invFolder.FolderID.Equals(slClient.Self.InventoryRootFolderUUID))
                         {
-                            if (dr.FolderID == invFolder.FolderID)
+                            bool alreadyQueued = false;
+                            foreach (DownloadRequest_Folder adr in alFolderRequestQueue)
                             {
-                                alreadyQueued = true;
-                                break;
+                                if (adr.FolderID == invFolder.FolderID)
+                                {
+                                    alreadyQueued = true;
+                                    break;
+                                }
                             }
-                        }
 
-                        if (!alreadyQueued)
-                        {
-                            alFolderRequestQueue.Add(new DescendentRequest(invFolder.FolderID));
+                            if (!alreadyQueued)
+                            {
+                                alFolderRequestQueue.Add(new DownloadRequest_Folder(invFolder.FolderID));
+                            }
                         }
                     }
                 }
             }
 
 
-            // Check how many descendents we're actually supposed to receive
-            iDescendentsExpected = reply.AgentData.Descendents;
-            uuidFolderID = reply.AgentData.FolderID;
 
             // Update download status for this folder
             if (iDescendentsReceivedThisBlock &gt;= iDescendentsExpected)
             {
                 // We received all the descendents we're expecting for this folder
                 // in this packet, so go ahead and remove folder from status list.
-                htFolderDownloadStatus.Remove(uuidFolderID);
+                FolderDownloadStatus.Remove(uuidFolderID);
+                dr.RequestComplete.Set();
             }
             else
             {
                 // This one packet didn't have all the descendents we're expecting
                 // so update the total we're expecting, and update the total downloaded
-
-                DescendentRequest dr = (DescendentRequest)htFolderDownloadStatus[uuidFolderID];
                 dr.Expected = iDescendentsExpected;
                 dr.Received += iDescendentsReceivedThisBlock;
                 dr.LastReceivedAtTick = Environment.TickCount;
@@ -606,41 +637,14 @@
                 {
                     // Looks like after updating, we have all the descendents, 
                     // remove from folder status.
-                    htFolderDownloadStatus.Remove(uuidFolderID);
+                    FolderDownloadStatus.Remove(uuidFolderID);
+                    dr.RequestComplete.Set();
                 }
                 else
                 {
-                    htFolderDownloadStatus[uuidFolderID] = dr;
-                    //					Console.WriteLine( uuidFolderID + &quot; is expecting &quot; + (iDescendentsExpected - iStatus[1]) + &quot; more packets.&quot; );
+                    FolderDownloadStatus[uuidFolderID] = dr;
                 }
             }
         }
-
-        private class DescendentRequest
-        {
-            public LLUUID FolderID;
-
-            public int Expected = int.MaxValue;
-            public int Received = 0;
-            public int LastReceivedAtTick = 0;
-
-            public bool FetchFolders = true;
-            public bool FetchItems = true;
-
-            public DescendentRequest(LLUUID folderID)
-            {
-                FolderID = folderID;
-                LastReceivedAtTick = Environment.TickCount;
-            }
-
-            public DescendentRequest(LLUUID folderID, bool fetchFolders, bool fetchItems)
-            {
-                FolderID = folderID;
-                FetchFolders = fetchFolders;
-                FetchItems = fetchItems;
-                LastReceivedAtTick = Environment.TickCount;
-            }
-
-        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryNotecard.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryNotecard.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryNotecard.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -30,7 +30,7 @@
 
 			set
 			{
-				base._Asset          = new AssetNotecard( LLUUID.GenerateUUID(), value );
+				base._Asset          = new AssetNotecard( LLUUID.Random(), value );
 				LLUUID TransactionID = base.iManager.AssetManager.UploadAsset( Asset );
                 base.SetAssetTransactionIDs(Asset.AssetID, TransactionID);
 			}
@@ -97,17 +97,23 @@
 				} 
 				else 
 				{
-					_Asset   = new AssetNotecard( LLUUID.GenerateUUID(), assetData );
+					_Asset   = new AssetNotecard( LLUUID.Random(), assetData );
 					_AssetID = _Asset.AssetID;
 				}
 			} 
 			else 
 			{
-				_Asset.AssetData = assetData;
+				_Asset.SetAssetData(assetData);
 			}
 
 		}
 
+
+        public override string GetDisplayType()
+        {
+            return &quot;Notecard&quot;;
+        }
+
         /// &lt;summary&gt;
         /// Output this item as XML
         /// &lt;/summary&gt;

Modified: branches/aditi/libsecondlife-cs/InventorySystem/InventoryPacketHelper.cs
===================================================================
--- branches/aditi/libsecondlife-cs/InventorySystem/InventoryPacketHelper.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/InventorySystem/InventoryPacketHelper.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -11,13 +11,21 @@
 	/// &lt;/summary&gt;
     public class InventoryPacketHelper
 	{
-        private LLUUID AgentID;
-        private LLUUID SessionID;
+        private SecondLife Client;
 
-        public InventoryPacketHelper(LLUUID AgentID, LLUUID SessionID)
+        private LLUUID AgentID
+        {
+            get { return Client.Network.AgentID; }
+        }
+
+        private LLUUID SessionID
+        {
+            get { return Client.Network.SessionID; }
+        }
+
+        public InventoryPacketHelper(SecondLife client)
 		{
-            this.AgentID   = AgentID;
-            this.SessionID = SessionID;
+            Client = client;
 		}
 
 		public const int FETCH_INVENTORY_SORT_NAME = 0;

Copied: branches/aditi/libsecondlife-cs/InventorySystem/InventoryWearable.cs (from rev 775, trunk/libsecondlife-cs/InventorySystem/InventoryWearable.cs)

Copied: branches/aditi/libsecondlife-cs/MainAvatar.cs (from rev 775, trunk/libsecondlife-cs/MainAvatar.cs)

Copied: branches/aditi/libsecondlife-cs/MainAvatarStatus.cs (from rev 775, trunk/libsecondlife-cs/MainAvatarStatus.cs)

Modified: branches/aditi/libsecondlife-cs/NetworkManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/NetworkManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/NetworkManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -26,13 +26,14 @@
 
 using System;
 using System.Timers;
+using System.Collections;
 using System.Collections.Generic;
 using System.Net;
 using System.Net.Sockets;
+using System.Globalization;
 using Nwc.XmlRpc;
 using Nii.JSON;
 using libsecondlife.Packets;
-using System.Globalization;
 
 namespace libsecondlife
 {
@@ -42,21 +43,6 @@
     /// &lt;/summary&gt;
     public class NotConnectedException : ApplicationException { }
 
-	internal class AcceptAllCertificatePolicy : ICertificatePolicy
-	{
-		public AcceptAllCertificatePolicy()
-		{
-		}
-
-		public bool CheckValidationResult(ServicePoint sPoint, 
-			System.Security.Cryptography.X509Certificates.X509Certificate cert, 
-			WebRequest wRequest,int certProb)
-		{
-			// Always accept
-			return true;
-		}
-	}
-
     /// &lt;summary&gt;
     /// Simulator is a wrapper for a network connection to a simulator and the
     /// Region class representing the block of land in the metaverse.
@@ -67,14 +53,16 @@
         /// is attached to&lt;/summary&gt;
         public SecondLife Client;
 
-        /// &lt;summary&gt;The maximum size of the sequence number inbox, used to 
-        /// check for resent and/or duplicate packets&lt;/summary&gt;
-        public const int INBOX_SIZE = 10000;
-
         /// &lt;summary&gt;The Region class that this Simulator wraps&lt;/summary&gt;
         public Region Region;
 
         /// &lt;summary&gt;
+        /// Used internally to track sim disconnections, do not modify this 
+        /// variable.
+        /// &lt;/summary&gt;
+        public bool DisconnectCandidate = false;
+
+        /// &lt;summary&gt;
         /// The ID number associated with this particular connection to the 
         /// simulator, used to emulate TCP connections. This is used 
         /// internally for packets that have a CircuitCode field.
@@ -102,35 +90,28 @@
             get { return connected; }
         }
 
-        /// &lt;summary&gt;
-        /// Used internally to track sim disconnections, do not modify this 
-        /// variable.
-        /// &lt;/summary&gt;
-        public bool DisconnectCandidate = false;
-
         private NetworkManager Network;
         private Dictionary&lt;PacketType, List&lt;NetworkManager.PacketCallback&gt;&gt; Callbacks;
-        private ushort Sequence = 0;
-        private byte[] RecvBuffer = new byte[4092];
-        private byte[] ZeroBuffer = new byte[4092];
-        private byte[] ZeroOutBuffer = new byte[4092];
+        private uint Sequence = 0;
+        private byte[] RecvBuffer = new byte[4096];
+        private byte[] ZeroBuffer = new byte[8192];
+        private byte[] ZeroOutBuffer = new byte[4096];
         private Socket Connection = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
         private AsyncCallback ReceivedData;
-        private Dictionary&lt;int, Packet&gt; NeedAck = new Dictionary&lt;int, Packet&gt;();
-        private Queue&lt;ushort&gt; Inbox = new Queue&lt;ushort&gt;(INBOX_SIZE);
-        private List&lt;uint&gt; PendingAcks = new List&lt;uint&gt;();
+        // Packets we sent out that need ACKs from the simulator
+        private Dictionary&lt;uint, Packet&gt; NeedAck = new Dictionary&lt;uint, Packet&gt;();
+        // Sequence numbers of packets we've received from the simulator
+        private Queue&lt;uint&gt; Inbox;
+        // ACKs that are queued up to be sent to the simulator
+        private Dictionary&lt;uint, uint&gt; PendingAcks = new Dictionary&lt;uint, uint&gt;();
         private bool connected = false;
         private uint circuitCode;
         private IPEndPoint ipEndPoint;
         private EndPoint endPoint;
         private System.Timers.Timer AckTimer;
-        // Every tick, all ACKs are sent out and the age of unACKed packets is checked
-        private int TickLength = 500;
-        // Number of milliseconds before a packet is assumed lost and resent
-        private int ResendTimeout = 4000;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor for Simulator
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;callbacks&quot;&gt;&lt;/param&gt;
@@ -145,7 +126,8 @@
             Callbacks = callbacks;
             Region = new Region(client);
             circuitCode = circuit;
-            AckTimer = new System.Timers.Timer(TickLength);
+            Inbox = new Queue&lt;uint&gt;(Client.Settings.INBOX_SIZE);
+            AckTimer = new System.Timers.Timer(Client.Settings.NETWORK_TICK_LENGTH);
             AckTimer.Elapsed += new ElapsedEventHandler(AckTimer_Elapsed);
 
             // Initialize the callback for receiving a new packet
@@ -181,7 +163,7 @@
 
                 while (true)
                 {
-                    if (connected || Environment.TickCount - start &gt; 8000)
+                    if (connected || Environment.TickCount - start &gt; Client.Settings.SIMULATOR_TIMEOUT)
                     {
                         return;
                     }
@@ -190,47 +172,52 @@
             }
             catch (Exception e)
             {
-                Console.WriteLine(e.ToString());
                 Client.Log(e.ToString(), Helpers.LogLevel.Error);
             }
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Disconnect a Simulator
         /// &lt;/summary&gt;
         public void Disconnect()
         {
-            // Send the CloseCircuit notice
-            CloseCircuitPacket close = new CloseCircuitPacket();
-
-            try
+            if (connected)
             {
-                Connection.Send(close.ToBytes());
-            }
-            catch (SocketException)
-            {
-                // There's a high probability of this failing if the network is
-                // disconnected, so don't even bother logging the error
-            }
+                connected = false;
+                AckTimer.Stop();
 
-            try
-            {
-                // Shut the socket communication down
-                Connection.Shutdown(SocketShutdown.Both);
+                // Send the CloseCircuit notice
+                CloseCircuitPacket close = new CloseCircuitPacket();
+
+                if (Connection.Connected)
+                {
+                    try
+                    {
+                        Connection.Send(close.ToBytes());
+                    }
+                    catch (SocketException)
+                    {
+                        // There's a high probability of this failing if the network is
+                        // disconnecting, so don't even bother logging the error
+                    }
+                }
+
+                try
+                {
+                    // Shut the socket communication down
+                    Connection.Shutdown(SocketShutdown.Both);
+                }
+                catch (SocketException)
+                {
+                }
             }
-            catch (SocketException e)
-            {
-                Client.Log(e.ToString(), Helpers.LogLevel.Error);
-            }
-
-            connected = false;
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Sends a packet
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;packet&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;incrementSequence&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;packet&quot;&gt;Packet to be sent&lt;/param&gt;
+        /// &lt;param name=&quot;incrementSequence&quot;&gt;Increment sequence number?&lt;/param&gt;
         public void SendPacket(Packet packet, bool incrementSequence)
         {
             byte[] buffer;
@@ -239,9 +226,9 @@
             if (!connected &amp;&amp; packet.Type != PacketType.UseCircuitCode)
             {
                 Client.Log(&quot;Trying to send a &quot; + packet.Type.ToString() + &quot; packet when the socket is closed&quot;,
-                    Helpers.LogLevel.Warning);
+                    Helpers.LogLevel.Info);
 
-                throw new NotConnectedException();
+                return;
             }
 
             if (packet.Header.AckList.Length &gt; 0)
@@ -251,20 +238,20 @@
             }
             packet.Header.AppendedAcks = false;
 
+            // Keep track of when this packet was sent out
+            packet.TickCount = Environment.TickCount;
+
             if (incrementSequence)
             {
                 // Set the sequence number
-                if (Sequence == ushort.MaxValue)
-                    Sequence = 0;
+                if (Sequence &gt; Client.Settings.MAX_SEQUENCE)
+                    Sequence = 1;
                 else
                     Sequence++;
                 packet.Header.Sequence = Sequence;
 
                 if (packet.Header.Reliable)
                 {
-                    // Keep track of when this packet was sent out
-                    packet.TickCount = Environment.TickCount;
-
                     lock (NeedAck)
                     {
                         if (!NeedAck.ContainsKey(packet.Header.Sequence))
@@ -279,24 +266,30 @@
                         }
                     }
 
-                    // Append any ACKs that need to be sent out to this packet
-                    lock (PendingAcks)
+                    // Don't append ACKs to resent packets, in case that's what was causing the
+                    // delivery to fail
+                    if (!packet.Header.Resent)
                     {
-                        if (PendingAcks.Count &gt; 0 &amp;&amp; packet.Type != PacketType.PacketAck &amp;&amp;
-                            packet.Type != PacketType.LogoutRequest)
+                        // Append any ACKs that need to be sent out to this packet
+                        lock (PendingAcks)
                         {
-                            packet.Header.AckList = new uint[PendingAcks.Count];
+                            if (PendingAcks.Count &gt; 0 &amp;&amp; PendingAcks.Count &lt; Client.Settings.MAX_APPENDED_ACKS &amp;&amp;
+                                packet.Type != PacketType.PacketAck &amp;&amp;
+                                packet.Type != PacketType.LogoutRequest)
+                            {
+                                packet.Header.AckList = new uint[PendingAcks.Count];
 
-                            int i = 0;
+                                int i = 0;
 
-                            foreach (uint ack in PendingAcks)
-                            {
-                                packet.Header.AckList[i] = ack;
-                                i++;
+                                foreach (uint ack in PendingAcks.Values)
+                                {
+                                    packet.Header.AckList[i] = ack;
+                                    i++;
+                                }
+
+                                PendingAcks.Clear();
+                                packet.Header.AppendedAcks = true;
                             }
-
-                            PendingAcks.Clear();
-                            packet.Header.AppendedAcks = true;
                         }
                     }
                 }
@@ -322,18 +315,19 @@
                     Connection.Send(buffer, bytes, SocketFlags.None);
                 }
             }
-            catch (SocketException e)
+            catch (SocketException)
             {
-                Client.Log(e.ToString(), Helpers.LogLevel.Error);
+                Client.Log(&quot;Tried to send a &quot; + packet.Type.ToString() + &quot; on a closed socket&quot;, 
+                    Helpers.LogLevel.Warning);
 
-                // FIXME: Assume this socket is dead and Disconnect()
+                Disconnect();
             }
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Send Packet. Bytes !
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;payload&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;payload&quot;&gt;payload&lt;/param&gt;
         public void SendPacket(byte[] payload)
         {
             if (!connected)
@@ -350,13 +344,16 @@
                 Client.Log(e.ToString(), Helpers.LogLevel.Error);
             }
         }
-
+        /// &lt;summary&gt;
+        /// Returns Simulator Name as a String
+        /// &lt;/summary&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public override string ToString()
         {
             return Region.Name + &quot; (&quot; + ipEndPoint.ToString() + &quot;)&quot;;
         }
 
-        private void SendAck(ushort id)
+/*        private void SendAck(uint id)
         {
             PacketAckPacket ack = new PacketAckPacket();
 
@@ -367,26 +364,35 @@
 
             lock (PendingAcks)
             {
-                if (PendingAcks.Contains(id))
+                if (PendingAcks.ContainsKey(id))
                 {
                     PendingAcks.Remove(id);
                 }
             }
 
             SendPacket(ack, true);
-        }
-
+        } */
+        /// &lt;summary&gt;
+        /// Sends out pending acknowledgements
+        /// &lt;/summary&gt;
         private void SendAcks()
         {
             lock (PendingAcks)
             {
-                if (PendingAcks.Count &gt; 0)
+                if (connected &amp;&amp; PendingAcks.Count &gt; 0)
                 {
+                    if (PendingAcks.Count &gt; 250)
+                    {
+                        // FIXME: Handle the odd case where we have too many pending ACKs queued up
+                        Client.Log(&quot;Too many ACKs queued up!&quot;, Helpers.LogLevel.Error);
+                        return;
+                    }
+
                     int i = 0;
                     PacketAckPacket acks = new PacketAckPacket();
                     acks.Packets = new PacketAckPacket.PacketsBlock[PendingAcks.Count];
 
-                    foreach (uint ack in PendingAcks)
+                    foreach (uint ack in PendingAcks.Values)
                     {
                         acks.Packets[i] = new PacketAckPacket.PacketsBlock();
                         acks.Packets[i].ID = ack;
@@ -400,27 +406,35 @@
                 }
             }
         }
-
+        /// &lt;summary&gt;
+        /// Resend unacknowledged packets
+        /// &lt;/summary&gt;
         private void ResendUnacked()
         {
-            int now = Environment.TickCount;
+            if (connected)
+            {
+                int now = Environment.TickCount;
 
-            lock (NeedAck)
-            {
-                foreach (Packet packet in NeedAck.Values)
+                lock (NeedAck)
                 {
-                    if (now - packet.TickCount &gt; ResendTimeout)
+                    foreach (Packet packet in NeedAck.Values)
                     {
-                        Client.Log(&quot;Resending &quot; + packet.Type.ToString() + &quot; packet, &quot; + 
-                            (now - packet.TickCount) + &quot;ms have passed&quot;, Helpers.LogLevel.Info);
+                        if (now - packet.TickCount &gt; Client.Settings.RESEND_TIMEOUT)
+                        {
+                            Client.Log(&quot;Resending &quot; + packet.Type.ToString() + &quot; packet, &quot; +
+                                (now - packet.TickCount) + &quot;ms have passed&quot;, Helpers.LogLevel.Info);
 
-                        packet.Header.Resent = true;
-                        SendPacket(packet, false);
+                            packet.Header.Resent = true;
+                            SendPacket(packet, false);
+                        }
                     }
                 }
             }
         }
-
+        /// &lt;summary&gt;
+        /// Callback handler for incomming data
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;result&quot;&gt;&lt;/param&gt;
         private void OnReceivedData(IAsyncResult result)
         {
             Packet packet = null;
@@ -465,7 +479,7 @@
             // Track the sequence number for this packet if it's marked as reliable
             if (packet.Header.Reliable)
             {
-                if (PendingAcks.Count &gt; 10)
+                if (PendingAcks.Count &gt; Client.Settings.MAX_PENDING_ACKS)
                 {
                     SendAcks();
                 }
@@ -479,8 +493,15 @@
                         Helpers.LogLevel.Info);
 
                     // Send an ACK for this packet immediately
-                    SendAck(packet.Header.Sequence);
+                    //SendAck(packet.Header.Sequence);
 
+                    // TESTING: Try just queuing up ACKs for resent packets instead of immediately triggering an ACK
+                    lock (PendingAcks)
+                    {
+                        uint sequence = (uint)packet.Header.Sequence;
+                        if (!PendingAcks.ContainsKey(sequence)) { PendingAcks[sequence] = sequence; }
+                    }
+
                     // Avoid firing a callback twice for the same packet
                     return;
                 }
@@ -488,7 +509,8 @@
                 {
                     lock (PendingAcks)
                     {
-                        PendingAcks.Add((uint)packet.Header.Sequence);
+                        uint sequence = (uint)packet.Header.Sequence;
+                        if (!PendingAcks.ContainsKey(sequence)) { PendingAcks[sequence] = sequence; }
                     }
                 }
             }
@@ -496,7 +518,7 @@
             // Add this packet to our inbox
             lock (Inbox)
             {
-                if (Inbox.Count &gt;= INBOX_SIZE)
+                while (Inbox.Count &gt;= Client.Settings.INBOX_SIZE)
                 {
                     Inbox.Dequeue();
                 }
@@ -508,7 +530,7 @@
             {
                 lock (NeedAck)
                 {
-                    foreach (ushort ack in packet.Header.AckList)
+                    foreach (uint ack in packet.Header.AckList)
                     {
                         NeedAck.Remove(ack);
                     }
@@ -524,7 +546,7 @@
                 {
                     foreach (PacketAckPacket.PacketsBlock block in ackPacket.Packets)
                     {
-                        NeedAck.Remove((ushort)block.ID);
+                        NeedAck.Remove(block.ID);
                     }
                 }
             }
@@ -645,7 +667,7 @@
         /// The complete dictionary of all the login values returned by the 
         /// RPC login server, converted to native data types wherever possible
         /// &lt;/summary&gt;
-        public Dictionary&lt;string, object&gt; LoginValues;
+        public Dictionary&lt;string, object&gt; LoginValues = new Dictionary&lt;string,object&gt;();
         /// &lt;summary&gt;
         /// Shows whether the network layer is logged in to the grid or not
         /// &lt;/summary&gt;
@@ -653,23 +675,27 @@
         {
             get { return connected; }
         }
+
         /// &lt;summary&gt;
         /// An event for the connection to a simulator other than the currently
         /// occupied one disconnecting
         /// &lt;/summary&gt;
-        public SimDisconnectCallback OnSimDisconnected;
+        public event SimDisconnectCallback OnSimDisconnected;
         /// &lt;summary&gt;
         /// An event for being logged out either through client request, server
         /// forced, or network error
         /// &lt;/summary&gt;
-        public DisconnectCallback OnDisconnected;
+        public event DisconnectCallback OnDisconnected;
 
-        private Dictionary&lt;PacketType, List&lt;PacketCallback&gt;&gt; Callbacks;
         private SecondLife Client;
-        private List&lt;Simulator&gt; Simulators;
+        private Dictionary&lt;PacketType, List&lt;PacketCallback&gt;&gt; Callbacks = new Dictionary&lt;PacketType,List&lt;PacketCallback&gt;&gt;();
+        private List&lt;Simulator&gt; Simulators = new List&lt;Simulator&gt;();
         private System.Timers.Timer DisconnectTimer;
         private bool connected;
 
+        private const int NetworkTrafficTimeout = 15000;
+        private const int LoginTimeout = 60000;
+
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
@@ -677,10 +703,7 @@
         public NetworkManager(SecondLife client)
         {
             Client = client;
-            Simulators = new List&lt;Simulator&gt;();
-            Callbacks = new Dictionary&lt;PacketType, List&lt;PacketCallback&gt;&gt;();
             CurrentSim = null;
-            LoginValues = null;
 
             // Register the internal callbacks
             RegisterCallback(PacketType.RegionHandshake, new PacketCallback(RegionHandshakeHandler));
@@ -690,7 +713,7 @@
             RegisterCallback(PacketType.KickUser, new PacketCallback(KickUserHandler));
 
             // Disconnect a sim if no network traffic has been received for 15 seconds
-            DisconnectTimer = new System.Timers.Timer(15000);
+            DisconnectTimer = new System.Timers.Timer(NetworkTrafficTimeout);
             DisconnectTimer.Elapsed += new ElapsedEventHandler(DisconnectTimer_Elapsed);
         }
 
@@ -777,6 +800,7 @@
                 throw new NotConnectedException();
             }
         }
+
         /// &lt;summary&gt;
         /// Use this if you want to login to a specific location
         /// &lt;/summary&gt;
@@ -785,7 +809,6 @@
         /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;z&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;string with a value that can be used in the start field in .DefaultLoginValues()&lt;/returns&gt;
-
         public static string StartLocation(string sim, int x, int y, int z)
         {
             //uri:sim&amp;x&amp;y&amp;z
@@ -801,8 +824,8 @@
         /// &lt;param name=&quot;userAgent&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-        public static Dictionary&lt;string, object&gt; DefaultLoginValues(
-            string firstName, string lastName, string password, string userAgent, string author)
+        public Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName, string lastName, 
+            string password, string userAgent, string author)
         {
             return DefaultLoginValues(firstName, lastName, password, &quot;00:00:00:00:00:00&quot;, &quot;last&quot;,
                 1, 50, 50, 50, &quot;Win&quot;, &quot;0&quot;, userAgent, author, false);
@@ -817,9 +840,8 @@
         /// &lt;param name=&quot;userAgent&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-        public static Dictionary&lt;string, object&gt; DefaultLoginValues(
-            string firstName, string lastName, string password, string startLocation, string userAgent, string author,
-            bool md5pass)
+        public Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName, string lastName, 
+            string password, string startLocation, string userAgent, string author, bool md5pass)
         {
             return DefaultLoginValues(firstName, lastName, password, &quot;00:00:00:00:00:00&quot;, startLocation,
                 1, 50, 50, 50, &quot;Win&quot;, &quot;0&quot;, userAgent, author, md5pass);
@@ -838,8 +860,8 @@
         /// &lt;param name=&quot;userAgent&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-        public static Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName,
-            string lastName, string password, string mac, string startLocation, string platform,
+        public Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName, string lastName, 
+            string password, string mac, string startLocation, string platform, 
             string viewerDigest, string userAgent, string author)
         {
             return DefaultLoginValues(firstName, lastName, password, mac, startLocation,
@@ -863,9 +885,10 @@
         /// &lt;param name=&quot;userAgent&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-        public static Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName,
-            string lastName, string password, string mac, string startLocation, int major, int minor,
-            int patch, int build, string platform, string viewerDigest, string userAgent, string author, bool md5pass)
+        public Dictionary&lt;string, object&gt; DefaultLoginValues(string firstName, string lastName, 
+            string password, string mac, string startLocation, int major, int minor, int patch, 
+            int build, string platform, string viewerDigest, string userAgent, string author, 
+            bool md5pass)
         {
             Dictionary&lt;string, object&gt; values = new Dictionary&lt;string, object&gt;();
 
@@ -882,7 +905,7 @@
             values[&quot;agree_to_tos&quot;] = &quot;true&quot;;
             values[&quot;read_critical&quot;] = &quot;true&quot;;
             values[&quot;viewer_digest&quot;] = viewerDigest;
-            values[&quot;user-agent&quot;] = userAgent + &quot; (&quot; + Helpers.VERSION + &quot;)&quot;;
+            values[&quot;user-agent&quot;] = userAgent + &quot; (&quot; + Client.Settings.VERSION + &quot;)&quot;;
             values[&quot;author&quot;] = author;
 
             // Build the options array
@@ -930,16 +953,27 @@
         /// &lt;returns&gt;&lt;/returns&gt;
         public bool Login(string firstName, string lastName, string password, string userAgent, string author)
         {
-            Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(firstName, lastName,
+            Dictionary&lt;string, object&gt; loginParams = DefaultLoginValues(firstName, lastName,
                 password, &quot;last&quot;, userAgent, author, false);
             return Login(loginParams);
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;firstName&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;lastName&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;password&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;userAgent&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;start&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;author&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;md5pass&quot;&gt;&lt;/param&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public bool Login(string firstName, string lastName, string password, string userAgent, string start,
             string author, bool md5pass)
         {
-            Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(firstName, lastName,
-                password, userAgent, start, author, md5pass);
+            Dictionary&lt;string, object&gt; loginParams = DefaultLoginValues(firstName, lastName,
+                password, start, userAgent, author, md5pass);
             return Login(loginParams);
         }
 
@@ -950,7 +984,7 @@
         /// &lt;returns&gt;&lt;/returns&gt;
         public bool Login(Dictionary&lt;string, object&gt; loginParams)
         {
-            return Login(loginParams, SecondLife.LOGIN_SERVER);
+            return Login(loginParams, Client.Settings.LOGIN_SERVER);
         }
 
         /// &lt;summary&gt;
@@ -961,20 +995,40 @@
         /// &lt;returns&gt;&lt;/returns&gt;
         public bool Login(Dictionary&lt;string, object&gt; loginParams, string url)
         {
+            // Rebuild the Dictionary&lt;&gt; in to a Hashtable for compatibility with XmlRpcCS
+            Hashtable loginValues = new Hashtable(loginParams.Count);
+            foreach (KeyValuePair&lt;string, object&gt; kvp in loginParams)
+            {
+                if (kvp.Value is IList)
+                {
+                    IList list = ((IList)kvp.Value);
+                    ArrayList array = new ArrayList(list.Count);
+                    foreach (object obj in list)
+                    {
+                        array.Add(obj);
+                    }
+                    loginValues[kvp.Key] = array;
+                }
+                else
+                {
+                    loginValues[kvp.Key] = kvp.Value;
+                }
+            }
+
             XmlRpcResponse result;
             XmlRpcRequest xmlrpc = new XmlRpcRequest();
             xmlrpc.MethodName = &quot;login_to_simulator&quot;;
             xmlrpc.Params.Clear();
-            xmlrpc.Params.Add(loginParams);
+            xmlrpc.Params.Add(loginValues);
 
             try
             {
-                result = (XmlRpcResponse)xmlrpc.Send(url);
+                result = (XmlRpcResponse)xmlrpc.Send(url, LoginTimeout);
             }
             catch (Exception e)
             {
                 LoginError = &quot;XML-RPC Error: &quot; + e.Message;
-                LoginValues = null;
+                LoginValues.Clear();
                 return false;
             }
 
@@ -982,11 +1036,15 @@
             {
                 Client.Log(&quot;Fault &quot; + result.FaultCode + &quot;: &quot; + result.FaultString, Helpers.LogLevel.Error);
                 LoginError = &quot;XML-RPC Fault: &quot; + result.FaultCode + &quot;: &quot; + result.FaultString;
-                LoginValues = null;
+                LoginValues.Clear();
                 return false;
             }
 
-            LoginValues = (Dictionary&lt;string, object&gt;)result.Value;
+            Hashtable values = (Hashtable)result.Value;
+            foreach (DictionaryEntry entry in values)
+            {
+                LoginValues[(string)entry.Key] = entry.Value;
+            }
 
             if ((string)LoginValues[&quot;login&quot;] == &quot;indeterminate&quot;)
             {
@@ -1009,9 +1067,9 @@
                 new System.Text.RegularExpressions.Regex(@&quot;('|r([0-9])|r(\-))&quot;);
             string json;
             Dictionary&lt;string, object&gt; jsonObject = null;
-            LLVector3 vector = null;
-            LLVector3 posVector = null;
-            LLVector3 lookatVector = null;
+            LLVector3 vector = LLVector3.Zero;
+            LLVector3 posVector = LLVector3.Zero;
+            LLVector3 lookatVector = LLVector3.Zero;
             ulong regionHandle = 0;
 
             try
@@ -1088,12 +1146,20 @@
                 this.AgentID = new LLUUID((string)LoginValues[&quot;agent_id&quot;]);
                 this.SessionID = new LLUUID((string)LoginValues[&quot;session_id&quot;]);
                 Client.Self.ID = this.AgentID;
-                Client.Self.FirstName = (string)LoginValues[&quot;first_name&quot;];
-                Client.Self.LastName = (string)LoginValues[&quot;last_name&quot;];
+                // Names are wrapped in quotes now, have to strip those
+                Client.Self.FirstName = ((string)LoginValues[&quot;first_name&quot;]).Trim(new char[] { '&quot;' });
+                Client.Self.LastName = ((string)LoginValues[&quot;last_name&quot;]).Trim(new char[] { '&quot;' });
                 Client.Self.LookAt = vector;
                 Client.Self.HomePosition = posVector;
                 Client.Self.HomeLookAt = lookatVector;
 
+                // Get Inventory Root Folder
+                Client.Log(&quot;Pulling root folder UUID from login data.&quot;, Helpers.LogLevel.Debug);
+                ArrayList alInventoryRoot = (ArrayList)LoginValues[&quot;inventory-root&quot;];
+                Hashtable htInventoryRoot = (Hashtable)alInventoryRoot[0];
+                Client.Self.InventoryRootFolderUUID = new LLUUID((string)htInventoryRoot[&quot;folder_id&quot;]);
+
+
                 // Connect to the sim given in the login reply
                 Simulator simulator = new Simulator(Client, this.Callbacks, (uint)(int)LoginValues[&quot;circuit_code&quot;],
                     IPAddress.Parse((string)LoginValues[&quot;sim_ip&quot;]), (int)LoginValues[&quot;sim_port&quot;]);
@@ -1199,17 +1265,24 @@
         /// &lt;param name=&quot;sim&quot;&gt;&lt;/param&gt;
         public void DisconnectSim(Simulator sim)
         {
-            sim.Disconnect();
+            if (sim != null)
+            {
+                sim.Disconnect();
 
-            // Fire the SimDisconnected event if a handler is registered
-            if (OnSimDisconnected != null)
-            {
-                OnSimDisconnected(sim, DisconnectType.NetworkTimeout);
+                // Fire the SimDisconnected event if a handler is registered
+                if (OnSimDisconnected != null)
+                {
+                    OnSimDisconnected(sim, DisconnectType.NetworkTimeout);
+                }
+
+                lock (Simulators)
+                {
+                    Simulators.Remove(sim);
+                }
             }
-
-            lock (Simulators)
+            else
             {
-                Simulators.Remove(sim);
+                Client.Log(&quot;DisconnectSim() called with a null Simulator reference&quot;, Helpers.LogLevel.Warning);
             }
         }
 
@@ -1227,9 +1300,9 @@
                 foreach (Simulator simulator in Simulators)
                 {
                     // Don't disconnect the current sim, we'll use LogoutRequest for that
-                    if (simulator != CurrentSim)
+                    if (simulator != null &amp;&amp; simulator != CurrentSim)
                     {
-                        simulator.Disconnect();
+                        DisconnectSim(simulator);
 
                         // Fire the SimDisconnected event if a handler is registered
                         if (OnSimDisconnected != null)
@@ -1242,8 +1315,11 @@
                 Simulators.Clear();
             }
 
-            CurrentSim.Disconnect();
-            CurrentSim = null;
+            if (CurrentSim != null)
+            {
+                DisconnectSim(CurrentSim);
+                CurrentSim = null;
+            }
         }
 
         private void SendInitialPackets()
@@ -1251,10 +1327,10 @@
             // Request the economy data
             SendPacket(new EconomyDataRequestPacket());
 
-            // TODO: We should be setting the initial avatar height/width around here 
+            // TODO: Should the appearance manager be handling this?
             //Client.Avatar.SetHeightWidth(676, 909);
 
-            // Set the initial avatar camera position
+            // TODO: A movement class should be handling this
             Avatar.AgentUpdateFlags controlFlags = Avatar.AgentUpdateFlags.AGENT_CONTROL_FINISH_ANIM;
             LLVector3 position = new LLVector3(128, 128, 32);
             LLVector3 forwardAxis = new LLVector3(0, 0.999999f, 0);
@@ -1263,98 +1339,80 @@
             Client.Self.UpdateCamera(controlFlags, position, forwardAxis, leftAxis, upAxis, LLQuaternion.Identity,
                 LLQuaternion.Identity, 384.0f, true);
 
-            // TODO: Do we ever want to set this to true?
-            SetAlwaysRunPacket run = new SetAlwaysRunPacket();
-            run.AgentData.AgentID = AgentID;
-            run.AgentData.SessionID = SessionID;
-            run.AgentData.AlwaysRun = false;
-            SendPacket(run);
-
-            // TODO: This information is currently unused
-            MuteListRequestPacket mute = new MuteListRequestPacket();
-            mute.AgentData.AgentID = AgentID;
-            mute.AgentData.SessionID = SessionID;
-            mute.MuteData.MuteCRC = 0;
-            SendPacket(mute);
-
-            // Get the current avatar balance
-            MoneyBalanceRequestPacket money = new MoneyBalanceRequestPacket();
-            money.AgentData.AgentID = AgentID;
-            money.AgentData.SessionID = SessionID;
-            money.MoneyData.TransactionID = LLUUID.Zero;
-            SendPacket(money);
-
-            // FIXME: MainAvatar can request the info if it wants to use it
-            //AgentDataUpdateRequestPacket update = new AgentDataUpdateRequestPacket();
-            //update.AgentData.AgentID = AgentID;
-            //update.AgentData.SessionID = SessionID;
-            //SendPacket(update);
+            // TODO: A movement class should be handling this
+            Client.Self.SetAlwaysRun(false);
         }
 
         private void DisconnectTimer_Elapsed(object sender, ElapsedEventArgs ev)
         {
-            if (CurrentSim == null)
+            if (connected)
             {
-                DisconnectTimer.Stop();
-                connected = false;
-                return;
-            }
+                if (CurrentSim == null)
+                {
+                    DisconnectTimer.Stop();
+                    connected = false;
+                    return;
+                }
 
-            // If the current simulator is disconnected, shutdown+callback+return
-            if (CurrentSim.DisconnectCandidate)
-            {
-                Client.Log(&quot;Network timeout for the current simulator (&quot; +
-                    CurrentSim.Region.Name + &quot;), logging out&quot;, Helpers.LogLevel.Warning);
+                // If the current simulator is disconnected, shutdown+callback+return
+                if (CurrentSim.DisconnectCandidate)
+                {
+                    Client.Log(&quot;Network timeout for the current simulator (&quot; +
+                        CurrentSim.Region.Name + &quot;), logging out&quot;, Helpers.LogLevel.Warning);
 
-                DisconnectTimer.Stop();
-                connected = false;
+                    DisconnectTimer.Stop();
+                    connected = false;
 
-                // Shutdown the network layer
-                Shutdown();
+                    // Shutdown the network layer
+                    Shutdown();
 
-                if (OnDisconnected != null)
-                {
-                    OnDisconnected(DisconnectType.NetworkTimeout, &quot;&quot;);
+                    if (OnDisconnected != null)
+                    {
+                        OnDisconnected(DisconnectType.NetworkTimeout, &quot;&quot;);
+                    }
+
+                    // We're completely logged out and shut down, leave this function
+                    return;
                 }
 
-                // We're completely logged out and shut down, leave this function
-                return;
-            }
+                List&lt;Simulator&gt; disconnectedSims = null;
 
-            List&lt;Simulator&gt; disconnectedSims = null;
-
-            // Check all of the connected sims for disconnects
-            lock (Simulators)
-            {
-                foreach (Simulator sim in Simulators)
+                // Check all of the connected sims for disconnects
+                lock (Simulators)
                 {
-                    if (sim.DisconnectCandidate)
+                    foreach (Simulator sim in Simulators)
                     {
-                        if (disconnectedSims == null)
+                        if (sim.DisconnectCandidate)
                         {
-                            disconnectedSims = new List&lt;Simulator&gt;();
+                            if (disconnectedSims == null)
+                            {
+                                disconnectedSims = new List&lt;Simulator&gt;();
+                            }
+
+                            disconnectedSims.Add(sim);
                         }
-
-                        disconnectedSims.Add(sim);
+                        else
+                        {
+                            sim.DisconnectCandidate = true;
+                        }
                     }
-                    else
-                    {
-                        sim.DisconnectCandidate = true;
-                    }
                 }
-            }
 
-            // Actually disconnect each sim we detected as disconnected
-            if (disconnectedSims != null)
-            {
-                foreach (Simulator sim in disconnectedSims)
+                // Actually disconnect each sim we detected as disconnected
+                if (disconnectedSims != null)
                 {
-                    // This sim hasn't received any network traffic since the 
-                    // timer last elapsed, consider it disconnected
-                    Client.Log(&quot;Network timeout for simulator &quot; + sim.Region.Name +
-                        &quot;, disconnecting&quot;, Helpers.LogLevel.Warning);
+                    foreach (Simulator sim in disconnectedSims)
+                    {
+                        if (sim != null)
+                        {
+                            // This sim hasn't received any network traffic since the 
+                            // timer last elapsed, consider it disconnected
+                            Client.Log(&quot;Network timeout for simulator &quot; + sim.Region.Name +
+                                &quot;, disconnecting&quot;, Helpers.LogLevel.Warning);
 
-                    DisconnectSim(sim);
+                            DisconnectSim(sim);
+                        }
+                    }
                 }
             }
         }
@@ -1385,7 +1443,7 @@
 
             simulator.Region.ID = handshake.RegionInfo.CacheID;
 
-            // FIXME:
+            // TODO: What do we need these for? RegionFlags probably contains good stuff
             //handshake.RegionInfo.BillableFactor;
             //handshake.RegionInfo.RegionFlags;
             //handshake.RegionInfo.SimAccess;
@@ -1426,8 +1484,8 @@
 
                 if (simulator.Region.ParcelOverlaysReceived &gt; 3)
                 {
-                    Client.Log(&quot;Finished building the &quot; + simulator.Region.Name + &quot; parcel overlay&quot;,
-                        Helpers.LogLevel.Info);
+                    // TODO: ParcelOverlaysReceived should become internal, and reset to zero every 
+                    // time it hits four. Also need a callback here
                 }
             }
             else
@@ -1463,7 +1521,8 @@
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Throttles the network traffic for various different traffic types.
+    /// Access this class through SecondLife.Throttle
     /// &lt;/summary&gt;
     public class AgentThrottle
     {
@@ -1584,5 +1643,4 @@
             return data;
         }
     }
-
 }

Modified: branches/aditi/libsecondlife-cs/ObjectManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/ObjectManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/ObjectManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -26,6 +26,7 @@
 
 using System;
 using System.Collections.Generic;
+using System.Xml.Serialization;
 using System.Text;
 using libsecondlife.Packets;
 
@@ -109,6 +110,12 @@
         /// 
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;properties&quot;&gt;&lt;/param&gt;
+        public delegate void ObjectPropertiesFamilyCallback(Simulator simulator, ObjectProperties properties);
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;avatar&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;regionHandle&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;timeDilation&quot;&gt;&lt;/param&gt;
@@ -147,6 +154,13 @@
         /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;objectID&quot;&gt;&lt;/param&gt;
         public delegate void KillObjectCallback(Simulator simulator, uint objectID);
+        /// &lt;summary&gt;
+        /// Called whenever the client avatar sits down or stands up
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;Simulator the packet was received from&lt;/param&gt;
+        /// &lt;param name=&quot;sittingOn&quot;&gt;The local ID of the object that is being sat
+        /// on. If this is zero the avatar is not sitting on an object&lt;/param&gt;
+        public delegate void AvatarSitChanged(Simulator simulator, uint sittingOn);
 
         /// &lt;summary&gt;
         /// 
@@ -383,15 +397,27 @@
         /// &lt;/summary&gt;
         public event AvatarMovedCallback OnAvatarMoved;
         /// &lt;summary&gt;
+        /// This event will be raised when the main avatar sits on an 
+        /// object or stands up, with a local ID of the current seat or
+        /// zero.
+        /// &lt;/summary&gt;
+        public event AvatarSitChanged OnAvatarSitChanged;
+        /// &lt;summary&gt;
         /// This event will be raised when an object is removed from a 
         /// simulator.
         /// &lt;/summary&gt;
         public event KillObjectCallback OnObjectKilled;
         /// &lt;summary&gt;
+        /// Thie event will be raised when an object's properties are recieved
+        /// from the simulator
+        /// &lt;/summary&gt;
+        public event ObjectPropertiesFamilyCallback OnObjectProperties;
+        /// &lt;summary&gt;
         /// If true, when a cached object check is received from the server 
         /// the full object info will automatically be requested.
         /// &lt;/summary&gt;
-        public bool RequestAllObjects = false;
+        /// 
+        public bool RequestAllObjects = false;        
 
         private SecondLife Client;
 
@@ -409,6 +435,7 @@
             Client.Network.RegisterCallback(PacketType.ObjectUpdateCompressed, new NetworkManager.PacketCallback(CompressedUpdateHandler));
             Client.Network.RegisterCallback(PacketType.ObjectUpdateCached, new NetworkManager.PacketCallback(CachedUpdateHandler));
             Client.Network.RegisterCallback(PacketType.KillObject, new NetworkManager.PacketCallback(KillObjectHandler));
+            Client.Network.RegisterCallback(PacketType.ObjectPropertiesFamily, new NetworkManager.PacketCallback(ObjectPropertiesFamilyHandler));
         }
 
         /// &lt;summary&gt;
@@ -464,8 +491,7 @@
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;The target simulator&lt;/param&gt;
         /// &lt;param name=&quot;prim&quot;&gt;The prim object to rez&lt;/param&gt;
-        /// &lt;param name=&quot;nearPosition&quot;&gt;An approximation of the position to rez
-        /// the prim at&lt;/param&gt;
+        /// &lt;param name=&quot;position&quot;&gt;An approximation of the position at which to rez the prim&lt;/param&gt;
         /// &lt;remarks&gt;Due to the way client prim rezzing is done on the server,
         /// the requested position for an object is only close to where the prim
         /// actually ends up. If you desire exact placement you'll need to 
@@ -586,6 +612,101 @@
         /// 
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;localID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;textures&quot;&gt;&lt;/param&gt;
+        public void SetTextures(Simulator simulator, uint localID, TextureEntry textures)
+        {
+            SetTextures(simulator, localID, textures, String.Empty);
+        }
+
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;localID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;textures&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;mediaUrl&quot;&gt;&lt;/param&gt;
+        public void SetTextures(Simulator simulator, uint localID, TextureEntry textures, string mediaUrl)
+        {
+            ObjectImagePacket image = new ObjectImagePacket();
+
+            image.AgentData.AgentID = Client.Network.AgentID;
+            image.AgentData.SessionID = Client.Network.SessionID;
+            image.ObjectData = new ObjectImagePacket.ObjectDataBlock[1];
+            image.ObjectData[0] = new ObjectImagePacket.ObjectDataBlock();
+            image.ObjectData[0].ObjectLocalID = localID;
+            image.ObjectData[0].TextureEntry = textures.ToBytes();
+            image.ObjectData[0].MediaURL = Helpers.StringToField(mediaUrl);
+
+            Client.Network.SendPacket(image, simulator);
+        }
+
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;localID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;light&quot;&gt;&lt;/param&gt;
+        public void SetLight(Simulator simulator, uint localID, PrimLightData light)
+        {
+            ObjectExtraParamsPacket extra = new ObjectExtraParamsPacket();
+
+            extra.AgentData.AgentID = Client.Network.AgentID;
+            extra.AgentData.SessionID = Client.Network.SessionID;
+            extra.ObjectData = new ObjectExtraParamsPacket.ObjectDataBlock[1];
+            extra.ObjectData[0] = new ObjectExtraParamsPacket.ObjectDataBlock();
+            extra.ObjectData[0].ObjectLocalID = localID;
+            extra.ObjectData[0].ParamType = (byte)ExtraParamType.Light;
+            if (light == null)
+            {
+                extra.ObjectData[0].ParamInUse = false;
+                extra.ObjectData[0].ParamData = new byte[0];
+            }
+            else
+            {
+                extra.ObjectData[0].ParamInUse = true;
+                extra.ObjectData[0].ParamData = light.GetBytes();
+            }
+            extra.ObjectData[0].ParamSize = (uint)extra.ObjectData[0].ParamData.Length;
+
+            Client.Network.SendPacket(extra, simulator);
+        }
+
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;localID&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;flexible&quot;&gt;&lt;/param&gt;
+        public void SetFlexible(Simulator simulator, uint localID, PrimFlexibleData flexible)
+        {
+            ObjectExtraParamsPacket extra = new ObjectExtraParamsPacket();
+
+            extra.AgentData.AgentID = Client.Network.AgentID;
+            extra.AgentData.SessionID = Client.Network.SessionID;
+            extra.ObjectData = new ObjectExtraParamsPacket.ObjectDataBlock[1];
+            extra.ObjectData[0] = new ObjectExtraParamsPacket.ObjectDataBlock();
+            extra.ObjectData[0].ObjectLocalID = localID;
+            extra.ObjectData[0].ParamType = (byte)ExtraParamType.Flexible;
+            if (flexible == null)
+            {
+                extra.ObjectData[0].ParamInUse = false;
+                extra.ObjectData[0].ParamData = new byte[0];
+            }
+            else
+            {
+                extra.ObjectData[0].ParamInUse = true;
+                extra.ObjectData[0].ParamData = flexible.GetBytes();
+            }
+            extra.ObjectData[0].ParamSize = (uint)extra.ObjectData[0].ParamData.Length;
+
+            Client.Network.SendPacket(extra, simulator);
+        }
+
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;localIDs&quot;&gt;&lt;/param&gt;
         public void LinkPrims(Simulator simulator, List&lt;uint&gt; localIDs)
         {
@@ -729,6 +850,22 @@
             Client.Network.SendPacket(packet, simulator);
         }
 
+        /// &lt;summary&gt;
+        /// Request additional properties for an object
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;simulator&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;objectID&quot;&gt;&lt;/param&gt;
+        public void RequestObjectPropertiesFamily(Simulator simulator, LLUUID objectID)
+        {
+            RequestObjectPropertiesFamilyPacket properties = new RequestObjectPropertiesFamilyPacket();
+            properties.AgentData.AgentID = Client.Network.AgentID;
+            properties.AgentData.SessionID = Client.Network.SessionID;
+            properties.ObjectData.ObjectID = objectID;
+            properties.ObjectData.RequestFlags = 0;
+
+            Client.Network.SendPacket(properties, simulator);
+        }
+
         private void ParseAvName(string name, ref string firstName, ref string lastName, ref string groupName)
         {
             // FIXME: This needs to be reworked completely. It fails on anything containing unicode
@@ -774,10 +911,11 @@
                             string name = Helpers.FieldToString(block.NameValue);
 
                             // New prim spotted
-                            PrimObject prim = new PrimObject(Client);
+                            PrimObject prim = new PrimObject();
 
                             prim.Name = name;
 
+							prim.RegionHandle = update.RegionData.RegionHandle;
                             prim.Position = new LLVector3(block.ObjectData, 0);
                             prim.Rotation = new LLQuaternion(block.ObjectData, 36, true);
                             // TODO: Parse the rest of the ObjectData byte array fields
@@ -807,6 +945,7 @@
                             prim.ProfileEnd = PrimObject.ProfileEndFloat(block.ProfileEnd);
                             prim.ProfileHollow = block.ProfileHollow;
 
+
                             //block.Data ?
                             prim.Text = ASCIIEncoding.ASCII.GetString(block.Text);
                             //block.TextColor LLColor4U of the hovering text
@@ -847,6 +986,27 @@
 
                             break;
                         case (byte)PCode.Avatar:
+                            // Update some internals if this is our avatar
+                            if (block.FullID == Client.Network.AgentID)
+                            {
+                                // Update our current position information
+                                Client.Self.LocalID = block.ID;
+                                //avatar.CollisionPlane = new LLQuaternion(block.ObjectData, 0);
+                                Client.Self.Position = new LLVector3(block.ObjectData, 16);
+                                Client.Self.Rotation = new LLQuaternion(block.ObjectData, 52, true);
+                                // TODO: Parse the rest of the ObjectData byte array fields
+
+                                // Detect if we are sitting or standing
+                                uint oldSittingOn = Client.Self.sittingOn;
+                                Client.Self.sittingOn = block.ParentID;
+
+                                // Fire the callback for our sitting orientation changing
+                                if (Client.Self.sittingOn != oldSittingOn &amp;&amp; OnAvatarSitChanged != null)
+                                {
+                                    OnAvatarSitChanged(simulator, Client.Self.sittingOn);
+                                }
+                            }
+
                             if (OnNewAvatar != null)
                             {
                                 Avatar avatar = new Avatar();
@@ -858,9 +1018,10 @@
                                 //avatar.CollisionPlane = new LLQuaternion(block.ObjectData, 0);
                                 avatar.Position = new LLVector3(block.ObjectData, 16);
                                 avatar.Rotation = new LLQuaternion(block.ObjectData, 52, true);
-
                                 // TODO: Parse the rest of the ObjectData byte array fields
 
+                                avatar.sittingOn = block.ParentID;
+
                                 ParseAvName(Helpers.FieldToString(block.NameValue), ref FirstName, ref LastName, ref GroupName);
 
                                 avatar.ID = block.FullID;
@@ -872,20 +1033,10 @@
 
                                 avatar.Textures = new TextureEntry(block.TextureEntry, 0, block.TextureEntry.Length);
 
-                                if (FirstName == Client.Self.FirstName &amp;&amp; LastName == Client.Self.LastName)
+                                if (OnNewAvatar != null)
                                 {
-                                    // Update our avatar
-                                    Client.Self.LocalID = avatar.LocalID;
-                                    Client.Self.Position = avatar.Position;
-                                    Client.Self.Rotation = avatar.Rotation;
+                                    OnNewAvatar(simulator, avatar, update.RegionData.RegionHandle, update.RegionData.TimeDilation);
                                 }
-                                else
-                                {
-                                    if (OnNewAvatar != null)
-                                    {
-                                        OnNewAvatar(simulator, avatar, update.RegionData.RegionHandle, update.RegionData.TimeDilation);
-                                    }
-                                }
                             }
                             break;
                         case (byte)PCode.ParticleSystem:
@@ -903,7 +1054,7 @@
         {
             float x, y, z, w;
             uint localid;
-            LLVector4 CollisionPlane = null;
+            LLVector4 CollisionPlane = LLVector4.Zero;
             LLVector3 Position;
             LLVector3 Velocity;
             LLVector3 Acceleration;
@@ -1023,6 +1174,8 @@
             }
         }
 
+#pragma warning disable 0219 // disable &quot;value assigned but never used&quot; while this function is incomplete
+
         private void CompressedUpdateHandler(Packet packet, Simulator simulator)
         {
             if (OnNewPrim != null || OnNewAvatar != null || OnNewAttachment != null || OnNewFoliage != null)
@@ -1033,7 +1186,7 @@
                 foreach (ObjectUpdateCompressedPacket.ObjectDataBlock block in update.ObjectData)
                 {
                     int i = 0;
-                    prim = new PrimObject(Client);
+                    prim = new PrimObject();
 
                     prim.Flags = (ObjectFlags)block.UpdateFlags;
 
@@ -1256,6 +1409,7 @@
                 }
             }
         }
+#pragma warning restore 0219
 
         private void CachedUpdateHandler(Packet packet, Simulator simulator)
         {
@@ -1304,5 +1458,32 @@
             float QF = range / 65536.0F;
             return (float)((QV * QF - (0.5F * range)) + QF);
         }
+
+        private void ObjectPropertiesFamilyHandler(Packet p, Simulator sim)
+        {
+            if (OnObjectProperties != null)
+            {
+                ObjectPropertiesFamilyPacket op = (ObjectPropertiesFamilyPacket)p;
+                ObjectProperties props = new ObjectProperties();
+
+                props.BaseMask = op.ObjectData.BaseMask;
+                props.Category = op.ObjectData.Category;
+                props.Description = Helpers.FieldToString(op.ObjectData.Description);
+                props.EveryoneMask = op.ObjectData.EveryoneMask;
+                props.GroupID = op.ObjectData.GroupID;
+                props.GroupMask = op.ObjectData.GroupMask;
+                props.LastOwnerID = op.ObjectData.LastOwnerID;
+                props.Name = Helpers.FieldToString(op.ObjectData.Name);
+                props.NextOwnerMask = op.ObjectData.NextOwnerMask;
+                props.ObjectID = op.ObjectData.ObjectID;
+                props.OwnerID = op.ObjectData.OwnerID;
+                props.OwnerMask = op.ObjectData.OwnerMask;
+                props.OwnershipCost = op.ObjectData.OwnershipCost;
+                props.SalePrice = op.ObjectData.SalePrice;
+                props.SaleType = op.ObjectData.SaleType;
+
+                OnObjectProperties(sim, props);
+            }
+        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/Parcel.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Parcel.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Parcel.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -91,15 +91,15 @@
         public int PublicCount;
         /// &lt;summary&gt;&lt;/summary&gt;
         public int LocalID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of land owner&lt;/summary&gt;
         public LLUUID OwnerID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Is the land group owned&lt;/summary&gt;
         public bool IsGroupOwned;
         /// &lt;summary&gt;&lt;/summary&gt;
         public uint AuctionID;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public bool ReservedNewbie;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Presumably for first land&lt;/summary&gt;
+//        public bool ReservedNewbie; // FIXME FIXME FIXME
+        /// &lt;summary&gt;Date land was claimed&lt;/summary&gt;
         public int ClaimDate;
         /// &lt;summary&gt;&lt;/summary&gt;
         public int ClaimPrice;
@@ -109,25 +109,25 @@
         public LLVector3 AABBMin;
         /// &lt;summary&gt;&lt;/summary&gt;
         public LLVector3 AABBMax;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Bitmap describing land layout in 4x4m squares across the entire region&lt;/summary&gt;
         public byte[] Bitmap;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total land area&lt;/summary&gt;
         public int Area;
         /// &lt;summary&gt;&lt;/summary&gt;
         public byte Status;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Max objects across region&lt;/summary&gt;
         public int SimWideMaxObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total objects across region&lt;/summary&gt;
         public int SimWideTotalObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Max objects for parcel&lt;/summary&gt;
         public int MaxObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total objects in parcel&lt;/summary&gt;
         public int TotalObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total objects for owner&lt;/summary&gt;
         public int OwnerObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total objects for group&lt;/summary&gt;
         public int GroupObjects;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Total for other objects&lt;/summary&gt;
         public int OtherObjects;
         /// &lt;summary&gt;&lt;/summary&gt;
         public float ParcelObjectBonus;
@@ -137,29 +137,29 @@
         public uint ParcelFlags;
         /// &lt;summary&gt;&lt;/summary&gt;
         public int SalePrice;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Parcel Name&lt;/summary&gt;
         public string Name;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Parcel Description&lt;/summary&gt;
         public string Desc;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;URL For Music Stream&lt;/summary&gt;
         public string MusicURL;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;URL For other Media&lt;/summary&gt;
         public string MediaURL;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key to Picture for Media Placeholder&lt;/summary&gt;
         public LLUUID MediaID;
         /// &lt;summary&gt;&lt;/summary&gt;
         public byte MediaAutoScale;
         /// &lt;summary&gt;&lt;/summary&gt;
         public LLUUID GroupID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Price for a temporary pass&lt;/summary&gt;
         public int PassPrice;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;How long is pass valid for&lt;/summary&gt;
         public float PassHours;
         /// &lt;summary&gt;&lt;/summary&gt;
         public byte Category;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of authorized buyer&lt;/summary&gt;
         public LLUUID AuthBuyerID;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Key of parcel snapshot&lt;/summary&gt;
         public LLUUID SnapshotID;
         /// &lt;summary&gt;&lt;/summary&gt;
         public LLVector3 UserLocation;
@@ -347,9 +347,9 @@
     public class ParcelManager
     {
         private SecondLife Client;
-        private bool ReservedNewbie;
-        private bool ForSale;
-        private bool Auction;
+//        private bool ReservedNewbie; // FIXME FIXME FIXME
+//        private bool ForSale;
+//        private bool Auction;
         private bool Finished;
         private Timer DirLandTimer;
         private bool DirLandTimeout;
@@ -358,7 +358,7 @@
         private List&lt;DirectoryParcel&gt; ParcelsForSale;
 
         /// &lt;summary&gt;
-        /// 
+        /// Parcel (subdivided simulator lots) Subsystem
         /// &lt;/summary&gt;
         /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
         public ParcelManager(SecondLife client)
@@ -448,9 +448,9 @@
         public int DirLandRequest(bool reservedNewbie, bool forSale, bool auction)
         {
             // Set the class-wide variables so the callback has them
-            ReservedNewbie = reservedNewbie;
-            ForSale = forSale;
-            Auction = auction;
+//            ReservedNewbie = reservedNewbie; // FIXME FIXME FIXME
+//            ForSale = forSale;
+//            Auction = auction;
 
             // Clear the list
             ParcelsForSale.Clear();
@@ -462,11 +462,11 @@
             DirLandQueryPacket query = new DirLandQueryPacket();
             query.AgentData.AgentID = Client.Network.AgentID;
             query.AgentData.SessionID = Client.Network.SessionID;
-            query.QueryData.Auction = auction;
-            query.QueryData.ForSale = forSale;
+//            query.QueryData.Auction = auction; // FIXME FIXME FIXME
+//            query.QueryData.ForSale = forSale;
             query.QueryData.QueryFlags = 0;
-            query.QueryData.QueryID = LLUUID.GenerateUUID();
-            query.QueryData.ReservedNewbie = reservedNewbie;
+            query.QueryData.QueryID = LLUUID.Random();
+//            query.QueryData.ReservedNewbie = reservedNewbie; // FIXME FIXME FIXME
 
             Client.Network.SendPacket((Packet)query);
 
@@ -572,7 +572,7 @@
             parcel.OwnerID             = properties.ParcelData.OwnerID;
             parcel.IsGroupOwned        = properties.ParcelData.IsGroupOwned;
             parcel.AuctionID           = properties.ParcelData.AuctionID;
-            parcel.ReservedNewbie      = properties.ParcelData.ReservedNewbie;
+//            parcel.ReservedNewbie      = properties.ParcelData.ReservedNewbie; // FIXME FIXME FIXME
             parcel.ClaimDate           = properties.ParcelData.ClaimDate;
             parcel.ClaimPrice          = properties.ParcelData.ClaimPrice;
             parcel.RentPrice           = properties.ParcelData.RentPrice;
@@ -677,9 +677,9 @@
 
                 foreach (DirLandReplyPacket.QueryRepliesBlock block in reply.QueryReplies)
                 {
-                    if (block.ReservedNewbie == ReservedNewbie &amp;&amp;
-                        block.Auction == Auction &amp;&amp;
-                        block.ForSale == ForSale)
+//                    if (block.ReservedNewbie == ReservedNewbie &amp;&amp;
+//                        block.Auction == Auction &amp;&amp;
+//                        block.ForSale == ForSale) // FIXME FIXME FIXME
                     {
                         DirectoryParcel parcel = new DirectoryParcel();
 

Modified: branches/aditi/libsecondlife-cs/ParticleSystem.cs
===================================================================
--- branches/aditi/libsecondlife-cs/ParticleSystem.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/ParticleSystem.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,12 +1,14 @@
 using System;
 using System.Collections.Generic;
-using System.Text;
+using System.ComponentModel;
+using System.Xml.Serialization;
 
 namespace libsecondlife
 {
     /// &lt;summary&gt;
     /// 
     /// &lt;/summary&gt;
+    [Serializable]
     public class ParticleSystem
     {
         /// &lt;summary&gt;
@@ -15,21 +17,21 @@
         public enum SourcePattern : byte
         {
             /// &lt;summary&gt;&lt;/summary&gt;
-            None = 0,
+            [XmlEnum(&quot;None&quot;)] None = 0,
             /// &lt;summary&gt;&lt;/summary&gt;
-            Drop = 0x01,
+            [XmlEnum(&quot;Drop&quot;)] Drop = 0x01,
             /// &lt;summary&gt;&lt;/summary&gt;
-            Explode = 0x02,
+            [XmlEnum(&quot;Explode&quot;)] Explode = 0x02,
             /// &lt;summary&gt;&lt;/summary&gt;
-            Angle = 0x04,
+            [XmlEnum(&quot;Angle&quot;)] Angle = 0x04,
             /// &lt;summary&gt;&lt;/summary&gt;
-            AngleCone = 0x08,
+            [XmlEnum(&quot;AngleCone&quot;)] AngleCone = 0x08,
             /// &lt;summary&gt;&lt;/summary&gt;
-            AngleConeEmpty = 0x10
+            [XmlEnum(&quot;AngleConeEmpty&quot;)] AngleConeEmpty = 0x10
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Information on a particle system assocaited with a prim
         /// &lt;/summary&gt;
         [Flags]
         public enum ParticleFlags : ushort
@@ -57,48 +59,48 @@
         }
 
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint PartStartRGBA;
+        [XmlAttribute(&quot;startrgba&quot;), DefaultValue(0)] public uint PartStartRGBA;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint PartEndRGBA;
+        [XmlAttribute(&quot;endrgba&quot;), DefaultValue(0)] public uint PartEndRGBA;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 PartStartScale = LLVector3.Zero;
+        [XmlAttribute(&quot;maxage&quot;), DefaultValue(0)] public float PartMaxAge;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 PartEndScale = LLVector3.Zero;
+        [XmlAttribute(&quot;srcmaxage&quot;), DefaultValue(0)] public float SrcMaxAge;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float PartMaxAge;
+        [XmlAttribute(&quot;srcanglebegin&quot;), DefaultValue(0)] public float SrcAngleBegin;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcMaxAge;
+        [XmlAttribute(&quot;srcangleend&quot;), DefaultValue(0)] public float SrcAngleEnd;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 SrcAccel = LLVector3.Zero;
+        [XmlAttribute(&quot;srcburstpartcount&quot;), DefaultValue(0)] public int SrcBurstPartCount;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcAngleBegin;
+        [XmlAttribute(&quot;srcburstradius&quot;), DefaultValue(0)] public float SrcBurstRadius;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcAngleEnd;
+        [XmlAttribute(&quot;srcburstrate&quot;), DefaultValue(0)] public float SrcBurstRate;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public int SrcBurstPartCount;
+        [XmlAttribute(&quot;srcburstspeedmin&quot;), DefaultValue(0)] public float SrcBurstSpeedMin;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcBurstRadius;
+        [XmlAttribute(&quot;srcburstspeedmax&quot;), DefaultValue(0)] public float SrcBurstSpeedMax;
+        /// &lt;summary&gt;Unknown&lt;/summary&gt;
+        [XmlAttribute(&quot;serial&quot;), DefaultValue(0)] public uint Serial;
+        /// &lt;summary&gt;Unknown&lt;/summary&gt;
+        [XmlAttribute(&quot;starttick&quot;), DefaultValue(0)] public uint StartTick;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcBurstRate;
+        [XmlAttribute(&quot;srcpattern&quot;), DefaultValue(SourcePattern.None)] public SourcePattern SrcPattern = SourcePattern.None;
+        /// &lt;summary&gt;Various options that describe the behavior of this system&lt;/summary&gt;
+        [XmlAttribute(&quot;particleflags&quot;), DefaultValue(ParticleFlags.None)] public ParticleFlags PartFlags = ParticleFlags.None;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcBurstSpeedMin;
+        [XmlElement(&quot;srctarget&quot;)] public LLUUID SrcTargetKey = LLUUID.Zero;
+        /// &lt;summary&gt;Texture that will be applied to the particles&lt;/summary&gt;
+        [XmlElement(&quot;srctexture&quot;)] public LLUUID SrcTexture = LLUUID.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float SrcBurstSpeedMax;
+        [XmlElement(&quot;partstartscale&quot;)] public LLVector3 PartStartScale = LLVector3.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 SrcOmega = LLVector3.Zero;
+        [XmlElement(&quot;partendscale&quot;)] public LLVector3 PartEndScale = LLVector3.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID SrcTargetKey = LLUUID.Zero;
-        /// &lt;summary&gt;Texture that will be applied to the particles&lt;/summary&gt;
-        public LLUUID SrcTexture = LLUUID.Zero;
+        [XmlElement(&quot;srcaccel&quot;)] public LLVector3 SrcAccel = LLVector3.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public SourcePattern SrcPattern;
-        /// &lt;summary&gt;Various options that describe the behavior of this system&lt;/summary&gt;
-        public ParticleFlags PartFlags;
-        /// &lt;summary&gt;Unknown&lt;/summary&gt;
-        public uint Version;
-        /// &lt;summary&gt;Unknown&lt;/summary&gt;
-        public uint StartTick;
-
+        [XmlElement(&quot;srcomega&quot;)] public LLVector3 SrcOmega = LLVector3.Zero;
+        
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
@@ -116,6 +118,10 @@
             FromBytes(data, pos);
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public byte[] GetBytes()
         {
             byte[] bytes = new byte[0];
@@ -126,20 +132,6 @@
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            string xml = &quot;&lt;ParticleSystem&gt;&quot;;
-            // FIXME: Finish ParticleSystem.GetXml()
-            xml += &quot;&lt;/ParticleSystem&gt;&quot;;
-
-            return xml;
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
         /// &lt;param name=&quot;data&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
         private void FromBytes(byte[] data, int pos)
@@ -149,7 +141,7 @@
             if (data.Length == 0)
                 return;
 
-            Version = (uint)(data[i++] + (data[i++] &lt;&lt; 8) +
+            Serial = (uint)(data[i++] + (data[i++] &lt;&lt; 8) +
                     (data[i++] &lt;&lt; 16) + (data[i++] &lt;&lt; 24));
 
             StartTick = (uint)(data[i++] + (data[i++] &lt;&lt; 8) +
@@ -159,7 +151,7 @@
 
             SrcMaxAge = (data[i++] + (data[i++] &lt;&lt; 8)) / 256.0f;
 
-            //Unknown
+            // TODO: Unknown
             i += 2;
 
             SrcAngleBegin = (data[i++] / 100.0f) * (float)Math.PI;
@@ -190,7 +182,7 @@
 
             PartMaxAge = (data[i++] + (data[i++] &lt;&lt; 8)) / 256.0f;
 
-            //Unknown
+            // TODO: Unknown
             i += 2;
 
             PartStartRGBA = (uint)(data[i++] + (data[i++] &lt;&lt; 8) +

Modified: branches/aditi/libsecondlife-cs/Prims.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Prims.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Prims.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,124 +25,167 @@
  */
 
 using System;
+using System.ComponentModel;
 using System.Xml;
+using System.Xml.Serialization;
 
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// 
+    /// Primary parameters for primitives such as Physics Enabled or Phantom
     /// &lt;/summary&gt;
-	public class PrimObject
+    [Flags]
+    public enum ObjectFlags
+    {
+        /// &lt;summary&gt;None of the primary flags are enabled&lt;/summary&gt;
+        None = 0,
+        /// &lt;summary&gt;Whether physics are enabled for this object&lt;/summary&gt;
+        Physics = 1 &lt;&lt; 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        CreateSelected = 1 &lt;&lt; 1,
+        Unknown1 = 1 &lt;&lt; 2,
+        Unknown2 = 1 &lt;&lt; 3,
+        Unknown3 = 1 &lt;&lt; 4,
+        Unknown4 = 1 &lt;&lt; 5,
+        Script = 1 &lt;&lt; 6,
+        /// &lt;summary&gt;Whether this object contains an active touch script&lt;/summary&gt;
+        Touch = 1 &lt;&lt; 7,
+        Unknown5 = 1 &lt;&lt; 8,
+        /// &lt;summary&gt;Whether this object can receive payments&lt;/summary&gt;
+        Money = 1 &lt;&lt; 9,
+        /// &lt;summary&gt;Whether this object is phantom (no collisions)&lt;/summary&gt;
+        Phantom = 1 &lt;&lt; 10,
+        Unknown6 = 1 &lt;&lt; 11,
+        Unknown7 = 1 &lt;&lt; 12,
+        Unknown8 = 1 &lt;&lt; 13,
+        Unknown9 = 1 &lt;&lt; 14,
+        Unknown10 = 1 &lt;&lt; 15,
+        Unknown11 = 1 &lt;&lt; 16,
+        Unknown12 = 1 &lt;&lt; 17,
+        Unknown13 = 1 &lt;&lt; 18,
+        Unknown14 = 1 &lt;&lt; 19,
+        Unknown15 = 1 &lt;&lt; 20,
+        Unknown16 = 1 &lt;&lt; 21,
+        Unknown17 = 1 &lt;&lt; 22,
+        Unknown18 = 1 &lt;&lt; 23,
+        Unknown19 = 1 &lt;&lt; 24,
+        Unknown20 = 1 &lt;&lt; 25,
+        Unknown21 = 1 &lt;&lt; 26,
+        Unknown22 = 1 &lt;&lt; 27,
+        Unknown23 = 1 &lt;&lt; 28,
+        Unknown24 = 1 &lt;&lt; 29,
+        /// &lt;summary&gt;Whether this object is temporary&lt;/summary&gt;
+        Temp = 1 &lt;&lt; 30,
+        Unknown25 = 1 &lt;&lt; 31,
+        Unknown26 = 1 &lt;&lt; 32
+    }
+
+    /// &lt;summary&gt;
+    /// Extra parameters for primitives, these flags are for features that have
+    /// been added after the original ObjectFlags that has all eight bits 
+    /// reserved already
+    /// &lt;/summary&gt;
+    public enum ExtraParamType : ushort
+    {
+        /// &lt;summary&gt;Whether this object has flexible parameters&lt;/summary&gt;
+        [XmlEnum(&quot;Flexible&quot;)] Flexible = 0x10,
+        /// &lt;summary&gt;Whether this object has light parameters&lt;/summary&gt;
+        [XmlEnum(&quot;Light&quot;)] Light = 0x20
+    }
+
+    /// &lt;summary&gt;
+    /// Sweet delicious prims.
+    /// &lt;/summary&gt;
+    [Serializable]
+    public class PrimObject
 	{
         /// &lt;summary&gt;&lt;/summary&gt;
-		public int PathTwistBegin = 0;
+        [XmlAttribute(&quot;pathtwistbegin&quot;), DefaultValue(0)] public int PathTwistBegin;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathEnd = 0;
+        [XmlAttribute(&quot;pathend&quot;), DefaultValue(0)] public float PathEnd;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float ProfileBegin = 0;
+        [XmlAttribute(&quot;profilebegin&quot;), DefaultValue(0)] public float ProfileBegin;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathRadiusOffset = 0;
+        [XmlAttribute(&quot;pathradiusoffset&quot;), DefaultValue(0)] public float PathRadiusOffset;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathSkew = 0;
+        [XmlAttribute(&quot;pathskew&quot;), DefaultValue(0)] public float PathSkew;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 Position = LLVector3.Zero;
+        [XmlAttribute(&quot;profilecurve&quot;), DefaultValue(0)] public uint ProfileCurve;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public uint ProfileCurve = 0;
+        [XmlAttribute(&quot;pathscalex&quot;), DefaultValue(0)] public float PathScaleX;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathScaleX = 0;
+        [XmlAttribute(&quot;pathscaley&quot;), DefaultValue(0)] public float PathScaleY;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathScaleY = 0;
+        [XmlAttribute(&quot;localid&quot;), DefaultValue(0)] public uint LocalID;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID ID = LLUUID.Zero;
+        [XmlAttribute(&quot;parentid&quot;), DefaultValue(0)] public uint ParentID;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public uint LocalID = 0;
+        [XmlAttribute(&quot;material&quot;), DefaultValue(0)] public uint Material;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint ParentID = 0;
+        [XmlAttribute(&quot;name&quot;), DefaultValue(&quot;&quot;)] public string Name = &quot;&quot;;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLUUID GroupID = LLUUID.Zero;
+        [XmlAttribute(&quot;description&quot;), DefaultValue(&quot;&quot;)] public string Description = &quot;&quot;;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public uint Material = 0;
+        [XmlAttribute(&quot;pathshearx&quot;), DefaultValue(0)] public float PathShearX;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public string Name = &quot;&quot;;
+        [XmlAttribute(&quot;pathsheary&quot;), DefaultValue(0)] public float PathShearY;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public string Description = &quot;&quot;;
+        [XmlAttribute(&quot;pathtaperx&quot;), DefaultValue(0)] public float PathTaperX;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathShearX = 0;
+        [XmlAttribute(&quot;pathtapery&quot;), DefaultValue(0)] public float PathTaperY;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathShearY = 0;
+        [XmlAttribute(&quot;profileend&quot;), DefaultValue(0)] public float ProfileEnd;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathTaperX = 0;
+        [XmlAttribute(&quot;pathbegin&quot;), DefaultValue(0)] public float PathBegin;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathTaperY = 0;
+        [XmlAttribute(&quot;pathcurve&quot;), DefaultValue(0)] public uint PathCurve;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float ProfileEnd = 0;
+        [XmlAttribute(&quot;pathtwist&quot;), DefaultValue(0)] public int PathTwist;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float PathBegin = 0;
+        [XmlAttribute(&quot;profilehollow&quot;), DefaultValue(0)] public uint ProfileHollow;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public uint PathCurve = 0;
+        [XmlAttribute(&quot;pathrevolutions&quot;), DefaultValue(0)] public float PathRevolutions;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLVector3 Scale = LLVector3.Zero;
+        [XmlAttribute(&quot;state&quot;), DefaultValue(0)] public uint State;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public int PathTwist = 0;
+        [XmlAttribute(&quot;text&quot;), DefaultValue(&quot;&quot;)] public string Text = &quot;&quot;;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint ProfileHollow = 0;
+        [XmlAttribute(&quot;regionhandle&quot;), DefaultValue(0)] public ulong RegionHandle;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float PathRevolutions = 0;
+        [XmlAttribute(&quot;flags&quot;), DefaultValue(ObjectFlags.None)] public ObjectFlags Flags;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public LLQuaternion Rotation = LLQuaternion.Identity;
+        [XmlIgnore] public ObjectManager.PCode PCode = ObjectManager.PCode.Prim;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint State;
+        [XmlElement(&quot;id&quot;)] public LLUUID ID = LLUUID.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public string Text;
+        [XmlElement(&quot;groupid&quot;)] public LLUUID GroupID = LLUUID.Zero;
+		/// &lt;summary&gt;&lt;/summary&gt;
+        public LLVector3 Position = LLVector3.Zero;
+		/// &lt;summary&gt;&lt;/summary&gt;
+        public LLVector3 Scale = LLVector3.Zero;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public ObjectManager.PCode PCode;
+        public LLQuaternion Rotation = LLQuaternion.Identity;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public ObjectFlags Flags;
+        public TextureEntry Textures = new TextureEntry();
         /// &lt;summary&gt;&lt;/summary&gt;
-        public TextureEntry Textures;
+        public TextureAnimation TextureAnim = new TextureAnimation();
         /// &lt;summary&gt;&lt;/summary&gt;
-        public TextureAnimation TextureAnim;
+        public PrimFlexibleData Flexible = new PrimFlexibleData();
         /// &lt;summary&gt;&lt;/summary&gt;
-        public PrimFlexibleData Flexible;
+        public PrimLightData Light = new PrimLightData();
         /// &lt;summary&gt;&lt;/summary&gt;
-        public PrimLightData Light;
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public ParticleSystem ParticleSys;
+        public ParticleSystem ParticleSys = new ParticleSystem();
 
-        private SecondLife Client;
-
         /// &lt;summary&gt;
-        /// 
+        /// Default constructor, zeroes out or sets default prim parameters
         /// &lt;/summary&gt;
-        public PrimObject(SecondLife client)
+        public PrimObject()
         {
-            Client = client;
-            PCode = ObjectManager.PCode.Prim;
-            Flexible = new PrimFlexibleData();
-            Light = new PrimLightData();
-            ParticleSys = new ParticleSystem();
-            Textures = new TextureEntry();
-            TextureAnim = new TextureAnimation();
-            Flexible = new PrimFlexibleData();
-            Light = new PrimLightData();
-            ParticleSys = new ParticleSystem();
         }
 		
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;texture&quot;&gt;&lt;/param&gt;
-		public PrimObject(SecondLife client, LLUUID texture)
-		{
-            Client = client;
-            PCode = ObjectManager.PCode.Prim;
-            Textures = new TextureEntry();
-            Textures.DefaultTexture.TextureID = texture;
-		}
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
         /// &lt;param name=&quot;pathScale&quot;&gt;&lt;/param&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
 		public static byte PathScaleByte(float pathScale)
@@ -409,73 +452,6 @@
             return totalLength;
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml()
-        {
-            string xml = &quot;&lt;Prim&gt;&quot;;
-            xml += &quot;&lt;PathTwistBegin value=\&quot;&quot; + PathTwistBegin + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathEnd value=\&quot;&quot; + PathEnd + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;ProfileBegin value=\&quot;&quot; + ProfileBegin + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathRadiusOffset value=\&quot;&quot; + PathRadiusOffset + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathSkew value=\&quot;&quot; + PathSkew + &quot;\&quot; /&gt;&quot;;
-            xml += Position.GetXml(&quot;Position&quot;);
-            xml += &quot;&lt;ProfileCurve value=\&quot;&quot; + ProfileCurve + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathScaleX value=\&quot;&quot; + PathScaleX + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathScaleY value=\&quot;&quot; + PathScaleY + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;ID value=\&quot;&quot; + ID.ToString() + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;LocalID value=\&quot;&quot; + LocalID + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;ParentID value=\&quot;&quot; + ParentID + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;GroupID value=\&quot;&quot; + GroupID.ToString() + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Material value=\&quot;&quot; + Material + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Name value=\&quot;&quot; + Name + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Description value=\&quot;&quot; + Description + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathShearX value=\&quot;&quot; + PathShearX + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathShearY value=\&quot;&quot; + PathShearY + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathTaperX value=\&quot;&quot; + PathTaperX + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathTaperY value=\&quot;&quot; + PathTaperY + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;ProfileEnd value=\&quot;&quot; + ProfileEnd + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathBegin value=\&quot;&quot; + PathBegin + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathCurve value=\&quot;&quot; + PathCurve + &quot;\&quot; /&gt;&quot;;
-            xml += Scale.GetXml(&quot;Scale&quot;);
-            xml += &quot;&lt;PathTwist value=\&quot;&quot; + PathTwist + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;ProfileHollow value=\&quot;&quot; + ProfileHollow + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PathRevolutions value=\&quot;&quot; + PathRevolutions + &quot;\&quot; /&gt;&quot;;
-            xml += Rotation.GetXml(&quot;Rotation&quot;);
-            xml += &quot;&lt;State value=\&quot;&quot; + State + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Text value=\&quot;&quot; + Text + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;PCode value=\&quot;&quot; + PCode + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Flags value=\&quot;&quot; + Flags + &quot;\&quot; /&gt;&quot;;
-            xml += Textures.GetXml(&quot;Textures&quot;);
-            xml += TextureAnim.GetXml(&quot;TextureAnim&quot;);
-            xml += Flexible.GetXml(&quot;Flexible&quot;);
-            xml += Light.GetXml(&quot;Light&quot;);
-            xml += ParticleSys.GetXml(&quot;ParticleSys&quot;);
-            xml += &quot;&lt;/Prim&gt;&quot;;
-
-            return xml;
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;client&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;node&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public static PrimObject FromXml(SecondLife client, XmlNode node)
-        {
-            PrimObject prim = new PrimObject(client);
-
-            foreach (XmlNode childNode in node.ChildNodes)
-            {
-                ;
-            }
-
-            return prim;
-        }
-
         public override string ToString()
         {
             string output = &quot;&quot;;
@@ -493,48 +469,38 @@
 
             return output;
         }
-	}
 
-    /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    [Flags]
-    public enum ObjectFlags
-    {
-        None = 0,
-        Physics = 1 &lt;&lt; 0,
-        CreateSelected = 1 &lt;&lt; 1,
-        Script = 1 &lt;&lt; 6,
-        Touch = 1 &lt;&lt; 7,
-        Money = 1 &lt;&lt; 9,
-        Phantom = 1 &lt;&lt; 10,
-        Temp = 1 &lt;&lt; 30
-    }
+        public void ToXml(XmlWriter xmlWriter)
+        {
+            //XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
+            //ns.Add(&quot;&quot;, &quot;&quot;);
+            XmlSerializer serializer = new XmlSerializer(typeof(PrimObject));
+            serializer.Serialize(xmlWriter, this);
+        }
 
-    /// &lt;summary&gt;
-    /// 
-    /// &lt;/summary&gt;
-    public enum ExtraParamType : ushort
-    {
-        Flexible = 0x10,
-        Light = 0x20
-    }
+        public static PrimObject FromXml(XmlReader xmlReader)
+        {
+            XmlSerializer serializer = new XmlSerializer(typeof(PrimObject));
+            return (PrimObject)serializer.Deserialize(xmlReader);
+        }
+	}
 
     /// &lt;summary&gt;
-    /// 
+    /// OMG Flexi
     /// &lt;/summary&gt;
+    [Serializable]
     public class PrimFlexibleData
     {
         /// &lt;summary&gt;&lt;/summary&gt;
-        public int Softness;
+        [XmlAttribute(&quot;softness&quot;), DefaultValue(0)] public int Softness;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Gravity;
+        [XmlAttribute(&quot;gravity&quot;), DefaultValue(0)] public float Gravity;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Drag;
+        [XmlAttribute(&quot;drag&quot;), DefaultValue(0)] public float Drag;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Wind;
+        [XmlAttribute(&quot;wind&quot;), DefaultValue(0)] public float Wind;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Tension;
+        [XmlAttribute(&quot;tension&quot;), DefaultValue(0)] public float Tension;
         /// &lt;summary&gt;&lt;/summary&gt;
         public LLVector3 Force = LLVector3.Zero;
 
@@ -589,49 +555,26 @@
             Wind = data[i++] / 10.0f;
             Force = new LLVector3(data, i);
         }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            string xml = &quot;&lt;&quot; + name + &quot;&gt;&quot;;
-            xml += &quot;&lt;Softness value=\&quot;&quot; + Softness + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Tension value=\&quot;&quot; + Tension + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Drag value=\&quot;&quot; + Drag + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Gravity value=\&quot;&quot; + Gravity + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Wind value=\&quot;&quot; + Wind + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;/&quot; + name + &quot;&gt;&quot;;
-
-            return xml;
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;node&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public static PrimFlexibleData FromXml(XmlNode node)
-        {
-            return null;
-        }
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Information on the light property associated with a prim
     /// &lt;/summary&gt;
+    [Serializable]
     public class PrimLightData
     {
         /// &lt;summary&gt;&lt;/summary&gt;
-        public byte R, G, B;
+        [XmlAttribute(&quot;red&quot;), DefaultValue(0)] public byte R;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Intensity;
+        [XmlAttribute(&quot;green&quot;), DefaultValue(0)] public byte G;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Radius;
+        [XmlAttribute(&quot;blue&quot;), DefaultValue(0)] public byte B;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Falloff;
+        [XmlAttribute(&quot;intensity&quot;), DefaultValue(0)] public float Intensity;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;radius&quot;), DefaultValue(0)] public float Radius;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;falloff&quot;), DefaultValue(0)] public float Falloff;
 
         /// &lt;summary&gt;
         /// 
@@ -676,33 +619,6 @@
             return data;
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            string xml = &quot;&lt;&quot; + name + &quot;&gt;&quot;;
-            xml += &quot;&lt;Color X=\&quot;&quot; + R + &quot;\&quot; Y=\&quot;&quot; + G + &quot;\&quot; Z=\&quot;&quot; + B + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Intensity value=\&quot;&quot; + Intensity + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Radius value=\&quot;&quot; + Radius + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Falloff value=\&quot;&quot; + Falloff + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;/&quot; + name + &quot;&gt;&quot;;
-
-            return xml;
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;node&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public static PrimLightData FromXml(XmlNode node)
-        {
-            return null;
-        }
-
         private void FromBytes(byte[] data, int pos)
         {
             int i = pos;
@@ -722,4 +638,41 @@
             Falloff = BitConverter.ToSingle(data, i + 8);
         }
     }
+
+    /// &lt;summary&gt;
+    /// 
+    /// &lt;/summary&gt;
+    public class ObjectProperties
+    {
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public LLUUID ObjectID;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public LLUUID OwnerID;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public LLUUID GroupID;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint BaseMask;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint OwnerMask;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint GroupMask;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint EveryoneMask;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint NextOwnerMask;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public int OwnershipCost;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public byte SaleType;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public int SalePrice;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public uint Category;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public LLUUID LastOwnerID;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public string Name;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public string Description;
+    }
 }

Modified: branches/aditi/libsecondlife-cs/Region.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Region.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Region.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -111,6 +111,7 @@
         public EstateTools Estate;
 
         /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;remarks&gt;This may cause your code to block while the GridRegion data is fetched for the 1st time.&lt;/remarks&gt;
         private GridRegion _GridRegionData = null;
         public GridRegion GridRegionData
         {

Modified: branches/aditi/libsecondlife-cs/SecondLife.cs
===================================================================
--- branches/aditi/libsecondlife-cs/SecondLife.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/SecondLife.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -28,26 +28,26 @@
 using System.Collections.Generic;
 using libsecondlife.Packets;
 using libsecondlife.AssetSystem;
+using libsecondlife.InventorySystem;
 
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// Callback used for client apps to receive log messages from
-    /// libsecondlife
-    /// &lt;/summary&gt;
-    /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
-    /// &lt;param name=&quot;level&quot;&gt;&lt;/param&gt;
-    public delegate void LogCallback(string message, Helpers.LogLevel level);
-
-    /// &lt;summary&gt;
     /// Main class to expose Second Life functionality to clients. All of the
     /// classes needed for sending and receiving data are accessible through 
     /// this class.
     /// &lt;/summary&gt;
     public class SecondLife
     {
-        public const string LOGIN_SERVER = &quot;<A HREF="https://login.aditi.lindenlab.com/cgi-bin/login.cgi">https://login.aditi.lindenlab.com/cgi-bin/login.cgi</A>&quot;;
+        /// &lt;summary&gt;
+        /// Callback used for client apps to receive log messages from
+        /// libsecondlife
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;message&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;level&quot;&gt;&lt;/param&gt;
+        public delegate void LogCallback(string message, Helpers.LogLevel level);
 
+
         /// &lt;summary&gt;Networking Subsystem&lt;/summary&gt;
         public NetworkManager Network;
         /// &lt;summary&gt;Parcel (subdivided simulator lots) Subsystem&lt;/summary&gt;
@@ -62,32 +62,17 @@
         public ObjectManager Objects;
         /// &lt;summary&gt;Group Subsystem&lt;/summary&gt;
         public GroupManager Groups;
+        /// &lt;summary&gt;Asset Subsystem&lt;/summary&gt;
+        public AssetManager Assets;
+        /// &lt;summary&gt;Inventory Subsystem&lt;/summary&gt;
+        public InventoryManager Inventory;
+        /// &lt;summary&gt;Image Subsystem&lt;/summary&gt;
+        public ImageManager Images;
         /// &lt;summary&gt;Throttling Subsystem&lt;/summary&gt;
         public AgentThrottle Throttle;
+        /// &lt;summary&gt;Settings Subsystem&lt;/summary&gt;
+        public Settings Settings;
 
-        private ImageManager _ImageManager;
-        /// &lt;summary&gt;Image Subsystem&lt;/summary&gt;
-        public ImageManager Images
-        {
-            get
-            {
-                if (_ImageManager == null)
-                {
-                    _ImageManager = new ImageManager(this);
-                    return _ImageManager;
-                }
-                else
-                {
-                    return _ImageManager;
-                }
-            }
-
-            set
-            {
-                _ImageManager = value;
-            }
-        }
-
         /// &lt;summary&gt;Triggered whenever a message is logged.
         /// If this is left null, log messages will go to 
         /// the console&lt;/summary&gt;
@@ -100,13 +85,18 @@
         /// &lt;/summary&gt;
         public SecondLife()
         {
+            // These are order-dependant
             Network = new NetworkManager(this);
+            Settings = new Settings(this);
             Parcels = new ParcelManager(this);
             Self = new MainAvatar(this);
             Avatars = new AvatarManager(this);
             Grid = new GridManager(this);
             Objects = new ObjectManager(this);
             Groups = new GroupManager(this);
+            Assets = new AssetManager(this);
+            Images = new ImageManager(this);
+            Inventory = new InventoryManager(this);
             Throttle = new AgentThrottle(this);
         }
 

Copied: branches/aditi/libsecondlife-cs/SerializableDictionary.cs (from rev 775, trunk/libsecondlife-cs/SerializableDictionary.cs)

Copied: branches/aditi/libsecondlife-cs/Settings.cs (from rev 775, trunk/libsecondlife-cs/Settings.cs)

Modified: branches/aditi/libsecondlife-cs/Textures.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Textures.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Textures.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -26,93 +26,169 @@
 
 using System;
 using System.Collections.Generic;
-using System.Text;
+using System.Xml;
+using System.Xml.Serialization;
+using System.ComponentModel;
 using System.IO;
 
 namespace libsecondlife
 {
     /// &lt;summary&gt;
-    /// 
+    /// The type of bump-mapping applied to a face
     /// &lt;/summary&gt;
     public enum Bumpiness
     {
-        None = 0,
-        Brightness = 1,
-        Darkness = 2,
-        Woodgrain = 3,
-        Bark = 4,
-        Bricks = 5,
-        Checker = 6,
-        Concrete = 7,
-        Crustytile = 8,
-        Cutstone = 9,
-        Discs = 10,
-        Gravel = 11,
-        Petridish = 12,
-        Siding = 13,
-        Stonetile = 14,
-        Stucco = 15,
-        Suction = 16,
-        Weave = 17
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;None&quot;)] None = 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Brightness&quot;)] Brightness = 1,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Darkness&quot;)] Darkness = 2,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Woodgrain&quot;)] Woodgrain = 3,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Bark&quot;)] Bark = 4,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Bricks&quot;)] Bricks = 5,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Checker&quot;)] Checker = 6,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Concrete&quot;)] Concrete = 7,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Crustytile&quot;)] Crustytile = 8,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Cutstone&quot;)] Cutstone = 9,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Discs&quot;)] Discs = 10,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Gravel&quot;)] Gravel = 11,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Petridish&quot;)] Petridish = 12,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Siding&quot;)] Siding = 13,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Stonetile&quot;)] Stonetile = 14,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Stucco&quot;)] Stucco = 15,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Suction&quot;)] Suction = 16,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Weave&quot;)] Weave = 17
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// The level of shininess applied to a face
     /// &lt;/summary&gt;
     public enum Shininess
     {
-        None = 0,
-        Low = 0x40,
-        Medium = 0x80,
-        High = 0xC0
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;None&quot;)] None = 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Low&quot;)] Low = 0x40,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Medium&quot;)] Medium = 0x80,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;High&quot;)] High = 0xC0
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// The texture mapping style used for a face
     /// &lt;/summary&gt;
     public enum Mapping
     {
-        Default = 0,
-        Planar = 2
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Default&quot;)] Default = 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlEnum(&quot;Planar&quot;)] Planar = 2
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// Flags in the TextureEntry block that describe which properties are 
+    /// set
     /// &lt;/summary&gt;
+    [Flags]
+    public enum TextureAttributes : uint
+    {
+        /// &lt;summary&gt;&lt;/summary&gt;
+        None = 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        TextureID = 1 &lt;&lt; 0,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        RGBA = 1 &lt;&lt; 1,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        RepeatU = 1 &lt;&lt; 2,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        RepeatV = 1 &lt;&lt; 3,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        OffsetU = 1 &lt;&lt; 4,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        OffsetV = 1 &lt;&lt; 5,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        Rotation = 1 &lt;&lt; 6,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        Flags1 = 1 &lt;&lt; 7,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        Flags2 = 1 &lt;&lt; 8,
+        /// &lt;summary&gt;&lt;/summary&gt;
+        All = 0xFFFFFFFF
+    }
+
+    /// &lt;summary&gt;
+    /// Represents all of the texturable faces for an object
+    /// &lt;/summary&gt;
+    /// &lt;remarks&gt;Objects in Second Life have infinite faces, with each face
+    /// using the properties of the default face unless set otherwise. So if
+    /// you have a TextureEntry with a default texture uuid of X, and face 72
+    /// has a texture UUID of Y, every face would be textured with X except for
+    /// face 72 that uses Y.&lt;/remarks&gt;
+    [Serializable]
     public class TextureEntry
     {
         /// &lt;summary&gt;&lt;/summary&gt;
-        public TextureEntryFace DefaultTexture;
+        [XmlElement(&quot;default&quot;)] public TextureEntryFace DefaultTexture = null;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public Dictionary&lt;uint, TextureEntryFace&gt; FaceTextures;
+        [XmlElement(&quot;faces&quot;)] public SerializableDictionary&lt;uint, TextureEntryFace&gt; FaceTextures = 
+            new SerializableDictionary&lt;uint,TextureEntryFace&gt;();
 
         /// &lt;summary&gt;
-        /// 
+        /// Default constructor, DefaultTexture will remain null
         /// &lt;/summary&gt;
         public TextureEntry()
         {
-            FaceTextures = new Dictionary&lt;uint, TextureEntryFace&gt;();
-            //DefaultTexture = new TextureEntryFace(null);
-            DefaultTexture = null;
         }
 
-        public TextureEntry(LLUUID textureID)
+        /// &lt;summary&gt;
+        /// Constructor that takes a default texture UUID
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;defaultTextureID&quot;&gt;Texture UUID to use as the default texture&lt;/param&gt;
+        public TextureEntry(LLUUID defaultTextureID)
         {
-            FaceTextures = new Dictionary&lt;uint, TextureEntryFace&gt;();
             DefaultTexture = new TextureEntryFace(null);
-            DefaultTexture.TextureID = textureID;
+            DefaultTexture.TextureID = defaultTextureID;
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor that creates the TextureEntry class from a byte array
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;data&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;data&quot;&gt;Byte array containing the TextureEntry field&lt;/param&gt;
+        /// &lt;param name=&quot;pos&quot;&gt;Starting position of the TextureEntry field in 
+        /// the byte array&lt;/param&gt;
+        /// &lt;param name=&quot;length&quot;&gt;Length of the TextureEntry field, in bytes&lt;/param&gt;
         public TextureEntry(byte[] data, int pos, int length)
         {
             FromBytes(data, pos, length);
         }
 
+        /// &lt;summary&gt;
+        /// Returns the TextureEntryFace that is applied to the specified 
+        /// index. If a custom texture is not set for this face that would be
+        /// the default texture for this TextureEntry. Do not modify the 
+        /// returned TextureEntryFace, it will have undefined results. Use 
+        /// CreateFace() to get a TextureEntryFace that is safe for writing
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;index&quot;&gt;The index number of the face to retrieve&lt;/param&gt;
+        /// &lt;returns&gt;A TextureEntryFace containing all the properties for that
+        /// face, suitable for read-only operations&lt;/returns&gt;
         public TextureEntryFace GetFace(uint index)
         {
             if (FaceTextures.ContainsKey(index))
@@ -122,11 +198,15 @@
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// This will either create a new face if a custom face for the given
+        /// index is not defined, or return the custom face for that index if
+        /// it already exists
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;index&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public TextureEntryFace SetFace(uint index)
+        /// &lt;param name=&quot;index&quot;&gt;The index number of the face to create or 
+        /// retrieve&lt;/param&gt;
+        /// &lt;returns&gt;A TextureEntryFace containing all the properties for that
+        /// face&lt;/returns&gt;
+        public TextureEntryFace CreateFace(uint index)
         {
             if (!FaceTextures.ContainsKey(index))
                 FaceTextures[index] = new TextureEntryFace(this.DefaultTexture);
@@ -138,7 +218,7 @@
         /// 
         /// &lt;/summary&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-        public byte[] GetBytes()
+        public byte[] ToBytes()
         {
             if (DefaultTexture == null)
             {
@@ -315,8 +395,8 @@
                 binWriter.Write(GetFaceBitfieldBytes(kv.Value));
                 binWriter.Write(kv.Key);
             }
-
-            return memStream.GetBuffer();
+            
+            return memStream.ToArray();
         }
 
         private byte[] GetFaceBitfieldBytes(uint bitfield)
@@ -342,20 +422,6 @@
             return bytes;
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            string xml = &quot;&lt;TextureEntry&gt;&quot;;
-            // FIXME: Write GetXml for TextureEntry
-            xml += &quot;&lt;/TextureEntry&gt;&quot;;
-
-            return xml;
-        }
-
         private bool ReadFaceBitfield(byte[] data, ref int pos, ref uint faceBits, ref uint bitfieldSize)
         {
             faceBits = 0;
@@ -381,7 +447,7 @@
         {
             short value = (short)(byteArray[pos] | (byteArray[pos + 1] &lt;&lt; 8));
             float QV = (float)value;
-            float QF = upper / 32767.0F;
+            float QF = upper / 32767.0f;
             return (float)(QV * QF);
         }
 
@@ -393,37 +459,37 @@
 
         private short RepeatShort(float value)
         {
-            return QuantizeSigned(value - 1.0F, 101.0F);
+            return QuantizeSigned(value - 1.0f, 101.0f);
         }
 
         private short OffsetShort(float value)
         {
-            return QuantizeSigned(value, 1.0F);
+            return QuantizeSigned(value, 1.0f);
         }
 
         private short RotationShort(float value)
         {
-            return QuantizeSigned(value, 359.995F);
+            return QuantizeSigned(value, 359.995f);
         }
 
         private float RepeatFloat(byte[] data, int pos)
         {
-            return DequantizeSigned(data, pos, 101.0F) + 1.0F;
+            return DequantizeSigned(data, pos, 101.0f) + 1.0f;
         }
 
         private float OffsetFloat(byte[] data, int pos)
         {
-            return DequantizeSigned(data, pos, 1.0F);
+            return DequantizeSigned(data, pos, 1.0f);
         }
 
         private float RotationFloat(byte[] data, int pos)
         {
-            return DequantizeSigned(data, pos, 359.995F);
+            return DequantizeSigned(data, pos, 359.995f);
         }
 
         private void FromBytes(byte[] data, int pos, int length)
         {
-            FaceTextures = new Dictionary&lt;uint, TextureEntryFace&gt;();
+            FaceTextures = new SerializableDictionary&lt;uint, TextureEntryFace&gt;();
             DefaultTexture = new TextureEntryFace(null);
 
             if (length &lt;= 0) 
@@ -444,7 +510,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).TextureID = tmpUUID;
+                        CreateFace(face).TextureID = tmpUUID;
             }
             //Read RGBA --------------------------------------------
             DefaultTexture.RGBA = (uint)(data[i] + (data[i + 1] &lt;&lt; 8) + (data[i + 2] &lt;&lt; 16) + (data[i + 3] &lt;&lt; 24));
@@ -457,7 +523,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).RGBA = tmpUint;
+                        CreateFace(face).RGBA = tmpUint;
             }
             //Read RepeatU -----------------------------------------
             DefaultTexture.RepeatU = RepeatFloat(data, i);
@@ -470,7 +536,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).RepeatU = tmpFloat;
+                        CreateFace(face).RepeatU = tmpFloat;
             }
             //Read RepeatV -----------------------------------------
             DefaultTexture.RepeatV = RepeatFloat(data, i);
@@ -483,7 +549,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).RepeatV = tmpFloat;
+                        CreateFace(face).RepeatV = tmpFloat;
             }
             //Read OffsetU -----------------------------------------
             DefaultTexture.OffsetU = OffsetFloat(data, i);
@@ -496,7 +562,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).OffsetU = tmpFloat;
+                        CreateFace(face).OffsetU = tmpFloat;
             }
             //Read OffsetV -----------------------------------------
             DefaultTexture.OffsetV = OffsetFloat(data, i);
@@ -509,7 +575,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).OffsetV = tmpFloat;
+                        CreateFace(face).OffsetV = tmpFloat;
             }
             //Read Rotation ----------------------------------------
             DefaultTexture.Rotation = RotationFloat(data, i);
@@ -522,7 +588,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).Rotation = tmpFloat;
+                        CreateFace(face).Rotation = tmpFloat;
             }
             //Read Flags1 ------------------------------------------
             DefaultTexture.Flags1 = data[i];
@@ -535,7 +601,7 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).Flags1 = tmpByte;
+                        CreateFace(face).Flags1 = tmpByte;
             }
             //Read Flags2 ------------------------------------------
             DefaultTexture.Flags2 = data[i];
@@ -548,249 +614,250 @@
 
                 for (uint face = 0, bit = 1; face &lt; BitfieldSize; face++, bit &lt;&lt;= 1)
                     if ((faceBits &amp; bit) != 0)
-                        SetFace(face).Flags2 = tmpByte;
+                        CreateFace(face).Flags2 = tmpByte;
             }
         }
     }
 
     /// &lt;summary&gt;
-    /// 
+    /// A single textured face. Don't instantiate this class yourself, use the
+    /// methods in TextureEntry
     /// &lt;/summary&gt;
+    [Serializable]
     public class TextureEntryFace
     {
-        [Flags]
-        public enum TextureAttributes : uint
-        {
-            None      = 0,
-            TextureID = 1 &lt;&lt; 0,
-            RGBA      = 1 &lt;&lt; 1,
-            RepeatU   = 1 &lt;&lt; 2,
-            RepeatV   = 1 &lt;&lt; 3,
-            OffsetU   = 1 &lt;&lt; 4,
-            OffsetV   = 1 &lt;&lt; 5,
-            Rotation  = 1 &lt;&lt; 6,
-            Flags1    = 1 &lt;&lt; 7,
-            Flags2    = 1 &lt;&lt; 8,
-            All = 0xFFFFFFFF
-        }
+        [XmlAttribute(&quot;rgba&quot;)] private uint rgba;
+        [XmlAttribute(&quot;repeatu&quot;)] private float repeatU = 1.0f;
+        [XmlAttribute(&quot;repeatv&quot;)] private float repeatV = 1.0f;
+        [XmlAttribute(&quot;offsetu&quot;)] private float offsetU;
+        [XmlAttribute(&quot;offsetv&quot;)] private float offsetV;
+        [XmlAttribute(&quot;rotation&quot;)] private float rotation;
+        [XmlAttribute(&quot;flags1&quot;)] private byte flags1;
+        [XmlAttribute(&quot;flags2&quot;)] private byte flags2;
+        [XmlAttribute(&quot;textureattributes&quot;)] private TextureAttributes hasAttribute;
+        [XmlText] private LLUUID textureID;
+        [XmlElement(&quot;defaulttexture&quot;)] private TextureEntryFace DefaultTexture = null;
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;defaultTexture&quot;&gt;&lt;/param&gt;
-        public TextureEntryFace(TextureEntryFace defaultTexture)
-        {
-            DefaultTexture = defaultTexture;
-            if (DefaultTexture == null)
-                hasAttribute = TextureAttributes.All;
-            else
-                hasAttribute = TextureAttributes.None;
-        }
+        //////////////////////
+        ///// Properties /////
+        //////////////////////
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        public LLUUID TextureID
-        {
-            get
-            {
-                if ((hasAttribute &amp; TextureAttributes.TextureID) != 0)
-                    return _TextureID;
-                else
-                    return DefaultTexture._TextureID;
-            }
-            set
-            {
-                _TextureID = value;
-                hasAttribute |= TextureAttributes.TextureID;
-            }
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;rgba&quot;)]
         public uint RGBA
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.RGBA) != 0)
-                    return _RGBA;
+                    return rgba;
                 else
-                    return DefaultTexture._RGBA;
+                    return DefaultTexture.rgba;
             }
             set
             {
-                _RGBA = value;
+                rgba = value;
                 hasAttribute |= TextureAttributes.RGBA;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;repeatu&quot;)]
         public float RepeatU
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.RepeatU) != 0)
-                    return _RepeatU;
+                    return repeatU;
                 else
-                    return DefaultTexture._RepeatU;
+                    return DefaultTexture.repeatU;
             }
             set
             {
-                _RepeatU = value;
+                repeatU = value;
                 hasAttribute |= TextureAttributes.RepeatU;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;repeatv&quot;)]
         public float RepeatV
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.RepeatV) != 0)
-                    return _RepeatV;
+                    return repeatV;
                 else
-                    return DefaultTexture._RepeatV;
+                    return DefaultTexture.repeatV;
             }
             set
             {
-                _RepeatV = value;
+                repeatV = value;
                 hasAttribute |= TextureAttributes.RepeatV;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;offsetu&quot;)]
         public float OffsetU
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.OffsetU) != 0)
-                    return _OffsetU;
+                    return offsetU;
                 else
-                    return DefaultTexture._OffsetU;
+                    return DefaultTexture.offsetU;
             }
             set
             {
-                _OffsetU = value;
+                offsetU = value;
                 hasAttribute |= TextureAttributes.OffsetU;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;offsetv&quot;)]
         public float OffsetV
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.OffsetV) != 0)
-                    return _OffsetV;
+                    return offsetV;
                 else
-                    return DefaultTexture._OffsetV;
+                    return DefaultTexture.offsetV;
             }
             set
             {
-                _OffsetV = value;
+                offsetV = value;
                 hasAttribute |= TextureAttributes.OffsetV;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;rotation&quot;)]
         public float Rotation
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.Rotation) != 0)
-                    return _Rotation;
+                    return rotation;
                 else
-                    return DefaultTexture._Rotation;
+                    return DefaultTexture.rotation;
             }
             set
             {
-                _Rotation = value;
+                rotation = value;
                 hasAttribute |= TextureAttributes.Rotation;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;flags1&quot;)]
         public byte Flags1
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.Flags1) != 0)
-                    return _Flags1;
+                    return flags1;
                 else
-                    return DefaultTexture._Flags1;
+                    return DefaultTexture.flags1;
             }
             set
             {
-                _Flags1 = value;
+                flags1 = value;
                 hasAttribute |= TextureAttributes.Flags1;
             }
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlAttribute(&quot;flags2&quot;)]
         public byte Flags2
         {
             get
             {
                 if ((hasAttribute &amp; TextureAttributes.Flags2) != 0)
-                    return _Flags2;
+                    return flags2;
                 else
-                    return DefaultTexture._Flags2;
+                    return DefaultTexture.flags2;
             }
             set
             {
-                _Flags2 = value;
+                flags2 = value;
                 hasAttribute |= TextureAttributes.Flags2;
             }
         }
 
-        private TextureAttributes hasAttribute;
-        private TextureEntryFace DefaultTexture;
-        private LLUUID _TextureID;
-        private uint _RGBA;
-        private float _RepeatU;
-        private float _RepeatV;
-        private float _OffsetU;
-        private float _OffsetV;
-        private float _Rotation;
-        private byte _Flags1;
-        private byte _Flags2;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        [XmlElement(&quot;id&quot;)]
+        public LLUUID TextureID
+        {
+            get
+            {
+                if ((hasAttribute &amp; TextureAttributes.TextureID) != 0)
+                    return textureID;
+                else
+                    return DefaultTexture.textureID;
+            }
+            set
+            {
+                textureID = value;
+                hasAttribute |= TextureAttributes.TextureID;
+            }
+        }
+
+        /////////////////////////////
+        ///// End of properties /////
+        /////////////////////////////
+
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        public TextureEntryFace()
+        {
+        }
+
+        /// &lt;summary&gt;
+        /// Contains the definition for individual faces
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;defaultTexture&quot;&gt;&lt;/param&gt;
+        public TextureEntryFace(TextureEntryFace defaultTexture)
+        {
+            DefaultTexture = defaultTexture;
+            if (DefaultTexture == null)
+                hasAttribute = TextureAttributes.All;
+            else
+                hasAttribute = TextureAttributes.None;
+        }
+
+        public void ToXml(XmlWriter xmlWriter)
+        {
+            XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
+            ns.Add(&quot;&quot;, &quot;&quot;);
+            XmlSerializer serializer = new XmlSerializer(typeof(TextureEntryFace));
+            serializer.Serialize(xmlWriter, this, ns);
+        }
+
     }
 
-
     /// &lt;summary&gt;
-    /// 
+    /// Controls the texture animation of a particular prim
     /// &lt;/summary&gt;
+    [Serializable]
     public class TextureAnimation
     {
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint Flags;
+        [XmlAttribute(&quot;flags&quot;), DefaultValue(0)] public uint Flags;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint Face;
+        [XmlAttribute(&quot;face&quot;), DefaultValue(0)] public uint Face;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint SizeX;
+        [XmlAttribute(&quot;sizex&quot;), DefaultValue(0)] public uint SizeX;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public uint SizeY;
+        [XmlAttribute(&quot;sizey&quot;), DefaultValue(0)] public uint SizeY;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Start;
+        [XmlAttribute(&quot;start&quot;), DefaultValue(0)] public float Start;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Length;
+        [XmlAttribute(&quot;length&quot;), DefaultValue(0)] public float Length;
         /// &lt;summary&gt;&lt;/summary&gt;
-        public float Rate;
+        [XmlAttribute(&quot;rate&quot;), DefaultValue(0)] public float Rate;
 
         /// &lt;summary&gt;
         /// Default constructor
@@ -820,26 +887,6 @@
             return bytes;
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            string xml = &quot;&lt;TextureAnimation&gt;&quot;;
-            xml += &quot;&lt;Flags value=\&quot;&quot; + Flags + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Face value=\&quot;&quot; + Face + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;SizeX value=\&quot;&quot; + SizeX + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;SizeY value=\&quot;&quot; + SizeY + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Start value=\&quot;&quot; + Start + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Length value=\&quot;&quot; + Length + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;Rate value=\&quot;&quot; + Rate + &quot;\&quot; /&gt;&quot;;
-            xml += &quot;&lt;/TextureAnimation&gt;&quot;;
-
-            return xml;
-        }
-
         private void FromBytes(byte[] data, int pos)
         {
             int i = pos;

Modified: branches/aditi/libsecondlife-cs/Types.cs
===================================================================
--- branches/aditi/libsecondlife-cs/Types.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/Types.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,7 +25,9 @@
  */
 
 using System;
+using System.ComponentModel;
 using System.Net;
+using System.Xml.Serialization;
 
 namespace libsecondlife
 {
@@ -33,32 +35,33 @@
     /// A 128-bit Universally Unique Identifier, used throughout the Second
     /// Life networking protocol
     /// &lt;/summary&gt;
-	public class LLUUID
+    [Serializable]
+    public class LLUUID : IXmlSerializable
 	{
+        /// &lt;summary&gt;The 16 bytes that make up the UUID&lt;/summary&gt;
+        protected byte[] data = new byte[16];
+
         /// &lt;summary&gt;Get a byte array of the 16 raw bytes making up the UUID&lt;/summary&gt;
 		public byte[] Data
 		{
 			get { return data; }
 		}
 
-        private byte[] data = null;
-
         /// &lt;summary&gt;
-        /// 
+        /// Default constructor
         /// &lt;/summary&gt;
 		public LLUUID()
 		{
-			data = new byte[16];
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor that takes a string UUID representation
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;val&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;val&quot;&gt;A string representation of a UUID, case 
+        /// insensitive and can either be hyphenated or non-hyphenated&lt;/param&gt;
+        /// &lt;example&gt;LLUUID(&quot;11f8aa9c-b071-4242-836b-13b7abe0d489&quot;)&lt;/example&gt;
 		public LLUUID(string val)
 		{
-			data = new byte[16];
-
 			if (val.Length == 36) val = val.Replace(&quot;-&quot;, &quot;&quot;);
 			
 			if (val.Length != 32) throw new Exception(&quot;Malformed data passed to LLUUID constructor: &quot; + val);
@@ -70,34 +73,22 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor that takes a byte array containing a UUID
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;byteArray&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;byteArray&quot;&gt;Byte array containing a 16 byte UUID&lt;/param&gt;
+        /// &lt;param name=&quot;pos&quot;&gt;Beginning offset in the array&lt;/param&gt;
 		public LLUUID(byte[] byteArray, int pos)
 		{
-			data = new byte[16];
-
 			Array.Copy(byteArray, pos, data, 0, 16);
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Returns the raw bytes for this UUID
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;randomize&quot;&gt;&lt;/param&gt;
-		public LLUUID(bool randomize)
-		{
-			if (randomize) data = Guid.NewGuid().ToByteArray();
-			else           data = new byte[16];
-		}
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;A 16 byte array containing this UUID&lt;/returns&gt;
         public byte[] GetBytes()
         {
-            return Data;
+            return data;
         }
 
 		/// &lt;summary&gt;
@@ -120,25 +111,75 @@
         /// 
         /// &lt;/summary&gt;
         /// &lt;returns&gt;&lt;/returns&gt;
-		public static LLUUID GenerateUUID()
+		public static LLUUID Random()
 		{
 			return new LLUUID(Guid.NewGuid().ToByteArray(), 0);
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Required implementation for XML serialization
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;null&lt;/returns&gt;
+        public System.Xml.Schema.XmlSchema GetSchema()
+        {
+            return null;
+        }
+
+        /// &lt;summary&gt;
+        /// Deserializes an XML UUID
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;reader&quot;&gt;XmlReader containing the UUID to deserialize&lt;/param&gt;
+        public void ReadXml(System.Xml.XmlReader reader)
+        {
+            string val = reader.ReadString();
+
+			if (val.Length &gt; 0)
+			{
+				if (val.Length == 36) val = val.Replace(&quot;-&quot;, &quot;&quot;);
+
+				if (val.Length != 32) throw new Exception(&quot;Malformed data passed to LLUUID constructor: &quot; + val);
+
+				for (int i = 0; i &lt; 16; ++i)
+				{
+					data[i] = Convert.ToByte(val.Substring(i * 2, 2), 16);
+				}
+			}
+
+            reader.Skip();
+        }
+
+        /// &lt;summary&gt;
+        /// Serialize this UUID to XML
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;writer&quot;&gt;XmlWriter to serialize to&lt;/param&gt;
+        public void WriteXml(System.Xml.XmlWriter writer)
+        {
+			if (this != LLUUID.Zero)
+				writer.WriteString(this.ToString());
+        }
+
+        /// &lt;summary&gt;
+        /// Return a hash code for this UUID, used by .NET for hash tables
+        /// &lt;/summary&gt;
+        /// &lt;returns&gt;An integer composed of all the UUID bytes XORed together&lt;/returns&gt;
 		public override int GetHashCode()
 		{
-			return ToString().GetHashCode();
+            int hash = data[0];
+
+            for (int i = 1; i &lt; 16; i++)
+            {
+                hash ^= data[i];
+            }
+
+			return hash;
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Comparison function
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;o&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;param name=&quot;o&quot;&gt;An object to compare to this UUID&lt;/param&gt;
+        /// &lt;returns&gt;False if the object is not an LLUUID, true if it is and
+        /// byte for byte identical to this&lt;/returns&gt;
 		public override bool Equals(object o)
 		{
 			if (!(o is LLUUID)) return false;
@@ -154,11 +195,11 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Equals operator
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;First LLUUID for comparison&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;Second LLUUID for comparison&lt;/param&gt;
+        /// &lt;returns&gt;True if the UUIDs are byte for byte equal, otherwise false&lt;/returns&gt;
 		public static bool operator==(LLUUID lhs, LLUUID rhs)
 		{
             // If both are null, or both are same instance, return true
@@ -182,22 +223,22 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Not equals operator
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;First LLUUID for comparison&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;Second LLUUID for comparison&lt;/param&gt;
+        /// &lt;returns&gt;True if the UUIDs are not equal, otherwise true&lt;/returns&gt;
 		public static bool operator!=(LLUUID lhs, LLUUID rhs)
 		{
 			return !(lhs == rhs);
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// XOR operator
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;First LLUUID&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;Second LLUUID&lt;/param&gt;
+        /// &lt;returns&gt;A UUID that is a XOR combination of the two input UUIDs&lt;/returns&gt;
         public static LLUUID operator ^(LLUUID lhs, LLUUID rhs)
         {
             LLUUID returnUUID = new LLUUID();
@@ -211,22 +252,25 @@
         }
 
         /// &lt;summary&gt;
-        /// 
+        /// String typecasting operator
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;val&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;param name=&quot;val&quot;&gt;A UUID in string form. Case insensitive, 
+        /// hyphenated or non-hyphenated&lt;/param&gt;
+        /// &lt;returns&gt;A UUID built from the string representation&lt;/returns&gt;
         public static implicit operator LLUUID(string val)
 		{
 			return new LLUUID(val);
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Get a string representation of this UUID
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;A string representation of this UUID, lowercase and 
+        /// without hyphens&lt;/returns&gt;
+        /// &lt;example&gt;11f8aa9cb0714242836b13b7abe0d489&lt;/example&gt;
 		public override string ToString()
 		{
-			string uuid = &quot;&quot;;
+			string uuid = String.Empty;
 
 			for (int i = 0; i &lt; 16; ++i)
 			{
@@ -237,12 +281,14 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Get a hyphenated string representation of this UUID
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;A string representation of this UUID, lowercase and 
+        /// with hyphens&lt;/returns&gt;
+        /// &lt;example&gt;11f8aa9c-b071-4242-836b-13b7abe0d489&lt;/example&gt;
 		public string ToStringHyphenated()
 		{
-			string uuid = &quot;&quot;;
+			string uuid = String.Empty;
 
 			for (int i = 0; i &lt; 16; ++i)
 			{
@@ -259,33 +305,27 @@
         /// &lt;summary&gt;
         /// An LLUUID with a value of all zeroes
         /// &lt;/summary&gt;
-        public readonly static LLUUID Zero = new LLUUID();
+        public static readonly LLUUID Zero = new LLUUID();
 	}
 
     /// &lt;summary&gt;
-    /// 
+    /// A three-dimensional vector with floating-point values
     /// &lt;/summary&gt;
-	public class LLVector3
+    [Serializable]
+	public struct LLVector3
 	{
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float X;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float Y;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float Z;
+        /// &lt;summary&gt;X value&lt;/summary&gt;
+        [XmlAttribute(&quot;x&quot;), DefaultValue(0)] public float X;
+		/// &lt;summary&gt;Y value&lt;/summary&gt;
+        [XmlAttribute(&quot;y&quot;), DefaultValue(0)] public float Y;
+        /// &lt;summary&gt;Z value&lt;/summary&gt;
+        [XmlAttribute(&quot;z&quot;), DefaultValue(0)] public float Z;
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor, builds a single-precision vector from a 
+        /// double-precision one
         /// &lt;/summary&gt;
-		public LLVector3()
-		{
-			X = Y = Z = 0.0F;
-		}
-		
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;vector&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;vector&quot;&gt;A double-precision vector&lt;/param&gt;
 		public LLVector3(LLVector3d vector)
 		{
 			X = (float)vector.X;
@@ -294,30 +334,39 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor, builds a vector from a byte array
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;byteArray&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;byteArray&quot;&gt;Byte array containing a 12 byte vector&lt;/param&gt;
+        /// &lt;param name=&quot;pos&quot;&gt;Beginning position in the byte array&lt;/param&gt;
 		public LLVector3(byte[] byteArray, int pos)
 		{
-			if(!BitConverter.IsLittleEndian) 
-			{
-				Array.Reverse(byteArray, pos, 4);
-				Array.Reverse(byteArray, pos + 4, 4);
-				Array.Reverse(byteArray, pos + 8, 4);
-			}
+            if (!BitConverter.IsLittleEndian)
+            {
+                byte[] newArray = new byte[12];
+                Array.Copy(byteArray, pos, newArray, 0, 12);
 
-			X = BitConverter.ToSingle(byteArray, pos);
-			Y = BitConverter.ToSingle(byteArray, pos + 4);
-			Z = BitConverter.ToSingle(byteArray, pos + 8);
+                Array.Reverse(newArray, 0, 4);
+                Array.Reverse(newArray, 4, 4);
+                Array.Reverse(newArray, 8, 4);
+
+				X = BitConverter.ToSingle(newArray, 0);
+                Y = BitConverter.ToSingle(newArray, 4);
+                Z = BitConverter.ToSingle(newArray, 8);
+            }
+            else
+            {
+                X = BitConverter.ToSingle(byteArray, pos);
+                Y = BitConverter.ToSingle(byteArray, pos + 4);
+                Z = BitConverter.ToSingle(byteArray, pos + 8);
+            }
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor, builds a vector for individual float values
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;x&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;z&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;x&quot;&gt;X value&lt;/param&gt;
+        /// &lt;param name=&quot;y&quot;&gt;Y value&lt;/param&gt;
+        /// &lt;param name=&quot;z&quot;&gt;Z value&lt;/param&gt;
 		public LLVector3(float x, float y, float z)
 		{
 			X = x;
@@ -326,9 +375,9 @@
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// Returns the raw bytes for this vector
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;A 12 byte array containing X, Y, and Z&lt;/returns&gt;
 		public byte[] GetBytes()
 		{
 			byte[] byteArray = new byte[12];
@@ -347,35 +396,22 @@
 		}
 
         /// &lt;summary&gt;
-        /// Convert to a single xml node
+        /// Get a formatted string representation of the vector
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;The desired name of the xml node&lt;/param&gt;
-        /// &lt;returns&gt;A line of xml data containing the values for this data type&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            return &quot;&lt;&quot; + name + &quot; x=\&quot;&quot; + X + &quot;\&quot; y=\&quot;&quot; + Y + &quot;\&quot; z=\&quot;&quot; + Z + &quot;\&quot; /&gt;&quot;;
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;A string representation of the vector, similar to the LSL
+        /// vector to string conversion in Second Life&lt;/returns&gt;
 		public override string ToString()
 		{
-			return X.ToString() + &quot; &quot; + Y.ToString() + &quot; &quot; + Z.ToString();
+			return &quot;&lt;&quot; + X.ToString() + &quot;, &quot; + Y.ToString() + &quot;, &quot; + Z.ToString() + &quot;&gt;&quot;;
 		}
 
         /// &lt;summary&gt;
-        /// 
+        /// A hash of the vector, used by .NET for hash tables
         /// &lt;/summary&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
+        /// &lt;returns&gt;The hashes of the individual components XORed together&lt;/returns&gt;
 		public override int GetHashCode()
 		{
-			int x = (int)X;
-			int y = (int)Y;
-			int z = (int)Z;
-
-			return (x ^ y ^ z);
+			return (X.GetHashCode() ^ Y.GetHashCode() ^ Z.GetHashCode());
 		}
 
         /// &lt;summary&gt;
@@ -459,28 +495,21 @@
 	}
 
     /// &lt;summary&gt;
-    /// 
+    /// A double-precision three-dimensional vector
     /// &lt;/summary&gt;
-	public class LLVector3d
+    [Serializable]
+	public struct LLVector3d
 	{
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public double X;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public double Y;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public double Z;
+        /// &lt;summary&gt;X value&lt;/summary&gt;
+        [XmlAttribute(&quot;x&quot;), DefaultValue(0)] public double X;
+        /// &lt;summary&gt;Y value&lt;/summary&gt;
+        [XmlAttribute(&quot;y&quot;), DefaultValue(0)] public double Y;
+        /// &lt;summary&gt;Z value&lt;/summary&gt;
+        [XmlAttribute(&quot;z&quot;), DefaultValue(0)] public double Z;
 
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
-		public LLVector3d()
-		{
-			X = Y = Z = 0.0D;
-		}
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
         /// &lt;param name=&quot;x&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;y&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;z&quot;&gt;&lt;/param&gt;
@@ -498,15 +527,25 @@
         /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
 		public LLVector3d(byte[] byteArray, int pos)
 		{
-			if(!BitConverter.IsLittleEndian) {
-				Array.Reverse(byteArray, pos, 8);
-				Array.Reverse(byteArray, pos + 8, 8);
-				Array.Reverse(byteArray, pos + 16, 8);
-			}
+            if (!BitConverter.IsLittleEndian)
+            {
+                byte[] newArray = new byte[24];
+                Array.Copy(byteArray, pos, newArray, 0, 24);
 
-			X = BitConverter.ToDouble(byteArray, pos);
-			Y = BitConverter.ToDouble(byteArray, pos + 8);
-			Z = BitConverter.ToDouble(byteArray, pos + 16);
+                Array.Reverse(newArray, 0, 8);
+                Array.Reverse(newArray, 8, 8);
+                Array.Reverse(newArray, 16, 8);
+
+                X = BitConverter.ToDouble(newArray, 0);
+                Y = BitConverter.ToDouble(newArray, 8);
+                Z = BitConverter.ToDouble(newArray, 16);
+            }
+            else
+            {
+                X = BitConverter.ToDouble(byteArray, pos);
+                Y = BitConverter.ToDouble(byteArray, pos + 8);
+                Z = BitConverter.ToDouble(byteArray, pos + 16);
+            }
 		}
 
         /// &lt;summary&gt;
@@ -521,7 +560,8 @@
 			Array.Copy(BitConverter.GetBytes(Y), 0, byteArray, 8, 8);
 			Array.Copy(BitConverter.GetBytes(Z), 0, byteArray, 16, 8);
 
-			if(!BitConverter.IsLittleEndian) {
+			if(!BitConverter.IsLittleEndian)
+            {
 				Array.Reverse(byteArray, 0, 8);
 				Array.Reverse(byteArray, 8, 8);
 				Array.Reverse(byteArray, 16, 8);
@@ -536,55 +576,59 @@
         /// &lt;returns&gt;&lt;/returns&gt;
 		public override string ToString()
 		{
-			return X.ToString() + &quot; &quot; + Y.ToString() + &quot; &quot; + Z.ToString();
+			return &quot;&lt;&quot; + X.ToString() + &quot;, &quot; + Y.ToString() + &quot;, &quot; + Z.ToString() + &quot;&gt;&quot;;
 		}
 
         /// &lt;summary&gt;
         /// An LLVector3d with a value of 0,0,0
         /// &lt;/summary&gt;
-        public readonly static LLVector3d Zero = new LLVector3d();
+        public static readonly LLVector3d Zero = new LLVector3d();
 	}
 
     /// &lt;summary&gt;
-    /// 
+    /// A four-dimensional vector
     /// &lt;/summary&gt;
-	public class LLVector4
+    [Serializable]
+	public struct LLVector4
 	{
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float X;
+        [XmlAttribute(&quot;x&quot;), DefaultValue(0)] public float X;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float Y;
+        [XmlAttribute(&quot;y&quot;), DefaultValue(0)] public float Y;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float Z;
+        [XmlAttribute(&quot;z&quot;), DefaultValue(0)] public float Z;
         /// &lt;summary&gt;&lt;/summary&gt;
-		public float S;
+        [XmlAttribute(&quot;s&quot;), DefaultValue(0)] public float S;
 
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
-		public LLVector4()
-		{
-			X = Y = Z = S = 0.0F;
-		}
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
         /// &lt;param name=&quot;byteArray&quot;&gt;&lt;/param&gt;
         /// &lt;param name=&quot;pos&quot;&gt;&lt;/param&gt;
 		public LLVector4(byte[] byteArray, int pos)
 		{
-			if(!BitConverter.IsLittleEndian) {
-				Array.Reverse(byteArray, pos, 4);
-				Array.Reverse(byteArray, pos + 4, 4);
-				Array.Reverse(byteArray, pos + 8, 4);
-				Array.Reverse(byteArray, pos + 12, 4);
-			}
+            if (!BitConverter.IsLittleEndian)
+            {
+                byte[] newArray = new byte[16];
+                Array.Copy(byteArray, pos, newArray, 0, 16);
 
-			X = BitConverter.ToSingle(byteArray, pos);
-			Y = BitConverter.ToSingle(byteArray, pos + 4);
-			Z = BitConverter.ToSingle(byteArray, pos + 8);
-			S = BitConverter.ToSingle(byteArray, pos + 12);
+                Array.Reverse(newArray, 0, 4);
+                Array.Reverse(newArray, 4, 4);
+                Array.Reverse(newArray, 8, 4);
+                Array.Reverse(newArray, 12, 4);
+
+                X = BitConverter.ToSingle(newArray, 0);
+                Y = BitConverter.ToSingle(newArray, 4);
+                Z = BitConverter.ToSingle(newArray, 8);
+                S = BitConverter.ToSingle(newArray, 12);
+            }
+            else
+            {
+                X = BitConverter.ToSingle(byteArray, pos);
+                Y = BitConverter.ToSingle(byteArray, pos + 4);
+                Z = BitConverter.ToSingle(byteArray, pos + 8);
+                S = BitConverter.ToSingle(byteArray, pos + 12);
+            }
 		}
 
         /// &lt;summary&gt;
@@ -616,7 +660,7 @@
         /// &lt;returns&gt;&lt;/returns&gt;
 		public override string ToString()
 		{
-			return X.ToString() + &quot; &quot; + Y.ToString() + &quot; &quot; + Z.ToString() + &quot; &quot; + S.ToString();
+			return &quot;&lt;&quot; + X.ToString() + &quot;, &quot; + Y.ToString() + &quot;, &quot; + Z.ToString() + &quot;, &quot; + S.ToString() + &quot;&gt;&quot;;
 		}
 
         /// &lt;summary&gt;
@@ -626,27 +670,28 @@
 	}
 
     /// &lt;summary&gt;
-    /// 
+    /// A quaternion, used for rotations
     /// &lt;/summary&gt;
-	public class LLQuaternion
+    [Serializable]
+	public struct LLQuaternion
 	{
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float X;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float Y;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float Z;
-        /// &lt;summary&gt;&lt;/summary&gt;
-		public float W;
+        /// &lt;summary&gt;X value&lt;/summary&gt;
+        [XmlAttribute(&quot;x&quot;), DefaultValue(0)] public float X;
+        /// &lt;summary&gt;Y value&lt;/summary&gt;
+        [XmlAttribute(&quot;y&quot;), DefaultValue(0)] public float Y;
+        /// &lt;summary&gt;Z value&lt;/summary&gt;
+        [XmlAttribute(&quot;z&quot;), DefaultValue(0)] public float Z;
+        /// &lt;summary&gt;W value&lt;/summary&gt;
+        [XmlAttribute(&quot;w&quot;), DefaultValue(0)] public float W;
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-		public LLQuaternion()
-		{
-			X = Y = Z = 0.0f;
-            W = 1.0f;
-		}
+		///// &lt;summary&gt;
+		///// Default constructor, initializes to no rotation (0,0,0,1)
+		///// &lt;/summary&gt;
+		//public LLQuaternion()
+		//{
+		//    X = Y = Z = 0.0f;
+		//    W = 1.0f;
+		//}
 
         /// &lt;summary&gt;
         /// Build a quaternion object from a byte array
@@ -662,30 +707,49 @@
             {
                 if (!BitConverter.IsLittleEndian)
                 {
-                    Array.Reverse(byteArray, pos, 4);
-                    Array.Reverse(byteArray, pos + 4, 4);
-                    Array.Reverse(byteArray, pos + 8, 4);
-                    Array.Reverse(byteArray, pos + 12, 4);
+                    byte[] newArray = new byte[16];
+                    Array.Copy(byteArray, pos, newArray, 0, 16);
+
+                    Array.Reverse(newArray, 0, 4);
+                    Array.Reverse(newArray, 4, 4);
+                    Array.Reverse(newArray, 8, 4);
+                    Array.Reverse(newArray, 12, 4);
+
+                    X = BitConverter.ToSingle(newArray, 0);
+                    Y = BitConverter.ToSingle(newArray, 4);
+                    Z = BitConverter.ToSingle(newArray, 8);
+                    W = BitConverter.ToSingle(newArray, 12);
                 }
-
-                X = BitConverter.ToSingle(byteArray, pos);
-                Y = BitConverter.ToSingle(byteArray, pos + 4);
-                Z = BitConverter.ToSingle(byteArray, pos + 8);
-                W = BitConverter.ToSingle(byteArray, pos + 12);
+                else
+                {
+                    X = BitConverter.ToSingle(byteArray, pos);
+                    Y = BitConverter.ToSingle(byteArray, pos + 4);
+                    Z = BitConverter.ToSingle(byteArray, pos + 8);
+                    W = BitConverter.ToSingle(byteArray, pos + 12);
+                }
             }
             else
             {
                 if (!BitConverter.IsLittleEndian)
                 {
-                    Array.Reverse(byteArray, pos, 4);
-                    Array.Reverse(byteArray, pos + 4, 4);
-                    Array.Reverse(byteArray, pos + 8, 4);
+                    byte[] newArray = new byte[12];
+                    Array.Copy(byteArray, pos, newArray, 0, 12);
+
+                    Array.Reverse(newArray, 0, 4);
+                    Array.Reverse(newArray, 4, 4);
+                    Array.Reverse(newArray, 8, 4);
+
+                    X = BitConverter.ToSingle(newArray, 0);
+                    Y = BitConverter.ToSingle(newArray, 4);
+                    Z = BitConverter.ToSingle(newArray, 8);
                 }
+                else
+                {
+                    X = BitConverter.ToSingle(byteArray, pos);
+                    Y = BitConverter.ToSingle(byteArray, pos + 4);
+                    Z = BitConverter.ToSingle(byteArray, pos + 8);
+                }
 
-                X = BitConverter.ToSingle(byteArray, pos);
-                Y = BitConverter.ToSingle(byteArray, pos + 4);
-                Z = BitConverter.ToSingle(byteArray, pos + 8);
-
                 float xyzsum = 1 - X * X - Y * Y - Z * Z;
                 W = (xyzsum &gt; 0) ? (float)Math.Sqrt(xyzsum) : 0;
             }
@@ -750,28 +814,26 @@
             }
             else
             {
-                throw new Exception(&quot;Quaternion &lt;&quot; + X + &quot;,&quot; + Y + &quot;,&quot; + Z + &quot;,&quot; + W + &quot;&gt; normalized to zero&quot;);
+                throw new Exception(&quot;Quaternion &quot; + this.ToString() + &quot; normalized to zero&quot;);
             }
 
 			return bytes;
 		}
 
         /// &lt;summary&gt;
-        /// Convert to a single xml node
+        /// 
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;name&quot;&gt;The desired name of the xml node&lt;/param&gt;
-        /// &lt;returns&gt;A line of xml data containing the values for this data type&lt;/returns&gt;
-        public string GetXml(string name)
-        {
-            return &quot;&lt;&quot; + name + &quot; x=\&quot;&quot; + X + &quot;\&quot; y=\&quot;&quot; + Y + &quot;\&quot; z=\&quot;&quot; + Z + &quot;\&quot; w=\&quot;&quot; + W + &quot;\&quot; /&gt;&quot;;
-        }
-
+        /// &lt;returns&gt;&lt;/returns&gt;
         public override int GetHashCode()
         {
-            float sum = X + Y + Z + W;
-            return sum.GetHashCode();
+            return (X.GetHashCode() ^ Y.GetHashCode() ^ Z.GetHashCode() ^ W.GetHashCode());
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;o&quot;&gt;&lt;/param&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public override bool Equals(object o)
         {
             if (!(o is LLQuaternion)) return false;
@@ -781,6 +843,12 @@
             return X == quaternion.X &amp;&amp; Y == quaternion.Y &amp;&amp; Z == quaternion.Z &amp;&amp; W == quaternion.W;
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public static bool operator ==(LLQuaternion lhs, LLQuaternion rhs)
         {
             // If both are null, or both are same instance, return true
@@ -799,11 +867,23 @@
             return lhs.X == rhs.X &amp;&amp; lhs.Y == rhs.Y &amp;&amp; lhs.Z == rhs.Z &amp;&amp; lhs.W == rhs.W;
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public static bool operator !=(LLQuaternion lhs, LLQuaternion rhs)
         {
             return !(lhs == rhs);
         }
 
+        /// &lt;summary&gt;
+        /// 
+        /// &lt;/summary&gt;
+        /// &lt;param name=&quot;lhs&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;rhs&quot;&gt;&lt;/param&gt;
+        /// &lt;returns&gt;&lt;/returns&gt;
         public static LLQuaternion operator *(LLQuaternion lhs, LLQuaternion rhs)
         {
             LLQuaternion ret = new LLQuaternion();
@@ -826,6 +906,6 @@
         /// &lt;summary&gt;
         /// An LLQuaternion with a value of 0,0,0,1
         /// &lt;/summary&gt;
-        public readonly static LLQuaternion Identity = new LLQuaternion();
+        public readonly static LLQuaternion Identity = new LLQuaternion(0, 0, 0, 1);
 	}
 }

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/Logger.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/Logger.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/Logger.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,46 +1,46 @@
 namespace Nwc.XmlRpc
 {
-  using System;
+    using System;
 
-  /// &lt;summary&gt;Define levels of logging.&lt;/summary&gt;&lt;remarks&gt; This duplicates
-  /// similar enumerations in System.Diagnostics.EventLogEntryType. The 
-  /// duplication was merited because .NET Compact Framework lacked the EventLogEntryType enum.&lt;/remarks&gt;
-  public enum LogLevel
-  {
-    /// &lt;summary&gt;Information level, log entry for informational reasons only.&lt;/summary&gt;
-    Information,
-    /// &lt;summary&gt;Warning level, indicates a possible problem.&lt;/summary&gt;
-    Warning,
-    /// &lt;summary&gt;Error level, implies a significant problem.&lt;/summary&gt;
-    Error
-  }
+    /// &lt;summary&gt;Define levels of logging.&lt;/summary&gt;&lt;remarks&gt; This duplicates
+    /// similar enumerations in System.Diagnostics.EventLogEntryType. The 
+    /// duplication was merited because .NET Compact Framework lacked the EventLogEntryType enum.&lt;/remarks&gt;
+    public enum LogLevel
+    {
+        /// &lt;summary&gt;Information level, log entry for informational reasons only.&lt;/summary&gt;
+        Information,
+        /// &lt;summary&gt;Warning level, indicates a possible problem.&lt;/summary&gt;
+        Warning,
+        /// &lt;summary&gt;Error level, implies a significant problem.&lt;/summary&gt;
+        Error
+    }
 
-  ///&lt;summary&gt;
-  ///Logging singleton with swappable output delegate.
-  ///&lt;/summary&gt;
-  ///&lt;remarks&gt;
-  ///This singleton provides a centralized log. The actual WriteEntry calls are passed
-  ///off to a delegate however. Having a delegate do the actual logginh allows you to
-  ///implement different logging mechanism and have them take effect throughout the system.
-  ///&lt;/remarks&gt;
-  public class Logger
-  {
-    ///&lt;summary&gt;Delegate definition for logging.&lt;/summary&gt;
-    ///&lt;param name=&quot;message&quot;&gt;The message &lt;c&gt;String&lt;/c&gt; to log.&lt;/param&gt;
-    ///&lt;param name=&quot;level&quot;&gt;The &lt;c&gt;LogLevel&lt;/c&gt; of your message.&lt;/param&gt;
-    public delegate void LoggerDelegate(String message, LogLevel level);
-    ///&lt;summary&gt;The LoggerDelegate that will recieve WriteEntry requests.&lt;/summary&gt;
-    static public LoggerDelegate Delegate = null;
-
     ///&lt;summary&gt;
-    ///Method logging events are sent to.
+    ///Logging singleton with swappable output delegate.
     ///&lt;/summary&gt;
-    ///&lt;param name=&quot;message&quot;&gt;The message &lt;c&gt;String&lt;/c&gt; to log.&lt;/param&gt;
-    ///&lt;param name=&quot;level&quot;&gt;The &lt;c&gt;LogLevel&lt;/c&gt; of your message.&lt;/param&gt;
-    static public void WriteEntry(String message, LogLevel level)
-      {
-	if (Delegate != null)
-	  Delegate(message, level);
-      }
-  }
+    ///&lt;remarks&gt;
+    ///This singleton provides a centralized log. The actual WriteEntry calls are passed
+    ///off to a delegate however. Having a delegate do the actual logginh allows you to
+    ///implement different logging mechanism and have them take effect throughout the system.
+    ///&lt;/remarks&gt;
+    public class Logger
+    {
+        ///&lt;summary&gt;Delegate definition for logging.&lt;/summary&gt;
+        ///&lt;param name=&quot;message&quot;&gt;The message &lt;c&gt;String&lt;/c&gt; to log.&lt;/param&gt;
+        ///&lt;param name=&quot;level&quot;&gt;The &lt;c&gt;LogLevel&lt;/c&gt; of your message.&lt;/param&gt;
+        public delegate void LoggerDelegate(String message, LogLevel level);
+        ///&lt;summary&gt;The LoggerDelegate that will recieve WriteEntry requests.&lt;/summary&gt;
+        static public LoggerDelegate Delegate = null;
+
+        ///&lt;summary&gt;
+        ///Method logging events are sent to.
+        ///&lt;/summary&gt;
+        ///&lt;param name=&quot;message&quot;&gt;The message &lt;c&gt;String&lt;/c&gt; to log.&lt;/param&gt;
+        ///&lt;param name=&quot;level&quot;&gt;The &lt;c&gt;LogLevel&lt;/c&gt; of your message.&lt;/param&gt;
+        static public void WriteEntry(String message, LogLevel level)
+        {
+            if (Delegate != null)
+                Delegate(message, level);
+        }
+    }
 }

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/SimpleHttpRequest.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/SimpleHttpRequest.cs)

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcBoxcarRequest.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcBoxcarRequest.cs)

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcClientProxy.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcClientProxy.cs)

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcDeserializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcDeserializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcDeserializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,7 +1,7 @@
 namespace Nwc.XmlRpc
 {
     using System;
-    using System.Collections.Generic;
+    using System.Collections;
     using System.IO;
     using System.Xml;
     using System.Globalization;
@@ -22,7 +22,7 @@
         private static DateTimeFormatInfo _dateFormat = new DateTimeFormatInfo();
 
         private Object _container;
-        private Stack&lt;Object&gt; _containerStack;
+        private Stack _containerStack;
 
         /// &lt;summary&gt;Protected reference to last text.&lt;/summary&gt;
         protected String _text;
@@ -31,6 +31,7 @@
         /// &lt;summary&gt;Protected reference to last name field.&lt;/summary&gt;
         protected String _name;
 
+
         /// &lt;summary&gt;Basic constructor.&lt;/summary&gt;
         public XmlRpcDeserializer()
         {
@@ -65,11 +66,11 @@
                             break;
                         case STRUCT:
                             PushContext();
-                            _container = new Dictionary&lt;string, object&gt;();
+                            _container = new Hashtable();
                             break;
                         case ARRAY:
                             PushContext();
-                            _container = new List&lt;object&gt;();
+                            _container = new ArrayList();
                             break;
                     }
                     break;
@@ -92,7 +93,7 @@
                             _value = _text;
                             break;
                         case DOUBLE:
-                            _value = Double.Parse(_text, CultureInfo.InvariantCulture);
+                            _value = Double.Parse(_text);
                             break;
                         case INT:
                         case ALT_INT:
@@ -112,12 +113,12 @@
                             if (_value == null)
                                 _value = _text; // some kits don't use &lt;string&gt; tag, they just do &lt;value&gt;
 
-                            if ((_container != null) &amp;&amp; (_container is List&lt;object&gt;)) // in an array?  If so add value to it.
-                                ((List&lt;object&gt;)_container).Add(_value);
+                            if ((_container != null) &amp;&amp; (_container is IList)) // in an array?  If so add value to it.
+                                ((IList)_container).Add(_value);
                             break;
                         case MEMBER:
-                            if ((_container != null) &amp;&amp; (_container is Dictionary&lt;string, object&gt;)) // in an struct?  If so add value to it.
-                                ((Dictionary&lt;string, object&gt;)_container).Add(_name, _value);
+                            if ((_container != null) &amp;&amp; (_container is IDictionary)) // in an struct?  If so add value to it.
+                                ((IDictionary)_container).Add(_name, _value);
                             break;
                         case ARRAY:
                         case STRUCT:
@@ -172,8 +173,22 @@
             _value = null;
             _name = null;
             _container = null;
-            _containerStack = new Stack&lt;object&gt;();
+            _containerStack = new Stack();
         }
+
+#if __MONO__
+    private DateTime DateParse(String str)
+      {
+	int year = Int32.Parse(str.Substring(0,4));
+	int month = Int32.Parse(str.Substring(4,2));
+	int day = Int32.Parse(str.Substring(6,2));
+	int hour = Int32.Parse(str.Substring(9,2));
+	int min = Int32.Parse(str.Substring(12,2));
+	int sec = Int32.Parse(str.Substring(15,2));
+	return new DateTime(year,month,day,hour,min,sec);
+      }
+#endif
+
     }
 }
 

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcErrorCodes.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcErrorCodes.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcErrorCodes.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,15 +1,53 @@
 namespace Nwc.XmlRpc
 {
-  using System;
+    using System;
 
-  /// &lt;summary&gt;Standard XML-RPC error codes.&lt;/summary&gt;
-  public class XmlRpcErrorCodes
-  {
-    // -32400 ---&gt; system error
-    
-    /// &lt;summary&gt;&lt;/summary&gt;
-    public const int TRANSPORT_ERROR = -32300;
-    /// &lt;summary&gt;&lt;/summary&gt;
-    public const String TRANSPORT_ERROR_MSG = &quot;Transport Layer Error&quot;;
-  }
+    /// &lt;summary&gt;Standard XML-RPC error codes.&lt;/summary&gt;
+    public class XmlRpcErrorCodes
+    {
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int PARSE_ERROR_MALFORMED = -32700;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String PARSE_ERROR_MALFORMED_MSG = &quot;Parse Error, not well formed&quot;;
+
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int PARSE_ERROR_ENCODING = -32701;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String PARSE_ERROR_ENCODING_MSG = &quot;Parse Error, unsupported encoding&quot;;
+
+        /**
+           -32702 ---&gt; parse error. invalid character for encoding
+           -32600 ---&gt; server error. invalid xml-rpc. not conforming to spec.
+        **/
+
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int SERVER_ERROR_METHOD = -32601;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String SERVER_ERROR_METHOD_MSG = &quot;Server Error, requested method not found&quot;;
+
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int SERVER_ERROR_PARAMS = -32602;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String SERVER_ERROR_PARAMS_MSG = &quot;Server Error, invalid method parameters&quot;;
+
+        /**
+           -32603 ---&gt; server error. internal xml-rpc error
+        **/
+
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int APPLICATION_ERROR = -32500;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String APPLICATION_ERROR_MSG = &quot;Application Error&quot;;
+
+        /**
+           -32400 ---&gt; system error
+        **/
+
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const int TRANSPORT_ERROR = -32300;
+        /// &lt;summary&gt;&lt;/summary&gt;
+        public const String TRANSPORT_ERROR_MSG = &quot;Transport Layer Error&quot;;
+    }
 }
+
+

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcException.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcException.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcException.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,38 +1,39 @@
 namespace Nwc.XmlRpc
 {
-  using System;
+    using System;
 
-  /// &lt;summary&gt;An XML-RPC Exception.&lt;/summary&gt;
-  /// &lt;remarks&gt;Maps a C# exception to an XML-RPC fault. Normal exceptions
-  /// include a message so this adds the code needed by XML-RPC.&lt;/remarks&gt;
-  public class XmlRpcException : Exception
+    /// &lt;summary&gt;An XML-RPC Exception.&lt;/summary&gt;
+    /// &lt;remarks&gt;Maps a C# exception to an XML-RPC fault. Normal exceptions
+    /// include a message so this adds the code needed by XML-RPC.&lt;/remarks&gt;
+    public class XmlRpcException : Exception
     {
-      private int _code;
-  
-      /// &lt;summary&gt;Instantiate an &lt;c&gt;XmlRpcException&lt;/c&gt; with a code and message.&lt;/summary&gt;
-      /// &lt;param name=&quot;code&quot;&gt;&lt;c&gt;Int&lt;/c&gt; faultCode associated with this exception.&lt;/param&gt;
-      /// &lt;param name=&quot;message&quot;&gt;&lt;c&gt;String&lt;/c&gt; faultMessage associated with this exception.&lt;/param&gt;
-      public XmlRpcException(int code, String message) : base(message)
-	{
-	  _code = code;
-	}
+        private int _code;
 
-      /// &lt;summary&gt;The value of the faults message, i.e. the faultString.&lt;/summary&gt;
-      public String FaultString
-	{
-	  get { return Message; }
-	}
+        /// &lt;summary&gt;Instantiate an &lt;c&gt;XmlRpcException&lt;/c&gt; with a code and message.&lt;/summary&gt;
+        /// &lt;param name=&quot;code&quot;&gt;&lt;c&gt;Int&lt;/c&gt; faultCode associated with this exception.&lt;/param&gt;
+        /// &lt;param name=&quot;message&quot;&gt;&lt;c&gt;String&lt;/c&gt; faultMessage associated with this exception.&lt;/param&gt;
+        public XmlRpcException(int code, String message)
+            : base(message)
+        {
+            _code = code;
+        }
 
-      /// &lt;summary&gt;The value of the faults code, i.e. the faultCode.&lt;/summary&gt;
-      public int FaultCode
-	{
-	  get { return _code; }
-	}
+        /// &lt;summary&gt;The value of the faults message, i.e. the faultString.&lt;/summary&gt;
+        public String FaultString
+        {
+            get { return Message; }
+        }
 
-      /// &lt;summary&gt;Format the message to include the code.&lt;/summary&gt;
-      override public String ToString()
-	{
-	  return &quot;Code: &quot; + FaultCode + &quot; Message: &quot; + base.ToString();
-	}
+        /// &lt;summary&gt;The value of the faults code, i.e. the faultCode.&lt;/summary&gt;
+        public int FaultCode
+        {
+            get { return _code; }
+        }
+
+        /// &lt;summary&gt;Format the message to include the code.&lt;/summary&gt;
+        override public String ToString()
+        {
+            return &quot;Code: &quot; + FaultCode + &quot; Message: &quot; + base.ToString();
+        }
     }
 }

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcExposedAttribute.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcExposedAttribute.cs)

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequest.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequest.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequest.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,9 +1,7 @@
-#pragma warning disable 0618
-
 namespace Nwc.XmlRpc
 {
     using System;
-    using System.Collections.Generic;
+    using System.Collections;
     using System.IO;
     using System.Xml;
     using System.Net;
@@ -36,17 +34,27 @@
         private XmlRpcResponseDeserializer _deserializer = new XmlRpcResponseDeserializer();
 
         /// &lt;summary&gt;&lt;c&gt;ArrayList&lt;/c&gt; containing the parameters.&lt;/summary&gt;
-        protected List&lt;object&gt; _params = null;
+        protected IList _params = null;
 
         /// &lt;summary&gt;Instantiate an &lt;c&gt;XmlRpcRequest&lt;/c&gt;&lt;/summary&gt;
         public XmlRpcRequest()
         {
-            _params = new List&lt;object&gt;();
+            _params = new ArrayList();
         }
 
-        /// &lt;summary&gt;&lt;c&gt;ArrayList&lt;/c&gt; containing the parameters for the request.&lt;/summary&gt;
-        public virtual List&lt;object&gt; Params
+        /// &lt;summary&gt;Instantiate an &lt;c&gt;XmlRpcRequest&lt;/c&gt; for a specified method and parameters.&lt;/summary&gt;
+        /// &lt;param name=&quot;methodName&quot;&gt;&lt;c&gt;String&lt;/c&gt; designating the &lt;i&gt;object.method&lt;/i&gt; on the server the request
+        /// should be directed to.&lt;/param&gt;
+        /// &lt;param name=&quot;parameters&quot;&gt;&lt;c&gt;ArrayList&lt;/c&gt; of XML-RPC type parameters to invoke the request with.&lt;/param&gt;
+        public XmlRpcRequest(String methodName, IList parameters)
         {
+            MethodName = methodName;
+            _params = parameters;
+        }
+
+        /// &lt;summary&gt;&lt;c&gt;ArrayList&lt;/c&gt; conntaining the parameters for the request.&lt;/summary&gt;
+        public virtual IList Params
+        {
             get { return _params; }
         }
 
@@ -57,16 +65,56 @@
             set { _methodName = value; }
         }
 
+        /// &lt;summary&gt;&lt;c&gt;String&lt;/c&gt; object name portion of the method name.&lt;/summary&gt;
+        public String MethodNameObject
+        {
+            get
+            {
+                int index = MethodName.IndexOf(&quot;.&quot;);
+
+                if (index == -1)
+                    return MethodName;
+
+                return MethodName.Substring(0, index);
+            }
+        }
+
+        /// &lt;summary&gt;&lt;c&gt;String&lt;/c&gt; method name portion of the object.method name.&lt;/summary&gt;
+        public String MethodNameMethod
+        {
+            get
+            {
+                int index = MethodName.IndexOf(&quot;.&quot;);
+
+                if (index == -1)
+                    return MethodName;
+
+                return MethodName.Substring(index + 1, MethodName.Length - index - 1);
+            }
+        }
+
+        /// &lt;summary&gt;Invoke this request on the server.&lt;/summary&gt;
+        /// &lt;param name=&quot;url&quot;&gt;&lt;c&gt;String&lt;/c&gt; The url of the XML-RPC server.&lt;/param&gt;
+        /// &lt;returns&gt;&lt;c&gt;Object&lt;/c&gt; The value returned from the method invocation on the server.&lt;/returns&gt;
+        /// &lt;exception cref=&quot;XmlRpcException&quot;&gt;If an exception generated on the server side.&lt;/exception&gt;
+        public Object Invoke(String url)
+        {
+            XmlRpcResponse res = Send(url, 10000);
+
+            if (res.IsFault)
+                throw new XmlRpcException(res.FaultCode, res.FaultString);
+
+            return res.Value;
+        }
+
         /// &lt;summary&gt;Send the request to the server.&lt;/summary&gt;
         /// &lt;param name=&quot;url&quot;&gt;&lt;c&gt;String&lt;/c&gt; The url of the XML-RPC server.&lt;/param&gt;
+        /// &lt;param name=&quot;timeout&quot;&gt;Milliseconds before the connection times out.&lt;/param&gt;
         /// &lt;returns&gt;&lt;c&gt;XmlRpcResponse&lt;/c&gt; The response generated.&lt;/returns&gt;
-        public XmlRpcResponse Send(String url)
+        public XmlRpcResponse Send(String url, int timeout)
         {
             // Override SSL authentication mechanisms
             ServicePointManager.CertificatePolicy = new AcceptAllCertificatePolicy();
-            //ServicePointManager.ServerCertificateValidationCallback += 
-            //    delegate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
-            //    { return true; };
 
             HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
             if (request == null)
@@ -75,8 +123,7 @@
             request.Method = &quot;POST&quot;;
             request.ContentType = &quot;text/xml&quot;;
             request.AllowWriteStreamBuffering = true;
-            request.KeepAlive = false;
-            request.Timeout = 15000; // miliseconds adjust as you see fit
+            request.Timeout = timeout;
 
             Stream stream = request.GetRequestStream();
             XmlTextWriter xml = new XmlTextWriter(stream, _encoding);
@@ -93,15 +140,6 @@
             return resp;
         }
 
-        private bool CheckValidationResult(Object sender,
-            System.Security.Cryptography.X509Certificates.X509Certificate certificate, 
-            System.Security.Cryptography.X509Certificates.X509Chain chain, 
-            System.Net.Security.SslPolicyErrors sslPolicyErrors)
-        {
-            // Always accept
-            return true;
-        }
-
         /// &lt;summary&gt;Produce &lt;c&gt;String&lt;/c&gt; representation of the object.&lt;/summary&gt;
         /// &lt;returns&gt;&lt;c&gt;String&lt;/c&gt; representation of the object.&lt;/returns&gt;
         override public String ToString()

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestDeserializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestDeserializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestDeserializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,64 +1,64 @@
 namespace Nwc.XmlRpc
 {
-  using System;
-  using System.Collections.Generic;
-  using System.Diagnostics;
-  using System.IO;
-  using System.Xml;
+    using System;
+    using System.Collections;
+    using System.Diagnostics;
+    using System.IO;
+    using System.Xml;
 
-  /// &lt;summary&gt;Class to deserialize XML data representing a request.&lt;/summary&gt;
-  public class XmlRpcRequestDeserializer : XmlRpcDeserializer
-  {
-    static private XmlRpcRequestDeserializer _singleton;
-    /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
-    [Obsolete(&quot;This object is now thread safe, just use an instance.&quot;,false)]
-    static public XmlRpcRequestDeserializer Singleton
-      {
-	get
-	  {
-	    if (_singleton == null)
-	      _singleton = new XmlRpcRequestDeserializer();
+    /// &lt;summary&gt;Class to deserialize XML data representing a request.&lt;/summary&gt;
+    public class XmlRpcRequestDeserializer : XmlRpcDeserializer
+    {
+        static private XmlRpcRequestDeserializer _singleton;
+        /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
+        [Obsolete(&quot;This object is now thread safe, just use an instance.&quot;, false)]
+        static public XmlRpcRequestDeserializer Singleton
+        {
+            get
+            {
+                if (_singleton == null)
+                    _singleton = new XmlRpcRequestDeserializer();
 
-	    return _singleton;
-	  }
-      }
+                return _singleton;
+            }
+        }
 
-    /// &lt;summary&gt;Static method that parses XML data into a request using the Singleton.&lt;/summary&gt;
-    /// &lt;param name=&quot;xmlData&quot;&gt;&lt;c&gt;StreamReader&lt;/c&gt; containing an XML-RPC request.&lt;/param&gt;
-    /// &lt;returns&gt;&lt;c&gt;XmlRpcRequest&lt;/c&gt; object resulting from the parse.&lt;/returns&gt;
-    override public Object Deserialize(TextReader xmlData)
-      {
-	XmlTextReader reader = new XmlTextReader(xmlData);
-	XmlRpcRequest request = new XmlRpcRequest();
-	bool done = false;
+        /// &lt;summary&gt;Static method that parses XML data into a request using the Singleton.&lt;/summary&gt;
+        /// &lt;param name=&quot;xmlData&quot;&gt;&lt;c&gt;StreamReader&lt;/c&gt; containing an XML-RPC request.&lt;/param&gt;
+        /// &lt;returns&gt;&lt;c&gt;XmlRpcRequest&lt;/c&gt; object resulting from the parse.&lt;/returns&gt;
+        override public Object Deserialize(TextReader xmlData)
+        {
+            XmlTextReader reader = new XmlTextReader(xmlData);
+            XmlRpcRequest request = new XmlRpcRequest();
+            bool done = false;
 
-	lock(this)
-	  {
-	    Reset();
-	    while (!done &amp;&amp; reader.Read())
-	      {
-		DeserializeNode(reader); // Parent parse...
-		switch (reader.NodeType)
-		  {
-		  case XmlNodeType.EndElement:
-		    switch (reader.Name)
-		      {
-		      case METHOD_NAME:
-			request.MethodName = _text;
-			break;
-		      case METHOD_CALL:
-			done = true;
-			break;
-		      case PARAM:
-			request.Params.Add(_value);
-			_text = null;
-			break;
-		      }
-		    break;
-		  }	
-	      }
-	  }
-	return request;
-      }
-  }
+            lock (this)
+            {
+                Reset();
+                while (!done &amp;&amp; reader.Read())
+                {
+                    DeserializeNode(reader); // Parent parse...
+                    switch (reader.NodeType)
+                    {
+                        case XmlNodeType.EndElement:
+                            switch (reader.Name)
+                            {
+                                case METHOD_NAME:
+                                    request.MethodName = _text;
+                                    break;
+                                case METHOD_CALL:
+                                    done = true;
+                                    break;
+                                case PARAM:
+                                    request.Params.Add(_value);
+                                    _text = null;
+                                    break;
+                            }
+                            break;
+                    }
+                }
+            }
+            return request;
+        }
+    }
 }

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestSerializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestSerializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcRequestSerializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,38 +1,51 @@
 namespace Nwc.XmlRpc
 {
-  using System;
-  using System.Collections.Generic;
-  using System.Xml;
-  using System.IO;
+    using System;
+    using System.Collections;
+    using System.Xml;
+    using System.IO;
 
-  /// &lt;summary&gt;Class responsible for serializing an XML-RPC request.&lt;/summary&gt;
-  /// &lt;remarks&gt;This class handles the request envelope, depending on &lt;c&gt;XmlRpcSerializer&lt;/c&gt;
-  /// to serialize the payload.&lt;/remarks&gt;
-  /// &lt;seealso cref=&quot;XmlRpcSerializer&quot;/&gt;
-  public class XmlRpcRequestSerializer : XmlRpcSerializer
-  {
-    /// &lt;summary&gt;Serialize the &lt;c&gt;XmlRpcRequest&lt;/c&gt; to the output stream.&lt;/summary&gt;
-    /// &lt;param name=&quot;output&quot;&gt;An &lt;c&gt;XmlTextWriter&lt;/c&gt; stream to write data to.&lt;/param&gt;
-    /// &lt;param name=&quot;obj&quot;&gt;An &lt;c&gt;XmlRpcRequest&lt;/c&gt; to serialize.&lt;/param&gt;
-    /// &lt;seealso cref=&quot;XmlRpcRequest&quot;/&gt;
-    override public void Serialize(XmlTextWriter output, Object obj)
-      {
-	XmlRpcRequest request = (XmlRpcRequest)obj;
-	output.WriteStartDocument();
-	output.WriteStartElement(METHOD_CALL);
-	output.WriteElementString(METHOD_NAME,request.MethodName);
-	output.WriteStartElement(PARAMS);
-	foreach (Object param in request.Params)
-	  {
-	    output.WriteStartElement(PARAM);
-	    output.WriteStartElement(VALUE);
-	    SerializeObject(output, param);
-	    output.WriteEndElement();
-	    output.WriteEndElement();
-	  }
+    /// &lt;summary&gt;Class responsible for serializing an XML-RPC request.&lt;/summary&gt;
+    /// &lt;remarks&gt;This class handles the request envelope, depending on &lt;c&gt;XmlRpcSerializer&lt;/c&gt;
+    /// to serialize the payload.&lt;/remarks&gt;
+    /// &lt;seealso cref=&quot;XmlRpcSerializer&quot;/&gt;
+    public class XmlRpcRequestSerializer : XmlRpcSerializer
+    {
+        static private XmlRpcRequestSerializer _singleton;
+        /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
+        static public XmlRpcRequestSerializer Singleton
+        {
+            get
+            {
+                if (_singleton == null)
+                    _singleton = new XmlRpcRequestSerializer();
 
-	output.WriteEndElement();
-	output.WriteEndElement();
-      }
-  }
+                return _singleton;
+            }
+        }
+
+        /// &lt;summary&gt;Serialize the &lt;c&gt;XmlRpcRequest&lt;/c&gt; to the output stream.&lt;/summary&gt;
+        /// &lt;param name=&quot;output&quot;&gt;An &lt;c&gt;XmlTextWriter&lt;/c&gt; stream to write data to.&lt;/param&gt;
+        /// &lt;param name=&quot;obj&quot;&gt;An &lt;c&gt;XmlRpcRequest&lt;/c&gt; to serialize.&lt;/param&gt;
+        /// &lt;seealso cref=&quot;XmlRpcRequest&quot;/&gt;
+        override public void Serialize(XmlTextWriter output, Object obj)
+        {
+            XmlRpcRequest request = (XmlRpcRequest)obj;
+            output.WriteStartDocument();
+            output.WriteStartElement(METHOD_CALL);
+            output.WriteElementString(METHOD_NAME, request.MethodName);
+            output.WriteStartElement(PARAMS);
+            foreach (Object param in request.Params)
+            {
+                output.WriteStartElement(PARAM);
+                output.WriteStartElement(VALUE);
+                SerializeObject(output, param);
+                output.WriteEndElement();
+                output.WriteEndElement();
+            }
+
+            output.WriteEndElement();
+            output.WriteEndElement();
+        }
+    }
 }

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponder.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcResponder.cs)

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponse.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponse.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponse.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,7 +1,7 @@
 namespace Nwc.XmlRpc
 {
     using System;
-    using System.Collections.Generic;
+    using System.Collections;
     using System.IO;
     using System.Xml;
 
@@ -19,6 +19,15 @@
             IsFault = false;
         }
 
+        /// &lt;summary&gt;Constructor for a fault.&lt;/summary&gt;
+        /// &lt;param name=&quot;code&quot;&gt;&lt;c&gt;int&lt;/c&gt; the numeric faultCode value.&lt;/param&gt;
+        /// &lt;param name=&quot;message&quot;&gt;&lt;c&gt;String&lt;/c&gt; the faultString value.&lt;/param&gt;
+        public XmlRpcResponse(int code, String message)
+            : this()
+        {
+            SetFault(code, message);
+        }
+
         /// &lt;summary&gt;The data value of the response, may be fault data.&lt;/summary&gt;
         public Object Value
         {
@@ -38,7 +47,7 @@
                 if (!IsFault)
                     return 0;
                 else
-                    return (int)((Dictionary&lt;string, object&gt;)_value)[XmlRpcXmlTokens.FAULT_CODE];
+                    return (int)((Hashtable)_value)[XmlRpcXmlTokens.FAULT_CODE];
             }
         }
 
@@ -50,7 +59,7 @@
                 if (!IsFault)
                     return &quot;&quot;;
                 else
-                    return (String)((Dictionary&lt;string, object&gt;)_value)[XmlRpcXmlTokens.FAULT_STRING];
+                    return (String)((Hashtable)_value)[XmlRpcXmlTokens.FAULT_STRING];
             }
         }
 
@@ -59,7 +68,7 @@
         /// &lt;param name=&quot;message&quot;&gt;&lt;c&gt;String&lt;/c&gt; the faultString value.&lt;/param&gt;
         public void SetFault(int code, String message)
         {
-            Dictionary&lt;string, object&gt; fault = new Dictionary&lt;string,object&gt;();
+            Hashtable fault = new Hashtable();
             fault.Add(&quot;faultCode&quot;, code);
             fault.Add(&quot;faultString&quot;, message);
             Value = fault;

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseDeserializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseDeserializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseDeserializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,51 +1,65 @@
 namespace Nwc.XmlRpc
 {
-  using System;
-  using System.Collections.Generic;
-  using System.IO;
-  using System.Xml;
+    using System;
+    using System.Collections;
+    using System.IO;
+    using System.Xml;
 
-  /// &lt;summary&gt;Class to deserialize XML data representing a response.&lt;/summary&gt;
-  public class XmlRpcResponseDeserializer : XmlRpcDeserializer
-  {
-    /// &lt;summary&gt;Static method that parses XML data into a response using the Singleton.&lt;/summary&gt;
-    /// &lt;param name=&quot;xmlData&quot;&gt;&lt;c&gt;StreamReader&lt;/c&gt; containing an XML-RPC response.&lt;/param&gt;
-    /// &lt;returns&gt;&lt;c&gt;XmlRpcResponse&lt;/c&gt; object resulting from the parse.&lt;/returns&gt;
-    override public Object Deserialize(TextReader xmlData)
-      {
-	XmlTextReader reader = new XmlTextReader(xmlData);
-	XmlRpcResponse response = new XmlRpcResponse();
-	bool done = false;
-	
-	lock(this)
-	  {
-	    Reset();
-	    
-	    while (!done &amp;&amp; reader.Read())
-	      {
-		DeserializeNode(reader); // Parent parse...
-		switch (reader.NodeType)
-		  {
-		  case XmlNodeType.EndElement:
-		    switch (reader.Name)
-		      {
-		      case FAULT:
-			response.Value = _value;
-			response.IsFault = true;
-			break;
-		      case PARAM:
-			response.Value = _value;
-			_value = null;
-			_text = null;
-			break;
-		      }
-		    break;
-		  default:
-		    break;
-		  }	
-	      }
-	  }
-	return response;
-      }
-  }
+    /// &lt;summary&gt;Class to deserialize XML data representing a response.&lt;/summary&gt;
+    public class XmlRpcResponseDeserializer : XmlRpcDeserializer
+    {
+        static private XmlRpcResponseDeserializer _singleton;
+        /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
+        [Obsolete(&quot;This object is now thread safe, just use an instance.&quot;, false)]
+        static public XmlRpcResponseDeserializer Singleton
+        {
+            get
+            {
+                if (_singleton == null)
+                    _singleton = new XmlRpcResponseDeserializer();
+
+                return _singleton;
+            }
+        }
+
+        /// &lt;summary&gt;Static method that parses XML data into a response using the Singleton.&lt;/summary&gt;
+        /// &lt;param name=&quot;xmlData&quot;&gt;&lt;c&gt;StreamReader&lt;/c&gt; containing an XML-RPC response.&lt;/param&gt;
+        /// &lt;returns&gt;&lt;c&gt;XmlRpcResponse&lt;/c&gt; object resulting from the parse.&lt;/returns&gt;
+        override public Object Deserialize(TextReader xmlData)
+        {
+            XmlTextReader reader = new XmlTextReader(xmlData);
+            XmlRpcResponse response = new XmlRpcResponse();
+            bool done = false;
+
+            lock (this)
+            {
+                Reset();
+
+                while (!done &amp;&amp; reader.Read())
+                {
+                    DeserializeNode(reader); // Parent parse...
+                    switch (reader.NodeType)
+                    {
+                        case XmlNodeType.EndElement:
+                            switch (reader.Name)
+                            {
+                                case FAULT:
+                                    response.Value = _value;
+                                    response.IsFault = true;
+                                    break;
+                                case PARAM:
+                                    response.Value = _value;
+                                    _value = null;
+                                    _text = null;
+                                    break;
+                            }
+                            break;
+                        default:
+                            break;
+                    }
+                }
+            }
+            return response;
+        }
+    }
 }

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseSerializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseSerializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcResponseSerializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,57 +1,57 @@
 namespace Nwc.XmlRpc
 {
-  using System;
-  using System.Collections.Generic;
-  using System.Xml;
+    using System;
+    using System.Collections;
+    using System.Xml;
 
-  /// &lt;summary&gt;Class responsible for serializing an XML-RPC response.&lt;/summary&gt;
-  /// &lt;remarks&gt;This class handles the response envelope, depending on XmlRpcSerializer
-  /// to serialize the payload.&lt;/remarks&gt;
-  /// &lt;seealso cref=&quot;XmlRpcSerializer&quot;/&gt;
-  public class XmlRpcResponseSerializer : XmlRpcSerializer
-  {
-    static private XmlRpcResponseSerializer _singleton;
-    /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
-    static public XmlRpcResponseSerializer Singleton
-      {
-	get
-	  {
-	    if (_singleton == null)
-	      _singleton = new XmlRpcResponseSerializer();
+    /// &lt;summary&gt;Class responsible for serializing an XML-RPC response.&lt;/summary&gt;
+    /// &lt;remarks&gt;This class handles the response envelope, depending on XmlRpcSerializer
+    /// to serialize the payload.&lt;/remarks&gt;
+    /// &lt;seealso cref=&quot;XmlRpcSerializer&quot;/&gt;
+    public class XmlRpcResponseSerializer : XmlRpcSerializer
+    {
+        static private XmlRpcResponseSerializer _singleton;
+        /// &lt;summary&gt;A static singleton instance of this deserializer.&lt;/summary&gt;
+        static public XmlRpcResponseSerializer Singleton
+        {
+            get
+            {
+                if (_singleton == null)
+                    _singleton = new XmlRpcResponseSerializer();
 
-	    return _singleton;
-	  }
-      }
+                return _singleton;
+            }
+        }
 
-    /// &lt;summary&gt;Serialize the &lt;c&gt;XmlRpcResponse&lt;/c&gt; to the output stream.&lt;/summary&gt;
-    /// &lt;param name=&quot;output&quot;&gt;An &lt;c&gt;XmlTextWriter&lt;/c&gt; stream to write data to.&lt;/param&gt;
-    /// &lt;param name=&quot;obj&quot;&gt;An &lt;c&gt;Object&lt;/c&gt; to serialize.&lt;/param&gt;
-    /// &lt;seealso cref=&quot;XmlRpcResponse&quot;/&gt;
-    override public void Serialize(XmlTextWriter output, Object obj)
-      {
-	XmlRpcResponse response = (XmlRpcResponse) obj;
+        /// &lt;summary&gt;Serialize the &lt;c&gt;XmlRpcResponse&lt;/c&gt; to the output stream.&lt;/summary&gt;
+        /// &lt;param name=&quot;output&quot;&gt;An &lt;c&gt;XmlTextWriter&lt;/c&gt; stream to write data to.&lt;/param&gt;
+        /// &lt;param name=&quot;obj&quot;&gt;An &lt;c&gt;Object&lt;/c&gt; to serialize.&lt;/param&gt;
+        /// &lt;seealso cref=&quot;XmlRpcResponse&quot;/&gt;
+        override public void Serialize(XmlTextWriter output, Object obj)
+        {
+            XmlRpcResponse response = (XmlRpcResponse)obj;
 
-	output.WriteStartDocument();
-	output.WriteStartElement(METHOD_RESPONSE);
+            output.WriteStartDocument();
+            output.WriteStartElement(METHOD_RESPONSE);
 
-	if (response.IsFault)
-	  output.WriteStartElement(FAULT);
-	else
-	  {
-	    output.WriteStartElement(PARAMS);
-	    output.WriteStartElement(PARAM);
-	  }
+            if (response.IsFault)
+                output.WriteStartElement(FAULT);
+            else
+            {
+                output.WriteStartElement(PARAMS);
+                output.WriteStartElement(PARAM);
+            }
 
-	output.WriteStartElement(VALUE);
+            output.WriteStartElement(VALUE);
 
-	SerializeObject(output,response.Value);
+            SerializeObject(output, response.Value);
 
-	output.WriteEndElement();
+            output.WriteEndElement();
 
-	output.WriteEndElement();
-	if (!response.IsFault)
-	  output.WriteEndElement();
-	output.WriteEndElement();
-      }
-  }
+            output.WriteEndElement();
+            if (!response.IsFault)
+                output.WriteEndElement();
+            output.WriteEndElement();
+        }
+    }
 }

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSerializer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSerializer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSerializer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,7 +1,7 @@
 namespace Nwc.XmlRpc
 {
     using System;
-    using System.Collections.Generic;
+    using System.Collections;
     using System.IO;
     using System.Xml;
 
@@ -72,13 +72,13 @@
             {
                 output.WriteElementString(BOOLEAN, ((((Boolean)obj) == true) ? &quot;1&quot; : &quot;0&quot;));
             }
-            else if (obj is List&lt;object&gt;)
+            else if (obj is IList)
             {
                 output.WriteStartElement(ARRAY);
                 output.WriteStartElement(DATA);
-                if (((List&lt;object&gt;)obj).Count &gt; 0)
+                if (((ArrayList)obj).Count &gt; 0)
                 {
-                    foreach (Object member in ((List&lt;object&gt;)obj))
+                    foreach (Object member in ((IList)obj))
                     {
                         output.WriteStartElement(VALUE);
                         SerializeObject(output, member);
@@ -88,9 +88,9 @@
                 output.WriteEndElement();
                 output.WriteEndElement();
             }
-            else if (obj is Dictionary&lt;string, object&gt;)
+            else if (obj is IDictionary)
             {
-                Dictionary&lt;string, object&gt; h = (Dictionary&lt;string, object&gt;)obj;
+                IDictionary h = (IDictionary)obj;
                 output.WriteStartElement(STRUCT);
                 foreach (String key in h.Keys)
                 {

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcServer.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcServer.cs)

Copied: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcSystemObject.cs (from rev 775, trunk/libsecondlife-cs/XmlRpcCS/XmlRpcSystemObject.cs)

Modified: branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcXmlTokens.cs
===================================================================
--- branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcXmlTokens.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/XmlRpcCS/XmlRpcXmlTokens.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,76 +1,76 @@
 namespace Nwc.XmlRpc
 {
-  using System;
+    using System;
 
-  /// &lt;summary&gt;Class collecting &lt;c&gt;String&lt;/c&gt; tokens that are part of XML-RPC files.&lt;/summary&gt;
-  public class XmlRpcXmlTokens
-  {
-    /// &lt;summary&gt;C# formatting string to describe an ISO 8601 date.&lt;/summary&gt;
-    public const String ISO_DATETIME = &quot;yyyyMMdd\\THH\\:mm\\:ss&quot;;
-    /// &lt;summary&gt;Base64 field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;base64&gt; tag.&lt;/remarks&gt;
-    public const String BASE64 = &quot;base64&quot;;
-    /// &lt;summary&gt;String field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;string&gt; tag.&lt;/remarks&gt;
-    public const String STRING = &quot;string&quot;;
-    /// &lt;summary&gt;Integer field integer.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;i4&gt; tag.&lt;/remarks&gt;
-    public const String INT = &quot;i4&quot;;
-    /// &lt;summary&gt;Alternate integer field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;int&gt; tag.&lt;/remarks&gt;
-    public const String ALT_INT = &quot;int&quot;;    
-    /// &lt;summary&gt;Date field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;dateTime.iso8601&gt; tag.&lt;/remarks&gt;
-    public const String DATETIME = &quot;dateTime.iso8601&quot;;
-    /// &lt;summary&gt;Boolean field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;boolean&gt; tag.&lt;/remarks&gt;
-    public const String BOOLEAN = &quot;boolean&quot;;
-    /// &lt;summary&gt;Value token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;value&gt; tag.&lt;/remarks&gt;
-    public const String VALUE = &quot;value&quot;;
-    /// &lt;summary&gt;Name token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;name&gt; tag.&lt;/remarks&gt;
-    public const String NAME = &quot;name&quot;;
-    /// &lt;summary&gt;Array field indicator..&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;array&gt; tag.&lt;/remarks&gt;
-    public const String ARRAY = &quot;array&quot;;
-    /// &lt;summary&gt;Data token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;data&gt; tag.&lt;/remarks&gt;
-    public const String DATA = &quot;data&quot;;
-    /// &lt;summary&gt;Member token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;member&gt; tag.&lt;/remarks&gt;
-    public const String MEMBER = &quot;member&quot;;
-    /// &lt;summary&gt;Stuct field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;struct&gt; tag.&lt;/remarks&gt;
-    public const String STRUCT = &quot;struct&quot;;
-    /// &lt;summary&gt;Double field indicator.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;double&gt; tag.&lt;/remarks&gt;
-    public const String DOUBLE = &quot;double&quot;;
-    /// &lt;summary&gt;Param token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;param&gt; tag.&lt;/remarks&gt;
-    public const String PARAM = &quot;param&quot;;
-    /// &lt;summary&gt;Params token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;params&gt; tag.&lt;/remarks&gt;
-    public const String PARAMS = &quot;params&quot;;
-    /// &lt;summary&gt;MethodCall token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;methodCall&gt; tag.&lt;/remarks&gt;
-    public const String METHOD_CALL = &quot;methodCall&quot;;
-    /// &lt;summary&gt;MethodName token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;methodName&gt; tag.&lt;/remarks&gt;
-    public const String METHOD_NAME = &quot;methodName&quot;;
-    /// &lt;summary&gt;MethodResponse token&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;methodResponse&gt; tag.&lt;/remarks&gt;
-    public const String METHOD_RESPONSE = &quot;methodResponse&quot;;
-    /// &lt;summary&gt;Fault response token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;fault&gt; tag.&lt;/remarks&gt;
-    public const String FAULT = &quot;fault&quot;;
-    /// &lt;summary&gt;FaultCode token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;faultCode&gt; tag.&lt;/remarks&gt;
-    public const String FAULT_CODE = &quot;faultCode&quot;;
-    /// &lt;summary&gt;FaultString token.&lt;/summary&gt;
-    /// &lt;remarks&gt;Corresponds to the &lt;faultString&gt; tag.&lt;/remarks&gt;
-    public const String FAULT_STRING = &quot;faultString&quot;;
-  }
+    /// &lt;summary&gt;Class collecting &lt;c&gt;String&lt;/c&gt; tokens that are part of XML-RPC files.&lt;/summary&gt;
+    public class XmlRpcXmlTokens
+    {
+        /// &lt;summary&gt;C# formatting string to describe an ISO 8601 date.&lt;/summary&gt;
+        public const String ISO_DATETIME = &quot;yyyyMMdd\\THH\\:mm\\:ss&quot;;
+        /// &lt;summary&gt;Base64 field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;base64&gt; tag.&lt;/remarks&gt;
+        public const String BASE64 = &quot;base64&quot;;
+        /// &lt;summary&gt;String field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;string&gt; tag.&lt;/remarks&gt;
+        public const String STRING = &quot;string&quot;;
+        /// &lt;summary&gt;Integer field integer.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;i4&gt; tag.&lt;/remarks&gt;
+        public const String INT = &quot;i4&quot;;
+        /// &lt;summary&gt;Alternate integer field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;int&gt; tag.&lt;/remarks&gt;
+        public const String ALT_INT = &quot;int&quot;;
+        /// &lt;summary&gt;Date field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;dateTime.iso8601&gt; tag.&lt;/remarks&gt;
+        public const String DATETIME = &quot;dateTime.iso8601&quot;;
+        /// &lt;summary&gt;Boolean field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;boolean&gt; tag.&lt;/remarks&gt;
+        public const String BOOLEAN = &quot;boolean&quot;;
+        /// &lt;summary&gt;Value token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;value&gt; tag.&lt;/remarks&gt;
+        public const String VALUE = &quot;value&quot;;
+        /// &lt;summary&gt;Name token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;name&gt; tag.&lt;/remarks&gt;
+        public const String NAME = &quot;name&quot;;
+        /// &lt;summary&gt;Array field indicator..&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;array&gt; tag.&lt;/remarks&gt;
+        public const String ARRAY = &quot;array&quot;;
+        /// &lt;summary&gt;Data token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;data&gt; tag.&lt;/remarks&gt;
+        public const String DATA = &quot;data&quot;;
+        /// &lt;summary&gt;Member token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;member&gt; tag.&lt;/remarks&gt;
+        public const String MEMBER = &quot;member&quot;;
+        /// &lt;summary&gt;Stuct field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;struct&gt; tag.&lt;/remarks&gt;
+        public const String STRUCT = &quot;struct&quot;;
+        /// &lt;summary&gt;Double field indicator.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;double&gt; tag.&lt;/remarks&gt;
+        public const String DOUBLE = &quot;double&quot;;
+        /// &lt;summary&gt;Param token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;param&gt; tag.&lt;/remarks&gt;
+        public const String PARAM = &quot;param&quot;;
+        /// &lt;summary&gt;Params token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;params&gt; tag.&lt;/remarks&gt;
+        public const String PARAMS = &quot;params&quot;;
+        /// &lt;summary&gt;MethodCall token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;methodCall&gt; tag.&lt;/remarks&gt;
+        public const String METHOD_CALL = &quot;methodCall&quot;;
+        /// &lt;summary&gt;MethodName token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;methodName&gt; tag.&lt;/remarks&gt;
+        public const String METHOD_NAME = &quot;methodName&quot;;
+        /// &lt;summary&gt;MethodResponse token&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;methodResponse&gt; tag.&lt;/remarks&gt;
+        public const String METHOD_RESPONSE = &quot;methodResponse&quot;;
+        /// &lt;summary&gt;Fault response token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;fault&gt; tag.&lt;/remarks&gt;
+        public const String FAULT = &quot;fault&quot;;
+        /// &lt;summary&gt;FaultCode token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;faultCode&gt; tag.&lt;/remarks&gt;
+        public const String FAULT_CODE = &quot;faultCode&quot;;
+        /// &lt;summary&gt;FaultString token.&lt;/summary&gt;
+        /// &lt;remarks&gt;Corresponds to the &lt;faultString&gt; tag.&lt;/remarks&gt;
+        public const String FAULT_STRING = &quot;faultString&quot;;
+    }
 }
 
 

Modified: branches/aditi/libsecondlife-cs/_Packets_.cs
===================================================================
--- branches/aditi/libsecondlife-cs/_Packets_.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/_Packets_.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,6 +25,8 @@
  */
 
 using System;
+using System.Xml;
+using System.Xml.Serialization;
 using libsecondlife;
 
 namespace libsecondlife.Packets
@@ -35,14 +37,14 @@
     public class MalformedDataException : ApplicationException
     {
         /// &lt;summary&gt;
-        /// 
+        /// Default constructor
         /// &lt;/summary&gt;
         public MalformedDataException() { }
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor that takes an additional error message
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;Message&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;Message&quot;&gt;An error message to attach to this exception&lt;/param&gt;
         public MalformedDataException(string Message)
             : base(Message)
         {
@@ -55,60 +57,77 @@
     /// bytes in length at the beginning of the packet, and encapsulates any 
     /// appended ACKs at the end of the packet as well
     /// &lt;/summary&gt;
+    [XmlInclude(typeof(LowHeader))]
+    [XmlInclude(typeof(MediumHeader))]
+    [XmlInclude(typeof(HighHeader))]
     public abstract class Header
     {
-        /// &lt;summary&gt;The raw header data, does not include appended ACKs&lt;/summary&gt;
+        /// &lt;summary&gt;Raw header data, does not include appended ACKs&lt;/summary&gt;
         public byte[] Data;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Raw value of the flags byte&lt;/summary&gt;
+        [XmlIgnore]
         public byte Flags
         {
             get { return Data[0]; }
             set { Data[0] = value; }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Reliable flag, whether this packet requires an ACK&lt;/summary&gt;
+        [XmlIgnore]
         public bool Reliable
         {
             get { return (Data[0] &amp; Helpers.MSG_RELIABLE) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_RELIABLE; } else { byte mask = (byte)Helpers.MSG_RELIABLE ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Resent flag, whether this same packet has already been 
+        /// sent&lt;/summary&gt;
+        [XmlIgnore]
         public bool Resent
         {
             get { return (Data[0] &amp; Helpers.MSG_RESENT) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_RESENT; } else { byte mask = (byte)Helpers.MSG_RESENT ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Zerocoded flag, whether this packet is compressed with 
+        /// zerocoding&lt;/summary&gt;
+        [XmlIgnore]
         public bool Zerocoded
         {
             get { return (Data[0] &amp; Helpers.MSG_ZEROCODED) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_ZEROCODED; } else { byte mask = (byte)Helpers.MSG_ZEROCODED ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Appended ACKs flag, whether this packet has ACKs appended
+        /// to the end&lt;/summary&gt;
+        [XmlIgnore]
         public bool AppendedAcks
         {
             get { return (Data[0] &amp; Helpers.MSG_APPENDED_ACKS) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_APPENDED_ACKS; } else { byte mask = (byte)Helpers.MSG_APPENDED_ACKS ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public ushort Sequence
+        /// &lt;summary&gt;Packet sequence number, three bytes long&lt;/summary&gt;
+        [XmlIgnore]
+        public uint Sequence
         {
-            get { return (ushort)((Data[2] &lt;&lt; 8) + Data[3]); }
-            set { Data[2] = (byte)(value &gt;&gt; 8); Data[3] = (byte)(value % 256); }
+            get { return (uint)((Data[1] &lt;&lt; 16) + (Data[2] &lt;&lt; 8) + Data[3]); }
+            set { Data[1] = (byte)(value &gt;&gt; 16); Data[2] = (byte)(value &gt;&gt; 8); Data[3] = (byte)(value % 256); }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Numeric ID number of this packet&lt;/summary&gt;
+        [XmlIgnore]
         public abstract ushort ID { get; set; }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Frequency classification of this packet, Low Medium or 
+        /// High&lt;/summary&gt;
+        [XmlIgnore]
         public abstract PacketFrequency Frequency { get; }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Convert this header to a byte array, not including any
+        /// appended ACKs&lt;/summary&gt;
         public abstract void ToBytes(byte[] bytes, ref int i);
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Array containing all the appended ACKs of this packet&lt;/summary&gt;
         public uint[] AckList;
 
         /// &lt;summary&gt;
-        /// 
+        /// Convert the AckList to a byte array, used for packet serializing
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;bytes&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;i&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;bytes&quot;&gt;Reference to the target byte array&lt;/param&gt;
+        /// &lt;param name=&quot;i&quot;&gt;Beginning position to start writing to in the byte
+        /// array, will be updated with the ending position of the ACK list&lt;/param&gt;
         public void AcksToBytes(byte[] bytes, ref int i)
         {
             foreach (uint ack in AckList)
@@ -163,7 +182,11 @@
                     
                     for (int i = 0; i &lt; count; i++)
                     {
-                        AckList[i] = (ushort)((bytes[(packetEnd - i * 4) - 1] &lt;&lt; 8) | (bytes[packetEnd - i * 4]));
+                        AckList[i] = (uint)(
+                            (bytes[(packetEnd - i * 4) - 3] &lt;&lt; 24) |
+                            (bytes[(packetEnd - i * 4) - 2] &lt;&lt; 16) |
+                            (bytes[(packetEnd - i * 4) - 1] &lt;&lt;  8) |
+                            (bytes[(packetEnd - i * 4)    ]));
                     }
 
                     packetEnd -= (count * 4);
@@ -351,57 +374,23 @@
         /// &lt;summary&gt;A generic value, not an actual packet type&lt;/summary&gt;
         Default,
         TestMessage,
-        AddCircuitCode,
         UseCircuitCode,
         LogControl,
-        RelayLogControl,
         LogMessages,
-        SimulatorAssign,
-        SpaceServerSimulatorTimeMessage,
-        AvatarTextureUpdate,
-        SimulatorMapUpdate,
-        SimulatorSetMap,
-        SubscribeLoad,
-        UnsubscribeLoad,
-        SimulatorStart,
-        SimulatorReady,
         TelehubInfo,
-        SimulatorPresentAtLocation,
-        SimulatorLoad,
-        SimulatorShutdownRequest,
-        RegionPresenceRequestByRegionID,
-        RegionPresenceRequestByHandle,
-        RegionPresenceResponse,
-        RecordAgentPresence,
-        EraseAgentPresence,
-        AgentPresenceRequest,
-        AgentPresenceResponse,
-        UpdateSimulator,
-        TrackAgentSession,
-        ClearAgentSessions,
-        LogDwellTime,
-        FeatureDisabled,
-        LogFailedMoneyTransaction,
-        UserReportInternal,
-        SetSimStatusInDatabase,
-        SetSimPresenceInDatabase,
         EconomyDataRequest,
         EconomyData,
         AvatarPickerRequest,
-        AvatarPickerRequestBackend,
         AvatarPickerReply,
         PlacesQuery,
         PlacesReply,
         DirFindQuery,
-        DirFindQueryBackend,
         DirPlacesQuery,
-        DirPlacesQueryBackend,
         DirPlacesReply,
         DirPeopleReply,
         DirEventsReply,
         DirGroupsReply,
         DirClassifiedQuery,
-        DirClassifiedQueryBackend,
         DirClassifiedReply,
         AvatarClassifiedReply,
         ClassifiedInfoRequest,
@@ -410,39 +399,28 @@
         ClassifiedDelete,
         ClassifiedGodDelete,
         DirPicksQuery,
-        DirPicksQueryBackend,
         DirPicksReply,
         DirLandQuery,
-        DirLandQueryBackend,
         DirLandReply,
         DirPopularQuery,
-        DirPopularQueryBackend,
         DirPopularReply,
         ParcelInfoRequest,
         ParcelInfoReply,
         ParcelObjectOwnersRequest,
-        OnlineStatusRequest,
-        OnlineStatusReply,
         ParcelObjectOwnersReply,
         GroupNoticesListRequest,
         GroupNoticesListReply,
         GroupNoticeRequest,
-        GroupNoticeAdd,
         GroupNoticeDelete,
         TeleportRequest,
         TeleportLocationRequest,
         TeleportLocal,
         TeleportLandmarkRequest,
         TeleportProgress,
-        DataHomeLocationRequest,
-        DataHomeLocationReply,
-        SpaceLocationTeleportRequest,
-        SpaceLocationTeleportReply,
         TeleportFinish,
         StartLure,
         TeleportLureRequest,
         TeleportCancel,
-        CompleteLure,
         TeleportStart,
         TeleportFailed,
         LeaderBoardRequest,
@@ -521,10 +499,7 @@
         RequestRegionInfo,
         RegionInfo,
         GodUpdateRegionInfo,
-        NearestLandingRegionRequest,
-        NearestLandingRegionReply,
         NearestLandingRegionUpdated,
-        TeleportLandingStatusChanged,
         RegionHandshake,
         RegionHandshakeReply,
         SimulatorViewerTimeMessage,
@@ -545,11 +520,9 @@
         KickUser,
         KickUserAck,
         GodKickUser,
-        SystemKickUser,
         EjectUser,
         FreezeUser,
         AvatarPropertiesRequest,
-        AvatarPropertiesRequestBackend,
         AvatarPropertiesReply,
         AvatarInterestsReply,
         AvatarGroupsReply,
@@ -601,42 +574,23 @@
         ParcelAccessListUpdate,
         ParcelDwellRequest,
         ParcelDwellReply,
-        RequestParcelTransfer,
-        UpdateParcel,
-        RemoveParcel,
-        MergeParcel,
-        LogParcelChanges,
-        CheckParcelSales,
-        ParcelSales,
         ParcelGodMarkAsContent,
         ParcelGodReserveForNewbie,
         ViewerStartAuction,
-        StartAuction,
-        ConfirmAuctionStart,
-        CompleteAuction,
-        CancelAuction,
-        CheckParcelAuctions,
-        ParcelAuctions,
         UUIDNameRequest,
         UUIDNameReply,
         UUIDGroupNameRequest,
         UUIDGroupNameReply,
-        ChatPass,
         ChildAgentDying,
         ChildAgentUnknown,
-        KillChildAgents,
         GetScriptRunning,
         ScriptRunningReply,
         SetScriptRunning,
         ScriptReset,
-        ScriptSensorRequest,
-        ScriptSensorReply,
         CompleteAgentMovement,
         AgentMovementComplete,
-        LogLogin,
         ConnectAgentToUserserver,
         ConnectToUserserver,
-        DataServerLogout,
         LogoutRequest,
         FinalizeLogout,
         LogoutReply,
@@ -684,8 +638,6 @@
         RezObject,
         RezObjectFromNotecard,
         DeclineInventory,
-        TransferInventory,
-        TransferInventoryAck,
         RequestFriendship,
         AcceptFriendship,
         DeclineFriendship,
@@ -697,13 +649,9 @@
         RezScript,
         CreateInventoryItem,
         CreateLandmarkForEvent,
-        EventLocationRequest,
-        EventLocationReply,
         RegionHandleRequest,
         RegionIDAndHandleReply,
         MoneyTransferRequest,
-        MoneyTransferBackend,
-        BulkMoneyTransfer,
         AdjustBalance,
         MoneyBalanceRequest,
         MoneyBalanceReply,
@@ -726,24 +674,11 @@
         OnlineNotification,
         OfflineNotification,
         SetStartLocationRequest,
-        SetStartLocation,
-        NetTest,
-        SetCPURatio,
-        SimCrashed,
-        NameValuePair,
-        RemoveNameValuePair,
-        GetNameValuePair,
-        UpdateAttachment,
-        RemoveAttachment,
         AssetUploadRequest,
         AssetUploadComplete,
         ReputationAgentAssign,
         ReputationIndividualRequest,
         ReputationIndividualReply,
-        EmailMessageRequest,
-        EmailMessageReply,
-        ScriptDataRequest,
-        ScriptDataReply,
         CreateGroupRequest,
         CreateGroupReply,
         UpdateGroupInfo,
@@ -755,7 +690,6 @@
         LeaveGroupRequest,
         LeaveGroupReply,
         InviteGroupRequest,
-        InviteGroupResponse,
         GroupProfileRequest,
         GroupProfileReply,
         GroupAccountSummaryRequest,
@@ -770,7 +704,6 @@
         GroupVoteHistoryItemReply,
         StartGroupProposal,
         GroupProposalBallot,
-        TallyVotes,
         GroupMembersRequest,
         GroupMembersReply,
         ActivateGroup,
@@ -796,7 +729,6 @@
         GroupDataUpdate,
         AgentGroupDataUpdate,
         AgentDropGroup,
-        LogTextMessage,
         CreateTrustedCircuit,
         DenyTrustedCircuit,
         RequestTrustedCircuit,
@@ -808,15 +740,7 @@
         UserInfoReply,
         UpdateUserInfo,
         GodExpungeUser,
-        StartExpungeProcess,
-        StartExpungeProcessAck,
-        StartParcelRename,
-        StartParcelRenameAck,
-        BulkParcelRename,
-        ParcelRename,
-        StartParcelRemove,
         StartParcelRemoveAck,
-        BulkParcelRemove,
         InitiateUpload,
         InitiateDownload,
         SystemMessage,
@@ -828,15 +752,6 @@
         MapItemRequest,
         MapItemReply,
         SendPostcard,
-        RpcChannelRequest,
-        RpcChannelReply,
-        RpcScriptRequestInbound,
-        RpcScriptRequestInboundForward,
-        RpcScriptReplyInbound,
-        MailTaskSimRequest,
-        MailTaskSimReply,
-        ScriptMailRegistration,
-        ParcelMediaCommandMessage,
         ParcelMediaUpdate,
         LandStatRequest,
         LandStatReply,
@@ -846,7 +761,6 @@
         CloseCircuit,
         TemplateChecksumRequest,
         TemplateChecksumReply,
-        ClosestSimulator,
         ObjectAdd,
         MultipleObjectUpdate,
         RequestMultipleObjects,
@@ -858,18 +772,15 @@
         ObjectProperties,
         ObjectPropertiesFamily,
         ParcelPropertiesRequest,
-        SimStatus,
         GestureUpdate,
         AttachedSound,
         AttachedSoundGainChange,
         AttachedSoundCutoffRadius,
         PreloadSound,
-        InternalScriptMail,
         ViewerEffect,
         SetSunPhase,
         StartPingCheck,
         CompletePingCheck,
-        NeighborList,
         AgentUpdate,
         AgentAnimation,
         AgentRequestSit,
@@ -891,15 +802,445 @@
         AvatarSitResponse,
         CameraConstraint,
         ParcelProperties,
-        EdgeDataPacket,
         ChildAgentUpdate,
         ChildAgentAlive,
         ChildAgentPositionUpdate,
-        PassObject,
-        AtomicPassObject,
         SoundTrigger,
     }
 
+    [XmlInclude(typeof(TestMessagePacket))]
+    [XmlInclude(typeof(UseCircuitCodePacket))]
+    [XmlInclude(typeof(LogControlPacket))]
+    [XmlInclude(typeof(LogMessagesPacket))]
+    [XmlInclude(typeof(TelehubInfoPacket))]
+    [XmlInclude(typeof(EconomyDataRequestPacket))]
+    [XmlInclude(typeof(EconomyDataPacket))]
+    [XmlInclude(typeof(AvatarPickerRequestPacket))]
+    [XmlInclude(typeof(AvatarPickerReplyPacket))]
+    [XmlInclude(typeof(PlacesQueryPacket))]
+    [XmlInclude(typeof(PlacesReplyPacket))]
+    [XmlInclude(typeof(DirFindQueryPacket))]
+    [XmlInclude(typeof(DirPlacesQueryPacket))]
+    [XmlInclude(typeof(DirPlacesReplyPacket))]
+    [XmlInclude(typeof(DirPeopleReplyPacket))]
+    [XmlInclude(typeof(DirEventsReplyPacket))]
+    [XmlInclude(typeof(DirGroupsReplyPacket))]
+    [XmlInclude(typeof(DirClassifiedQueryPacket))]
+    [XmlInclude(typeof(DirClassifiedReplyPacket))]
+    [XmlInclude(typeof(AvatarClassifiedReplyPacket))]
+    [XmlInclude(typeof(ClassifiedInfoRequestPacket))]
+    [XmlInclude(typeof(ClassifiedInfoReplyPacket))]
+    [XmlInclude(typeof(ClassifiedInfoUpdatePacket))]
+    [XmlInclude(typeof(ClassifiedDeletePacket))]
+    [XmlInclude(typeof(ClassifiedGodDeletePacket))]
+    [XmlInclude(typeof(DirPicksQueryPacket))]
+    [XmlInclude(typeof(DirPicksReplyPacket))]
+    [XmlInclude(typeof(DirLandQueryPacket))]
+    [XmlInclude(typeof(DirLandReplyPacket))]
+    [XmlInclude(typeof(DirPopularQueryPacket))]
+    [XmlInclude(typeof(DirPopularReplyPacket))]
+    [XmlInclude(typeof(ParcelInfoRequestPacket))]
+    [XmlInclude(typeof(ParcelInfoReplyPacket))]
+    [XmlInclude(typeof(ParcelObjectOwnersRequestPacket))]
+    [XmlInclude(typeof(ParcelObjectOwnersReplyPacket))]
+    [XmlInclude(typeof(GroupNoticesListRequestPacket))]
+    [XmlInclude(typeof(GroupNoticesListReplyPacket))]
+    [XmlInclude(typeof(GroupNoticeRequestPacket))]
+    [XmlInclude(typeof(GroupNoticeDeletePacket))]
+    [XmlInclude(typeof(TeleportRequestPacket))]
+    [XmlInclude(typeof(TeleportLocationRequestPacket))]
+    [XmlInclude(typeof(TeleportLocalPacket))]
+    [XmlInclude(typeof(TeleportLandmarkRequestPacket))]
+    [XmlInclude(typeof(TeleportProgressPacket))]
+    [XmlInclude(typeof(TeleportFinishPacket))]
+    [XmlInclude(typeof(StartLurePacket))]
+    [XmlInclude(typeof(TeleportLureRequestPacket))]
+    [XmlInclude(typeof(TeleportCancelPacket))]
+    [XmlInclude(typeof(TeleportStartPacket))]
+    [XmlInclude(typeof(TeleportFailedPacket))]
+    [XmlInclude(typeof(LeaderBoardRequestPacket))]
+    [XmlInclude(typeof(LeaderBoardDataPacket))]
+    [XmlInclude(typeof(UndoPacket))]
+    [XmlInclude(typeof(RedoPacket))]
+    [XmlInclude(typeof(UndoLandPacket))]
+    [XmlInclude(typeof(RedoLandPacket))]
+    [XmlInclude(typeof(AgentPausePacket))]
+    [XmlInclude(typeof(AgentResumePacket))]
+    [XmlInclude(typeof(ChatFromViewerPacket))]
+    [XmlInclude(typeof(AgentThrottlePacket))]
+    [XmlInclude(typeof(AgentFOVPacket))]
+    [XmlInclude(typeof(AgentHeightWidthPacket))]
+    [XmlInclude(typeof(AgentSetAppearancePacket))]
+    [XmlInclude(typeof(AgentQuitPacket))]
+    [XmlInclude(typeof(AgentQuitCopyPacket))]
+    [XmlInclude(typeof(ImageNotInDatabasePacket))]
+    [XmlInclude(typeof(RebakeAvatarTexturesPacket))]
+    [XmlInclude(typeof(SetAlwaysRunPacket))]
+    [XmlInclude(typeof(ObjectDeletePacket))]
+    [XmlInclude(typeof(ObjectDuplicatePacket))]
+    [XmlInclude(typeof(ObjectDuplicateOnRayPacket))]
+    [XmlInclude(typeof(ObjectScalePacket))]
+    [XmlInclude(typeof(ObjectRotationPacket))]
+    [XmlInclude(typeof(ObjectFlagUpdatePacket))]
+    [XmlInclude(typeof(ObjectClickActionPacket))]
+    [XmlInclude(typeof(ObjectImagePacket))]
+    [XmlInclude(typeof(ObjectMaterialPacket))]
+    [XmlInclude(typeof(ObjectShapePacket))]
+    [XmlInclude(typeof(ObjectExtraParamsPacket))]
+    [XmlInclude(typeof(ObjectOwnerPacket))]
+    [XmlInclude(typeof(ObjectGroupPacket))]
+    [XmlInclude(typeof(ObjectBuyPacket))]
+    [XmlInclude(typeof(BuyObjectInventoryPacket))]
+    [XmlInclude(typeof(DerezContainerPacket))]
+    [XmlInclude(typeof(ObjectPermissionsPacket))]
+    [XmlInclude(typeof(ObjectSaleInfoPacket))]
+    [XmlInclude(typeof(ObjectNamePacket))]
+    [XmlInclude(typeof(ObjectDescriptionPacket))]
+    [XmlInclude(typeof(ObjectCategoryPacket))]
+    [XmlInclude(typeof(ObjectSelectPacket))]
+    [XmlInclude(typeof(ObjectDeselectPacket))]
+    [XmlInclude(typeof(ObjectAttachPacket))]
+    [XmlInclude(typeof(ObjectDetachPacket))]
+    [XmlInclude(typeof(ObjectDropPacket))]
+    [XmlInclude(typeof(ObjectLinkPacket))]
+    [XmlInclude(typeof(ObjectDelinkPacket))]
+    [XmlInclude(typeof(ObjectHingePacket))]
+    [XmlInclude(typeof(ObjectDehingePacket))]
+    [XmlInclude(typeof(ObjectGrabPacket))]
+    [XmlInclude(typeof(ObjectGrabUpdatePacket))]
+    [XmlInclude(typeof(ObjectDeGrabPacket))]
+    [XmlInclude(typeof(ObjectSpinStartPacket))]
+    [XmlInclude(typeof(ObjectSpinUpdatePacket))]
+    [XmlInclude(typeof(ObjectSpinStopPacket))]
+    [XmlInclude(typeof(ObjectExportSelectedPacket))]
+    [XmlInclude(typeof(ObjectImportPacket))]
+    [XmlInclude(typeof(ModifyLandPacket))]
+    [XmlInclude(typeof(VelocityInterpolateOnPacket))]
+    [XmlInclude(typeof(VelocityInterpolateOffPacket))]
+    [XmlInclude(typeof(StateSavePacket))]
+    [XmlInclude(typeof(ReportAutosaveCrashPacket))]
+    [XmlInclude(typeof(SimWideDeletesPacket))]
+    [XmlInclude(typeof(TrackAgentPacket))]
+    [XmlInclude(typeof(ViewerStatsPacket))]
+    [XmlInclude(typeof(ScriptAnswerYesPacket))]
+    [XmlInclude(typeof(UserReportPacket))]
+    [XmlInclude(typeof(AlertMessagePacket))]
+    [XmlInclude(typeof(AgentAlertMessagePacket))]
+    [XmlInclude(typeof(MeanCollisionAlertPacket))]
+    [XmlInclude(typeof(ViewerFrozenMessagePacket))]
+    [XmlInclude(typeof(HealthMessagePacket))]
+    [XmlInclude(typeof(ChatFromSimulatorPacket))]
+    [XmlInclude(typeof(SimStatsPacket))]
+    [XmlInclude(typeof(RequestRegionInfoPacket))]
+    [XmlInclude(typeof(RegionInfoPacket))]
+    [XmlInclude(typeof(GodUpdateRegionInfoPacket))]
+    [XmlInclude(typeof(NearestLandingRegionUpdatedPacket))]
+    [XmlInclude(typeof(RegionHandshakePacket))]
+    [XmlInclude(typeof(RegionHandshakeReplyPacket))]
+    [XmlInclude(typeof(SimulatorViewerTimeMessagePacket))]
+    [XmlInclude(typeof(EnableSimulatorPacket))]
+    [XmlInclude(typeof(DisableSimulatorPacket))]
+    [XmlInclude(typeof(TransferRequestPacket))]
+    [XmlInclude(typeof(TransferInfoPacket))]
+    [XmlInclude(typeof(TransferAbortPacket))]
+    [XmlInclude(typeof(TransferPriorityPacket))]
+    [XmlInclude(typeof(RequestXferPacket))]
+    [XmlInclude(typeof(AbortXferPacket))]
+    [XmlInclude(typeof(RequestAvatarInfoPacket))]
+    [XmlInclude(typeof(AvatarAppearancePacket))]
+    [XmlInclude(typeof(SetFollowCamPropertiesPacket))]
+    [XmlInclude(typeof(ClearFollowCamPropertiesPacket))]
+    [XmlInclude(typeof(RequestPayPricePacket))]
+    [XmlInclude(typeof(PayPriceReplyPacket))]
+    [XmlInclude(typeof(KickUserPacket))]
+    [XmlInclude(typeof(KickUserAckPacket))]
+    [XmlInclude(typeof(GodKickUserPacket))]
+    [XmlInclude(typeof(EjectUserPacket))]
+    [XmlInclude(typeof(FreezeUserPacket))]
+    [XmlInclude(typeof(AvatarPropertiesRequestPacket))]
+    [XmlInclude(typeof(AvatarPropertiesReplyPacket))]
+    [XmlInclude(typeof(AvatarInterestsReplyPacket))]
+    [XmlInclude(typeof(AvatarGroupsReplyPacket))]
+    [XmlInclude(typeof(AvatarPropertiesUpdatePacket))]
+    [XmlInclude(typeof(AvatarInterestsUpdatePacket))]
+    [XmlInclude(typeof(AvatarStatisticsReplyPacket))]
+    [XmlInclude(typeof(AvatarNotesReplyPacket))]
+    [XmlInclude(typeof(AvatarNotesUpdatePacket))]
+    [XmlInclude(typeof(AvatarPicksReplyPacket))]
+    [XmlInclude(typeof(EventInfoRequestPacket))]
+    [XmlInclude(typeof(EventInfoReplyPacket))]
+    [XmlInclude(typeof(EventNotificationAddRequestPacket))]
+    [XmlInclude(typeof(EventNotificationRemoveRequestPacket))]
+    [XmlInclude(typeof(EventGodDeletePacket))]
+    [XmlInclude(typeof(PickInfoRequestPacket))]
+    [XmlInclude(typeof(PickInfoReplyPacket))]
+    [XmlInclude(typeof(PickInfoUpdatePacket))]
+    [XmlInclude(typeof(PickDeletePacket))]
+    [XmlInclude(typeof(PickGodDeletePacket))]
+    [XmlInclude(typeof(ScriptQuestionPacket))]
+    [XmlInclude(typeof(ScriptControlChangePacket))]
+    [XmlInclude(typeof(ScriptDialogPacket))]
+    [XmlInclude(typeof(ScriptDialogReplyPacket))]
+    [XmlInclude(typeof(ForceScriptControlReleasePacket))]
+    [XmlInclude(typeof(RevokePermissionsPacket))]
+    [XmlInclude(typeof(LoadURLPacket))]
+    [XmlInclude(typeof(ScriptTeleportRequestPacket))]
+    [XmlInclude(typeof(ParcelOverlayPacket))]
+    [XmlInclude(typeof(ParcelPropertiesRequestByIDPacket))]
+    [XmlInclude(typeof(ParcelPropertiesUpdatePacket))]
+    [XmlInclude(typeof(ParcelReturnObjectsPacket))]
+    [XmlInclude(typeof(ParcelSetOtherCleanTimePacket))]
+    [XmlInclude(typeof(ParcelDisableObjectsPacket))]
+    [XmlInclude(typeof(ParcelSelectObjectsPacket))]
+    [XmlInclude(typeof(EstateCovenantRequestPacket))]
+    [XmlInclude(typeof(EstateCovenantReplyPacket))]
+    [XmlInclude(typeof(ForceObjectSelectPacket))]
+    [XmlInclude(typeof(ParcelBuyPassPacket))]
+    [XmlInclude(typeof(ParcelDeedToGroupPacket))]
+    [XmlInclude(typeof(ParcelReclaimPacket))]
+    [XmlInclude(typeof(ParcelClaimPacket))]
+    [XmlInclude(typeof(ParcelJoinPacket))]
+    [XmlInclude(typeof(ParcelDividePacket))]
+    [XmlInclude(typeof(ParcelReleasePacket))]
+    [XmlInclude(typeof(ParcelBuyPacket))]
+    [XmlInclude(typeof(ParcelGodForceOwnerPacket))]
+    [XmlInclude(typeof(ParcelAccessListRequestPacket))]
+    [XmlInclude(typeof(ParcelAccessListReplyPacket))]
+    [XmlInclude(typeof(ParcelAccessListUpdatePacket))]
+    [XmlInclude(typeof(ParcelDwellRequestPacket))]
+    [XmlInclude(typeof(ParcelDwellReplyPacket))]
+    [XmlInclude(typeof(ParcelGodMarkAsContentPacket))]
+    [XmlInclude(typeof(ParcelGodReserveForNewbiePacket))]
+    [XmlInclude(typeof(ViewerStartAuctionPacket))]
+    [XmlInclude(typeof(UUIDNameRequestPacket))]
+    [XmlInclude(typeof(UUIDNameReplyPacket))]
+    [XmlInclude(typeof(UUIDGroupNameRequestPacket))]
+    [XmlInclude(typeof(UUIDGroupNameReplyPacket))]
+    [XmlInclude(typeof(ChildAgentDyingPacket))]
+    [XmlInclude(typeof(ChildAgentUnknownPacket))]
+    [XmlInclude(typeof(GetScriptRunningPacket))]
+    [XmlInclude(typeof(ScriptRunningReplyPacket))]
+    [XmlInclude(typeof(SetScriptRunningPacket))]
+    [XmlInclude(typeof(ScriptResetPacket))]
+    [XmlInclude(typeof(CompleteAgentMovementPacket))]
+    [XmlInclude(typeof(AgentMovementCompletePacket))]
+    [XmlInclude(typeof(ConnectAgentToUserserverPacket))]
+    [XmlInclude(typeof(ConnectToUserserverPacket))]
+    [XmlInclude(typeof(LogoutRequestPacket))]
+    [XmlInclude(typeof(FinalizeLogoutPacket))]
+    [XmlInclude(typeof(LogoutReplyPacket))]
+    [XmlInclude(typeof(LogoutDemandPacket))]
+    [XmlInclude(typeof(ImprovedInstantMessagePacket))]
+    [XmlInclude(typeof(RetrieveInstantMessagesPacket))]
+    [XmlInclude(typeof(DequeueInstantMessagesPacket))]
+    [XmlInclude(typeof(FindAgentPacket))]
+    [XmlInclude(typeof(RequestGodlikePowersPacket))]
+    [XmlInclude(typeof(GrantGodlikePowersPacket))]
+    [XmlInclude(typeof(GodlikeMessagePacket))]
+    [XmlInclude(typeof(EstateOwnerMessagePacket))]
+    [XmlInclude(typeof(GenericMessagePacket))]
+    [XmlInclude(typeof(MuteListRequestPacket))]
+    [XmlInclude(typeof(UpdateMuteListEntryPacket))]
+    [XmlInclude(typeof(RemoveMuteListEntryPacket))]
+    [XmlInclude(typeof(CopyInventoryFromNotecardPacket))]
+    [XmlInclude(typeof(UpdateInventoryItemPacket))]
+    [XmlInclude(typeof(UpdateCreateInventoryItemPacket))]
+    [XmlInclude(typeof(MoveInventoryItemPacket))]
+    [XmlInclude(typeof(CopyInventoryItemPacket))]
+    [XmlInclude(typeof(RemoveInventoryItemPacket))]
+    [XmlInclude(typeof(ChangeInventoryItemFlagsPacket))]
+    [XmlInclude(typeof(SaveAssetIntoInventoryPacket))]
+    [XmlInclude(typeof(CreateInventoryFolderPacket))]
+    [XmlInclude(typeof(UpdateInventoryFolderPacket))]
+    [XmlInclude(typeof(MoveInventoryFolderPacket))]
+    [XmlInclude(typeof(RemoveInventoryFolderPacket))]
+    [XmlInclude(typeof(FetchInventoryDescendentsPacket))]
+    [XmlInclude(typeof(InventoryDescendentsPacket))]
+    [XmlInclude(typeof(FetchInventoryPacket))]
+    [XmlInclude(typeof(FetchInventoryReplyPacket))]
+    [XmlInclude(typeof(BulkUpdateInventoryPacket))]
+    [XmlInclude(typeof(RequestInventoryAssetPacket))]
+    [XmlInclude(typeof(InventoryAssetResponsePacket))]
+    [XmlInclude(typeof(RemoveInventoryObjectsPacket))]
+    [XmlInclude(typeof(PurgeInventoryDescendentsPacket))]
+    [XmlInclude(typeof(UpdateTaskInventoryPacket))]
+    [XmlInclude(typeof(RemoveTaskInventoryPacket))]
+    [XmlInclude(typeof(MoveTaskInventoryPacket))]
+    [XmlInclude(typeof(RequestTaskInventoryPacket))]
+    [XmlInclude(typeof(ReplyTaskInventoryPacket))]
+    [XmlInclude(typeof(DeRezObjectPacket))]
+    [XmlInclude(typeof(DeRezAckPacket))]
+    [XmlInclude(typeof(RezObjectPacket))]
+    [XmlInclude(typeof(RezObjectFromNotecardPacket))]
+    [XmlInclude(typeof(DeclineInventoryPacket))]
+    [XmlInclude(typeof(RequestFriendshipPacket))]
+    [XmlInclude(typeof(AcceptFriendshipPacket))]
+    [XmlInclude(typeof(DeclineFriendshipPacket))]
+    [XmlInclude(typeof(FormFriendshipPacket))]
+    [XmlInclude(typeof(TerminateFriendshipPacket))]
+    [XmlInclude(typeof(OfferCallingCardPacket))]
+    [XmlInclude(typeof(AcceptCallingCardPacket))]
+    [XmlInclude(typeof(DeclineCallingCardPacket))]
+    [XmlInclude(typeof(RezScriptPacket))]
+    [XmlInclude(typeof(CreateInventoryItemPacket))]
+    [XmlInclude(typeof(CreateLandmarkForEventPacket))]
+    [XmlInclude(typeof(RegionHandleRequestPacket))]
+    [XmlInclude(typeof(RegionIDAndHandleReplyPacket))]
+    [XmlInclude(typeof(MoneyTransferRequestPacket))]
+    [XmlInclude(typeof(AdjustBalancePacket))]
+    [XmlInclude(typeof(MoneyBalanceRequestPacket))]
+    [XmlInclude(typeof(MoneyBalanceReplyPacket))]
+    [XmlInclude(typeof(RoutedMoneyBalanceReplyPacket))]
+    [XmlInclude(typeof(MoneyHistoryRequestPacket))]
+    [XmlInclude(typeof(MoneyHistoryReplyPacket))]
+    [XmlInclude(typeof(MoneySummaryRequestPacket))]
+    [XmlInclude(typeof(MoneySummaryReplyPacket))]
+    [XmlInclude(typeof(MoneyDetailsRequestPacket))]
+    [XmlInclude(typeof(MoneyDetailsReplyPacket))]
+    [XmlInclude(typeof(MoneyTransactionsRequestPacket))]
+    [XmlInclude(typeof(MoneyTransactionsReplyPacket))]
+    [XmlInclude(typeof(GestureRequestPacket))]
+    [XmlInclude(typeof(ActivateGesturesPacket))]
+    [XmlInclude(typeof(DeactivateGesturesPacket))]
+    [XmlInclude(typeof(MuteListUpdatePacket))]
+    [XmlInclude(typeof(UseCachedMuteListPacket))]
+    [XmlInclude(typeof(GrantUserRightsPacket))]
+    [XmlInclude(typeof(ChangeUserRightsPacket))]
+    [XmlInclude(typeof(OnlineNotificationPacket))]
+    [XmlInclude(typeof(OfflineNotificationPacket))]
+    [XmlInclude(typeof(SetStartLocationRequestPacket))]
+    [XmlInclude(typeof(AssetUploadRequestPacket))]
+    [XmlInclude(typeof(AssetUploadCompletePacket))]
+    [XmlInclude(typeof(ReputationAgentAssignPacket))]
+    [XmlInclude(typeof(ReputationIndividualRequestPacket))]
+    [XmlInclude(typeof(ReputationIndividualReplyPacket))]
+    [XmlInclude(typeof(CreateGroupRequestPacket))]
+    [XmlInclude(typeof(CreateGroupReplyPacket))]
+    [XmlInclude(typeof(UpdateGroupInfoPacket))]
+    [XmlInclude(typeof(GroupRoleChangesPacket))]
+    [XmlInclude(typeof(JoinGroupRequestPacket))]
+    [XmlInclude(typeof(JoinGroupReplyPacket))]
+    [XmlInclude(typeof(EjectGroupMemberRequestPacket))]
+    [XmlInclude(typeof(EjectGroupMemberReplyPacket))]
+    [XmlInclude(typeof(LeaveGroupRequestPacket))]
+    [XmlInclude(typeof(LeaveGroupReplyPacket))]
+    [XmlInclude(typeof(InviteGroupRequestPacket))]
+    [XmlInclude(typeof(GroupProfileRequestPacket))]
+    [XmlInclude(typeof(GroupProfileReplyPacket))]
+    [XmlInclude(typeof(GroupAccountSummaryRequestPacket))]
+    [XmlInclude(typeof(GroupAccountSummaryReplyPacket))]
+    [XmlInclude(typeof(GroupAccountDetailsRequestPacket))]
+    [XmlInclude(typeof(GroupAccountDetailsReplyPacket))]
+    [XmlInclude(typeof(GroupAccountTransactionsRequestPacket))]
+    [XmlInclude(typeof(GroupAccountTransactionsReplyPacket))]
+    [XmlInclude(typeof(GroupActiveProposalsRequestPacket))]
+    [XmlInclude(typeof(GroupActiveProposalItemReplyPacket))]
+    [XmlInclude(typeof(GroupVoteHistoryRequestPacket))]
+    [XmlInclude(typeof(GroupVoteHistoryItemReplyPacket))]
+    [XmlInclude(typeof(StartGroupProposalPacket))]
+    [XmlInclude(typeof(GroupProposalBallotPacket))]
+    [XmlInclude(typeof(GroupMembersRequestPacket))]
+    [XmlInclude(typeof(GroupMembersReplyPacket))]
+    [XmlInclude(typeof(ActivateGroupPacket))]
+    [XmlInclude(typeof(SetGroupContributionPacket))]
+    [XmlInclude(typeof(SetGroupAcceptNoticesPacket))]
+    [XmlInclude(typeof(GroupRoleDataRequestPacket))]
+    [XmlInclude(typeof(GroupRoleDataReplyPacket))]
+    [XmlInclude(typeof(GroupRoleMembersRequestPacket))]
+    [XmlInclude(typeof(GroupRoleMembersReplyPacket))]
+    [XmlInclude(typeof(GroupTitlesRequestPacket))]
+    [XmlInclude(typeof(GroupTitlesReplyPacket))]
+    [XmlInclude(typeof(GroupTitleUpdatePacket))]
+    [XmlInclude(typeof(GroupRoleUpdatePacket))]
+    [XmlInclude(typeof(LiveHelpGroupRequestPacket))]
+    [XmlInclude(typeof(LiveHelpGroupReplyPacket))]
+    [XmlInclude(typeof(AgentWearablesRequestPacket))]
+    [XmlInclude(typeof(AgentWearablesUpdatePacket))]
+    [XmlInclude(typeof(AgentIsNowWearingPacket))]
+    [XmlInclude(typeof(AgentCachedTexturePacket))]
+    [XmlInclude(typeof(AgentCachedTextureResponsePacket))]
+    [XmlInclude(typeof(AgentDataUpdateRequestPacket))]
+    [XmlInclude(typeof(AgentDataUpdatePacket))]
+    [XmlInclude(typeof(GroupDataUpdatePacket))]
+    [XmlInclude(typeof(AgentGroupDataUpdatePacket))]
+    [XmlInclude(typeof(AgentDropGroupPacket))]
+    [XmlInclude(typeof(CreateTrustedCircuitPacket))]
+    [XmlInclude(typeof(DenyTrustedCircuitPacket))]
+    [XmlInclude(typeof(RequestTrustedCircuitPacket))]
+    [XmlInclude(typeof(RezSingleAttachmentFromInvPacket))]
+    [XmlInclude(typeof(RezMultipleAttachmentsFromInvPacket))]
+    [XmlInclude(typeof(DetachAttachmentIntoInvPacket))]
+    [XmlInclude(typeof(CreateNewOutfitAttachmentsPacket))]
+    [XmlInclude(typeof(UserInfoRequestPacket))]
+    [XmlInclude(typeof(UserInfoReplyPacket))]
+    [XmlInclude(typeof(UpdateUserInfoPacket))]
+    [XmlInclude(typeof(GodExpungeUserPacket))]
+    [XmlInclude(typeof(StartParcelRemoveAckPacket))]
+    [XmlInclude(typeof(InitiateUploadPacket))]
+    [XmlInclude(typeof(InitiateDownloadPacket))]
+    [XmlInclude(typeof(SystemMessagePacket))]
+    [XmlInclude(typeof(MapLayerRequestPacket))]
+    [XmlInclude(typeof(MapLayerReplyPacket))]
+    [XmlInclude(typeof(MapBlockRequestPacket))]
+    [XmlInclude(typeof(MapNameRequestPacket))]
+    [XmlInclude(typeof(MapBlockReplyPacket))]
+    [XmlInclude(typeof(MapItemRequestPacket))]
+    [XmlInclude(typeof(MapItemReplyPacket))]
+    [XmlInclude(typeof(SendPostcardPacket))]
+    [XmlInclude(typeof(ParcelMediaUpdatePacket))]
+    [XmlInclude(typeof(LandStatRequestPacket))]
+    [XmlInclude(typeof(LandStatReplyPacket))]
+    [XmlInclude(typeof(SecuredTemplateChecksumRequestPacket))]
+    [XmlInclude(typeof(PacketAckPacket))]
+    [XmlInclude(typeof(OpenCircuitPacket))]
+    [XmlInclude(typeof(CloseCircuitPacket))]
+    [XmlInclude(typeof(TemplateChecksumRequestPacket))]
+    [XmlInclude(typeof(TemplateChecksumReplyPacket))]
+    [XmlInclude(typeof(ObjectAddPacket))]
+    [XmlInclude(typeof(MultipleObjectUpdatePacket))]
+    [XmlInclude(typeof(RequestMultipleObjectsPacket))]
+    [XmlInclude(typeof(ObjectPositionPacket))]
+    [XmlInclude(typeof(RequestObjectPropertiesFamilyPacket))]
+    [XmlInclude(typeof(CoarseLocationUpdatePacket))]
+    [XmlInclude(typeof(CrossedRegionPacket))]
+    [XmlInclude(typeof(ConfirmEnableSimulatorPacket))]
+    [XmlInclude(typeof(ObjectPropertiesPacket))]
+    [XmlInclude(typeof(ObjectPropertiesFamilyPacket))]
+    [XmlInclude(typeof(ParcelPropertiesRequestPacket))]
+    [XmlInclude(typeof(GestureUpdatePacket))]
+    [XmlInclude(typeof(AttachedSoundPacket))]
+    [XmlInclude(typeof(AttachedSoundGainChangePacket))]
+    [XmlInclude(typeof(AttachedSoundCutoffRadiusPacket))]
+    [XmlInclude(typeof(PreloadSoundPacket))]
+    [XmlInclude(typeof(ViewerEffectPacket))]
+    [XmlInclude(typeof(SetSunPhasePacket))]
+    [XmlInclude(typeof(StartPingCheckPacket))]
+    [XmlInclude(typeof(CompletePingCheckPacket))]
+    [XmlInclude(typeof(AgentUpdatePacket))]
+    [XmlInclude(typeof(AgentAnimationPacket))]
+    [XmlInclude(typeof(AgentRequestSitPacket))]
+    [XmlInclude(typeof(AgentSitPacket))]
+    [XmlInclude(typeof(RequestImagePacket))]
+    [XmlInclude(typeof(ImageDataPacket))]
+    [XmlInclude(typeof(ImagePacketPacket))]
+    [XmlInclude(typeof(LayerDataPacket))]
+    [XmlInclude(typeof(ObjectUpdatePacket))]
+    [XmlInclude(typeof(ObjectUpdateCompressedPacket))]
+    [XmlInclude(typeof(ObjectUpdateCachedPacket))]
+    [XmlInclude(typeof(ImprovedTerseObjectUpdatePacket))]
+    [XmlInclude(typeof(KillObjectPacket))]
+    [XmlInclude(typeof(AgentToNewRegionPacket))]
+    [XmlInclude(typeof(TransferPacketPacket))]
+    [XmlInclude(typeof(SendXferPacketPacket))]
+    [XmlInclude(typeof(ConfirmXferPacketPacket))]
+    [XmlInclude(typeof(AvatarAnimationPacket))]
+    [XmlInclude(typeof(AvatarSitResponsePacket))]
+    [XmlInclude(typeof(CameraConstraintPacket))]
+    [XmlInclude(typeof(ParcelPropertiesPacket))]
+    [XmlInclude(typeof(ChildAgentUpdatePacket))]
+    [XmlInclude(typeof(ChildAgentAlivePacket))]
+    [XmlInclude(typeof(ChildAgentPositionUpdatePacket))]
+    [XmlInclude(typeof(SoundTriggerPacket))]
     public abstract class Packet
     {
         public abstract Header Header { get; set; }
@@ -908,6 +1249,11 @@
 
         public abstract byte[] ToBytes();
 
+        public void ToXml(XmlWriter xmlWriter)
+        {
+            XmlSerializer serializer = new XmlSerializer(typeof(Packet));
+            serializer.Serialize(xmlWriter, this);
+        }
         public static PacketType GetType(ushort id, PacketFrequency frequency)
         {
             switch (frequency)
@@ -916,57 +1262,23 @@
                     switch (id)
                     {
                         case 1: return PacketType.TestMessage;
-                        case 2: return PacketType.AddCircuitCode;
                         case 3: return PacketType.UseCircuitCode;
                         case 4: return PacketType.LogControl;
-                        case 5: return PacketType.RelayLogControl;
                         case 6: return PacketType.LogMessages;
-                        case 7: return PacketType.SimulatorAssign;
-                        case 8: return PacketType.SpaceServerSimulatorTimeMessage;
-                        case 9: return PacketType.AvatarTextureUpdate;
-                        case 10: return PacketType.SimulatorMapUpdate;
-                        case 11: return PacketType.SimulatorSetMap;
-                        case 12: return PacketType.SubscribeLoad;
-                        case 13: return PacketType.UnsubscribeLoad;
-                        case 14: return PacketType.SimulatorStart;
-                        case 15: return PacketType.SimulatorReady;
                         case 16: return PacketType.TelehubInfo;
-                        case 17: return PacketType.SimulatorPresentAtLocation;
-                        case 18: return PacketType.SimulatorLoad;
-                        case 19: return PacketType.SimulatorShutdownRequest;
-                        case 20: return PacketType.RegionPresenceRequestByRegionID;
-                        case 21: return PacketType.RegionPresenceRequestByHandle;
-                        case 22: return PacketType.RegionPresenceResponse;
-                        case 23: return PacketType.RecordAgentPresence;
-                        case 24: return PacketType.EraseAgentPresence;
-                        case 25: return PacketType.AgentPresenceRequest;
-                        case 26: return PacketType.AgentPresenceResponse;
-                        case 27: return PacketType.UpdateSimulator;
-                        case 28: return PacketType.TrackAgentSession;
-                        case 29: return PacketType.ClearAgentSessions;
-                        case 30: return PacketType.LogDwellTime;
-                        case 31: return PacketType.FeatureDisabled;
-                        case 32: return PacketType.LogFailedMoneyTransaction;
-                        case 33: return PacketType.UserReportInternal;
-                        case 34: return PacketType.SetSimStatusInDatabase;
-                        case 35: return PacketType.SetSimPresenceInDatabase;
                         case 36: return PacketType.EconomyDataRequest;
                         case 37: return PacketType.EconomyData;
                         case 38: return PacketType.AvatarPickerRequest;
-                        case 39: return PacketType.AvatarPickerRequestBackend;
                         case 40: return PacketType.AvatarPickerReply;
                         case 41: return PacketType.PlacesQuery;
                         case 42: return PacketType.PlacesReply;
                         case 43: return PacketType.DirFindQuery;
-                        case 44: return PacketType.DirFindQueryBackend;
                         case 45: return PacketType.DirPlacesQuery;
-                        case 46: return PacketType.DirPlacesQueryBackend;
                         case 47: return PacketType.DirPlacesReply;
                         case 48: return PacketType.DirPeopleReply;
                         case 49: return PacketType.DirEventsReply;
                         case 50: return PacketType.DirGroupsReply;
                         case 51: return PacketType.DirClassifiedQuery;
-                        case 52: return PacketType.DirClassifiedQueryBackend;
                         case 53: return PacketType.DirClassifiedReply;
                         case 54: return PacketType.AvatarClassifiedReply;
                         case 55: return PacketType.ClassifiedInfoRequest;
@@ -975,39 +1287,28 @@
                         case 58: return PacketType.ClassifiedDelete;
                         case 59: return PacketType.ClassifiedGodDelete;
                         case 60: return PacketType.DirPicksQuery;
-                        case 61: return PacketType.DirPicksQueryBackend;
                         case 62: return PacketType.DirPicksReply;
                         case 63: return PacketType.DirLandQuery;
-                        case 64: return PacketType.DirLandQueryBackend;
                         case 65: return PacketType.DirLandReply;
                         case 66: return PacketType.DirPopularQuery;
-                        case 67: return PacketType.DirPopularQueryBackend;
                         case 68: return PacketType.DirPopularReply;
                         case 69: return PacketType.ParcelInfoRequest;
                         case 70: return PacketType.ParcelInfoReply;
                         case 71: return PacketType.ParcelObjectOwnersRequest;
-                        case 72: return PacketType.OnlineStatusRequest;
-                        case 73: return PacketType.OnlineStatusReply;
                         case 74: return PacketType.ParcelObjectOwnersReply;
                         case 75: return PacketType.GroupNoticesListRequest;
                         case 76: return PacketType.GroupNoticesListReply;
                         case 77: return PacketType.GroupNoticeRequest;
-                        case 78: return PacketType.GroupNoticeAdd;
                         case 79: return PacketType.GroupNoticeDelete;
                         case 80: return PacketType.TeleportRequest;
                         case 81: return PacketType.TeleportLocationRequest;
                         case 82: return PacketType.TeleportLocal;
                         case 83: return PacketType.TeleportLandmarkRequest;
                         case 84: return PacketType.TeleportProgress;
-                        case 85: return PacketType.DataHomeLocationRequest;
-                        case 86: return PacketType.DataHomeLocationReply;
-                        case 87: return PacketType.SpaceLocationTeleportRequest;
-                        case 88: return PacketType.SpaceLocationTeleportReply;
                         case 89: return PacketType.TeleportFinish;
                         case 90: return PacketType.StartLure;
                         case 91: return PacketType.TeleportLureRequest;
                         case 92: return PacketType.TeleportCancel;
-                        case 93: return PacketType.CompleteLure;
                         case 94: return PacketType.TeleportStart;
                         case 95: return PacketType.TeleportFailed;
                         case 96: return PacketType.LeaderBoardRequest;
@@ -1086,10 +1387,7 @@
                         case 169: return PacketType.RequestRegionInfo;
                         case 170: return PacketType.RegionInfo;
                         case 171: return PacketType.GodUpdateRegionInfo;
-                        case 172: return PacketType.NearestLandingRegionRequest;
-                        case 173: return PacketType.NearestLandingRegionReply;
                         case 174: return PacketType.NearestLandingRegionUpdated;
-                        case 175: return PacketType.TeleportLandingStatusChanged;
                         case 176: return PacketType.RegionHandshake;
                         case 177: return PacketType.RegionHandshakeReply;
                         case 178: return PacketType.SimulatorViewerTimeMessage;
@@ -1110,11 +1408,9 @@
                         case 193: return PacketType.KickUser;
                         case 194: return PacketType.KickUserAck;
                         case 195: return PacketType.GodKickUser;
-                        case 196: return PacketType.SystemKickUser;
                         case 197: return PacketType.EjectUser;
                         case 198: return PacketType.FreezeUser;
                         case 199: return PacketType.AvatarPropertiesRequest;
-                        case 200: return PacketType.AvatarPropertiesRequestBackend;
                         case 201: return PacketType.AvatarPropertiesReply;
                         case 202: return PacketType.AvatarInterestsReply;
                         case 203: return PacketType.AvatarGroupsReply;
@@ -1166,42 +1462,23 @@
                         case 249: return PacketType.ParcelAccessListUpdate;
                         case 250: return PacketType.ParcelDwellRequest;
                         case 251: return PacketType.ParcelDwellReply;
-                        case 252: return PacketType.RequestParcelTransfer;
-                        case 253: return PacketType.UpdateParcel;
-                        case 254: return PacketType.RemoveParcel;
-                        case 255: return PacketType.MergeParcel;
-                        case 256: return PacketType.LogParcelChanges;
-                        case 257: return PacketType.CheckParcelSales;
-                        case 258: return PacketType.ParcelSales;
                         case 259: return PacketType.ParcelGodMarkAsContent;
                         case 260: return PacketType.ParcelGodReserveForNewbie;
                         case 261: return PacketType.ViewerStartAuction;
-                        case 262: return PacketType.StartAuction;
-                        case 263: return PacketType.ConfirmAuctionStart;
-                        case 264: return PacketType.CompleteAuction;
-                        case 265: return PacketType.CancelAuction;
-                        case 266: return PacketType.CheckParcelAuctions;
-                        case 267: return PacketType.ParcelAuctions;
                         case 268: return PacketType.UUIDNameRequest;
                         case 269: return PacketType.UUIDNameReply;
                         case 270: return PacketType.UUIDGroupNameRequest;
                         case 271: return PacketType.UUIDGroupNameReply;
-                        case 272: return PacketType.ChatPass;
                         case 273: return PacketType.ChildAgentDying;
                         case 274: return PacketType.ChildAgentUnknown;
-                        case 275: return PacketType.KillChildAgents;
                         case 276: return PacketType.GetScriptRunning;
                         case 277: return PacketType.ScriptRunningReply;
                         case 278: return PacketType.SetScriptRunning;
                         case 279: return PacketType.ScriptReset;
-                        case 280: return PacketType.ScriptSensorRequest;
-                        case 281: return PacketType.ScriptSensorReply;
                         case 282: return PacketType.CompleteAgentMovement;
                         case 283: return PacketType.AgentMovementComplete;
-                        case 284: return PacketType.LogLogin;
                         case 285: return PacketType.ConnectAgentToUserserver;
                         case 286: return PacketType.ConnectToUserserver;
-                        case 287: return PacketType.DataServerLogout;
                         case 288: return PacketType.LogoutRequest;
                         case 289: return PacketType.FinalizeLogout;
                         case 290: return PacketType.LogoutReply;
@@ -1249,8 +1526,6 @@
                         case 332: return PacketType.RezObject;
                         case 333: return PacketType.RezObjectFromNotecard;
                         case 334: return PacketType.DeclineInventory;
-                        case 335: return PacketType.TransferInventory;
-                        case 336: return PacketType.TransferInventoryAck;
                         case 337: return PacketType.RequestFriendship;
                         case 338: return PacketType.AcceptFriendship;
                         case 339: return PacketType.DeclineFriendship;
@@ -1262,13 +1537,9 @@
                         case 345: return PacketType.RezScript;
                         case 346: return PacketType.CreateInventoryItem;
                         case 347: return PacketType.CreateLandmarkForEvent;
-                        case 348: return PacketType.EventLocationRequest;
-                        case 349: return PacketType.EventLocationReply;
                         case 350: return PacketType.RegionHandleRequest;
                         case 351: return PacketType.RegionIDAndHandleReply;
                         case 352: return PacketType.MoneyTransferRequest;
-                        case 353: return PacketType.MoneyTransferBackend;
-                        case 354: return PacketType.BulkMoneyTransfer;
                         case 355: return PacketType.AdjustBalance;
                         case 356: return PacketType.MoneyBalanceRequest;
                         case 357: return PacketType.MoneyBalanceReply;
@@ -1291,24 +1562,11 @@
                         case 374: return PacketType.OnlineNotification;
                         case 375: return PacketType.OfflineNotification;
                         case 376: return PacketType.SetStartLocationRequest;
-                        case 377: return PacketType.SetStartLocation;
-                        case 378: return PacketType.NetTest;
-                        case 379: return PacketType.SetCPURatio;
-                        case 380: return PacketType.SimCrashed;
-                        case 381: return PacketType.NameValuePair;
-                        case 382: return PacketType.RemoveNameValuePair;
-                        case 383: return PacketType.GetNameValuePair;
-                        case 384: return PacketType.UpdateAttachment;
-                        case 385: return PacketType.RemoveAttachment;
                         case 386: return PacketType.AssetUploadRequest;
                         case 387: return PacketType.AssetUploadComplete;
                         case 388: return PacketType.ReputationAgentAssign;
                         case 389: return PacketType.ReputationIndividualRequest;
                         case 390: return PacketType.ReputationIndividualReply;
-                        case 391: return PacketType.EmailMessageRequest;
-                        case 392: return PacketType.EmailMessageReply;
-                        case 393: return PacketType.ScriptDataRequest;
-                        case 394: return PacketType.ScriptDataReply;
                         case 395: return PacketType.CreateGroupRequest;
                         case 396: return PacketType.CreateGroupReply;
                         case 397: return PacketType.UpdateGroupInfo;
@@ -1320,7 +1578,6 @@
                         case 403: return PacketType.LeaveGroupRequest;
                         case 404: return PacketType.LeaveGroupReply;
                         case 405: return PacketType.InviteGroupRequest;
-                        case 406: return PacketType.InviteGroupResponse;
                         case 407: return PacketType.GroupProfileRequest;
                         case 408: return PacketType.GroupProfileReply;
                         case 409: return PacketType.GroupAccountSummaryRequest;
@@ -1335,7 +1592,6 @@
                         case 418: return PacketType.GroupVoteHistoryItemReply;
                         case 419: return PacketType.StartGroupProposal;
                         case 420: return PacketType.GroupProposalBallot;
-                        case 421: return PacketType.TallyVotes;
                         case 422: return PacketType.GroupMembersRequest;
                         case 423: return PacketType.GroupMembersReply;
                         case 424: return PacketType.ActivateGroup;
@@ -1361,7 +1617,6 @@
                         case 444: return PacketType.GroupDataUpdate;
                         case 445: return PacketType.AgentGroupDataUpdate;
                         case 446: return PacketType.AgentDropGroup;
-                        case 447: return PacketType.LogTextMessage;
                         case 448: return PacketType.CreateTrustedCircuit;
                         case 449: return PacketType.DenyTrustedCircuit;
                         case 450: return PacketType.RequestTrustedCircuit;
@@ -1373,15 +1628,7 @@
                         case 456: return PacketType.UserInfoReply;
                         case 457: return PacketType.UpdateUserInfo;
                         case 458: return PacketType.GodExpungeUser;
-                        case 459: return PacketType.StartExpungeProcess;
-                        case 460: return PacketType.StartExpungeProcessAck;
-                        case 461: return PacketType.StartParcelRename;
-                        case 462: return PacketType.StartParcelRenameAck;
-                        case 463: return PacketType.BulkParcelRename;
-                        case 464: return PacketType.ParcelRename;
-                        case 465: return PacketType.StartParcelRemove;
                         case 466: return PacketType.StartParcelRemoveAck;
-                        case 467: return PacketType.BulkParcelRemove;
                         case 468: return PacketType.InitiateUpload;
                         case 469: return PacketType.InitiateDownload;
                         case 470: return PacketType.SystemMessage;
@@ -1393,15 +1640,6 @@
                         case 476: return PacketType.MapItemRequest;
                         case 477: return PacketType.MapItemReply;
                         case 478: return PacketType.SendPostcard;
-                        case 479: return PacketType.RpcChannelRequest;
-                        case 480: return PacketType.RpcChannelReply;
-                        case 481: return PacketType.RpcScriptRequestInbound;
-                        case 482: return PacketType.RpcScriptRequestInboundForward;
-                        case 483: return PacketType.RpcScriptReplyInbound;
-                        case 484: return PacketType.MailTaskSimRequest;
-                        case 485: return PacketType.MailTaskSimReply;
-                        case 486: return PacketType.ScriptMailRegistration;
-                        case 487: return PacketType.ParcelMediaCommandMessage;
                         case 488: return PacketType.ParcelMediaUpdate;
                         case 489: return PacketType.LandStatRequest;
                         case 490: return PacketType.LandStatReply;
@@ -1416,7 +1654,6 @@
                 case PacketFrequency.Medium:
                     switch (id)
                     {
-                        case 1: return PacketType.ClosestSimulator;
                         case 2: return PacketType.ObjectAdd;
                         case 3: return PacketType.MultipleObjectUpdate;
                         case 4: return PacketType.RequestMultipleObjects;
@@ -1428,13 +1665,11 @@
                         case 10: return PacketType.ObjectProperties;
                         case 11: return PacketType.ObjectPropertiesFamily;
                         case 12: return PacketType.ParcelPropertiesRequest;
-                        case 13: return PacketType.SimStatus;
                         case 14: return PacketType.GestureUpdate;
                         case 15: return PacketType.AttachedSound;
                         case 16: return PacketType.AttachedSoundGainChange;
                         case 17: return PacketType.AttachedSoundCutoffRadius;
                         case 18: return PacketType.PreloadSound;
-                        case 19: return PacketType.InternalScriptMail;
                         case 20: return PacketType.ViewerEffect;
                         case 21: return PacketType.SetSunPhase;
                     }
@@ -1444,7 +1679,6 @@
                     {
                         case 1: return PacketType.StartPingCheck;
                         case 2: return PacketType.CompletePingCheck;
-                        case 3: return PacketType.NeighborList;
                         case 4: return PacketType.AgentUpdate;
                         case 5: return PacketType.AgentAnimation;
                         case 6: return PacketType.AgentRequestSit;
@@ -1466,12 +1700,9 @@
                         case 22: return PacketType.AvatarSitResponse;
                         case 23: return PacketType.CameraConstraint;
                         case 24: return PacketType.ParcelProperties;
-                        case 25: return PacketType.EdgeDataPacket;
                         case 26: return PacketType.ChildAgentUpdate;
                         case 27: return PacketType.ChildAgentAlive;
                         case 28: return PacketType.ChildAgentPositionUpdate;
-                        case 29: return PacketType.PassObject;
-                        case 30: return PacketType.AtomicPassObject;
                         case 31: return PacketType.SoundTrigger;
                     }
                     break;
@@ -1499,57 +1730,23 @@
                     switch (id)
                     {
                         case 1: return new TestMessagePacket(header, bytes, ref i);
-                        case 2: return new AddCircuitCodePacket(header, bytes, ref i);
                         case 3: return new UseCircuitCodePacket(header, bytes, ref i);
                         case 4: return new LogControlPacket(header, bytes, ref i);
-                        case 5: return new RelayLogControlPacket(header, bytes, ref i);
                         case 6: return new LogMessagesPacket(header, bytes, ref i);
-                        case 7: return new SimulatorAssignPacket(header, bytes, ref i);
-                        case 8: return new SpaceServerSimulatorTimeMessagePacket(header, bytes, ref i);
-                        case 9: return new AvatarTextureUpdatePacket(header, bytes, ref i);
-                        case 10: return new SimulatorMapUpdatePacket(header, bytes, ref i);
-                        case 11: return new SimulatorSetMapPacket(header, bytes, ref i);
-                        case 12: return new SubscribeLoadPacket(header, bytes, ref i);
-                        case 13: return new UnsubscribeLoadPacket(header, bytes, ref i);
-                        case 14: return new SimulatorStartPacket(header, bytes, ref i);
-                        case 15: return new SimulatorReadyPacket(header, bytes, ref i);
                         case 16: return new TelehubInfoPacket(header, bytes, ref i);
-                        case 17: return new SimulatorPresentAtLocationPacket(header, bytes, ref i);
-                        case 18: return new SimulatorLoadPacket(header, bytes, ref i);
-                        case 19: return new SimulatorShutdownRequestPacket(header, bytes, ref i);
-                        case 20: return new RegionPresenceRequestByRegionIDPacket(header, bytes, ref i);
-                        case 21: return new RegionPresenceRequestByHandlePacket(header, bytes, ref i);
-                        case 22: return new RegionPresenceResponsePacket(header, bytes, ref i);
-                        case 23: return new RecordAgentPresencePacket(header, bytes, ref i);
-                        case 24: return new EraseAgentPresencePacket(header, bytes, ref i);
-                        case 25: return new AgentPresenceRequestPacket(header, bytes, ref i);
-                        case 26: return new AgentPresenceResponsePacket(header, bytes, ref i);
-                        case 27: return new UpdateSimulatorPacket(header, bytes, ref i);
-                        case 28: return new TrackAgentSessionPacket(header, bytes, ref i);
-                        case 29: return new ClearAgentSessionsPacket(header, bytes, ref i);
-                        case 30: return new LogDwellTimePacket(header, bytes, ref i);
-                        case 31: return new FeatureDisabledPacket(header, bytes, ref i);
-                        case 32: return new LogFailedMoneyTransactionPacket(header, bytes, ref i);
-                        case 33: return new UserReportInternalPacket(header, bytes, ref i);
-                        case 34: return new SetSimStatusInDatabasePacket(header, bytes, ref i);
-                        case 35: return new SetSimPresenceInDatabasePacket(header, bytes, ref i);
                         case 36: return new EconomyDataRequestPacket(header, bytes, ref i);
                         case 37: return new EconomyDataPacket(header, bytes, ref i);
                         case 38: return new AvatarPickerRequestPacket(header, bytes, ref i);
-                        case 39: return new AvatarPickerRequestBackendPacket(header, bytes, ref i);
                         case 40: return new AvatarPickerReplyPacket(header, bytes, ref i);
                         case 41: return new PlacesQueryPacket(header, bytes, ref i);
                         case 42: return new PlacesReplyPacket(header, bytes, ref i);
                         case 43: return new DirFindQueryPacket(header, bytes, ref i);
-                        case 44: return new DirFindQueryBackendPacket(header, bytes, ref i);
                         case 45: return new DirPlacesQueryPacket(header, bytes, ref i);
-                        case 46: return new DirPlacesQueryBackendPacket(header, bytes, ref i);
                         case 47: return new DirPlacesReplyPacket(header, bytes, ref i);
                         case 48: return new DirPeopleReplyPacket(header, bytes, ref i);
                         case 49: return new DirEventsReplyPacket(header, bytes, ref i);
                         case 50: return new DirGroupsReplyPacket(header, bytes, ref i);
                         case 51: return new DirClassifiedQueryPacket(header, bytes, ref i);
-                        case 52: return new DirClassifiedQueryBackendPacket(header, bytes, ref i);
                         case 53: return new DirClassifiedReplyPacket(header, bytes, ref i);
                         case 54: return new AvatarClassifiedReplyPacket(header, bytes, ref i);
                         case 55: return new ClassifiedInfoRequestPacket(header, bytes, ref i);
@@ -1558,39 +1755,28 @@
                         case 58: return new ClassifiedDeletePacket(header, bytes, ref i);
                         case 59: return new ClassifiedGodDeletePacket(header, bytes, ref i);
                         case 60: return new DirPicksQueryPacket(header, bytes, ref i);
-                        case 61: return new DirPicksQueryBackendPacket(header, bytes, ref i);
                         case 62: return new DirPicksReplyPacket(header, bytes, ref i);
                         case 63: return new DirLandQueryPacket(header, bytes, ref i);
-                        case 64: return new DirLandQueryBackendPacket(header, bytes, ref i);
                         case 65: return new DirLandReplyPacket(header, bytes, ref i);
                         case 66: return new DirPopularQueryPacket(header, bytes, ref i);
-                        case 67: return new DirPopularQueryBackendPacket(header, bytes, ref i);
                         case 68: return new DirPopularReplyPacket(header, bytes, ref i);
                         case 69: return new ParcelInfoRequestPacket(header, bytes, ref i);
                         case 70: return new ParcelInfoReplyPacket(header, bytes, ref i);
                         case 71: return new ParcelObjectOwnersRequestPacket(header, bytes, ref i);
-                        case 72: return new OnlineStatusRequestPacket(header, bytes, ref i);
-                        case 73: return new OnlineStatusReplyPacket(header, bytes, ref i);
                         case 74: return new ParcelObjectOwnersReplyPacket(header, bytes, ref i);
                         case 75: return new GroupNoticesListRequestPacket(header, bytes, ref i);
                         case 76: return new GroupNoticesListReplyPacket(header, bytes, ref i);
                         case 77: return new GroupNoticeRequestPacket(header, bytes, ref i);
-                        case 78: return new GroupNoticeAddPacket(header, bytes, ref i);
                         case 79: return new GroupNoticeDeletePacket(header, bytes, ref i);
                         case 80: return new TeleportRequestPacket(header, bytes, ref i);
                         case 81: return new TeleportLocationRequestPacket(header, bytes, ref i);
                         case 82: return new TeleportLocalPacket(header, bytes, ref i);
                         case 83: return new TeleportLandmarkRequestPacket(header, bytes, ref i);
                         case 84: return new TeleportProgressPacket(header, bytes, ref i);
-                        case 85: return new DataHomeLocationRequestPacket(header, bytes, ref i);
-                        case 86: return new DataHomeLocationReplyPacket(header, bytes, ref i);
-                        case 87: return new SpaceLocationTeleportRequestPacket(header, bytes, ref i);
-                        case 88: return new SpaceLocationTeleportReplyPacket(header, bytes, ref i);
                         case 89: return new TeleportFinishPacket(header, bytes, ref i);
                         case 90: return new StartLurePacket(header, bytes, ref i);
                         case 91: return new TeleportLureRequestPacket(header, bytes, ref i);
                         case 92: return new TeleportCancelPacket(header, bytes, ref i);
-                        case 93: return new CompleteLurePacket(header, bytes, ref i);
                         case 94: return new TeleportStartPacket(header, bytes, ref i);
                         case 95: return new TeleportFailedPacket(header, bytes, ref i);
                         case 96: return new LeaderBoardRequestPacket(header, bytes, ref i);
@@ -1669,10 +1855,7 @@
                         case 169: return new RequestRegionInfoPacket(header, bytes, ref i);
                         case 170: return new RegionInfoPacket(header, bytes, ref i);
                         case 171: return new GodUpdateRegionInfoPacket(header, bytes, ref i);
-                        case 172: return new NearestLandingRegionRequestPacket(header, bytes, ref i);
-                        case 173: return new NearestLandingRegionReplyPacket(header, bytes, ref i);
                         case 174: return new NearestLandingRegionUpdatedPacket(header, bytes, ref i);
-                        case 175: return new TeleportLandingStatusChangedPacket(header, bytes, ref i);
                         case 176: return new RegionHandshakePacket(header, bytes, ref i);
                         case 177: return new RegionHandshakeReplyPacket(header, bytes, ref i);
                         case 178: return new SimulatorViewerTimeMessagePacket(header, bytes, ref i);
@@ -1693,11 +1876,9 @@
                         case 193: return new KickUserPacket(header, bytes, ref i);
                         case 194: return new KickUserAckPacket(header, bytes, ref i);
                         case 195: return new GodKickUserPacket(header, bytes, ref i);
-                        case 196: return new SystemKickUserPacket(header, bytes, ref i);
                         case 197: return new EjectUserPacket(header, bytes, ref i);
                         case 198: return new FreezeUserPacket(header, bytes, ref i);
                         case 199: return new AvatarPropertiesRequestPacket(header, bytes, ref i);
-                        case 200: return new AvatarPropertiesRequestBackendPacket(header, bytes, ref i);
                         case 201: return new AvatarPropertiesReplyPacket(header, bytes, ref i);
                         case 202: return new AvatarInterestsReplyPacket(header, bytes, ref i);
                         case 203: return new AvatarGroupsReplyPacket(header, bytes, ref i);
@@ -1749,42 +1930,23 @@
                         case 249: return new ParcelAccessListUpdatePacket(header, bytes, ref i);
                         case 250: return new ParcelDwellRequestPacket(header, bytes, ref i);
                         case 251: return new ParcelDwellReplyPacket(header, bytes, ref i);
-                        case 252: return new RequestParcelTransferPacket(header, bytes, ref i);
-                        case 253: return new UpdateParcelPacket(header, bytes, ref i);
-                        case 254: return new RemoveParcelPacket(header, bytes, ref i);
-                        case 255: return new MergeParcelPacket(header, bytes, ref i);
-                        case 256: return new LogParcelChangesPacket(header, bytes, ref i);
-                        case 257: return new CheckParcelSalesPacket(header, bytes, ref i);
-                        case 258: return new ParcelSalesPacket(header, bytes, ref i);
                         case 259: return new ParcelGodMarkAsContentPacket(header, bytes, ref i);
                         case 260: return new ParcelGodReserveForNewbiePacket(header, bytes, ref i);
                         case 261: return new ViewerStartAuctionPacket(header, bytes, ref i);
-                        case 262: return new StartAuctionPacket(header, bytes, ref i);
-                        case 263: return new ConfirmAuctionStartPacket(header, bytes, ref i);
-                        case 264: return new CompleteAuctionPacket(header, bytes, ref i);
-                        case 265: return new CancelAuctionPacket(header, bytes, ref i);
-                        case 266: return new CheckParcelAuctionsPacket(header, bytes, ref i);
-                        case 267: return new ParcelAuctionsPacket(header, bytes, ref i);
                         case 268: return new UUIDNameRequestPacket(header, bytes, ref i);
                         case 269: return new UUIDNameReplyPacket(header, bytes, ref i);
                         case 270: return new UUIDGroupNameRequestPacket(header, bytes, ref i);
                         case 271: return new UUIDGroupNameReplyPacket(header, bytes, ref i);
-                        case 272: return new ChatPassPacket(header, bytes, ref i);
                         case 273: return new ChildAgentDyingPacket(header, bytes, ref i);
                         case 274: return new ChildAgentUnknownPacket(header, bytes, ref i);
-                        case 275: return new KillChildAgentsPacket(header, bytes, ref i);
                         case 276: return new GetScriptRunningPacket(header, bytes, ref i);
                         case 277: return new ScriptRunningReplyPacket(header, bytes, ref i);
                         case 278: return new SetScriptRunningPacket(header, bytes, ref i);
                         case 279: return new ScriptResetPacket(header, bytes, ref i);
-                        case 280: return new ScriptSensorRequestPacket(header, bytes, ref i);
-                        case 281: return new ScriptSensorReplyPacket(header, bytes, ref i);
                         case 282: return new CompleteAgentMovementPacket(header, bytes, ref i);
                         case 283: return new AgentMovementCompletePacket(header, bytes, ref i);
-                        case 284: return new LogLoginPacket(header, bytes, ref i);
                         case 285: return new ConnectAgentToUserserverPacket(header, bytes, ref i);
                         case 286: return new ConnectToUserserverPacket(header, bytes, ref i);
-                        case 287: return new DataServerLogoutPacket(header, bytes, ref i);
                         case 288: return new LogoutRequestPacket(header, bytes, ref i);
                         case 289: return new FinalizeLogoutPacket(header, bytes, ref i);
                         case 290: return new LogoutReplyPacket(header, bytes, ref i);
@@ -1832,8 +1994,6 @@
                         case 332: return new RezObjectPacket(header, bytes, ref i);
                         case 333: return new RezObjectFromNotecardPacket(header, bytes, ref i);
                         case 334: return new DeclineInventoryPacket(header, bytes, ref i);
-                        case 335: return new TransferInventoryPacket(header, bytes, ref i);
-                        case 336: return new TransferInventoryAckPacket(header, bytes, ref i);
                         case 337: return new RequestFriendshipPacket(header, bytes, ref i);
                         case 338: return new AcceptFriendshipPacket(header, bytes, ref i);
                         case 339: return new DeclineFriendshipPacket(header, bytes, ref i);
@@ -1845,13 +2005,9 @@
                         case 345: return new RezScriptPacket(header, bytes, ref i);
                         case 346: return new CreateInventoryItemPacket(header, bytes, ref i);
                         case 347: return new CreateLandmarkForEventPacket(header, bytes, ref i);
-                        case 348: return new EventLocationRequestPacket(header, bytes, ref i);
-                        case 349: return new EventLocationReplyPacket(header, bytes, ref i);
                         case 350: return new RegionHandleRequestPacket(header, bytes, ref i);
                         case 351: return new RegionIDAndHandleReplyPacket(header, bytes, ref i);
                         case 352: return new MoneyTransferRequestPacket(header, bytes, ref i);
-                        case 353: return new MoneyTransferBackendPacket(header, bytes, ref i);
-                        case 354: return new BulkMoneyTransferPacket(header, bytes, ref i);
                         case 355: return new AdjustBalancePacket(header, bytes, ref i);
                         case 356: return new MoneyBalanceRequestPacket(header, bytes, ref i);
                         case 357: return new MoneyBalanceReplyPacket(header, bytes, ref i);
@@ -1874,24 +2030,11 @@
                         case 374: return new OnlineNotificationPacket(header, bytes, ref i);
                         case 375: return new OfflineNotificationPacket(header, bytes, ref i);
                         case 376: return new SetStartLocationRequestPacket(header, bytes, ref i);
-                        case 377: return new SetStartLocationPacket(header, bytes, ref i);
-                        case 378: return new NetTestPacket(header, bytes, ref i);
-                        case 379: return new SetCPURatioPacket(header, bytes, ref i);
-                        case 380: return new SimCrashedPacket(header, bytes, ref i);
-                        case 381: return new NameValuePairPacket(header, bytes, ref i);
-                        case 382: return new RemoveNameValuePairPacket(header, bytes, ref i);
-                        case 383: return new GetNameValuePairPacket(header, bytes, ref i);
-                        case 384: return new UpdateAttachmentPacket(header, bytes, ref i);
-                        case 385: return new RemoveAttachmentPacket(header, bytes, ref i);
                         case 386: return new AssetUploadRequestPacket(header, bytes, ref i);
                         case 387: return new AssetUploadCompletePacket(header, bytes, ref i);
                         case 388: return new ReputationAgentAssignPacket(header, bytes, ref i);
                         case 389: return new ReputationIndividualRequestPacket(header, bytes, ref i);
                         case 390: return new ReputationIndividualReplyPacket(header, bytes, ref i);
-                        case 391: return new EmailMessageRequestPacket(header, bytes, ref i);
-                        case 392: return new EmailMessageReplyPacket(header, bytes, ref i);
-                        case 393: return new ScriptDataRequestPacket(header, bytes, ref i);
-                        case 394: return new ScriptDataReplyPacket(header, bytes, ref i);
                         case 395: return new CreateGroupRequestPacket(header, bytes, ref i);
                         case 396: return new CreateGroupReplyPacket(header, bytes, ref i);
                         case 397: return new UpdateGroupInfoPacket(header, bytes, ref i);
@@ -1903,7 +2046,6 @@
                         case 403: return new LeaveGroupRequestPacket(header, bytes, ref i);
                         case 404: return new LeaveGroupReplyPacket(header, bytes, ref i);
                         case 405: return new InviteGroupRequestPacket(header, bytes, ref i);
-                        case 406: return new InviteGroupResponsePacket(header, bytes, ref i);
                         case 407: return new GroupProfileRequestPacket(header, bytes, ref i);
                         case 408: return new GroupProfileReplyPacket(header, bytes, ref i);
                         case 409: return new GroupAccountSummaryRequestPacket(header, bytes, ref i);
@@ -1918,7 +2060,6 @@
                         case 418: return new GroupVoteHistoryItemReplyPacket(header, bytes, ref i);
                         case 419: return new StartGroupProposalPacket(header, bytes, ref i);
                         case 420: return new GroupProposalBallotPacket(header, bytes, ref i);
-                        case 421: return new TallyVotesPacket(header, bytes, ref i);
                         case 422: return new GroupMembersRequestPacket(header, bytes, ref i);
                         case 423: return new GroupMembersReplyPacket(header, bytes, ref i);
                         case 424: return new ActivateGroupPacket(header, bytes, ref i);
@@ -1944,7 +2085,6 @@
                         case 444: return new GroupDataUpdatePacket(header, bytes, ref i);
                         case 445: return new AgentGroupDataUpdatePacket(header, bytes, ref i);
                         case 446: return new AgentDropGroupPacket(header, bytes, ref i);
-                        case 447: return new LogTextMessagePacket(header, bytes, ref i);
                         case 448: return new CreateTrustedCircuitPacket(header, bytes, ref i);
                         case 449: return new DenyTrustedCircuitPacket(header, bytes, ref i);
                         case 450: return new RequestTrustedCircuitPacket(header, bytes, ref i);
@@ -1956,15 +2096,7 @@
                         case 456: return new UserInfoReplyPacket(header, bytes, ref i);
                         case 457: return new UpdateUserInfoPacket(header, bytes, ref i);
                         case 458: return new GodExpungeUserPacket(header, bytes, ref i);
-                        case 459: return new StartExpungeProcessPacket(header, bytes, ref i);
-                        case 460: return new StartExpungeProcessAckPacket(header, bytes, ref i);
-                        case 461: return new StartParcelRenamePacket(header, bytes, ref i);
-                        case 462: return new StartParcelRenameAckPacket(header, bytes, ref i);
-                        case 463: return new BulkParcelRenamePacket(header, bytes, ref i);
-                        case 464: return new ParcelRenamePacket(header, bytes, ref i);
-                        case 465: return new StartParcelRemovePacket(header, bytes, ref i);
                         case 466: return new StartParcelRemoveAckPacket(header, bytes, ref i);
-                        case 467: return new BulkParcelRemovePacket(header, bytes, ref i);
                         case 468: return new InitiateUploadPacket(header, bytes, ref i);
                         case 469: return new InitiateDownloadPacket(header, bytes, ref i);
                         case 470: return new SystemMessagePacket(header, bytes, ref i);
@@ -1976,15 +2108,6 @@
                         case 476: return new MapItemRequestPacket(header, bytes, ref i);
                         case 477: return new MapItemReplyPacket(header, bytes, ref i);
                         case 478: return new SendPostcardPacket(header, bytes, ref i);
-                        case 479: return new RpcChannelRequestPacket(header, bytes, ref i);
-                        case 480: return new RpcChannelReplyPacket(header, bytes, ref i);
-                        case 481: return new RpcScriptRequestInboundPacket(header, bytes, ref i);
-                        case 482: return new RpcScriptRequestInboundForwardPacket(header, bytes, ref i);
-                        case 483: return new RpcScriptReplyInboundPacket(header, bytes, ref i);
-                        case 484: return new MailTaskSimRequestPacket(header, bytes, ref i);
-                        case 485: return new MailTaskSimReplyPacket(header, bytes, ref i);
-                        case 486: return new ScriptMailRegistrationPacket(header, bytes, ref i);
-                        case 487: return new ParcelMediaCommandMessagePacket(header, bytes, ref i);
                         case 488: return new ParcelMediaUpdatePacket(header, bytes, ref i);
                         case 489: return new LandStatRequestPacket(header, bytes, ref i);
                         case 490: return new LandStatReplyPacket(header, bytes, ref i);
@@ -2001,7 +2124,6 @@
                     id = (ushort)bytes[5];
                     switch (id)
                     {
-                        case 1: return new ClosestSimulatorPacket(header, bytes, ref i);
                         case 2: return new ObjectAddPacket(header, bytes, ref i);
                         case 3: return new MultipleObjectUpdatePacket(header, bytes, ref i);
                         case 4: return new RequestMultipleObjectsPacket(header, bytes, ref i);
@@ -2013,13 +2135,11 @@
                         case 10: return new ObjectPropertiesPacket(header, bytes, ref i);
                         case 11: return new ObjectPropertiesFamilyPacket(header, bytes, ref i);
                         case 12: return new ParcelPropertiesRequestPacket(header, bytes, ref i);
-                        case 13: return new SimStatusPacket(header, bytes, ref i);
                         case 14: return new GestureUpdatePacket(header, bytes, ref i);
                         case 15: return new AttachedSoundPacket(header, bytes, ref i);
                         case 16: return new AttachedSoundGainChangePacket(header, bytes, ref i);
                         case 17: return new AttachedSoundCutoffRadiusPacket(header, bytes, ref i);
                         case 18: return new PreloadSoundPacket(header, bytes, ref i);
-                        case 19: return new InternalScriptMailPacket(header, bytes, ref i);
                         case 20: return new ViewerEffectPacket(header, bytes, ref i);
                         case 21: return new SetSunPhasePacket(header, bytes, ref i);
                     }
@@ -2032,7 +2152,6 @@
                     {
                         case 1: return new StartPingCheckPacket(header, bytes, ref i);
                         case 2: return new CompletePingCheckPacket(header, bytes, ref i);
-                        case 3: return new NeighborListPacket(header, bytes, ref i);
                         case 4: return new AgentUpdatePacket(header, bytes, ref i);
                         case 5: return new AgentAnimationPacket(header, bytes, ref i);
                         case 6: return new AgentRequestSitPacket(header, bytes, ref i);
@@ -2054,12 +2173,9 @@
                         case 22: return new AvatarSitResponsePacket(header, bytes, ref i);
                         case 23: return new CameraConstraintPacket(header, bytes, ref i);
                         case 24: return new ParcelPropertiesPacket(header, bytes, ref i);
-                        case 25: return new EdgeDataPacketPacket(header, bytes, ref i);
                         case 26: return new ChildAgentUpdatePacket(header, bytes, ref i);
                         case 27: return new ChildAgentAlivePacket(header, bytes, ref i);
                         case 28: return new ChildAgentPositionUpdatePacket(header, bytes, ref i);
-                        case 29: return new PassObjectPacket(header, bytes, ref i);
-                        case 30: return new AtomicPassObjectPacket(header, bytes, ref i);
                         case 31: return new SoundTriggerPacket(header, bytes, ref i);
                 }
             }
@@ -2072,10 +2188,12 @@
     public class TestMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;testmessage_testblock1&quot;)]
         public class TestBlock1Block
         {
             public uint Test1;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -2107,20 +2225,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TestBlock1 --\n&quot;;
-                output += &quot;Test1: &quot; + Test1.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TestBlock1 --&quot; + Environment.NewLine;
+                output += &quot;Test1: &quot; + Test1.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;testmessage_neighborblock&quot;)]
         public class NeighborBlockBlock
         {
             public uint Test0;
             public uint Test1;
             public uint Test2;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -2162,10 +2282,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NeighborBlock --\n&quot;;
-                output += &quot;Test0: &quot; + Test0.ToString() + &quot;\n&quot;;
-                output += &quot;Test1: &quot; + Test1.ToString() + &quot;\n&quot;;
-                output += &quot;Test2: &quot; + Test2.ToString() + &quot;\n&quot;;
+                string output = &quot;-- NeighborBlock --&quot; + Environment.NewLine;
+                output += &quot;Test0: &quot; + Test0.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Test1: &quot; + Test1.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Test2: &quot; + Test2.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -2223,11 +2343,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TestMessage ---\n&quot;;
-                output += TestBlock1.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TestMessage ---&quot; + Environment.NewLine;
+                output += TestBlock1.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; 4; j++)
             {
-                output += NeighborBlock[j].ToString() + &quot;\n&quot;;
+                output += NeighborBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -2235,119 +2355,17 @@
     }
 
     /// &lt;exclude/&gt;
-    public class AddCircuitCodePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class CircuitCodeBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-            public uint Code;
-
-            public int Length
-            {
-                get
-                {
-                    return 36;
-                }
-            }
-
-            public CircuitCodeBlock() { }
-            public CircuitCodeBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    Code = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Code % 256);
-                bytes[i++] = (byte)((Code &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Code &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Code &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- CircuitCode --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Code: &quot; + Code.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AddCircuitCode; } }
-        public CircuitCodeBlock CircuitCode;
-
-        public AddCircuitCodePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 2;
-            Header.Reliable = true;
-            CircuitCode = new CircuitCodeBlock();
-        }
-
-        public AddCircuitCodePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            CircuitCode = new CircuitCodeBlock(bytes, ref i);
-        }
-
-        public AddCircuitCodePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            CircuitCode = new CircuitCodeBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += CircuitCode.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            CircuitCode.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AddCircuitCode ---\n&quot;;
-                output += CircuitCode.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class UseCircuitCodePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;usecircuitcode_circuitcode&quot;)]
         public class CircuitCodeBlock
         {
             public LLUUID ID;
             public LLUUID SessionID;
             public uint Code;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -2385,10 +2403,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- CircuitCode --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Code: &quot; + Code.ToString() + &quot;\n&quot;;
+                string output = &quot;-- CircuitCode --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Code: &quot; + Code.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -2435,8 +2453,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UseCircuitCode ---\n&quot;;
-                output += CircuitCode.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UseCircuitCode ---&quot; + Environment.NewLine;
+                output += CircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -2446,6 +2464,7 @@
     public class LogControlPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logcontrol_options&quot;)]
         public class OptionsBlock
         {
             public uint Mask;
@@ -2454,6 +2473,7 @@
             public bool Location;
             public byte Level;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -2493,12 +2513,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Options --\n&quot;;
-                output += &quot;Mask: &quot; + Mask.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;RemoteInfos: &quot; + RemoteInfos.ToString() + &quot;\n&quot;;
-                output += &quot;Location: &quot; + Location.ToString() + &quot;\n&quot;;
-                output += &quot;Level: &quot; + Level.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Options --&quot; + Environment.NewLine;
+                output += &quot;Mask: &quot; + Mask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Time: &quot; + Time.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RemoteInfos: &quot; + RemoteInfos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Location: &quot; + Location.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Level: &quot; + Level.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -2545,131 +2565,23 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LogControl ---\n&quot;;
-                output += Options.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LogControl ---&quot; + Environment.NewLine;
+                output += Options.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class RelayLogControlPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class OptionsBlock
-        {
-            public uint Mask;
-            public bool Time;
-            public bool RemoteInfos;
-            public bool Location;
-            public byte Level;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public OptionsBlock() { }
-            public OptionsBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Mask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Time = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    RemoteInfos = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    Location = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    Level = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(Mask % 256);
-                bytes[i++] = (byte)((Mask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Mask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Mask &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Time) ? 1 : 0);
-                bytes[i++] = (byte)((RemoteInfos) ? 1 : 0);
-                bytes[i++] = (byte)((Location) ? 1 : 0);
-                bytes[i++] = Level;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Options --\n&quot;;
-                output += &quot;Mask: &quot; + Mask.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;RemoteInfos: &quot; + RemoteInfos.ToString() + &quot;\n&quot;;
-                output += &quot;Location: &quot; + Location.ToString() + &quot;\n&quot;;
-                output += &quot;Level: &quot; + Level.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RelayLogControl; } }
-        public OptionsBlock Options;
-
-        public RelayLogControlPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 5;
-            Header.Reliable = true;
-            Options = new OptionsBlock();
-        }
-
-        public RelayLogControlPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Options = new OptionsBlock(bytes, ref i);
-        }
-
-        public RelayLogControlPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Options = new OptionsBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Options.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Options.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RelayLogControl ---\n&quot;;
-                output += Options.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class LogMessagesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logmessages_options&quot;)]
         public class OptionsBlock
         {
             public bool Enable;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -2698,8 +2610,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Options --\n&quot;;
-                output += &quot;Enable: &quot; + Enable.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Options --&quot; + Environment.NewLine;
+                output += &quot;Enable: &quot; + Enable.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -2746,1295 +2658,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LogMessages ---\n&quot;;
-                output += Options.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LogMessages ---&quot; + Environment.NewLine;
+                output += Options.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class SimulatorAssignPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionInfoBlock
-        {
-            public uint IP;
-            public uint SecPerDay;
-            public float MetersPerGrid;
-            public ulong UsecSinceStart;
-            public ushort Port;
-            public uint SecPerYear;
-            public int GridsPerEdge;
-            public ulong Handle;
-            public LLVector3 SunAngVelocity;
-            public LLVector3 SunDirection;
-
-            public int Length
-            {
-                get
-                {
-                    return 62;
-                }
-            }
-
-            public RegionInfoBlock() { }
-            public RegionInfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    IP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SecPerDay = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    MetersPerGrid = BitConverter.ToSingle(bytes, i); i += 4;
-                    UsecSinceStart = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    SecPerYear = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridsPerEdge = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Handle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    SunAngVelocity = new LLVector3(bytes, i); i += 12;
-                    SunDirection = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                bytes[i++] = (byte)(IP % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(SecPerDay % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 24) % 256);
-                ba = BitConverter.GetBytes(MetersPerGrid);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(UsecSinceStart % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = (byte)(SecPerYear % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridsPerEdge % 256);
-                bytes[i++] = (byte)((GridsPerEdge &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridsPerEdge &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridsPerEdge &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(Handle % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 56) % 256);
-                if(SunAngVelocity == null) { Console.WriteLine(&quot;Warning: SunAngVelocity is null, in &quot; + this.GetType()); }
-                Array.Copy(SunAngVelocity.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(SunDirection == null) { Console.WriteLine(&quot;Warning: SunDirection is null, in &quot; + this.GetType()); }
-                Array.Copy(SunDirection.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;SecPerDay: &quot; + SecPerDay.ToString() + &quot;\n&quot;;
-                output += &quot;MetersPerGrid: &quot; + MetersPerGrid.ToString() + &quot;\n&quot;;
-                output += &quot;UsecSinceStart: &quot; + UsecSinceStart.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;SecPerYear: &quot; + SecPerYear.ToString() + &quot;\n&quot;;
-                output += &quot;GridsPerEdge: &quot; + GridsPerEdge.ToString() + &quot;\n&quot;;
-                output += &quot;Handle: &quot; + Handle.ToString() + &quot;\n&quot;;
-                output += &quot;SunAngVelocity: &quot; + SunAngVelocity.ToString() + &quot;\n&quot;;
-                output += &quot;SunDirection: &quot; + SunDirection.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class NeighborBlockBlock
-        {
-            public uint IP;
-            public ushort PublicPort;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public ushort Port;
-            public byte SimAccess;
-            public uint PublicIP;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 13;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public NeighborBlockBlock() { }
-            public NeighborBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    IP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    PublicPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    SimAccess = (byte)bytes[i++];
-                    PublicIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(IP % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((PublicPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(PublicPort % 256);
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = SimAccess;
-                bytes[i++] = (byte)(PublicIP % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NeighborBlock --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;PublicPort: &quot; + PublicPort.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;PublicIP: &quot; + PublicIP.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorAssign; } }
-        public RegionInfoBlock RegionInfo;
-        public NeighborBlockBlock[] NeighborBlock;
-
-        public SimulatorAssignPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 7;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            RegionInfo = new RegionInfoBlock();
-            NeighborBlock = new NeighborBlockBlock[4];
-        }
-
-        public SimulatorAssignPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            RegionInfo = new RegionInfoBlock(bytes, ref i);
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public SimulatorAssignPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            RegionInfo = new RegionInfoBlock(bytes, ref i);
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionInfo.Length;;
-            for (int j = 0; j &lt; 4; j++) { length += NeighborBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            RegionInfo.ToBytes(bytes, ref i);
-            for (int j = 0; j &lt; 4; j++) { NeighborBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorAssign ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; 4; j++)
-            {
-                output += NeighborBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SpaceServerSimulatorTimeMessagePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TimeInfoBlock
-        {
-            public uint SecPerDay;
-            public ulong UsecSinceStart;
-            public uint SecPerYear;
-            public LLVector3 SunAngVelocity;
-            public float SunPhase;
-            public LLVector3 SunDirection;
-
-            public int Length
-            {
-                get
-                {
-                    return 44;
-                }
-            }
-
-            public TimeInfoBlock() { }
-            public TimeInfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    SecPerDay = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    UsecSinceStart = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    SecPerYear = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SunAngVelocity = new LLVector3(bytes, i); i += 12;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    SunPhase = BitConverter.ToSingle(bytes, i); i += 4;
-                    SunDirection = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                bytes[i++] = (byte)(SecPerDay % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SecPerDay &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(UsecSinceStart % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((UsecSinceStart &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)(SecPerYear % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SecPerYear &gt;&gt; 24) % 256);
-                if(SunAngVelocity == null) { Console.WriteLine(&quot;Warning: SunAngVelocity is null, in &quot; + this.GetType()); }
-                Array.Copy(SunAngVelocity.GetBytes(), 0, bytes, i, 12); i += 12;
-                ba = BitConverter.GetBytes(SunPhase);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                if(SunDirection == null) { Console.WriteLine(&quot;Warning: SunDirection is null, in &quot; + this.GetType()); }
-                Array.Copy(SunDirection.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TimeInfo --\n&quot;;
-                output += &quot;SecPerDay: &quot; + SecPerDay.ToString() + &quot;\n&quot;;
-                output += &quot;UsecSinceStart: &quot; + UsecSinceStart.ToString() + &quot;\n&quot;;
-                output += &quot;SecPerYear: &quot; + SecPerYear.ToString() + &quot;\n&quot;;
-                output += &quot;SunAngVelocity: &quot; + SunAngVelocity.ToString() + &quot;\n&quot;;
-                output += &quot;SunPhase: &quot; + SunPhase.ToString() + &quot;\n&quot;;
-                output += &quot;SunDirection: &quot; + SunDirection.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SpaceServerSimulatorTimeMessage; } }
-        public TimeInfoBlock TimeInfo;
-
-        public SpaceServerSimulatorTimeMessagePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 8;
-            Header.Reliable = true;
-            TimeInfo = new TimeInfoBlock();
-        }
-
-        public SpaceServerSimulatorTimeMessagePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            TimeInfo = new TimeInfoBlock(bytes, ref i);
-        }
-
-        public SpaceServerSimulatorTimeMessagePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TimeInfo = new TimeInfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TimeInfo.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TimeInfo.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SpaceServerSimulatorTimeMessage ---\n&quot;;
-                output += TimeInfo.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class AvatarTextureUpdatePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class WearableDataBlock
-        {
-            public byte TextureIndex;
-            private byte[] _hostname;
-            public byte[] HostName
-            {
-                get { return _hostname; }
-                set
-                {
-                    if (value == null) { _hostname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _hostname = new byte[value.Length]; Array.Copy(value, _hostname, value.Length); }
-                }
-            }
-            public LLUUID CacheID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 17;
-                    if (HostName != null) { length += 1 + HostName.Length; }
-                    return length;
-                }
-            }
-
-            public WearableDataBlock() { }
-            public WearableDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    TextureIndex = (byte)bytes[i++];
-                    length = (ushort)bytes[i++];
-                    _hostname = new byte[length];
-                    Array.Copy(bytes, i, _hostname, 0, length); i += length;
-                    CacheID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = TextureIndex;
-                if(HostName == null) { Console.WriteLine(&quot;Warning: HostName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)HostName.Length;
-                Array.Copy(HostName, 0, bytes, i, HostName.Length); i += HostName.Length;
-                if(CacheID == null) { Console.WriteLine(&quot;Warning: CacheID is null, in &quot; + this.GetType()); }
-                Array.Copy(CacheID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(HostName, &quot;HostName&quot;) + &quot;\n&quot;;
-                output += &quot;CacheID: &quot; + CacheID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class TextureDataBlock
-        {
-            public LLUUID TextureID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public TextureDataBlock() { }
-            public TextureDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TextureID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TextureID == null) { Console.WriteLine(&quot;Warning: TextureID is null, in &quot; + this.GetType()); }
-                Array.Copy(TextureID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TextureData --\n&quot;;
-                output += &quot;TextureID: &quot; + TextureID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public bool TexturesChanged;
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 17;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TexturesChanged = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((TexturesChanged) ? 1 : 0);
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;TexturesChanged: &quot; + TexturesChanged.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AvatarTextureUpdate; } }
-        public WearableDataBlock[] WearableData;
-        public TextureDataBlock[] TextureData;
-        public AgentDataBlock AgentData;
-
-        public AvatarTextureUpdatePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 9;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            WearableData = new WearableDataBlock[0];
-            TextureData = new TextureDataBlock[0];
-            AgentData = new AgentDataBlock();
-        }
-
-        public AvatarTextureUpdatePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            WearableData = new WearableDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { WearableData[j] = new WearableDataBlock(bytes, ref i); }
-            count = (int)bytes[i++];
-            TextureData = new TextureDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { TextureData[j] = new TextureDataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public AvatarTextureUpdatePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            WearableData = new WearableDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { WearableData[j] = new WearableDataBlock(bytes, ref i); }
-            count = (int)bytes[i++];
-            TextureData = new TextureDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { TextureData[j] = new TextureDataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; WearableData.Length; j++) { length += WearableData[j].Length; }
-            length++;
-            for (int j = 0; j &lt; TextureData.Length; j++) { length += TextureData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)WearableData.Length;
-            for (int j = 0; j &lt; WearableData.Length; j++) { WearableData[j].ToBytes(bytes, ref i); }
-            bytes[i++] = (byte)TextureData.Length;
-            for (int j = 0; j &lt; TextureData.Length; j++) { TextureData[j].ToBytes(bytes, ref i); }
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AvatarTextureUpdate ---\n&quot;;
-            for (int j = 0; j &lt; WearableData.Length; j++)
-            {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
-            }
-            for (int j = 0; j &lt; TextureData.Length; j++)
-            {
-                output += TextureData[j].ToString() + &quot;\n&quot;;
-            }
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorMapUpdatePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MapDataBlock
-        {
-            public uint Flags;
-
-            public int Length
-            {
-                get
-                {
-                    return 4;
-                }
-            }
-
-            public MapDataBlock() { }
-            public MapDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Flags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(Flags % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MapData --\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorMapUpdate; } }
-        public MapDataBlock MapData;
-
-        public SimulatorMapUpdatePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 10;
-            Header.Reliable = true;
-            MapData = new MapDataBlock();
-        }
-
-        public SimulatorMapUpdatePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            MapData = new MapDataBlock(bytes, ref i);
-        }
-
-        public SimulatorMapUpdatePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            MapData = new MapDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += MapData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            MapData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorMapUpdate ---\n&quot;;
-                output += MapData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorSetMapPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MapDataBlock
-        {
-            public LLUUID MapImage;
-            public int Type;
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 28;
-                }
-            }
-
-            public MapDataBlock() { }
-            public MapDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    MapImage = new LLUUID(bytes, i); i += 16;
-                    Type = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(MapImage == null) { Console.WriteLine(&quot;Warning: MapImage is null, in &quot; + this.GetType()); }
-                Array.Copy(MapImage.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Type % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MapData --\n&quot;;
-                output += &quot;MapImage: &quot; + MapImage.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorSetMap; } }
-        public MapDataBlock MapData;
-
-        public SimulatorSetMapPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 11;
-            Header.Reliable = true;
-            MapData = new MapDataBlock();
-        }
-
-        public SimulatorSetMapPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            MapData = new MapDataBlock(bytes, ref i);
-        }
-
-        public SimulatorSetMapPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            MapData = new MapDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += MapData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            MapData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorSetMap ---\n&quot;;
-                output += MapData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SubscribeLoadPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SubscribeLoad; } }
-
-        public SubscribeLoadPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 12;
-            Header.Reliable = true;
-        }
-
-        public SubscribeLoadPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public SubscribeLoadPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SubscribeLoad ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class UnsubscribeLoadPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.UnsubscribeLoad; } }
-
-        public UnsubscribeLoadPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 13;
-            Header.Reliable = true;
-        }
-
-        public UnsubscribeLoadPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public UnsubscribeLoadPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- UnsubscribeLoad ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorStartPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class PositionSuggestionBlock
-        {
-            public bool Ignore;
-            public int GridX;
-            public int GridY;
-
-            public int Length
-            {
-                get
-                {
-                    return 9;
-                }
-            }
-
-            public PositionSuggestionBlock() { }
-            public PositionSuggestionBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Ignore = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    GridX = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Ignore) ? 1 : 0);
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- PositionSuggestion --\n&quot;;
-                output += &quot;Ignore: &quot; + Ignore.ToString() + &quot;\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class ControlPortBlock
-        {
-            public ushort PublicPort;
-            public ushort Port;
-            public uint PublicIP;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public ControlPortBlock() { }
-            public ControlPortBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    PublicPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    PublicIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((PublicPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(PublicPort % 256);
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = (byte)(PublicIP % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ControlPort --\n&quot;;
-                output += &quot;PublicPort: &quot; + PublicPort.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;PublicIP: &quot; + PublicIP.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorStart; } }
-        public PositionSuggestionBlock PositionSuggestion;
-        public ControlPortBlock ControlPort;
-
-        public SimulatorStartPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 14;
-            Header.Reliable = true;
-            PositionSuggestion = new PositionSuggestionBlock();
-            ControlPort = new ControlPortBlock();
-        }
-
-        public SimulatorStartPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            PositionSuggestion = new PositionSuggestionBlock(bytes, ref i);
-            ControlPort = new ControlPortBlock(bytes, ref i);
-        }
-
-        public SimulatorStartPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            PositionSuggestion = new PositionSuggestionBlock(bytes, ref i);
-            ControlPort = new ControlPortBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += PositionSuggestion.Length;            length += ControlPort.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            PositionSuggestion.ToBytes(bytes, ref i);
-            ControlPort.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorStart ---\n&quot;;
-                output += PositionSuggestion.ToString() + &quot;\n&quot;;
-                output += ControlPort.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorReadyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TelehubBlockBlock
-        {
-            public bool HasTelehub;
-            public LLVector3 TelehubPos;
-
-            public int Length
-            {
-                get
-                {
-                    return 13;
-                }
-            }
-
-            public TelehubBlockBlock() { }
-            public TelehubBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    HasTelehub = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    TelehubPos = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((HasTelehub) ? 1 : 0);
-                if(TelehubPos == null) { Console.WriteLine(&quot;Warning: TelehubPos is null, in &quot; + this.GetType()); }
-                Array.Copy(TelehubPos.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TelehubBlock --\n&quot;;
-                output += &quot;HasTelehub: &quot; + HasTelehub.ToString() + &quot;\n&quot;;
-                output += &quot;TelehubPos: &quot; + TelehubPos.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class SimulatorBlockBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public uint RegionFlags;
-            public LLUUID RegionID;
-            public byte SimAccess;
-            public uint ParentEstateID;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 29;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    return length;
-                }
-            }
-
-            public SimulatorBlockBlock() { }
-            public SimulatorBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    RegionFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    SimAccess = (byte)bytes[i++];
-                    ParentEstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                bytes[i++] = (byte)(RegionFlags % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 24) % 256);
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = SimAccess;
-                bytes[i++] = (byte)(ParentEstateID % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorBlock --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorReady; } }
-        public TelehubBlockBlock TelehubBlock;
-        public SimulatorBlockBlock SimulatorBlock;
-
-        public SimulatorReadyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 15;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            TelehubBlock = new TelehubBlockBlock();
-            SimulatorBlock = new SimulatorBlockBlock();
-        }
-
-        public SimulatorReadyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            TelehubBlock = new TelehubBlockBlock(bytes, ref i);
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-        }
-
-        public SimulatorReadyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TelehubBlock = new TelehubBlockBlock(bytes, ref i);
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TelehubBlock.Length;            length += SimulatorBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TelehubBlock.ToBytes(bytes, ref i);
-            SimulatorBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorReady ---\n&quot;;
-                output += TelehubBlock.ToString() + &quot;\n&quot;;
-                output += SimulatorBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class TelehubInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;telehubinfo_telehubblock&quot;)]
         public class TelehubBlockBlock
         {
             private byte[] _objectname;
@@ -4052,6 +2687,7 @@
             public LLVector3 TelehubPos;
             public LLQuaternion TelehubRot;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -4088,29 +2724,29 @@
                 Array.Copy(ObjectName, 0, bytes, i, ObjectName.Length); i += ObjectName.Length;
                 if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
                 Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TelehubPos == null) { Console.WriteLine(&quot;Warning: TelehubPos is null, in &quot; + this.GetType()); }
                 Array.Copy(TelehubPos.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(TelehubRot == null) { Console.WriteLine(&quot;Warning: TelehubRot is null, in &quot; + this.GetType()); }
                 Array.Copy(TelehubRot.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- TelehubBlock --\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;TelehubPos: &quot; + TelehubPos.ToString() + &quot;\n&quot;;
-                output += &quot;TelehubRot: &quot; + TelehubRot.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TelehubBlock --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TelehubPos: &quot; + TelehubPos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TelehubRot: &quot; + TelehubRot.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;telehubinfo_spawnpointblock&quot;)]
         public class SpawnPointBlockBlock
         {
             public LLVector3 SpawnPointPos;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -4134,14 +2770,13 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(SpawnPointPos == null) { Console.WriteLine(&quot;Warning: SpawnPointPos is null, in &quot; + this.GetType()); }
                 Array.Copy(SpawnPointPos.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- SpawnPointBlock --\n&quot;;
-                output += &quot;SpawnPointPos: &quot; + SpawnPointPos.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SpawnPointBlock --&quot; + Environment.NewLine;
+                output += &quot;SpawnPointPos: &quot; + SpawnPointPos.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -4202,11 +2837,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TelehubInfo ---\n&quot;;
-                output += TelehubBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TelehubInfo ---&quot; + Environment.NewLine;
+                output += TelehubBlock.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; SpawnPointBlock.Length; j++)
             {
-                output += SpawnPointBlock[j].ToString() + &quot;\n&quot;;
+                output += SpawnPointBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -4214,2952 +2849,6 @@
     }
 
     /// &lt;exclude/&gt;
-    public class SimulatorPresentAtLocationPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TelehubBlockBlock
-        {
-            public bool HasTelehub;
-            public LLVector3 TelehubPos;
-
-            public int Length
-            {
-                get
-                {
-                    return 13;
-                }
-            }
-
-            public TelehubBlockBlock() { }
-            public TelehubBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    HasTelehub = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    TelehubPos = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((HasTelehub) ? 1 : 0);
-                if(TelehubPos == null) { Console.WriteLine(&quot;Warning: TelehubPos is null, in &quot; + this.GetType()); }
-                Array.Copy(TelehubPos.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TelehubBlock --\n&quot;;
-                output += &quot;HasTelehub: &quot; + HasTelehub.ToString() + &quot;\n&quot;;
-                output += &quot;TelehubPos: &quot; + TelehubPos.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class SimulatorBlockBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public uint RegionFlags;
-            public LLUUID RegionID;
-            public byte SimAccess;
-            public uint ParentEstateID;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 29;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    return length;
-                }
-            }
-
-            public SimulatorBlockBlock() { }
-            public SimulatorBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    RegionFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    SimAccess = (byte)bytes[i++];
-                    ParentEstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                bytes[i++] = (byte)(RegionFlags % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionFlags &gt;&gt; 24) % 256);
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = SimAccess;
-                bytes[i++] = (byte)(ParentEstateID % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorBlock --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class SimulatorPublicHostBlockBlock
-        {
-            public ushort Port;
-            public uint SimulatorIP;
-            public uint GridX;
-            public uint GridY;
-
-            public int Length
-            {
-                get
-                {
-                    return 14;
-                }
-            }
-
-            public SimulatorPublicHostBlockBlock() { }
-            public SimulatorPublicHostBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    SimulatorIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = (byte)(SimulatorIP % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorPublicHostBlock --\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;SimulatorIP: &quot; + SimulatorIP.ToString() + &quot;\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class NeighborBlockBlock
-        {
-            public uint IP;
-            public ushort Port;
-
-            public int Length
-            {
-                get
-                {
-                    return 6;
-                }
-            }
-
-            public NeighborBlockBlock() { }
-            public NeighborBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    IP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(IP % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NeighborBlock --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorPresentAtLocation; } }
-        public TelehubBlockBlock[] TelehubBlock;
-        public SimulatorBlockBlock SimulatorBlock;
-        public SimulatorPublicHostBlockBlock SimulatorPublicHostBlock;
-        public NeighborBlockBlock[] NeighborBlock;
-
-        public SimulatorPresentAtLocationPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 17;
-            Header.Reliable = true;
-            TelehubBlock = new TelehubBlockBlock[0];
-            SimulatorBlock = new SimulatorBlockBlock();
-            SimulatorPublicHostBlock = new SimulatorPublicHostBlockBlock();
-            NeighborBlock = new NeighborBlockBlock[4];
-        }
-
-        public SimulatorPresentAtLocationPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            TelehubBlock = new TelehubBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { TelehubBlock[j] = new TelehubBlockBlock(bytes, ref i); }
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-            SimulatorPublicHostBlock = new SimulatorPublicHostBlockBlock(bytes, ref i);
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public SimulatorPresentAtLocationPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            TelehubBlock = new TelehubBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { TelehubBlock[j] = new TelehubBlockBlock(bytes, ref i); }
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-            SimulatorPublicHostBlock = new SimulatorPublicHostBlockBlock(bytes, ref i);
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += SimulatorBlock.Length;            length += SimulatorPublicHostBlock.Length;;
-            length++;
-            for (int j = 0; j &lt; TelehubBlock.Length; j++) { length += TelehubBlock[j].Length; }
-            for (int j = 0; j &lt; 4; j++) { length += NeighborBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)TelehubBlock.Length;
-            for (int j = 0; j &lt; TelehubBlock.Length; j++) { TelehubBlock[j].ToBytes(bytes, ref i); }
-            SimulatorBlock.ToBytes(bytes, ref i);
-            SimulatorPublicHostBlock.ToBytes(bytes, ref i);
-            for (int j = 0; j &lt; 4; j++) { NeighborBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorPresentAtLocation ---\n&quot;;
-            for (int j = 0; j &lt; TelehubBlock.Length; j++)
-            {
-                output += TelehubBlock[j].ToString() + &quot;\n&quot;;
-            }
-                output += SimulatorBlock.ToString() + &quot;\n&quot;;
-                output += SimulatorPublicHostBlock.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; 4; j++)
-            {
-                output += NeighborBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorLoadPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SimulatorLoadBlock
-        {
-            public bool CanAcceptAgents;
-            public float TimeDilation;
-            public int AgentCount;
-
-            public int Length
-            {
-                get
-                {
-                    return 9;
-                }
-            }
-
-            public SimulatorLoadBlock() { }
-            public SimulatorLoadBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    CanAcceptAgents = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    TimeDilation = BitConverter.ToSingle(bytes, i); i += 4;
-                    AgentCount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                bytes[i++] = (byte)((CanAcceptAgents) ? 1 : 0);
-                ba = BitConverter.GetBytes(TimeDilation);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(AgentCount % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorLoad --\n&quot;;
-                output += &quot;CanAcceptAgents: &quot; + CanAcceptAgents.ToString() + &quot;\n&quot;;
-                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;\n&quot;;
-                output += &quot;AgentCount: &quot; + AgentCount.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentListBlock
-        {
-            public byte X;
-            public byte Y;
-            public uint CircuitCode;
-
-            public int Length
-            {
-                get
-                {
-                    return 6;
-                }
-            }
-
-            public AgentListBlock() { }
-            public AgentListBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    X = (byte)bytes[i++];
-                    Y = (byte)bytes[i++];
-                    CircuitCode = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = X;
-                bytes[i++] = Y;
-                bytes[i++] = (byte)(CircuitCode % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentList --\n&quot;;
-                output += &quot;X: &quot; + X.ToString() + &quot;\n&quot;;
-                output += &quot;Y: &quot; + Y.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorLoad; } }
-        public SimulatorLoadBlock SimulatorLoad;
-        public AgentListBlock[] AgentList;
-
-        public SimulatorLoadPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 18;
-            Header.Reliable = true;
-            SimulatorLoad = new SimulatorLoadBlock();
-            AgentList = new AgentListBlock[0];
-        }
-
-        public SimulatorLoadPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            SimulatorLoad = new SimulatorLoadBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            AgentList = new AgentListBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentList[j] = new AgentListBlock(bytes, ref i); }
-        }
-
-        public SimulatorLoadPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            SimulatorLoad = new SimulatorLoadBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            AgentList = new AgentListBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentList[j] = new AgentListBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += SimulatorLoad.Length;;
-            length++;
-            for (int j = 0; j &lt; AgentList.Length; j++) { length += AgentList[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            SimulatorLoad.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentList.Length;
-            for (int j = 0; j &lt; AgentList.Length; j++) { AgentList[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorLoad ---\n&quot;;
-                output += SimulatorLoad.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; AgentList.Length; j++)
-            {
-                output += AgentList[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimulatorShutdownRequestPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimulatorShutdownRequest; } }
-
-        public SimulatorShutdownRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 19;
-            Header.Reliable = true;
-        }
-
-        public SimulatorShutdownRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public SimulatorShutdownRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimulatorShutdownRequest ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RegionPresenceRequestByRegionIDPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public LLUUID RegionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RegionPresenceRequestByRegionID; } }
-        public RegionDataBlock[] RegionData;
-
-        public RegionPresenceRequestByRegionIDPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 20;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock[0];
-        }
-
-        public RegionPresenceRequestByRegionIDPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public RegionPresenceRequestByRegionIDPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; RegionData.Length; j++) { length += RegionData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)RegionData.Length;
-            for (int j = 0; j &lt; RegionData.Length; j++) { RegionData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RegionPresenceRequestByRegionID ---\n&quot;;
-            for (int j = 0; j &lt; RegionData.Length; j++)
-            {
-                output += RegionData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RegionPresenceRequestByHandlePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RegionPresenceRequestByHandle; } }
-        public RegionDataBlock[] RegionData;
-
-        public RegionPresenceRequestByHandlePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 21;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock[0];
-        }
-
-        public RegionPresenceRequestByHandlePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public RegionPresenceRequestByHandlePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; RegionData.Length; j++) { length += RegionData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)RegionData.Length;
-            for (int j = 0; j &lt; RegionData.Length; j++) { RegionData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RegionPresenceRequestByHandle ---\n&quot;;
-            for (int j = 0; j &lt; RegionData.Length; j++)
-            {
-                output += RegionData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RegionPresenceResponsePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public double ValidUntil;
-            public uint InternalRegionIP;
-            public uint ExternalRegionIP;
-            private byte[] _message;
-            public byte[] Message
-            {
-                get { return _message; }
-                set
-                {
-                    if (value == null) { _message = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _message = new byte[value.Length]; Array.Copy(value, _message, value.Length); }
-                }
-            }
-            public LLUUID RegionID;
-            public ulong RegionHandle;
-            public ushort RegionPort;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 42;
-                    if (Message != null) { length += 1 + Message.Length; }
-                    return length;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    ValidUntil = BitConverter.ToDouble(bytes, i); i += 8;
-                    InternalRegionIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ExternalRegionIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _message = new byte[length];
-                    Array.Copy(bytes, i, _message, 0, length); i += length;
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    RegionPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(ValidUntil);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                bytes[i++] = (byte)(InternalRegionIP % 256);
-                bytes[i++] = (byte)((InternalRegionIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((InternalRegionIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((InternalRegionIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(ExternalRegionIP % 256);
-                bytes[i++] = (byte)((ExternalRegionIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ExternalRegionIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ExternalRegionIP &gt;&gt; 24) % 256);
-                if(Message == null) { Console.WriteLine(&quot;Warning: Message is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Message.Length;
-                Array.Copy(Message, 0, bytes, i, Message.Length); i += Message.Length;
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)((RegionPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(RegionPort % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;ValidUntil: &quot; + ValidUntil.ToString() + &quot;\n&quot;;
-                output += &quot;InternalRegionIP: &quot; + InternalRegionIP.ToString() + &quot;\n&quot;;
-                output += &quot;ExternalRegionIP: &quot; + ExternalRegionIP.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;RegionPort: &quot; + RegionPort.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RegionPresenceResponse; } }
-        public RegionDataBlock[] RegionData;
-
-        public RegionPresenceResponsePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 22;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            RegionData = new RegionDataBlock[0];
-        }
-
-        public RegionPresenceResponsePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public RegionPresenceResponsePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; RegionData.Length; j++) { length += RegionData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)RegionData.Length;
-            for (int j = 0; j &lt; RegionData.Length; j++) { RegionData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RegionPresenceResponse ---\n&quot;;
-            for (int j = 0; j &lt; RegionData.Length; j++)
-            {
-                output += RegionData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RecordAgentPresencePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public LLUUID RegionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-            public short LocalX;
-            public short LocalY;
-            public int Status;
-            public LLUUID SecureSessionID;
-            public uint EstateID;
-            public int TimeToLive;
-
-            public int Length
-            {
-                get
-                {
-                    return 64;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    LocalX = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    LocalY = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    Status = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SecureSessionID = new LLUUID(bytes, i); i += 16;
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TimeToLive = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(LocalX % 256);
-                bytes[i++] = (byte)((LocalX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(LocalY % 256);
-                bytes[i++] = (byte)((LocalY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Status % 256);
-                bytes[i++] = (byte)((Status &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Status &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Status &gt;&gt; 24) % 256);
-                if(SecureSessionID == null) { Console.WriteLine(&quot;Warning: SecureSessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SecureSessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TimeToLive % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;LocalX: &quot; + LocalX.ToString() + &quot;\n&quot;;
-                output += &quot;LocalY: &quot; + LocalY.ToString() + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
-                output += &quot;SecureSessionID: &quot; + SecureSessionID.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output += &quot;TimeToLive: &quot; + TimeToLive.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RecordAgentPresence; } }
-        public RegionDataBlock RegionData;
-        public AgentDataBlock[] AgentData;
-
-        public RecordAgentPresencePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 23;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock();
-            AgentData = new AgentDataBlock[0];
-        }
-
-        public RecordAgentPresencePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            RegionData = new RegionDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public RecordAgentPresencePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            RegionData = new RegionDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionData.Length;;
-            length++;
-            for (int j = 0; j &lt; AgentData.Length; j++) { length += AgentData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            RegionData.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentData.Length;
-            for (int j = 0; j &lt; AgentData.Length; j++) { AgentData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RecordAgentPresence ---\n&quot;;
-                output += RegionData.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; AgentData.Length; j++)
-            {
-                output += AgentData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class EraseAgentPresencePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EraseAgentPresence; } }
-        public AgentDataBlock[] AgentData;
-
-        public EraseAgentPresencePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 24;
-            Header.Reliable = true;
-            AgentData = new AgentDataBlock[0];
-        }
-
-        public EraseAgentPresencePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public EraseAgentPresencePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; AgentData.Length; j++) { length += AgentData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentData.Length;
-            for (int j = 0; j &lt; AgentData.Length; j++) { AgentData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EraseAgentPresence ---\n&quot;;
-            for (int j = 0; j &lt; AgentData.Length; j++)
-            {
-                output += AgentData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class AgentPresenceRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AgentPresenceRequest; } }
-        public AgentDataBlock[] AgentData;
-
-        public AgentPresenceRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 25;
-            Header.Reliable = true;
-            AgentData = new AgentDataBlock[0];
-        }
-
-        public AgentPresenceRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public AgentPresenceRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; AgentData.Length; j++) { length += AgentData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentData.Length;
-            for (int j = 0; j &lt; AgentData.Length; j++) { AgentData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AgentPresenceRequest ---\n&quot;;
-            for (int j = 0; j &lt; AgentData.Length; j++)
-            {
-                output += AgentData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class AgentPresenceResponsePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public double ValidUntil;
-            public uint RegionIP;
-            public ushort RegionPort;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 34;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    ValidUntil = BitConverter.ToDouble(bytes, i); i += 8;
-                    RegionIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                ba = BitConverter.GetBytes(ValidUntil);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                bytes[i++] = (byte)(RegionIP % 256);
-                bytes[i++] = (byte)((RegionIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(RegionPort % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;ValidUntil: &quot; + ValidUntil.ToString() + &quot;\n&quot;;
-                output += &quot;RegionIP: &quot; + RegionIP.ToString() + &quot;\n&quot;;
-                output += &quot;RegionPort: &quot; + RegionPort.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AgentPresenceResponse; } }
-        public AgentDataBlock[] AgentData;
-
-        public AgentPresenceResponsePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 26;
-            Header.Reliable = true;
-            AgentData = new AgentDataBlock[0];
-        }
-
-        public AgentPresenceResponsePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public AgentPresenceResponsePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            AgentData = new AgentDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentData[j] = new AgentDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; AgentData.Length; j++) { length += AgentData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentData.Length;
-            for (int j = 0; j &lt; AgentData.Length; j++) { AgentData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AgentPresenceResponse ---\n&quot;;
-            for (int j = 0; j &lt; AgentData.Length; j++)
-            {
-                output += AgentData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class UpdateSimulatorPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SimulatorInfoBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public LLUUID RegionID;
-            public byte SimAccess;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 21;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    return length;
-                }
-            }
-
-            public SimulatorInfoBlock() { }
-            public SimulatorInfoBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    SimAccess = (byte)bytes[i++];
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = SimAccess;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorInfo --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.UpdateSimulator; } }
-        public SimulatorInfoBlock SimulatorInfo;
-
-        public UpdateSimulatorPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 27;
-            Header.Reliable = true;
-            SimulatorInfo = new SimulatorInfoBlock();
-        }
-
-        public UpdateSimulatorPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            SimulatorInfo = new SimulatorInfoBlock(bytes, ref i);
-        }
-
-        public UpdateSimulatorPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            SimulatorInfo = new SimulatorInfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += SimulatorInfo.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            SimulatorInfo.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- UpdateSimulator ---\n&quot;;
-                output += SimulatorInfo.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class TrackAgentSessionPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SessionInfoBlock
-        {
-            public double GlobalX;
-            public double GlobalY;
-            public LLUUID SessionID;
-            public ushort ViewerPort;
-            public uint ViewerIP;
-
-            public int Length
-            {
-                get
-                {
-                    return 38;
-                }
-            }
-
-            public SessionInfoBlock() { }
-            public SessionInfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    GlobalX = BitConverter.ToDouble(bytes, i); i += 8;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    GlobalY = BitConverter.ToDouble(bytes, i); i += 8;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    ViewerPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    ViewerIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(GlobalX);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                ba = BitConverter.GetBytes(GlobalY);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((ViewerPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(ViewerPort % 256);
-                bytes[i++] = (byte)(ViewerIP % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SessionInfo --\n&quot;;
-                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;ViewerPort: &quot; + ViewerPort.ToString() + &quot;\n&quot;;
-                output += &quot;ViewerIP: &quot; + ViewerIP.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public float RegionX;
-            public float RegionY;
-            public uint SpaceIP;
-            public uint AgentCount;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 20;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    RegionX = BitConverter.ToSingle(bytes, i); i += 4;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    RegionY = BitConverter.ToSingle(bytes, i); i += 4;
-                    SpaceIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    AgentCount = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(RegionX);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                ba = BitConverter.GetBytes(RegionY);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(SpaceIP % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(AgentCount % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;\n&quot;;
-                output += &quot;AgentCount: &quot; + AgentCount.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.TrackAgentSession; } }
-        public SessionInfoBlock[] SessionInfo;
-        public RegionDataBlock RegionData;
-
-        public TrackAgentSessionPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 28;
-            Header.Reliable = true;
-            SessionInfo = new SessionInfoBlock[0];
-            RegionData = new RegionDataBlock();
-        }
-
-        public TrackAgentSessionPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            SessionInfo = new SessionInfoBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SessionInfo[j] = new SessionInfoBlock(bytes, ref i); }
-            RegionData = new RegionDataBlock(bytes, ref i);
-        }
-
-        public TrackAgentSessionPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            SessionInfo = new SessionInfoBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SessionInfo[j] = new SessionInfoBlock(bytes, ref i); }
-            RegionData = new RegionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionData.Length;;
-            length++;
-            for (int j = 0; j &lt; SessionInfo.Length; j++) { length += SessionInfo[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)SessionInfo.Length;
-            for (int j = 0; j &lt; SessionInfo.Length; j++) { SessionInfo[j].ToBytes(bytes, ref i); }
-            RegionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- TrackAgentSession ---\n&quot;;
-            for (int j = 0; j &lt; SessionInfo.Length; j++)
-            {
-                output += SessionInfo[j].ToString() + &quot;\n&quot;;
-            }
-                output += RegionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ClearAgentSessionsPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionInfoBlock
-        {
-            public uint RegionX;
-            public uint RegionY;
-            public uint SpaceIP;
-
-            public int Length
-            {
-                get
-                {
-                    return 12;
-                }
-            }
-
-            public RegionInfoBlock() { }
-            public RegionInfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SpaceIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionX % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionY % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(SpaceIP % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ClearAgentSessions; } }
-        public RegionInfoBlock RegionInfo;
-
-        public ClearAgentSessionsPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 29;
-            Header.Reliable = true;
-            RegionInfo = new RegionInfoBlock();
-        }
-
-        public ClearAgentSessionsPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            RegionInfo = new RegionInfoBlock(bytes, ref i);
-        }
-
-        public ClearAgentSessionsPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            RegionInfo = new RegionInfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionInfo.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            RegionInfo.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ClearAgentSessions ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class LogDwellTimePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DwellInfoBlock
-        {
-            public float Duration;
-            public byte AvgAgentsInView;
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public LLUUID AgentID;
-            public uint RegionX;
-            public uint RegionY;
-            public LLUUID SessionID;
-            public byte AvgViewerFPS;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 46;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    return length;
-                }
-            }
-
-            public DwellInfoBlock() { }
-            public DwellInfoBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Duration = BitConverter.ToSingle(bytes, i); i += 4;
-                    AvgAgentsInView = (byte)bytes[i++];
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    RegionX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    AvgViewerFPS = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(Duration);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = AvgAgentsInView;
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionX % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionY % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 24) % 256);
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = AvgViewerFPS;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DwellInfo --\n&quot;;
-                output += &quot;Duration: &quot; + Duration.ToString() + &quot;\n&quot;;
-                output += &quot;AvgAgentsInView: &quot; + AvgAgentsInView.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;AvgViewerFPS: &quot; + AvgViewerFPS.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.LogDwellTime; } }
-        public DwellInfoBlock DwellInfo;
-
-        public LogDwellTimePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 30;
-            Header.Reliable = true;
-            DwellInfo = new DwellInfoBlock();
-        }
-
-        public LogDwellTimePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DwellInfo = new DwellInfoBlock(bytes, ref i);
-        }
-
-        public LogDwellTimePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DwellInfo = new DwellInfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DwellInfo.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DwellInfo.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- LogDwellTime ---\n&quot;;
-                output += DwellInfo.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class FeatureDisabledPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class FailureInfoBlock
-        {
-            public LLUUID AgentID;
-            private byte[] _errormessage;
-            public byte[] ErrorMessage
-            {
-                get { return _errormessage; }
-                set
-                {
-                    if (value == null) { _errormessage = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _errormessage = new byte[value.Length]; Array.Copy(value, _errormessage, value.Length); }
-                }
-            }
-            public LLUUID TransactionID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 32;
-                    if (ErrorMessage != null) { length += 1 + ErrorMessage.Length; }
-                    return length;
-                }
-            }
-
-            public FailureInfoBlock() { }
-            public FailureInfoBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _errormessage = new byte[length];
-                    Array.Copy(bytes, i, _errormessage, 0, length); i += length;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ErrorMessage == null) { Console.WriteLine(&quot;Warning: ErrorMessage is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)ErrorMessage.Length;
-                Array.Copy(ErrorMessage, 0, bytes, i, ErrorMessage.Length); i += ErrorMessage.Length;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- FailureInfo --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ErrorMessage, &quot;ErrorMessage&quot;) + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.FeatureDisabled; } }
-        public FailureInfoBlock FailureInfo;
-
-        public FeatureDisabledPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 31;
-            Header.Reliable = true;
-            FailureInfo = new FailureInfoBlock();
-        }
-
-        public FeatureDisabledPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            FailureInfo = new FailureInfoBlock(bytes, ref i);
-        }
-
-        public FeatureDisabledPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            FailureInfo = new FailureInfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += FailureInfo.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            FailureInfo.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- FeatureDisabled ---\n&quot;;
-                output += FailureInfo.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class LogFailedMoneyTransactionPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TransactionDataBlock
-        {
-            public byte FailureType;
-            public LLUUID DestID;
-            public int Amount;
-            public uint SimulatorIP;
-            public byte Flags;
-            public uint GridX;
-            public uint GridY;
-            public LLUUID SourceID;
-            public LLUUID TransactionID;
-            public uint TransactionTime;
-            public int TransactionType;
-
-            public int Length
-            {
-                get
-                {
-                    return 74;
-                }
-            }
-
-            public TransactionDataBlock() { }
-            public TransactionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    FailureType = (byte)bytes[i++];
-                    DestID = new LLUUID(bytes, i); i += 16;
-                    Amount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SimulatorIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Flags = (byte)bytes[i++];
-                    GridX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                    TransactionTime = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TransactionType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = FailureType;
-                if(DestID == null) { Console.WriteLine(&quot;Warning: DestID is null, in &quot; + this.GetType()); }
-                Array.Copy(DestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Amount % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(SimulatorIP % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SimulatorIP &gt;&gt; 24) % 256);
-                bytes[i++] = Flags;
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(TransactionTime % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TransactionType % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;FailureType: &quot; + FailureType.ToString() + &quot;\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += &quot;SimulatorIP: &quot; + SimulatorIP.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionTime: &quot; + TransactionTime.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.LogFailedMoneyTransaction; } }
-        public TransactionDataBlock TransactionData;
-
-        public LogFailedMoneyTransactionPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 32;
-            Header.Reliable = true;
-            TransactionData = new TransactionDataBlock();
-        }
-
-        public LogFailedMoneyTransactionPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            TransactionData = new TransactionDataBlock(bytes, ref i);
-        }
-
-        public LogFailedMoneyTransactionPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TransactionData = new TransactionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TransactionData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TransactionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- LogFailedMoneyTransaction ---\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class UserReportInternalPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MeanCollisionBlock
-        {
-            public float Mag;
-            public uint Time;
-            public LLUUID Perp;
-            public byte Type;
-
-            public int Length
-            {
-                get
-                {
-                    return 25;
-                }
-            }
-
-            public MeanCollisionBlock() { }
-            public MeanCollisionBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Mag = BitConverter.ToSingle(bytes, i); i += 4;
-                    Time = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Perp = new LLUUID(bytes, i); i += 16;
-                    Type = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(Mag);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(Time % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 24) % 256);
-                if(Perp == null) { Console.WriteLine(&quot;Warning: Perp is null, in &quot; + this.GetType()); }
-                Array.Copy(Perp.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = Type;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MeanCollision --\n&quot;;
-                output += &quot;Mag: &quot; + Mag.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Perp: &quot; + Perp.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class ReportDataBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public LLUUID ObjectID;
-            private byte[] _details;
-            public byte[] Details
-            {
-                get { return _details; }
-                set
-                {
-                    if (value == null) { _details = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _details = new byte[value.Length]; Array.Copy(value, _details, value.Length); }
-                }
-            }
-            private byte[] _versionstring;
-            public byte[] VersionString
-            {
-                get { return _versionstring; }
-                set
-                {
-                    if (value == null) { _versionstring = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _versionstring = new byte[value.Length]; Array.Copy(value, _versionstring, value.Length); }
-                }
-            }
-            public LLVector3 AgentPosition;
-            public byte Category;
-            public LLUUID OwnerID;
-            public LLUUID CreatorID;
-            private byte[] _summary;
-            public byte[] Summary
-            {
-                get { return _summary; }
-                set
-                {
-                    if (value == null) { _summary = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _summary = new byte[value.Length]; Array.Copy(value, _summary, value.Length); }
-                }
-            }
-            public LLUUID ReporterID;
-            public byte ReportType;
-            public LLUUID ScreenshotID;
-            public LLUUID LastOwnerID;
-            public LLVector3 ViewerPosition;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 122;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    if (Details != null) { length += 2 + Details.Length; }
-                    if (VersionString != null) { length += 1 + VersionString.Length; }
-                    if (Summary != null) { length += 1 + Summary.Length; }
-                    return length;
-                }
-            }
-
-            public ReportDataBlock() { }
-            public ReportDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    ObjectID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _details = new byte[length];
-                    Array.Copy(bytes, i, _details, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _versionstring = new byte[length];
-                    Array.Copy(bytes, i, _versionstring, 0, length); i += length;
-                    AgentPosition = new LLVector3(bytes, i); i += 12;
-                    Category = (byte)bytes[i++];
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    CreatorID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _summary = new byte[length];
-                    Array.Copy(bytes, i, _summary, 0, length); i += length;
-                    ReporterID = new LLUUID(bytes, i); i += 16;
-                    ReportType = (byte)bytes[i++];
-                    ScreenshotID = new LLUUID(bytes, i); i += 16;
-                    LastOwnerID = new LLUUID(bytes, i); i += 16;
-                    ViewerPosition = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
-                Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Details == null) { Console.WriteLine(&quot;Warning: Details is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Details.Length % 256);
-                bytes[i++] = (byte)((Details.Length &gt;&gt; 8) % 256);
-                Array.Copy(Details, 0, bytes, i, Details.Length); i += Details.Length;
-                if(VersionString == null) { Console.WriteLine(&quot;Warning: VersionString is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)VersionString.Length;
-                Array.Copy(VersionString, 0, bytes, i, VersionString.Length); i += VersionString.Length;
-                if(AgentPosition == null) { Console.WriteLine(&quot;Warning: AgentPosition is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentPosition.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = Category;
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(CreatorID == null) { Console.WriteLine(&quot;Warning: CreatorID is null, in &quot; + this.GetType()); }
-                Array.Copy(CreatorID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Summary == null) { Console.WriteLine(&quot;Warning: Summary is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Summary.Length;
-                Array.Copy(Summary, 0, bytes, i, Summary.Length); i += Summary.Length;
-                if(ReporterID == null) { Console.WriteLine(&quot;Warning: ReporterID is null, in &quot; + this.GetType()); }
-                Array.Copy(ReporterID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = ReportType;
-                if(ScreenshotID == null) { Console.WriteLine(&quot;Warning: ScreenshotID is null, in &quot; + this.GetType()); }
-                Array.Copy(ScreenshotID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(LastOwnerID == null) { Console.WriteLine(&quot;Warning: LastOwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(LastOwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ViewerPosition == null) { Console.WriteLine(&quot;Warning: ViewerPosition is null, in &quot; + this.GetType()); }
-                Array.Copy(ViewerPosition.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ReportData --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Details, &quot;Details&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(VersionString, &quot;VersionString&quot;) + &quot;\n&quot;;
-                output += &quot;AgentPosition: &quot; + AgentPosition.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Summary, &quot;Summary&quot;) + &quot;\n&quot;;
-                output += &quot;ReporterID: &quot; + ReporterID.ToString() + &quot;\n&quot;;
-                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;\n&quot;;
-                output += &quot;ScreenshotID: &quot; + ScreenshotID.ToString() + &quot;\n&quot;;
-                output += &quot;LastOwnerID: &quot; + LastOwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;ViewerPosition: &quot; + ViewerPosition.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.UserReportInternal; } }
-        public MeanCollisionBlock[] MeanCollision;
-        public ReportDataBlock ReportData;
-
-        public UserReportInternalPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 33;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            MeanCollision = new MeanCollisionBlock[0];
-            ReportData = new ReportDataBlock();
-        }
-
-        public UserReportInternalPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            MeanCollision = new MeanCollisionBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MeanCollision[j] = new MeanCollisionBlock(bytes, ref i); }
-            ReportData = new ReportDataBlock(bytes, ref i);
-        }
-
-        public UserReportInternalPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            MeanCollision = new MeanCollisionBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MeanCollision[j] = new MeanCollisionBlock(bytes, ref i); }
-            ReportData = new ReportDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += ReportData.Length;;
-            length++;
-            for (int j = 0; j &lt; MeanCollision.Length; j++) { length += MeanCollision[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)MeanCollision.Length;
-            for (int j = 0; j &lt; MeanCollision.Length; j++) { MeanCollision[j].ToBytes(bytes, ref i); }
-            ReportData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- UserReportInternal ---\n&quot;;
-            for (int j = 0; j &lt; MeanCollision.Length; j++)
-            {
-                output += MeanCollision[j].ToString() + &quot;\n&quot;;
-            }
-                output += ReportData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SetSimStatusInDatabasePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public int X;
-            public int Y;
-            public int PID;
-            public LLUUID RegionID;
-            private byte[] _status;
-            public byte[] Status
-            {
-                get { return _status; }
-                set
-                {
-                    if (value == null) { _status = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _status = new byte[value.Length]; Array.Copy(value, _status, value.Length); }
-                }
-            }
-            public int AgentCount;
-            private byte[] _hostname;
-            public byte[] HostName
-            {
-                get { return _hostname; }
-                set
-                {
-                    if (value == null) { _hostname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _hostname = new byte[value.Length]; Array.Copy(value, _hostname, value.Length); }
-                }
-            }
-            public int TimeToLive;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 36;
-                    if (Status != null) { length += 1 + Status.Length; }
-                    if (HostName != null) { length += 1 + HostName.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    X = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Y = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    PID = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _status = new byte[length];
-                    Array.Copy(bytes, i, _status, 0, length); i += length;
-                    AgentCount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _hostname = new byte[length];
-                    Array.Copy(bytes, i, _hostname, 0, length); i += length;
-                    TimeToLive = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(X % 256);
-                bytes[i++] = (byte)((X &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((X &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((X &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(Y % 256);
-                bytes[i++] = (byte)((Y &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Y &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Y &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(PID % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 24) % 256);
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Status == null) { Console.WriteLine(&quot;Warning: Status is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Status.Length;
-                Array.Copy(Status, 0, bytes, i, Status.Length); i += Status.Length;
-                bytes[i++] = (byte)(AgentCount % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 24) % 256);
-                if(HostName == null) { Console.WriteLine(&quot;Warning: HostName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)HostName.Length;
-                Array.Copy(HostName, 0, bytes, i, HostName.Length); i += HostName.Length;
-                bytes[i++] = (byte)(TimeToLive % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;X: &quot; + X.ToString() + &quot;\n&quot;;
-                output += &quot;Y: &quot; + Y.ToString() + &quot;\n&quot;;
-                output += &quot;PID: &quot; + PID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Status, &quot;Status&quot;) + &quot;\n&quot;;
-                output += &quot;AgentCount: &quot; + AgentCount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(HostName, &quot;HostName&quot;) + &quot;\n&quot;;
-                output += &quot;TimeToLive: &quot; + TimeToLive.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SetSimStatusInDatabase; } }
-        public DataBlock Data;
-
-        public SetSimStatusInDatabasePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 34;
-            Header.Reliable = true;
-            Data = new DataBlock();
-        }
-
-        public SetSimStatusInDatabasePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public SetSimStatusInDatabasePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SetSimStatusInDatabase ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SetSimPresenceInDatabasePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SimDataBlock
-        {
-            public int PID;
-            public LLUUID RegionID;
-            private byte[] _status;
-            public byte[] Status
-            {
-                get { return _status; }
-                set
-                {
-                    if (value == null) { _status = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _status = new byte[value.Length]; Array.Copy(value, _status, value.Length); }
-                }
-            }
-            public int AgentCount;
-            public uint GridX;
-            public uint GridY;
-            private byte[] _hostname;
-            public byte[] HostName
-            {
-                get { return _hostname; }
-                set
-                {
-                    if (value == null) { _hostname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _hostname = new byte[value.Length]; Array.Copy(value, _hostname, value.Length); }
-                }
-            }
-            public int TimeToLive;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 36;
-                    if (Status != null) { length += 1 + Status.Length; }
-                    if (HostName != null) { length += 1 + HostName.Length; }
-                    return length;
-                }
-            }
-
-            public SimDataBlock() { }
-            public SimDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    PID = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _status = new byte[length];
-                    Array.Copy(bytes, i, _status, 0, length); i += length;
-                    AgentCount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _hostname = new byte[length];
-                    Array.Copy(bytes, i, _hostname, 0, length); i += length;
-                    TimeToLive = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(PID % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((PID &gt;&gt; 24) % 256);
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Status == null) { Console.WriteLine(&quot;Warning: Status is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Status.Length;
-                Array.Copy(Status, 0, bytes, i, Status.Length); i += Status.Length;
-                bytes[i++] = (byte)(AgentCount % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((AgentCount &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-                if(HostName == null) { Console.WriteLine(&quot;Warning: HostName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)HostName.Length;
-                Array.Copy(HostName, 0, bytes, i, HostName.Length); i += HostName.Length;
-                bytes[i++] = (byte)(TimeToLive % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TimeToLive &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimData --\n&quot;;
-                output += &quot;PID: &quot; + PID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Status, &quot;Status&quot;) + &quot;\n&quot;;
-                output += &quot;AgentCount: &quot; + AgentCount.ToString() + &quot;\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(HostName, &quot;HostName&quot;) + &quot;\n&quot;;
-                output += &quot;TimeToLive: &quot; + TimeToLive.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SetSimPresenceInDatabase; } }
-        public SimDataBlock SimData;
-
-        public SetSimPresenceInDatabasePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 35;
-            Header.Reliable = true;
-            SimData = new SimDataBlock();
-        }
-
-        public SetSimPresenceInDatabasePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            SimData = new SimDataBlock(bytes, ref i);
-        }
-
-        public SetSimPresenceInDatabasePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            SimData = new SimDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += SimData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            SimData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SetSimPresenceInDatabase ---\n&quot;;
-                output += SimData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class EconomyDataRequestPacket : Packet
     {
         private Header header;
@@ -7198,7 +2887,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EconomyDataRequest ---\n&quot;;
+            string output = &quot;--- EconomyDataRequest ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -7208,6 +2897,7 @@
     public class EconomyDataPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;economydata_info&quot;)]
         public class InfoBlock
         {
             public float PriceParcelClaimFactor;
@@ -7228,6 +2918,7 @@
             public int PriceParcelRent;
             public int PriceUpload;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -7340,24 +3031,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;PriceParcelClaimFactor: &quot; + PriceParcelClaimFactor.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectCapacity: &quot; + ObjectCapacity.ToString() + &quot;\n&quot;;
-                output += &quot;EnergyEfficiency: &quot; + EnergyEfficiency.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectCount: &quot; + ObjectCount.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportPriceExponent: &quot; + TeleportPriceExponent.ToString() + &quot;\n&quot;;
-                output += &quot;PriceGroupCreate: &quot; + PriceGroupCreate.ToString() + &quot;\n&quot;;
-                output += &quot;PriceObjectRent: &quot; + PriceObjectRent.ToString() + &quot;\n&quot;;
-                output += &quot;PricePublicObjectDelete: &quot; + PricePublicObjectDelete.ToString() + &quot;\n&quot;;
-                output += &quot;PriceEnergyUnit: &quot; + PriceEnergyUnit.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportMinPrice: &quot; + TeleportMinPrice.ToString() + &quot;\n&quot;;
-                output += &quot;PricePublicObjectDecay: &quot; + PricePublicObjectDecay.ToString() + &quot;\n&quot;;
-                output += &quot;PriceObjectClaim: &quot; + PriceObjectClaim.ToString() + &quot;\n&quot;;
-                output += &quot;PriceParcelClaim: &quot; + PriceParcelClaim.ToString() + &quot;\n&quot;;
-                output += &quot;PriceObjectScaleFactor: &quot; + PriceObjectScaleFactor.ToString() + &quot;\n&quot;;
-                output += &quot;PriceRentLight: &quot; + PriceRentLight.ToString() + &quot;\n&quot;;
-                output += &quot;PriceParcelRent: &quot; + PriceParcelRent.ToString() + &quot;\n&quot;;
-                output += &quot;PriceUpload: &quot; + PriceUpload.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;PriceParcelClaimFactor: &quot; + PriceParcelClaimFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectCapacity: &quot; + ObjectCapacity.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EnergyEfficiency: &quot; + EnergyEfficiency.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectCount: &quot; + ObjectCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportPriceExponent: &quot; + TeleportPriceExponent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceGroupCreate: &quot; + PriceGroupCreate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceObjectRent: &quot; + PriceObjectRent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PricePublicObjectDelete: &quot; + PricePublicObjectDelete.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceEnergyUnit: &quot; + PriceEnergyUnit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportMinPrice: &quot; + TeleportMinPrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PricePublicObjectDecay: &quot; + PricePublicObjectDecay.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceObjectClaim: &quot; + PriceObjectClaim.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceParcelClaim: &quot; + PriceParcelClaim.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceObjectScaleFactor: &quot; + PriceObjectScaleFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceRentLight: &quot; + PriceRentLight.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceParcelRent: &quot; + PriceParcelRent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceUpload: &quot; + PriceUpload.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -7405,8 +3096,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EconomyData ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EconomyData ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -7416,6 +3107,7 @@
     public class AvatarPickerRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpickerrequest_data&quot;)]
         public class DataBlock
         {
             private byte[] _name;
@@ -7430,6 +3122,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -7465,20 +3158,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpickerrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -7514,10 +3209,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -7569,187 +3264,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPickerRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarPickerRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class AvatarPickerRequestBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 0;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-            public byte GodLevel;
-            public LLUUID QueryID;
-
-            public int Length
-            {
-                get
-                {
-                    return 49;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    GodLevel = (byte)bytes[i++];
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = GodLevel;
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AvatarPickerRequestBackend; } }
-        public DataBlock Data;
-        public AgentDataBlock AgentData;
-
-        public AvatarPickerRequestBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 39;
-            Header.Reliable = true;
-            Data = new DataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public AvatarPickerRequestBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public AvatarPickerRequestBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AvatarPickerRequestBackend ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class AvatarPickerReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpickerreply_data&quot;)]
         public class DataBlock
         {
             private byte[] _lastname;
@@ -7776,6 +3303,7 @@
             }
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -7821,21 +3349,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpickerreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -7868,9 +3398,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -7931,12 +3461,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPickerReply ---\n&quot;;
+            string output = &quot;--- AvatarPickerReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -7946,6 +3476,7 @@
     public class PlacesQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesquery_querydata&quot;)]
         public class QueryDataBlock
         {
             private byte[] _simname;
@@ -7973,6 +3504,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8022,23 +3554,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8074,20 +3608,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesquery_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8117,8 +3653,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -8176,10 +3712,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PlacesQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PlacesQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -8189,6 +3725,7 @@
     public class PlacesReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesreply_querydata&quot;)]
         public class QueryDataBlock
         {
             private byte[] _simname;
@@ -8235,6 +3772,7 @@
             public int Price;
             public float Dwell;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8328,31 +3866,33 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalZ: &quot; + GlobalZ.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;Price: &quot; + Price.ToString() + &quot;\n&quot;;
-                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalZ: &quot; + GlobalZ.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Price: &quot; + Price.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8385,19 +3925,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;placesreply_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8427,8 +3969,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -8495,13 +4037,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PlacesReply ---\n&quot;;
+            string output = &quot;--- PlacesReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryData.Length; j++)
             {
-                output += QueryData[j].ToString() + &quot;\n&quot;;
+                output += QueryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -8511,6 +4053,7 @@
     public class DirFindQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirfindquery_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
@@ -8528,6 +4071,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8576,22 +4120,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirfindquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8624,9 +4170,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -8679,204 +4225,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirFindQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirFindQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirFindQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public bool Godlike;
-            public LLUUID QueryID;
-            public uint QueryFlags;
-            public int QueryStart;
-            private byte[] _querytext;
-            public byte[] QueryText
-            {
-                get { return _querytext; }
-                set
-                {
-                    if (value == null) { _querytext = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _querytext = new byte[value.Length]; Array.Copy(value, _querytext, value.Length); }
-                }
-            }
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 29;
-                    if (QueryText != null) { length += 1 + QueryText.Length; }
-                    return length;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    QueryStart = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _querytext = new byte[length];
-                    Array.Copy(bytes, i, _querytext, 0, length); i += length;
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(QueryStart % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 24) % 256);
-                if(QueryText == null) { Console.WriteLine(&quot;Warning: QueryText is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)QueryText.Length;
-                Array.Copy(QueryText, 0, bytes, i, QueryText.Length); i += QueryText.Length;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirFindQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirFindQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 44;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirFindQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirFindQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirFindQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirPlacesQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirplacesquery_querydata&quot;)]
         public class QueryDataBlock
         {
             private byte[] _simname;
@@ -8906,6 +4267,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -8963,24 +4325,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirplacesquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9013,9 +4377,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -9068,227 +4432,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPlacesQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirPlacesQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirPlacesQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public bool Godlike;
-            public LLUUID QueryID;
-            public sbyte Category;
-            public uint QueryFlags;
-            public int QueryStart;
-            private byte[] _querytext;
-            public byte[] QueryText
-            {
-                get { return _querytext; }
-                set
-                {
-                    if (value == null) { _querytext = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _querytext = new byte[value.Length]; Array.Copy(value, _querytext, value.Length); }
-                }
-            }
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 30;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    if (QueryText != null) { length += 1 + QueryText.Length; }
-                    return length;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    Category = (sbyte)bytes[i++];
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    QueryStart = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _querytext = new byte[length];
-                    Array.Copy(bytes, i, _querytext, 0, length); i += length;
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)Category;
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(QueryStart % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryStart &gt;&gt; 24) % 256);
-                if(QueryText == null) { Console.WriteLine(&quot;Warning: QueryText is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)QueryText.Length;
-                Array.Copy(QueryText, 0, bytes, i, QueryText.Length); i += QueryText.Length;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirPlacesQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirPlacesQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 46;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirPlacesQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirPlacesQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirPlacesQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirPlacesReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirplacesreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public bool ReservedNewbie;
@@ -9308,6 +4464,7 @@
             public bool Auction;
             public float Dwell;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9358,23 +4515,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Auction: &quot; + Auction.ToString() + &quot;\n&quot;;
-                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Auction: &quot; + Auction.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirplacesreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9404,18 +4563,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirplacesreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9445,8 +4606,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -9522,16 +4683,16 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPlacesReply ---\n&quot;;
+            string output = &quot;--- DirPlacesReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             for (int j = 0; j &lt; QueryData.Length; j++)
             {
-                output += QueryData[j].ToString() + &quot;\n&quot;;
+                output += QueryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -9541,6 +4702,7 @@
     public class DirPeopleReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpeoplereply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public LLUUID AgentID;
@@ -9580,6 +4742,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9639,23 +4802,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;\n&quot;;
-                output += &quot;Online: &quot; + Online.ToString() + &quot;\n&quot;;
-                output += &quot;Reputation: &quot; + Reputation.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Group, &quot;Group&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Online: &quot; + Online.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Reputation: &quot; + Reputation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Group, &quot;Group&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpeoplereply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9685,18 +4850,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpeoplereply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9726,8 +4893,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -9794,13 +4961,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPeopleReply ---\n&quot;;
+            string output = &quot;--- DirPeopleReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -9810,6 +4977,7 @@
     public class DirEventsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;direventsreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             private byte[] _name;
@@ -9839,6 +5007,7 @@
             public uint EventFlags;
             public uint UnixTime;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9899,23 +5068,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Date, &quot;Date&quot;) + &quot;\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;EventFlags: &quot; + EventFlags.ToString() + &quot;\n&quot;;
-                output += &quot;UnixTime: &quot; + UnixTime.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Date, &quot;Date&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EventFlags: &quot; + EventFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UnixTime: &quot; + UnixTime.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;direventsreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9945,18 +5116,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;direventsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -9986,8 +5159,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -10054,13 +5227,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirEventsReply ---\n&quot;;
+            string output = &quot;--- DirEventsReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -10070,6 +5243,7 @@
     public class DirGroupsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirgroupsreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public int Members;
@@ -10088,6 +5262,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10138,22 +5313,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;Members: &quot; + Members.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;\n&quot;;
-                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;Members: &quot; + Members.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirgroupsreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10183,18 +5360,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirgroupsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10224,8 +5403,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -10292,13 +5471,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirGroupsReply ---\n&quot;;
+            string output = &quot;--- DirGroupsReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -10308,11 +5487,13 @@
     public class DirClassifiedQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirclassifiedquery_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
             public uint Category;
             public uint QueryFlags;
+            public int QueryStart;
             private byte[] _querytext;
             public byte[] QueryText
             {
@@ -10325,11 +5506,12 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    int length = 24;
+                    int length = 28;
                     if (QueryText != null) { length += 1 + QueryText.Length; }
                     return length;
                 }
@@ -10344,6 +5526,7 @@
                     QueryID = new LLUUID(bytes, i); i += 16;
                     Category = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                     QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+                    QueryStart = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                     length = (ushort)bytes[i++];
                     _querytext = new byte[length];
                     Array.Copy(bytes, i, _querytext, 0, length); i += length;
@@ -10366,6 +5549,10 @@
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
+                bytes[i++] = (byte)(QueryStart % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 8) % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 16) % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 24) % 256);
                 if(QueryText == null) { Console.WriteLine(&quot;Warning: QueryText is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)QueryText.Length;
                 Array.Copy(QueryText, 0, bytes, i, QueryText.Length); i += QueryText.Length;
@@ -10373,22 +5560,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirclassifiedquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10421,9 +5611,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -10476,204 +5666,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirClassifiedQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirClassifiedQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirClassifiedQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public bool Godlike;
-            public LLUUID QueryID;
-            public uint Category;
-            public uint QueryFlags;
-            private byte[] _querytext;
-            public byte[] QueryText
-            {
-                get { return _querytext; }
-                set
-                {
-                    if (value == null) { _querytext = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _querytext = new byte[value.Length]; Array.Copy(value, _querytext, value.Length); }
-                }
-            }
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 29;
-                    if (QueryText != null) { length += 1 + QueryText.Length; }
-                    return length;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    Category = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _querytext = new byte[length];
-                    Array.Copy(bytes, i, _querytext, 0, length); i += length;
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Category % 256);
-                bytes[i++] = (byte)((Category &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Category &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Category &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                if(QueryText == null) { Console.WriteLine(&quot;Warning: QueryText is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)QueryText.Length;
-                Array.Copy(QueryText, 0, bytes, i, QueryText.Length); i += QueryText.Length;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirClassifiedQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirClassifiedQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 52;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirClassifiedQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirClassifiedQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirClassifiedQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirClassifiedReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirclassifiedreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public byte ClassifiedFlags;
@@ -10693,6 +5698,7 @@
             public int PriceForListing;
             public uint ExpirationDate;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10748,23 +5754,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;\n&quot;;
-                output += &quot;ExpirationDate: &quot; + ExpirationDate.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ExpirationDate: &quot; + ExpirationDate.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirclassifiedreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10794,18 +5802,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirclassifiedreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10835,8 +5845,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -10903,13 +5913,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirClassifiedReply ---\n&quot;;
+            string output = &quot;--- DirClassifiedReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -10919,6 +5929,7 @@
     public class AvatarClassifiedReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarclassifiedreply_data&quot;)]
         public class DataBlock
         {
             public LLUUID ClassifiedID;
@@ -10934,6 +5945,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -10972,20 +5984,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarclassifiedreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID TargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11018,9 +6032,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -11081,12 +6095,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarClassifiedReply ---\n&quot;;
+            string output = &quot;--- AvatarClassifiedReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -11096,10 +6110,12 @@
     public class ClassifiedInfoRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinforequest_data&quot;)]
         public class DataBlock
         {
             public LLUUID ClassifiedID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11129,19 +6145,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinforequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11174,9 +6192,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -11229,9 +6247,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClassifiedInfoRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClassifiedInfoRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -11241,6 +6259,7 @@
     public class ClassifiedInfoReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinforeply_data&quot;)]
         public class DataBlock
         {
             public byte ClassifiedFlags;
@@ -11299,6 +6318,7 @@
             public uint ExpirationDate;
             public uint ParentEstate;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11360,7 +6380,6 @@
                 Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
                 if(ClassifiedID == null) { Console.WriteLine(&quot;Warning: ClassifiedID is null, in &quot; + this.GetType()); }
                 Array.Copy(ClassifiedID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(PosGlobal == null) { Console.WriteLine(&quot;Warning: PosGlobal is null, in &quot; + this.GetType()); }
                 Array.Copy(PosGlobal.GetBytes(), 0, bytes, i, 24); i += 24;
                 if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
                 Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
@@ -11398,32 +6417,34 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
-                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ParcelName, &quot;ParcelName&quot;) + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;\n&quot;;
-                output += &quot;ExpirationDate: &quot; + ExpirationDate.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstate: &quot; + ParentEstate.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ParcelName, &quot;ParcelName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ExpirationDate: &quot; + ExpirationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentEstate: &quot; + ParentEstate.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinforeply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11453,8 +6474,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -11506,9 +6527,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClassifiedInfoReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClassifiedInfoReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -11518,6 +6539,7 @@
     public class ClassifiedInfoUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinfoupdate_data&quot;)]
         public class DataBlock
         {
             public byte ClassifiedFlags;
@@ -11551,6 +6573,7 @@
             public int PriceForListing;
             public uint ParentEstate;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11594,7 +6617,6 @@
                 bytes[i++] = ClassifiedFlags;
                 if(ClassifiedID == null) { Console.WriteLine(&quot;Warning: ClassifiedID is null, in &quot; + this.GetType()); }
                 Array.Copy(ClassifiedID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(PosGlobal == null) { Console.WriteLine(&quot;Warning: PosGlobal is null, in &quot; + this.GetType()); }
                 Array.Copy(PosGlobal.GetBytes(), 0, bytes, i, 24); i += 24;
                 if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
                 Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
@@ -11623,28 +6645,30 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
-                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstate: &quot; + ParentEstate.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedFlags: &quot; + ClassifiedFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PriceForListing: &quot; + PriceForListing.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentEstate: &quot; + ParentEstate.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedinfoupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11677,9 +6701,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -11731,9 +6755,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClassifiedInfoUpdate ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClassifiedInfoUpdate ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -11743,10 +6767,12 @@
     public class ClassifiedDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifieddelete_data&quot;)]
         public class DataBlock
         {
             public LLUUID ClassifiedID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11776,19 +6802,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifieddelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11821,9 +6849,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -11875,9 +6903,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClassifiedDelete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClassifiedDelete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -11887,11 +6915,13 @@
     public class ClassifiedGodDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedgoddelete_data&quot;)]
         public class DataBlock
         {
             public LLUUID ClassifiedID;
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11924,20 +6954,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ClassifiedID: &quot; + ClassifiedID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;classifiedgoddelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -11970,9 +7002,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -12024,9 +7056,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClassifiedGodDelete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClassifiedGodDelete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -12036,11 +7068,13 @@
     public class DirPicksQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpicksquery_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
             public uint QueryFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12075,20 +7109,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpicksquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12121,9 +7157,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -12176,176 +7212,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPicksQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirPicksQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirPicksQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public bool Godlike;
-            public LLUUID QueryID;
-            public uint QueryFlags;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 25;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirPicksQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirPicksQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 61;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirPicksQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirPicksQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirPicksQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirPicksReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpicksreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public bool Enabled;
@@ -12362,6 +7241,7 @@
             }
             public LLUUID PickID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12402,20 +7282,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpicksreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12445,18 +7327,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpicksreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12486,8 +7370,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -12554,13 +7438,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPicksReply ---\n&quot;;
+            string output = &quot;--- DirPicksReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -12570,19 +7454,22 @@
     public class DirLandQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirlandquery_querydata&quot;)]
         public class QueryDataBlock
         {
-            public bool ReservedNewbie;
-            public bool ForSale;
+            public uint SearchType;
+            public int Area;
             public LLUUID QueryID;
-            public bool Auction;
             public uint QueryFlags;
+            public int Price;
+            public int QueryStart;
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    return 23;
+                    return 36;
                 }
             }
 
@@ -12591,11 +7478,12 @@
             {
                 try
                 {
-                    ReservedNewbie = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    ForSale = (bytes[i++] != 0) ? (bool)true : (bool)false;
+                    SearchType = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+                    Area = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                     QueryID = new LLUUID(bytes, i); i += 16;
-                    Auction = (bytes[i++] != 0) ? (bool)true : (bool)false;
                     QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+                    Price = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+                    QueryStart = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                 }
                 catch (Exception)
                 {
@@ -12605,36 +7493,52 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                bytes[i++] = (byte)((ReservedNewbie) ? 1 : 0);
-                bytes[i++] = (byte)((ForSale) ? 1 : 0);
+                bytes[i++] = (byte)(SearchType % 256);
+                bytes[i++] = (byte)((SearchType &gt;&gt; 8) % 256);
+                bytes[i++] = (byte)((SearchType &gt;&gt; 16) % 256);
+                bytes[i++] = (byte)((SearchType &gt;&gt; 24) % 256);
+                bytes[i++] = (byte)(Area % 256);
+                bytes[i++] = (byte)((Area &gt;&gt; 8) % 256);
+                bytes[i++] = (byte)((Area &gt;&gt; 16) % 256);
+                bytes[i++] = (byte)((Area &gt;&gt; 24) % 256);
                 if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
                 Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((Auction) ? 1 : 0);
                 bytes[i++] = (byte)(QueryFlags % 256);
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
+                bytes[i++] = (byte)(Price % 256);
+                bytes[i++] = (byte)((Price &gt;&gt; 8) % 256);
+                bytes[i++] = (byte)((Price &gt;&gt; 16) % 256);
+                bytes[i++] = (byte)((Price &gt;&gt; 24) % 256);
+                bytes[i++] = (byte)(QueryStart % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 8) % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 16) % 256);
+                bytes[i++] = (byte)((QueryStart &gt;&gt; 24) % 256);
             }
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Auction: &quot; + Auction.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;SearchType: &quot; + SearchType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Area: &quot; + Area.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Price: &quot; + Price.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirlandquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12667,9 +7571,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -12722,188 +7626,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirLandQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirLandQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirLandQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public bool ReservedNewbie;
-            public bool ForSale;
-            public bool Godlike;
-            public LLUUID QueryID;
-            public bool Auction;
-            public uint QueryFlags;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 28;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ReservedNewbie = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    ForSale = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    Auction = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((ReservedNewbie) ? 1 : 0);
-                bytes[i++] = (byte)((ForSale) ? 1 : 0);
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((Auction) ? 1 : 0);
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;Auction: &quot; + Auction.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirLandQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirLandQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 64;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirLandQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirLandQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirLandQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirLandReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirlandreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public bool ReservedNewbie;
@@ -12924,6 +7659,7 @@
             public bool Auction;
             public int SalePrice;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -12978,24 +7714,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Auction: &quot; + Auction.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ForSale: &quot; + ForSale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Auction: &quot; + Auction.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirlandreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13025,18 +7763,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirlandreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13066,8 +7806,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -13134,13 +7874,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirLandReply ---\n&quot;;
+            string output = &quot;--- DirLandReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -13150,11 +7890,13 @@
     public class DirPopularQueryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpopularquery_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
             public uint QueryFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13189,20 +7931,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpopularquery_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13235,9 +7979,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -13290,176 +8034,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPopularQuery ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DirPopularQuery ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DirPopularQueryBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public bool Godlike;
-            public LLUUID QueryID;
-            public uint QueryFlags;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 25;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    QueryFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(QueryFlags % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((QueryFlags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DirPopularQueryBackend; } }
-        public QueryDataBlock QueryData;
-        public AgentDataBlock AgentData;
-
-        public DirPopularQueryBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 67;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            QueryData = new QueryDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public DirPopularQueryBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public DirPopularQueryBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            QueryData = new QueryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += QueryData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DirPopularQueryBackend ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class DirPopularReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpopularreply_queryreplies&quot;)]
         public class QueryRepliesBlock
         {
             public LLUUID ParcelID;
@@ -13476,6 +8063,7 @@
             }
             public float Dwell;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13520,20 +8108,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryReplies --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryReplies --&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpopularreply_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13563,18 +8153,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;dirpopularreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13604,8 +8196,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -13672,13 +8264,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DirPopularReply ---\n&quot;;
+            string output = &quot;--- DirPopularReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; QueryReplies.Length; j++)
             {
-                output += QueryReplies[j].ToString() + &quot;\n&quot;;
+                output += QueryReplies[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -13688,10 +8280,12 @@
     public class ParcelInfoRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelinforequest_data&quot;)]
         public class DataBlock
         {
             public LLUUID ParcelID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13721,19 +8315,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelinforequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13766,9 +8362,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -13820,9 +8416,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelInfoRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelInfoRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -13832,6 +8428,7 @@
     public class ParcelInfoReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelinforeply_data&quot;)]
         public class DataBlock
         {
             private byte[] _simname;
@@ -13880,6 +8477,7 @@
             public int AuctionID;
             public float Dwell;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -13981,32 +8579,34 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalZ: &quot; + GlobalZ.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;AuctionID: &quot; + AuctionID.ToString() + &quot;\n&quot;;
-                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalZ: &quot; + GlobalZ.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AuctionID: &quot; + AuctionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelinforeply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14036,8 +8636,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -14090,9 +8690,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelInfoReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelInfoReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -14102,10 +8702,12 @@
     public class ParcelObjectOwnersRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelobjectownersrequest_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14137,19 +8739,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelobjectownersrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14182,9 +8786,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -14236,349 +8840,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelObjectOwnersRequest ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelObjectOwnersRequest ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class OnlineStatusRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public uint SpaceIP;
-            public bool Godlike;
-            public LLUUID QueryID;
-            public uint EstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 41;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SpaceIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Godlike = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                    EstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(SpaceIP % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Godlike) ? 1 : 0);
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(EstateID % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.OnlineStatusRequest; } }
-        public DataBlock[] Data;
-        public AgentDataBlock AgentData;
-
-        public OnlineStatusRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 72;
-            Header.Reliable = true;
-            Data = new DataBlock[0];
-            AgentData = new AgentDataBlock();
-        }
-
-        public OnlineStatusRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            Data = new DataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Data[j] = new DataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public OnlineStatusRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            Data = new DataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Data[j] = new DataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; Data.Length; j++) { length += Data[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)Data.Length;
-            for (int j = 0; j &lt; Data.Length; j++) { Data[j].ToBytes(bytes, ref i); }
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- OnlineStatusRequest ---\n&quot;;
-            for (int j = 0; j &lt; Data.Length; j++)
-            {
-                output += Data[j].ToString() + &quot;\n&quot;;
-            }
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class OnlineStatusReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID QueryID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.OnlineStatusReply; } }
-        public DataBlock[] Data;
-        public AgentDataBlock AgentData;
-
-        public OnlineStatusReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 73;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            Data = new DataBlock[0];
-            AgentData = new AgentDataBlock();
-        }
-
-        public OnlineStatusReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            Data = new DataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Data[j] = new DataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public OnlineStatusReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            Data = new DataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Data[j] = new DataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; Data.Length; j++) { length += Data[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)Data.Length;
-            for (int j = 0; j &lt; Data.Length; j++) { Data[j].ToBytes(bytes, ref i); }
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- OnlineStatusReply ---\n&quot;;
-            for (int j = 0; j &lt; Data.Length; j++)
-            {
-                output += Data[j].ToString() + &quot;\n&quot;;
-            }
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ParcelObjectOwnersReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelobjectownersreply_data&quot;)]
         public class DataBlock
         {
             public bool OnlineStatus;
@@ -14586,6 +8860,7 @@
             public LLUUID OwnerID;
             public int Count;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14624,11 +8899,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;OnlineStatus: &quot; + OnlineStatus.ToString() + &quot;\n&quot;;
-                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Count: &quot; + Count.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;OnlineStatus: &quot; + OnlineStatus.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Count: &quot; + Count.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -14685,10 +8960,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelObjectOwnersReply ---\n&quot;;
+            string output = &quot;--- ParcelObjectOwnersReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -14699,10 +8974,12 @@
     public class GroupNoticesListRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticeslistrequest_data&quot;)]
         public class DataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14732,19 +9009,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticeslistrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14777,9 +9056,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -14831,9 +9110,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupNoticesListRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupNoticesListRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -14843,6 +9122,7 @@
     public class GroupNoticesListReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticeslistreply_data&quot;)]
         public class DataBlock
         {
             public uint Timestamp;
@@ -14872,6 +9152,7 @@
             }
             public byte AssetType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14928,24 +9209,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;\n&quot;;
-                output += &quot;HasAttachment: &quot; + HasAttachment.ToString() + &quot;\n&quot;;
-                output += &quot;NoticeID: &quot; + NoticeID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromName, &quot;FromName&quot;) + &quot;\n&quot;;
-                output += &quot;AssetType: &quot; + AssetType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;HasAttachment: &quot; + HasAttachment.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NoticeID: &quot; + NoticeID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FromName, &quot;FromName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetType: &quot; + AssetType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticeslistreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -14978,9 +9261,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15041,12 +9324,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupNoticesListReply ---\n&quot;;
+            string output = &quot;--- GroupNoticesListReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -15056,10 +9339,12 @@
     public class GroupNoticeRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticerequest_data&quot;)]
         public class DataBlock
         {
             public LLUUID GroupNoticeID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15089,19 +9374,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;GroupNoticeID: &quot; + GroupNoticeID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;GroupNoticeID: &quot; + GroupNoticeID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticerequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15134,9 +9421,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15188,232 +9475,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupNoticeRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupNoticeRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class GroupNoticeAddPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MessageBlockBlock
-        {
-            public LLUUID ID;
-            private byte[] _message;
-            public byte[] Message
-            {
-                get { return _message; }
-                set
-                {
-                    if (value == null) { _message = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _message = new byte[value.Length]; Array.Copy(value, _message, value.Length); }
-                }
-            }
-            public byte Dialog;
-            public LLUUID ToGroupID;
-            private byte[] _binarybucket;
-            public byte[] BinaryBucket
-            {
-                get { return _binarybucket; }
-                set
-                {
-                    if (value == null) { _binarybucket = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _binarybucket = new byte[value.Length]; Array.Copy(value, _binarybucket, value.Length); }
-                }
-            }
-            private byte[] _fromagentname;
-            public byte[] FromAgentName
-            {
-                get { return _fromagentname; }
-                set
-                {
-                    if (value == null) { _fromagentname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _fromagentname = new byte[value.Length]; Array.Copy(value, _fromagentname, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 33;
-                    if (Message != null) { length += 2 + Message.Length; }
-                    if (BinaryBucket != null) { length += 2 + BinaryBucket.Length; }
-                    if (FromAgentName != null) { length += 1 + FromAgentName.Length; }
-                    return length;
-                }
-            }
-
-            public MessageBlockBlock() { }
-            public MessageBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _message = new byte[length];
-                    Array.Copy(bytes, i, _message, 0, length); i += length;
-                    Dialog = (byte)bytes[i++];
-                    ToGroupID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _binarybucket = new byte[length];
-                    Array.Copy(bytes, i, _binarybucket, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _fromagentname = new byte[length];
-                    Array.Copy(bytes, i, _fromagentname, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Message == null) { Console.WriteLine(&quot;Warning: Message is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Message.Length % 256);
-                bytes[i++] = (byte)((Message.Length &gt;&gt; 8) % 256);
-                Array.Copy(Message, 0, bytes, i, Message.Length); i += Message.Length;
-                bytes[i++] = Dialog;
-                if(ToGroupID == null) { Console.WriteLine(&quot;Warning: ToGroupID is null, in &quot; + this.GetType()); }
-                Array.Copy(ToGroupID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(BinaryBucket == null) { Console.WriteLine(&quot;Warning: BinaryBucket is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(BinaryBucket.Length % 256);
-                bytes[i++] = (byte)((BinaryBucket.Length &gt;&gt; 8) % 256);
-                Array.Copy(BinaryBucket, 0, bytes, i, BinaryBucket.Length); i += BinaryBucket.Length;
-                if(FromAgentName == null) { Console.WriteLine(&quot;Warning: FromAgentName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)FromAgentName.Length;
-                Array.Copy(FromAgentName, 0, bytes, i, FromAgentName.Length); i += FromAgentName.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MessageBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;Dialog: &quot; + Dialog.ToString() + &quot;\n&quot;;
-                output += &quot;ToGroupID: &quot; + ToGroupID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(BinaryBucket, &quot;BinaryBucket&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromAgentName, &quot;FromAgentName&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.GroupNoticeAdd; } }
-        public MessageBlockBlock MessageBlock;
-        public AgentDataBlock AgentData;
-
-        public GroupNoticeAddPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 78;
-            Header.Reliable = true;
-            MessageBlock = new MessageBlockBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public GroupNoticeAddPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            MessageBlock = new MessageBlockBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public GroupNoticeAddPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            MessageBlock = new MessageBlockBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += MessageBlock.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            MessageBlock.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- GroupNoticeAdd ---\n&quot;;
-                output += MessageBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class GroupNoticeDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticedelete_data&quot;)]
         public class DataBlock
         {
             public LLUUID GroupNoticeID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15446,20 +9526,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;GroupNoticeID: &quot; + GroupNoticeID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;GroupNoticeID: &quot; + GroupNoticeID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupnoticedelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15492,9 +9574,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15546,9 +9628,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupNoticeDelete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupNoticeDelete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -15558,12 +9640,14 @@
     public class TeleportRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportrequest_info&quot;)]
         public class InfoBlock
         {
             public LLUUID RegionID;
             public LLVector3 LookAt;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15591,29 +9675,29 @@
             {
                 if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
                 Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15646,9 +9730,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15700,9 +9784,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportRequest ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -15712,12 +9796,14 @@
     public class TeleportLocationRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportlocationrequest_info&quot;)]
         public class InfoBlock
         {
             public ulong RegionHandle;
             public LLVector3 LookAt;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15751,29 +9837,29 @@
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportlocationrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15806,9 +9892,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15860,9 +9946,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportLocationRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportLocationRequest ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -15872,6 +9958,7 @@
     public class TeleportLocalPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportlocal_info&quot;)]
         public class InfoBlock
         {
             public LLUUID AgentID;
@@ -15880,6 +9967,7 @@
             public uint TeleportFlags;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -15913,24 +10001,22 @@
                 bytes[i++] = (byte)((LocationID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((LocationID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((LocationID &gt;&gt; 24) % 256);
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(TeleportFlags % 256);
                 bytes[i++] = (byte)((TeleportFlags &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((TeleportFlags &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((TeleportFlags &gt;&gt; 24) % 256);
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -15977,8 +10063,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportLocal ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportLocal ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -15988,12 +10074,14 @@
     public class TeleportLandmarkRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportlandmarkrequest_info&quot;)]
         public class InfoBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID LandmarkID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -16029,10 +10117,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;LandmarkID: &quot; + LandmarkID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandmarkID: &quot; + LandmarkID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -16080,8 +10168,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportLandmarkRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportLandmarkRequest ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -16091,6 +10179,7 @@
     public class TeleportProgressPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportprogress_info&quot;)]
         public class InfoBlock
         {
             private byte[] _message;
@@ -16106,6 +10195,7 @@
             }
             public uint TeleportFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -16146,19 +10236,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportprogress_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -16188,8 +10280,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -16241,538 +10333,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportProgress ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportProgress ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DataHomeLocationRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlock
-        {
-            public LLUUID AgentID;
-            public uint KickedFromEstateID;
-
-            public int Length
-            {
-                get
-                {
-                    return 20;
-                }
-            }
-
-            public InfoBlock() { }
-            public InfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    KickedFromEstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(KickedFromEstateID % 256);
-                bytes[i++] = (byte)((KickedFromEstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((KickedFromEstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((KickedFromEstateID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;KickedFromEstateID: &quot; + KickedFromEstateID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DataHomeLocationRequest; } }
-        public InfoBlock Info;
-
-        public DataHomeLocationRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 85;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            Info = new InfoBlock();
-        }
-
-        public DataHomeLocationRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public DataHomeLocationRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Info.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Info.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DataHomeLocationRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class DataHomeLocationReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlock
-        {
-            public LLUUID AgentID;
-            public ulong RegionHandle;
-            public LLVector3 LookAt;
-            public LLVector3 Position;
-
-            public int Length
-            {
-                get
-                {
-                    return 48;
-                }
-            }
-
-            public InfoBlock() { }
-            public InfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    LookAt = new LLVector3(bytes, i); i += 12;
-                    Position = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
-                Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
-                Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DataHomeLocationReply; } }
-        public InfoBlock Info;
-
-        public DataHomeLocationReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 86;
-            Header.Reliable = true;
-            Info = new InfoBlock();
-        }
-
-        public DataHomeLocationReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public DataHomeLocationReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Info.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Info.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DataHomeLocationReply ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SpaceLocationTeleportRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlock
-        {
-            public LLUUID AgentID;
-            public byte TravelAccess;
-            public LLUUID SessionID;
-            public ulong RegionHandle;
-            public uint CircuitCode;
-            public LLVector3 LookAt;
-            public uint ParentEstateID;
-            public uint TeleportFlags;
-            public LLVector3 Position;
-
-            public int Length
-            {
-                get
-                {
-                    return 77;
-                }
-            }
-
-            public InfoBlock() { }
-            public InfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    TravelAccess = (byte)bytes[i++];
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    CircuitCode = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    LookAt = new LLVector3(bytes, i); i += 12;
-                    ParentEstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TeleportFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Position = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = TravelAccess;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)(CircuitCode % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 24) % 256);
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
-                Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = (byte)(ParentEstateID % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TeleportFlags % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 24) % 256);
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
-                Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TravelAccess: &quot; + TravelAccess.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SpaceLocationTeleportRequest; } }
-        public InfoBlock Info;
-
-        public SpaceLocationTeleportRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 87;
-            Header.Reliable = true;
-            Info = new InfoBlock();
-        }
-
-        public SpaceLocationTeleportRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public SpaceLocationTeleportRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Info.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Info.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SpaceLocationTeleportRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SpaceLocationTeleportReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlock
-        {
-            private byte[] _simname;
-            public byte[] SimName
-            {
-                get { return _simname; }
-                set
-                {
-                    if (value == null) { _simname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _simname = new byte[value.Length]; Array.Copy(value, _simname, value.Length); }
-                }
-            }
-            public LLUUID AgentID;
-            public ushort SimPort;
-            public ulong RegionHandle;
-            public uint LocationID;
-            public byte SimAccess;
-            public LLVector3 LookAt;
-            public uint SimIP;
-            public uint TeleportFlags;
-            public LLVector3 Position;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 63;
-                    if (SimName != null) { length += 1 + SimName.Length; }
-                    return length;
-                }
-            }
-
-            public InfoBlock() { }
-            public InfoBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _simname = new byte[length];
-                    Array.Copy(bytes, i, _simname, 0, length); i += length;
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SimPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    LocationID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SimAccess = (byte)bytes[i++];
-                    LookAt = new LLVector3(bytes, i); i += 12;
-                    SimIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TeleportFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Position = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SimName.Length;
-                Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((SimPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(SimPort % 256);
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)(LocationID % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 24) % 256);
-                bytes[i++] = SimAccess;
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
-                Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = (byte)(SimIP % 256);
-                bytes[i++] = (byte)((SimIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SimIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SimIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TeleportFlags % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 24) % 256);
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
-                Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Info --\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SimPort: &quot; + SimPort.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;SimIP: &quot; + SimIP.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SpaceLocationTeleportReply; } }
-        public InfoBlock Info;
-
-        public SpaceLocationTeleportReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 88;
-            Header.Reliable = true;
-            Info = new InfoBlock();
-        }
-
-        public SpaceLocationTeleportReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public SpaceLocationTeleportReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Info.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Info.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SpaceLocationTeleportReply ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class TeleportFinishPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportfinish_info&quot;)]
         public class InfoBlock
         {
             private byte[] _seedcapability;
@@ -16794,6 +10367,7 @@
             public uint SimIP;
             public uint TeleportFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -16862,15 +10436,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += Helpers.FieldToString(SeedCapability, &quot;SeedCapability&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SimPort: &quot; + SimPort.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;SimIP: &quot; + SimIP.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SeedCapability, &quot;SeedCapability&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimPort: &quot; + SimPort.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimIP: &quot; + SimIP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -16917,8 +10491,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportFinish ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportFinish ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -16928,6 +10502,7 @@
     public class StartLurePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;startlure_info&quot;)]
         public class InfoBlock
         {
             private byte[] _message;
@@ -16941,14 +10516,14 @@
                     else { _message = new byte[value.Length]; Array.Copy(value, _message, value.Length); }
                 }
             }
-            public LLUUID TargetID;
             public byte LureType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    int length = 17;
+                    int length = 1;
                     if (Message != null) { length += 1 + Message.Length; }
                     return length;
                 }
@@ -16963,7 +10538,6 @@
                     length = (ushort)bytes[i++];
                     _message = new byte[length];
                     Array.Copy(bytes, i, _message, 0, length); i += length;
-                    TargetID = new LLUUID(bytes, i); i += 16;
                     LureType = (byte)bytes[i++];
                 }
                 catch (Exception)
@@ -16977,28 +10551,70 @@
                 if(Message == null) { Console.WriteLine(&quot;Warning: Message is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)Message.Length;
                 Array.Copy(Message, 0, bytes, i, Message.Length); i += Message.Length;
+                bytes[i++] = LureType;
+            }
+
+            public override string ToString()
+            {
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LureType: &quot; + LureType.ToString() + &quot;&quot; + Environment.NewLine;
+                output = output.Trim();
+                return output;
+            }
+        }
+
+        /// &lt;exclude/&gt;
+        [XmlType(&quot;startlure_targetdata&quot;)]
+        public class TargetDataBlock
+        {
+            public LLUUID TargetID;
+
+            [XmlIgnore]
+            public int Length
+            {
+                get
+                {
+                    return 16;
+                }
+            }
+
+            public TargetDataBlock() { }
+            public TargetDataBlock(byte[] bytes, ref int i)
+            {
+                try
+                {
+                    TargetID = new LLUUID(bytes, i); i += 16;
+                }
+                catch (Exception)
+                {
+                    throw new MalformedDataException();
+                }
+            }
+
+            public void ToBytes(byte[] bytes, ref int i)
+            {
                 if(TargetID == null) { Console.WriteLine(&quot;Warning: TargetID is null, in &quot; + this.GetType()); }
                 Array.Copy(TargetID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = LureType;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += &quot;LureType: &quot; + LureType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TargetData --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;startlure_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17031,9 +10647,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17043,6 +10659,7 @@
         public override Header Header { get { return header; } set { header = value; } }
         public override PacketType Type { get { return PacketType.StartLure; } }
         public InfoBlock Info;
+        public TargetDataBlock[] TargetData;
         public AgentDataBlock AgentData;
 
         public StartLurePacket()
@@ -17051,6 +10668,7 @@
             Header.ID = 90;
             Header.Reliable = true;
             Info = new InfoBlock();
+            TargetData = new TargetDataBlock[0];
             AgentData = new AgentDataBlock();
         }
 
@@ -17059,6 +10677,10 @@
             int packetEnd = bytes.Length - 1;
             Header = new LowHeader(bytes, ref i, ref packetEnd);
             Info = new InfoBlock(bytes, ref i);
+            int count = (int)bytes[i++];
+            TargetData = new TargetDataBlock[count];
+            for (int j = 0; j &lt; count; j++)
+            { TargetData[j] = new TargetDataBlock(bytes, ref i); }
             AgentData = new AgentDataBlock(bytes, ref i);
         }
 
@@ -17066,6 +10688,10 @@
         {
             Header = head;
             Info = new InfoBlock(bytes, ref i);
+            int count = (int)bytes[i++];
+            TargetData = new TargetDataBlock[count];
+            for (int j = 0; j &lt; count; j++)
+            { TargetData[j] = new TargetDataBlock(bytes, ref i); }
             AgentData = new AgentDataBlock(bytes, ref i);
         }
 
@@ -17073,11 +10699,15 @@
         {
             int length = 8;
             length += Info.Length;            length += AgentData.Length;;
+            length++;
+            for (int j = 0; j &lt; TargetData.Length; j++) { length += TargetData[j].Length; }
             if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
             byte[] bytes = new byte[length];
             int i = 0;
             header.ToBytes(bytes, ref i);
             Info.ToBytes(bytes, ref i);
+            bytes[i++] = (byte)TargetData.Length;
+            for (int j = 0; j &lt; TargetData.Length; j++) { TargetData[j].ToBytes(bytes, ref i); }
             AgentData.ToBytes(bytes, ref i);
             if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
             return bytes;
@@ -17085,9 +10715,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- StartLure ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- StartLure ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
+            for (int j = 0; j &lt; TargetData.Length; j++)
+            {
+                output += TargetData[j].ToString() + &quot;&quot; + Environment.NewLine;
+            }
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -17097,6 +10731,7 @@
     public class TeleportLureRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportlurerequest_info&quot;)]
         public class InfoBlock
         {
             public LLUUID AgentID;
@@ -17104,6 +10739,7 @@
             public LLUUID LureID;
             public uint TeleportFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17144,11 +10780,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;LureID: &quot; + LureID.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LureID: &quot; + LureID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17195,8 +10831,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportLureRequest ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportLureRequest ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -17206,11 +10842,13 @@
     public class TeleportCancelPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportcancel_info&quot;)]
         public class InfoBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17243,9 +10881,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17292,148 +10930,23 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportCancel ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportCancel ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class CompleteLurePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlock
-        {
-            public LLUUID AgentID;
-            public byte TravelAccess;
-            public LLUUID SessionID;
-            public uint CircuitCode;
-            public LLUUID LureID;
-            public uint ParentEstateID;
-            public uint TeleportFlags;
-
-            public int Length
-            {
-                get
-                {
-                    return 61;
-                }
-            }
-
-            public InfoBlock() { }
-            public InfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    TravelAccess = (byte)bytes[i++];
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    CircuitCode = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    LureID = new LLUUID(bytes, i); i += 16;
-                    ParentEstateID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TeleportFlags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = TravelAccess;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(CircuitCode % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((CircuitCode &gt;&gt; 24) % 256);
-                if(LureID == null) { Console.WriteLine(&quot;Warning: LureID is null, in &quot; + this.GetType()); }
-                Array.Copy(LureID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(ParentEstateID % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ParentEstateID &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TeleportFlags % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TeleportFlags &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TravelAccess: &quot; + TravelAccess.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
-                output += &quot;LureID: &quot; + LureID.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.CompleteLure; } }
-        public InfoBlock Info;
-
-        public CompleteLurePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 93;
-            Header.Reliable = true;
-            Info = new InfoBlock();
-        }
-
-        public CompleteLurePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public CompleteLurePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Info = new InfoBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Info.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Info.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- CompleteLure ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class TeleportStartPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportstart_info&quot;)]
         public class InfoBlock
         {
             public uint TeleportFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17465,8 +10978,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;TeleportFlags: &quot; + TeleportFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17513,8 +11026,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportStart ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportStart ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -17524,6 +11037,7 @@
     public class TeleportFailedPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;teleportfailed_info&quot;)]
         public class InfoBlock
         {
             public LLUUID AgentID;
@@ -17539,6 +11053,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17577,9 +11092,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17626,8 +11141,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TeleportFailed ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TeleportFailed ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -17637,12 +11152,14 @@
     public class LeaderBoardRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leaderboardrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public int Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17680,10 +11197,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17730,8 +11247,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LeaderBoardRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LeaderBoardRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -17741,6 +11258,7 @@
     public class LeaderBoardDataPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leaderboarddata_boarddata&quot;)]
         public class BoardDataBlock
         {
             private byte[] _timestring;
@@ -17758,6 +11276,7 @@
             public int MinPlace;
             public int Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17808,17 +11327,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- BoardData --\n&quot;;
-                output += Helpers.FieldToString(TimeString, &quot;TimeString&quot;) + &quot;\n&quot;;
-                output += &quot;MaxPlace: &quot; + MaxPlace.ToString() + &quot;\n&quot;;
-                output += &quot;MinPlace: &quot; + MinPlace.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- BoardData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TimeString, &quot;TimeString&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaxPlace: &quot; + MaxPlace.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MinPlace: &quot; + MinPlace.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leaderboarddata_entry&quot;)]
         public class EntryBlock
         {
             public LLUUID ID;
@@ -17827,6 +11347,7 @@
             public int Place;
             public int Score;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17874,22 +11395,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Entry --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Sequence: &quot; + Sequence.ToString() + &quot;\n&quot;;
-                output += &quot;Place: &quot; + Place.ToString() + &quot;\n&quot;;
-                output += &quot;Score: &quot; + Score.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Entry --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Sequence: &quot; + Sequence.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Place: &quot; + Place.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Score: &quot; + Score.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leaderboarddata_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -17919,8 +11442,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -17987,13 +11510,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LeaderBoardData ---\n&quot;;
-                output += BoardData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LeaderBoardData ---&quot; + Environment.NewLine;
+                output += BoardData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Entry.Length; j++)
             {
-                output += Entry[j].ToString() + &quot;\n&quot;;
+                output += Entry[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18003,10 +11526,12 @@
     public class UndoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;undo_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18036,20 +11561,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;undo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18085,10 +11612,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18149,12 +11676,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- Undo ---\n&quot;;
+            string output = &quot;--- Undo ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18164,10 +11691,12 @@
     public class RedoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;redo_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18197,20 +11726,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;redo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18246,10 +11777,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18310,12 +11841,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- Redo ---\n&quot;;
+            string output = &quot;--- Redo ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18325,11 +11856,13 @@
     public class UndoLandPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;undoland_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18362,9 +11895,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18411,8 +11944,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UndoLand ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UndoLand ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18422,11 +11955,13 @@
     public class RedoLandPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;redoland_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18459,9 +11994,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18508,8 +12043,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RedoLand ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RedoLand ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18519,12 +12054,14 @@
     public class AgentPausePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentpause_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint SerialNum;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18562,10 +12099,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18612,8 +12149,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentPause ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentPause ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18623,12 +12160,14 @@
     public class AgentResumePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentresume_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint SerialNum;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18666,10 +12205,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18716,8 +12255,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentResume ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentResume ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18727,6 +12266,7 @@
     public class ChatFromViewerPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;chatfromviewer_chatdata&quot;)]
         public class ChatDataBlock
         {
             public int Channel;
@@ -18743,6 +12283,7 @@
             }
             public byte Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18786,21 +12327,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ChatData --\n&quot;;
-                output += &quot;Channel: &quot; + Channel.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ChatData --&quot; + Environment.NewLine;
+                output += &quot;Channel: &quot; + Channel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;chatfromviewer_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18833,9 +12376,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -18888,9 +12431,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChatFromViewer ---\n&quot;;
-                output += ChatData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChatFromViewer ---&quot; + Environment.NewLine;
+                output += ChatData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -18900,6 +12443,7 @@
     public class AgentThrottlePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentthrottle_throttle&quot;)]
         public class ThrottleBlock
         {
             public uint GenCounter;
@@ -18915,6 +12459,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -18955,21 +12500,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Throttle --\n&quot;;
-                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Throttles, &quot;Throttles&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Throttle --&quot; + Environment.NewLine;
+                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Throttles, &quot;Throttles&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentthrottle_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint CircuitCode;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19007,10 +12554,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19063,9 +12610,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentThrottle ---\n&quot;;
-                output += Throttle.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentThrottle ---&quot; + Environment.NewLine;
+                output += Throttle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19075,11 +12622,13 @@
     public class AgentFOVPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentfov_fovblock&quot;)]
         public class FOVBlockBlock
         {
             public uint GenCounter;
             public float VerticalAngle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19117,21 +12666,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FOVBlock --\n&quot;;
-                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;\n&quot;;
-                output += &quot;VerticalAngle: &quot; + VerticalAngle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FOVBlock --&quot; + Environment.NewLine;
+                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;VerticalAngle: &quot; + VerticalAngle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentfov_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint CircuitCode;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19169,10 +12720,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19224,9 +12775,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentFOV ---\n&quot;;
-                output += FOVBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentFOV ---&quot; + Environment.NewLine;
+                output += FOVBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19236,12 +12787,14 @@
     public class AgentHeightWidthPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentheightwidth_heightwidthblock&quot;)]
         public class HeightWidthBlockBlock
         {
             public uint GenCounter;
             public ushort Height;
             public ushort Width;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19279,22 +12832,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HeightWidthBlock --\n&quot;;
-                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;\n&quot;;
-                output += &quot;Height: &quot; + Height.ToString() + &quot;\n&quot;;
-                output += &quot;Width: &quot; + Width.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HeightWidthBlock --&quot; + Environment.NewLine;
+                output += &quot;GenCounter: &quot; + GenCounter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Height: &quot; + Height.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Width: &quot; + Width.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentheightwidth_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint CircuitCode;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19332,10 +12887,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19387,9 +12942,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentHeightWidth ---\n&quot;;
-                output += HeightWidthBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentHeightWidth ---&quot; + Environment.NewLine;
+                output += HeightWidthBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19399,10 +12954,12 @@
     public class AgentSetAppearancePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentsetappearance_visualparam&quot;)]
         public class VisualParamBlock
         {
             public byte ParamValue;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19431,14 +12988,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- VisualParam --\n&quot;;
-                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;\n&quot;;
+                string output = &quot;-- VisualParam --&quot; + Environment.NewLine;
+                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentsetappearance_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _textureentry;
@@ -19453,6 +13011,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19489,19 +13048,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentsetappearance_wearabledata&quot;)]
         public class WearableDataBlock
         {
             public byte TextureIndex;
             public LLUUID CacheID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19533,15 +13094,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;\n&quot;;
-                output += &quot;CacheID: &quot; + CacheID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- WearableData --&quot; + Environment.NewLine;
+                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CacheID: &quot; + CacheID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentsetappearance_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint SerialNum;
@@ -19549,6 +13111,7 @@
             public LLUUID SessionID;
             public LLVector3 Size;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19583,17 +13146,16 @@
                 Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Size == null) { Console.WriteLine(&quot;Warning: Size is null, in &quot; + this.GetType()); }
                 Array.Copy(Size.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Size: &quot; + Size.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Size: &quot; + Size.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19674,17 +13236,17 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentSetAppearance ---\n&quot;;
+            string output = &quot;--- AgentSetAppearance ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; VisualParam.Length; j++)
             {
-                output += VisualParam[j].ToString() + &quot;\n&quot;;
+                output += VisualParam[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ObjectData.ToString() + &quot;\n&quot;;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; WearableData.Length; j++)
             {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
+                output += WearableData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19694,11 +13256,13 @@
     public class AgentQuitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentquit_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19731,9 +13295,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19780,8 +13344,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentQuit ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentQuit ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19791,10 +13355,12 @@
     public class AgentQuitCopyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentquitcopy_fuseblock&quot;)]
         public class FuseBlockBlock
         {
             public uint ViewerCircuitCode;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19826,19 +13392,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FuseBlock --\n&quot;;
-                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FuseBlock --&quot; + Environment.NewLine;
+                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentquitcopy_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19871,9 +13439,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -19925,9 +13493,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentQuitCopy ---\n&quot;;
-                output += FuseBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentQuitCopy ---&quot; + Environment.NewLine;
+                output += FuseBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -19937,10 +13505,12 @@
     public class ImageNotInDatabasePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;imagenotindatabase_imageid&quot;)]
         public class ImageIDBlock
         {
             public LLUUID ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -19970,8 +13540,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ImageID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ImageID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20018,8 +13588,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ImageNotInDatabase ---\n&quot;;
-                output += ImageID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ImageNotInDatabase ---&quot; + Environment.NewLine;
+                output += ImageID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20029,10 +13599,12 @@
     public class RebakeAvatarTexturesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rebakeavatartextures_texturedata&quot;)]
         public class TextureDataBlock
         {
             public LLUUID TextureID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20062,8 +13634,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TextureData --\n&quot;;
-                output += &quot;TextureID: &quot; + TextureID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TextureData --&quot; + Environment.NewLine;
+                output += &quot;TextureID: &quot; + TextureID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20110,8 +13682,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RebakeAvatarTextures ---\n&quot;;
-                output += TextureData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RebakeAvatarTextures ---&quot; + Environment.NewLine;
+                output += TextureData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20121,12 +13693,14 @@
     public class SetAlwaysRunPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setalwaysrun_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public bool AlwaysRun;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20161,10 +13735,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;AlwaysRun: &quot; + AlwaysRun.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AlwaysRun: &quot; + AlwaysRun.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20211,8 +13785,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetAlwaysRun ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetAlwaysRun ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20222,10 +13796,12 @@
     public class ObjectDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdelete_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20257,20 +13833,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public bool Force;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20305,10 +13883,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Force: &quot; + Force.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Force: &quot; + Force.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20370,12 +13948,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDelete ---\n&quot;;
+            string output = &quot;--- ObjectDelete ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20385,10 +13963,12 @@
     public class ObjectDuplicatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectduplicate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20420,19 +14000,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectduplicate_shareddata&quot;)]
         public class SharedDataBlock
         {
             public uint DuplicateFlags;
             public LLVector3 Offset;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20461,27 +14043,28 @@
                 bytes[i++] = (byte)((DuplicateFlags &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((DuplicateFlags &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((DuplicateFlags &gt;&gt; 24) % 256);
-                if(Offset == null) { Console.WriteLine(&quot;Warning: Offset is null, in &quot; + this.GetType()); }
                 Array.Copy(Offset.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- SharedData --\n&quot;;
-                output += &quot;DuplicateFlags: &quot; + DuplicateFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Offset: &quot; + Offset.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SharedData --&quot; + Environment.NewLine;
+                output += &quot;DuplicateFlags: &quot; + DuplicateFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Offset: &quot; + Offset.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectduplicate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20517,10 +14100,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20587,13 +14170,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDuplicate ---\n&quot;;
+            string output = &quot;--- ObjectDuplicate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += SharedData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += SharedData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20603,10 +14186,12 @@
     public class ObjectDuplicateOnRayPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectduplicateonray_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20638,14 +14223,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectduplicateonray_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -20660,6 +14246,7 @@
             public bool CopyCenters;
             public LLUUID RayTargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20702,12 +14289,10 @@
                 bytes[i++] = (byte)((CopyRotates) ? 1 : 0);
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(RayStart == null) { Console.WriteLine(&quot;Warning: RayStart is null, in &quot; + this.GetType()); }
                 Array.Copy(RayStart.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(GroupID == null) { Console.WriteLine(&quot;Warning: GroupID is null, in &quot; + this.GetType()); }
                 Array.Copy(GroupID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = (byte)((RayEndIsIntersection) ? 1 : 0);
-                if(RayEnd == null) { Console.WriteLine(&quot;Warning: RayEnd is null, in &quot; + this.GetType()); }
                 Array.Copy(RayEnd.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)((BypassRaycast) ? 1 : 0);
                 bytes[i++] = (byte)((CopyCenters) ? 1 : 0);
@@ -20717,18 +14302,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;DuplicateFlags: &quot; + DuplicateFlags.ToString() + &quot;\n&quot;;
-                output += &quot;CopyRotates: &quot; + CopyRotates.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;\n&quot;;
-                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;\n&quot;;
-                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;\n&quot;;
-                output += &quot;CopyCenters: &quot; + CopyCenters.ToString() + &quot;\n&quot;;
-                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DuplicateFlags: &quot; + DuplicateFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CopyRotates: &quot; + CopyRotates.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CopyCenters: &quot; + CopyCenters.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20790,12 +14375,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDuplicateOnRay ---\n&quot;;
+            string output = &quot;--- ObjectDuplicateOnRay ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20805,11 +14390,13 @@
     public class ObjectScalePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectscale_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
             public LLVector3 Scale;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20838,26 +14425,27 @@
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 24) % 256);
-                if(Scale == null) { Console.WriteLine(&quot;Warning: Scale is null, in &quot; + this.GetType()); }
                 Array.Copy(Scale.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Scale: &quot; + Scale.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Scale: &quot; + Scale.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectscale_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -20890,9 +14478,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -20954,12 +14542,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectScale ---\n&quot;;
+            string output = &quot;--- ObjectScale ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -20969,11 +14557,13 @@
     public class ObjectRotationPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectrotation_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
             public LLQuaternion Rotation;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21002,26 +14592,27 @@
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 24) % 256);
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
                 Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectrotation_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21054,9 +14645,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21118,12 +14709,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectRotation ---\n&quot;;
+            string output = &quot;--- ObjectRotation ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -21133,6 +14724,7 @@
     public class ObjectFlagUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectflagupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -21143,6 +14735,7 @@
             public bool CastsShadows;
             public bool IsPhantom;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21188,14 +14781,14 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;IsTemporary: &quot; + IsTemporary.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;UsePhysics: &quot; + UsePhysics.ToString() + &quot;\n&quot;;
-                output += &quot;CastsShadows: &quot; + CastsShadows.ToString() + &quot;\n&quot;;
-                output += &quot;IsPhantom: &quot; + IsPhantom.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsTemporary: &quot; + IsTemporary.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UsePhysics: &quot; + UsePhysics.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CastsShadows: &quot; + CastsShadows.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsPhantom: &quot; + IsPhantom.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21243,8 +14836,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectFlagUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectFlagUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -21254,11 +14847,13 @@
     public class ObjectClickActionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectclickaction_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public byte ClickAction;
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21292,20 +14887,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ClickAction: &quot; + ClickAction.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ClickAction: &quot; + ClickAction.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectclickaction_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21338,9 +14935,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21402,12 +14999,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectClickAction ---\n&quot;;
+            string output = &quot;--- ObjectClickAction ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -21417,6 +15014,7 @@
     public class ObjectImagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectimage_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _mediaurl;
@@ -21443,6 +15041,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21491,21 +15090,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectimage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21538,9 +15139,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21602,12 +15203,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectImage ---\n&quot;;
+            string output = &quot;--- ObjectImage ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -21617,11 +15218,13 @@
     public class ObjectMaterialPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectmaterial_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public byte Material;
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21655,20 +15258,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;Material: &quot; + Material.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;Material: &quot; + Material.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectmaterial_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21701,9 +15306,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21765,12 +15370,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectMaterial ---\n&quot;;
+            string output = &quot;--- ObjectMaterial ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -21780,6 +15385,7 @@
     public class ObjectShapePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectshape_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public sbyte PathTwistBegin;
@@ -21802,6 +15408,7 @@
             public byte ProfileHollow;
             public byte PathRevolutions;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21869,37 +15476,39 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;\n&quot;;
-                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;\n&quot;;
-                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;\n&quot;;
-                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectshape_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -21932,9 +15541,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -21996,12 +15605,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectShape ---\n&quot;;
+            string output = &quot;--- ObjectShape ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22011,6 +15620,7 @@
     public class ObjectExtraParamsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectextraparams_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public bool ParamInUse;
@@ -22029,6 +15639,7 @@
             public uint ParamSize;
             public ushort ParamType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22079,23 +15690,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ParamInUse: &quot; + ParamInUse.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ParamData, &quot;ParamData&quot;) + &quot;\n&quot;;
-                output += &quot;ParamSize: &quot; + ParamSize.ToString() + &quot;\n&quot;;
-                output += &quot;ParamType: &quot; + ParamType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ParamInUse: &quot; + ParamInUse.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ParamData, &quot;ParamData&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParamSize: &quot; + ParamSize.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParamType: &quot; + ParamType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectextraparams_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22128,9 +15741,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -22192,12 +15805,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectExtraParams ---\n&quot;;
+            string output = &quot;--- ObjectExtraParams ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22207,10 +15820,12 @@
     public class ObjectOwnerPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectowner_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22242,19 +15857,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectowner_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22287,21 +15904,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectowner_headerdata&quot;)]
         public class HeaderDataBlock
         {
             public LLUUID GroupID;
             public LLUUID OwnerID;
             public bool Override;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22336,10 +15955,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HeaderData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Override: &quot; + Override.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HeaderData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Override: &quot; + Override.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -22406,13 +16025,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectOwner ---\n&quot;;
+            string output = &quot;--- ObjectOwner ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += HeaderData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += HeaderData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22422,10 +16041,12 @@
     public class ObjectGroupPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgroup_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22457,20 +16078,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgroup_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22506,10 +16129,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -22571,12 +16194,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectGroup ---\n&quot;;
+            string output = &quot;--- ObjectGroup ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22586,12 +16209,14 @@
     public class ObjectBuyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectbuy_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public byte SaleType;
             public int SalePrice;
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22630,16 +16255,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectbuy_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -22647,6 +16273,7 @@
             public LLUUID GroupID;
             public LLUUID CategoryID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22685,11 +16312,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;CategoryID: &quot; + CategoryID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CategoryID: &quot; + CategoryID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -22751,12 +16378,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectBuy ---\n&quot;;
+            string output = &quot;--- ObjectBuy ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22766,12 +16393,14 @@
     public class BuyObjectInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;buyobjectinventory_data&quot;)]
         public class DataBlock
         {
             public LLUUID ObjectID;
             public LLUUID ItemID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22807,21 +16436,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;buyobjectinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22854,9 +16485,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -22909,9 +16540,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- BuyObjectInventory ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- BuyObjectInventory ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -22921,11 +16552,13 @@
     public class DerezContainerPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;derezcontainer_data&quot;)]
         public class DataBlock
         {
             public LLUUID ObjectID;
             public bool Delete;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -22957,9 +16590,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Delete: &quot; + Delete.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Delete: &quot; + Delete.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23007,8 +16640,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DerezContainer ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DerezContainer ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23018,6 +16651,7 @@
     public class ObjectPermissionsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectpermissions_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public byte Set;
@@ -23025,6 +16659,7 @@
             public uint ObjectLocalID;
             public byte Field;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23065,22 +16700,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;Set: &quot; + Set.ToString() + &quot;\n&quot;;
-                output += &quot;Mask: &quot; + Mask.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Field: &quot; + Field.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;Set: &quot; + Set.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Mask: &quot; + Mask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Field: &quot; + Field.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectpermissions_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23113,19 +16750,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectpermissions_headerdata&quot;)]
         public class HeaderDataBlock
         {
             public bool Override;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23154,8 +16793,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HeaderData --\n&quot;;
-                output += &quot;Override: &quot; + Override.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HeaderData --&quot; + Environment.NewLine;
+                output += &quot;Override: &quot; + Override.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23222,13 +16861,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectPermissions ---\n&quot;;
+            string output = &quot;--- ObjectPermissions ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += HeaderData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += HeaderData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23238,12 +16877,14 @@
     public class ObjectSaleInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectsaleinfo_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint LocalID;
             public byte SaleType;
             public int SalePrice;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23282,21 +16923,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectsaleinfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23329,9 +16972,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23393,12 +17036,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectSaleInfo ---\n&quot;;
+            string output = &quot;--- ObjectSaleInfo ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23408,6 +17051,7 @@
     public class ObjectNamePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectname_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint LocalID;
@@ -23423,6 +17067,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23463,20 +17108,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectname_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23509,9 +17156,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23573,12 +17220,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectName ---\n&quot;;
+            string output = &quot;--- ObjectName ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23588,6 +17235,7 @@
     public class ObjectDescriptionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdescription_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint LocalID;
@@ -23603,6 +17251,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23643,20 +17292,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdescription_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23689,9 +17340,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23753,12 +17404,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDescription ---\n&quot;;
+            string output = &quot;--- ObjectDescription ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23768,11 +17419,13 @@
     public class ObjectCategoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectcategory_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint LocalID;
             public uint Category;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23809,20 +17462,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectcategory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23855,9 +17510,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -23919,12 +17574,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectCategory ---\n&quot;;
+            string output = &quot;--- ObjectCategory ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -23934,10 +17589,12 @@
     public class ObjectSelectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectselect_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -23969,19 +17626,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectselect_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24014,9 +17673,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24078,12 +17737,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectSelect ---\n&quot;;
+            string output = &quot;--- ObjectSelect ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24093,10 +17752,12 @@
     public class ObjectDeselectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdeselect_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24128,19 +17789,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdeselect_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24173,9 +17836,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24237,12 +17900,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDeselect ---\n&quot;;
+            string output = &quot;--- ObjectDeselect ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24252,11 +17915,13 @@
     public class ObjectAttachPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectattach_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
             public LLQuaternion Rotation;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24285,27 +17950,28 @@
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 24) % 256);
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
                 Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectattach_agentdata&quot;)]
         public class AgentDataBlock
         {
             public byte AttachmentPoint;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24340,10 +18006,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AttachmentPoint: &quot; + AttachmentPoint.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AttachmentPoint: &quot; + AttachmentPoint.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24405,12 +18071,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectAttach ---\n&quot;;
+            string output = &quot;--- ObjectAttach ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24420,10 +18086,12 @@
     public class ObjectDetachPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdetach_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24455,19 +18123,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdetach_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24500,9 +18170,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24563,12 +18233,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDetach ---\n&quot;;
+            string output = &quot;--- ObjectDetach ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24578,10 +18248,12 @@
     public class ObjectDropPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdrop_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24613,19 +18285,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdrop_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24658,9 +18332,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24721,12 +18395,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDrop ---\n&quot;;
+            string output = &quot;--- ObjectDrop ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24736,10 +18410,12 @@
     public class ObjectLinkPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectlink_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24771,19 +18447,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectlink_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24816,9 +18494,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -24879,12 +18557,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectLink ---\n&quot;;
+            string output = &quot;--- ObjectLink ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -24894,10 +18572,12 @@
     public class ObjectDelinkPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdelink_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24929,19 +18609,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdelink_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -24974,9 +18656,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25037,12 +18719,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDelink ---\n&quot;;
+            string output = &quot;--- ObjectDelink ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25052,10 +18734,12 @@
     public class ObjectHingePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objecthinge_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25087,18 +18771,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objecthinge_jointtype&quot;)]
         public class JointTypeBlock
         {
             public byte Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25127,19 +18813,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- JointType --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- JointType --&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objecthinge_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25172,9 +18860,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25240,13 +18928,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectHinge ---\n&quot;;
+            string output = &quot;--- ObjectHinge ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += JointType.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += JointType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25256,10 +18944,12 @@
     public class ObjectDehingePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdehinge_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25291,19 +18981,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdehinge_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25336,9 +19028,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25399,12 +19091,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDehinge ---\n&quot;;
+            string output = &quot;--- ObjectDehinge ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25414,11 +19106,13 @@
     public class ObjectGrabPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgrab_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLVector3 GrabOffset;
             public uint LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25443,7 +19137,6 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(GrabOffset == null) { Console.WriteLine(&quot;Warning: GrabOffset is null, in &quot; + this.GetType()); }
                 Array.Copy(GrabOffset.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(LocalID % 256);
                 bytes[i++] = (byte)((LocalID &gt;&gt; 8) % 256);
@@ -25453,20 +19146,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;GrabOffset: &quot; + GrabOffset.ToString() + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;GrabOffset: &quot; + GrabOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgrab_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25499,9 +19194,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25554,9 +19249,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectGrab ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectGrab ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25566,6 +19261,7 @@
     public class ObjectGrabUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgrabupdate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint TimeSinceLast;
@@ -25573,6 +19269,7 @@
             public LLVector3 GrabOffsetInitial;
             public LLVector3 GrabPosition;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25605,30 +19302,30 @@
                 bytes[i++] = (byte)((TimeSinceLast &gt;&gt; 24) % 256);
                 if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
                 Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(GrabOffsetInitial == null) { Console.WriteLine(&quot;Warning: GrabOffsetInitial is null, in &quot; + this.GetType()); }
                 Array.Copy(GrabOffsetInitial.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(GrabPosition == null) { Console.WriteLine(&quot;Warning: GrabPosition is null, in &quot; + this.GetType()); }
                 Array.Copy(GrabPosition.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;TimeSinceLast: &quot; + TimeSinceLast.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;GrabOffsetInitial: &quot; + GrabOffsetInitial.ToString() + &quot;\n&quot;;
-                output += &quot;GrabPosition: &quot; + GrabPosition.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;TimeSinceLast: &quot; + TimeSinceLast.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GrabOffsetInitial: &quot; + GrabOffsetInitial.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GrabPosition: &quot; + GrabPosition.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectgrabupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25661,9 +19358,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25716,9 +19413,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectGrabUpdate ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectGrabUpdate ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25728,10 +19425,12 @@
     public class ObjectDeGrabPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdegrab_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25763,19 +19462,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectdegrab_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25808,9 +19509,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -25862,9 +19563,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectDeGrab ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectDeGrab ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -25874,10 +19575,12 @@
     public class ObjectSpinStartPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinstart_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25907,19 +19610,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinstart_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -25952,9 +19657,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26007,9 +19712,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectSpinStart ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectSpinStart ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26019,11 +19724,13 @@
     public class ObjectSpinUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinupdate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
             public LLQuaternion Rotation;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26050,26 +19757,27 @@
             {
                 if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
                 Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
                 Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26102,9 +19810,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26157,9 +19865,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectSpinUpdate ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectSpinUpdate ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26169,10 +19877,12 @@
     public class ObjectSpinStopPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinstop_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26202,19 +19912,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectspinstop_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26247,9 +19959,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26302,9 +20014,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectSpinStop ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectSpinStop ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26314,10 +20026,12 @@
     public class ObjectExportSelectedPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectexportselected_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26347,20 +20061,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectexportselected_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID RequestID;
             public short VolumeDetail;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26396,10 +20112,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;VolumeDetail: &quot; + VolumeDetail.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;VolumeDetail: &quot; + VolumeDetail.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26461,12 +20177,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectExportSelected ---\n&quot;;
+            string output = &quot;--- ObjectExportSelected ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26476,11 +20192,13 @@
     public class ObjectImportPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectimport_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26513,15 +20231,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectimport_assetdata&quot;)]
         public class AssetDataBlock
         {
             private byte[] _objectname;
@@ -26548,6 +20267,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26593,10 +20313,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AssetData --\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += &quot;FileID: &quot; + FileID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
+                string output = &quot;-- AssetData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;FileID: &quot; + FileID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26649,9 +20369,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectImport ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += AssetData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectImport ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AssetData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26661,6 +20381,7 @@
     public class ModifyLandPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;modifyland_modifyblock&quot;)]
         public class ModifyBlockBlock
         {
             public byte BrushSize;
@@ -26668,6 +20389,7 @@
             public float Height;
             public byte Action;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26709,17 +20431,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ModifyBlock --\n&quot;;
-                output += &quot;BrushSize: &quot; + BrushSize.ToString() + &quot;\n&quot;;
-                output += &quot;Seconds: &quot; + Seconds.ToString() + &quot;\n&quot;;
-                output += &quot;Height: &quot; + Height.ToString() + &quot;\n&quot;;
-                output += &quot;Action: &quot; + Action.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ModifyBlock --&quot; + Environment.NewLine;
+                output += &quot;BrushSize: &quot; + BrushSize.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Seconds: &quot; + Seconds.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Height: &quot; + Height.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Action: &quot; + Action.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;modifyland_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
@@ -26728,6 +20451,7 @@
             public float North;
             public float South;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26780,23 +20504,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;East: &quot; + East.ToString() + &quot;\n&quot;;
-                output += &quot;West: &quot; + West.ToString() + &quot;\n&quot;;
-                output += &quot;North: &quot; + North.ToString() + &quot;\n&quot;;
-                output += &quot;South: &quot; + South.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;East: &quot; + East.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;West: &quot; + West.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;North: &quot; + North.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;South: &quot; + South.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;modifyland_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26829,9 +20555,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -26898,13 +20624,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ModifyLand ---\n&quot;;
-                output += ModifyBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ModifyLand ---&quot; + Environment.NewLine;
+                output += ModifyBlock.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParcelData.Length; j++)
             {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
+                output += ParcelData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -26914,11 +20640,13 @@
     public class VelocityInterpolateOnPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;velocityinterpolateon_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -26951,9 +20679,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27000,8 +20728,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- VelocityInterpolateOn ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- VelocityInterpolateOn ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27011,11 +20739,13 @@
     public class VelocityInterpolateOffPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;velocityinterpolateoff_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27048,9 +20778,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27097,8 +20827,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- VelocityInterpolateOff ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- VelocityInterpolateOff ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27108,6 +20838,7 @@
     public class StateSavePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;statesave_datablock&quot;)]
         public class DataBlockBlock
         {
             private byte[] _filename;
@@ -27122,6 +20853,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27157,19 +20889,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;statesave_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27202,9 +20936,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27256,9 +20990,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- StateSave ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- StateSave ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27268,11 +21002,13 @@
     public class ReportAutosaveCrashPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;reportautosavecrash_autosavedata&quot;)]
         public class AutosaveDataBlock
         {
             public int PID;
             public int Status;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27309,9 +21045,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AutosaveData --\n&quot;;
-                output += &quot;PID: &quot; + PID.ToString() + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AutosaveData --&quot; + Environment.NewLine;
+                output += &quot;PID: &quot; + PID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Status: &quot; + Status.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27358,8 +21094,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ReportAutosaveCrash ---\n&quot;;
-                output += AutosaveData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ReportAutosaveCrash ---&quot; + Environment.NewLine;
+                output += AutosaveData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27369,11 +21105,13 @@
     public class SimWideDeletesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;simwidedeletes_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID TargetID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27408,20 +21146,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;simwidedeletes_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27454,9 +21194,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27508,9 +21248,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SimWideDeletes ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SimWideDeletes ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27520,10 +21260,12 @@
     public class TrackAgentPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;trackagent_targetdata&quot;)]
         public class TargetDataBlock
         {
             public LLUUID PreyID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27553,19 +21295,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TargetData --\n&quot;;
-                output += &quot;PreyID: &quot; + PreyID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TargetData --&quot; + Environment.NewLine;
+                output += &quot;PreyID: &quot; + PreyID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;trackagent_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27598,9 +21342,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -27652,9 +21396,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TrackAgent ---\n&quot;;
-                output += TargetData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TrackAgent ---&quot; + Environment.NewLine;
+                output += TargetData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -27664,12 +21408,14 @@
     public class ViewerStatsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstats_downloadtotals&quot;)]
         public class DownloadTotalsBlock
         {
             public uint Objects;
             public uint Textures;
             public uint World;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27711,21 +21457,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DownloadTotals --\n&quot;;
-                output += &quot;Objects: &quot; + Objects.ToString() + &quot;\n&quot;;
-                output += &quot;Textures: &quot; + Textures.ToString() + &quot;\n&quot;;
-                output += &quot;World: &quot; + World.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DownloadTotals --&quot; + Environment.NewLine;
+                output += &quot;Objects: &quot; + Objects.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Textures: &quot; + Textures.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;World: &quot; + World.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstats_miscstats&quot;)]
         public class MiscStatsBlock
         {
             public uint Type;
             public double Value;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27763,15 +21511,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MiscStats --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Value: &quot; + Value.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MiscStats --&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Value: &quot; + Value.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstats_netstats&quot;)]
         public class NetStatsBlock
         {
             public uint Packets;
@@ -27779,6 +21528,7 @@
             public uint Compressed;
             public uint Bytes;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27825,17 +21575,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NetStats --\n&quot;;
-                output += &quot;Packets: &quot; + Packets.ToString() + &quot;\n&quot;;
-                output += &quot;Savings: &quot; + Savings.ToString() + &quot;\n&quot;;
-                output += &quot;Compressed: &quot; + Compressed.ToString() + &quot;\n&quot;;
-                output += &quot;Bytes: &quot; + Bytes.ToString() + &quot;\n&quot;;
+                string output = &quot;-- NetStats --&quot; + Environment.NewLine;
+                output += &quot;Packets: &quot; + Packets.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Savings: &quot; + Savings.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Compressed: &quot; + Compressed.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Bytes: &quot; + Bytes.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstats_failstats&quot;)]
         public class FailStatsBlock
         {
             public uint FailedResends;
@@ -27845,6 +21596,7 @@
             public uint OffCircuit;
             public uint Resent;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -27901,19 +21653,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FailStats --\n&quot;;
-                output += &quot;FailedResends: &quot; + FailedResends.ToString() + &quot;\n&quot;;
-                output += &quot;Invalid: &quot; + Invalid.ToString() + &quot;\n&quot;;
-                output += &quot;SendPacket: &quot; + SendPacket.ToString() + &quot;\n&quot;;
-                output += &quot;Dropped: &quot; + Dropped.ToString() + &quot;\n&quot;;
-                output += &quot;OffCircuit: &quot; + OffCircuit.ToString() + &quot;\n&quot;;
-                output += &quot;Resent: &quot; + Resent.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FailStats --&quot; + Environment.NewLine;
+                output += &quot;FailedResends: &quot; + FailedResends.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Invalid: &quot; + Invalid.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SendPacket: &quot; + SendPacket.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dropped: &quot; + Dropped.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OffCircuit: &quot; + OffCircuit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Resent: &quot; + Resent.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstats_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint IP;
@@ -27962,6 +21715,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28065,22 +21819,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;AgentsInView: &quot; + AgentsInView.ToString() + &quot;\n&quot;;
-                output += &quot;FPS: &quot; + FPS.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionsVisited: &quot; + RegionsVisited.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Ping: &quot; + Ping.ToString() + &quot;\n&quot;;
-                output += &quot;RunTime: &quot; + RunTime.ToString() + &quot;\n&quot;;
-                output += &quot;MetersTraveled: &quot; + MetersTraveled.ToString() + &quot;\n&quot;;
-                output += &quot;SimFPS: &quot; + SimFPS.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SysCPU, &quot;SysCPU&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(SysGPU, &quot;SysGPU&quot;) + &quot;\n&quot;;
-                output += &quot;SysRAM: &quot; + SysRAM.ToString() + &quot;\n&quot;;
-                output += &quot;StartTime: &quot; + StartTime.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SysOS, &quot;SysOS&quot;) + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;IP: &quot; + IP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentsInView: &quot; + AgentsInView.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FPS: &quot; + FPS.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionsVisited: &quot; + RegionsVisited.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Ping: &quot; + Ping.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RunTime: &quot; + RunTime.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MetersTraveled: &quot; + MetersTraveled.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimFPS: &quot; + SimFPS.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SysCPU, &quot;SysCPU&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SysGPU, &quot;SysGPU&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SysRAM: &quot; + SysRAM.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StartTime: &quot; + StartTime.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SysOS, &quot;SysOS&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -28162,18 +21916,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ViewerStats ---\n&quot;;
-                output += DownloadTotals.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ViewerStats ---&quot; + Environment.NewLine;
+                output += DownloadTotals.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; MiscStats.Length; j++)
             {
-                output += MiscStats[j].ToString() + &quot;\n&quot;;
+                output += MiscStats[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             for (int j = 0; j &lt; 2; j++)
             {
-                output += NetStats[j].ToString() + &quot;\n&quot;;
+                output += NetStats[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += FailStats.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += FailStats.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -28183,12 +21937,14 @@
     public class ScriptAnswerYesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptansweryes_data&quot;)]
         public class DataBlock
         {
             public LLUUID TaskID;
             public LLUUID ItemID;
             public int Questions;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28226,21 +21982,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;Questions: &quot; + Questions.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Questions: &quot; + Questions.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptansweryes_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28273,9 +22031,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -28327,9 +22085,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptAnswerYes ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptAnswerYes ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -28339,66 +22097,7 @@
     public class UserReportPacket : Packet
     {
         /// &lt;exclude/&gt;
-        public class MeanCollisionBlock
-        {
-            public float Mag;
-            public uint Time;
-            public LLUUID Perp;
-            public byte Type;
-
-            public int Length
-            {
-                get
-                {
-                    return 25;
-                }
-            }
-
-            public MeanCollisionBlock() { }
-            public MeanCollisionBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Mag = BitConverter.ToSingle(bytes, i); i += 4;
-                    Time = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Perp = new LLUUID(bytes, i); i += 16;
-                    Type = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(Mag);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(Time % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 24) % 256);
-                if(Perp == null) { Console.WriteLine(&quot;Warning: Perp is null, in &quot; + this.GetType()); }
-                Array.Copy(Perp.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = Type;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MeanCollision --\n&quot;;
-                output += &quot;Mag: &quot; + Mag.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Perp: &quot; + Perp.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
+        [XmlType(&quot;userreport_reportdata&quot;)]
         public class ReportDataBlock
         {
             public LLUUID ObjectID;
@@ -28424,6 +22123,7 @@
                     else { _versionstring = new byte[value.Length]; Array.Copy(value, _versionstring, value.Length); }
                 }
             }
+            public LLUUID AbuseRegionID;
             public byte CheckFlags;
             public byte Category;
             private byte[] _summary;
@@ -28438,17 +22138,31 @@
                 }
             }
             public byte ReportType;
+            public LLUUID AbuserID;
+            private byte[] _abuseregionname;
+            public byte[] AbuseRegionName
+            {
+                get { return _abuseregionname; }
+                set
+                {
+                    if (value == null) { _abuseregionname = null; return; }
+                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
+                    else { _abuseregionname = new byte[value.Length]; Array.Copy(value, _abuseregionname, value.Length); }
+                }
+            }
             public LLUUID ScreenshotID;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    int length = 47;
+                    int length = 79;
                     if (Details != null) { length += 2 + Details.Length; }
                     if (VersionString != null) { length += 1 + VersionString.Length; }
                     if (Summary != null) { length += 1 + Summary.Length; }
+                    if (AbuseRegionName != null) { length += 1 + AbuseRegionName.Length; }
                     return length;
                 }
             }
@@ -28466,12 +22180,17 @@
                     length = (ushort)bytes[i++];
                     _versionstring = new byte[length];
                     Array.Copy(bytes, i, _versionstring, 0, length); i += length;
+                    AbuseRegionID = new LLUUID(bytes, i); i += 16;
                     CheckFlags = (byte)bytes[i++];
                     Category = (byte)bytes[i++];
                     length = (ushort)bytes[i++];
                     _summary = new byte[length];
                     Array.Copy(bytes, i, _summary, 0, length); i += length;
                     ReportType = (byte)bytes[i++];
+                    AbuserID = new LLUUID(bytes, i); i += 16;
+                    length = (ushort)bytes[i++];
+                    _abuseregionname = new byte[length];
+                    Array.Copy(bytes, i, _abuseregionname, 0, length); i += length;
                     ScreenshotID = new LLUUID(bytes, i); i += 16;
                     Position = new LLVector3(bytes, i); i += 12;
                 }
@@ -28492,41 +22211,52 @@
                 if(VersionString == null) { Console.WriteLine(&quot;Warning: VersionString is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)VersionString.Length;
                 Array.Copy(VersionString, 0, bytes, i, VersionString.Length); i += VersionString.Length;
+                if(AbuseRegionID == null) { Console.WriteLine(&quot;Warning: AbuseRegionID is null, in &quot; + this.GetType()); }
+                Array.Copy(AbuseRegionID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = CheckFlags;
                 bytes[i++] = Category;
                 if(Summary == null) { Console.WriteLine(&quot;Warning: Summary is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)Summary.Length;
                 Array.Copy(Summary, 0, bytes, i, Summary.Length); i += Summary.Length;
                 bytes[i++] = ReportType;
+                if(AbuserID == null) { Console.WriteLine(&quot;Warning: AbuserID is null, in &quot; + this.GetType()); }
+                Array.Copy(AbuserID.GetBytes(), 0, bytes, i, 16); i += 16;
+                if(AbuseRegionName == null) { Console.WriteLine(&quot;Warning: AbuseRegionName is null, in &quot; + this.GetType()); }
+                bytes[i++] = (byte)AbuseRegionName.Length;
+                Array.Copy(AbuseRegionName, 0, bytes, i, AbuseRegionName.Length); i += AbuseRegionName.Length;
                 if(ScreenshotID == null) { Console.WriteLine(&quot;Warning: ScreenshotID is null, in &quot; + this.GetType()); }
                 Array.Copy(ScreenshotID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ReportData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Details, &quot;Details&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(VersionString, &quot;VersionString&quot;) + &quot;\n&quot;;
-                output += &quot;CheckFlags: &quot; + CheckFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Summary, &quot;Summary&quot;) + &quot;\n&quot;;
-                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;\n&quot;;
-                output += &quot;ScreenshotID: &quot; + ScreenshotID.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReportData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Details, &quot;Details&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VersionString, &quot;VersionString&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AbuseRegionID: &quot; + AbuseRegionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CheckFlags: &quot; + CheckFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Summary, &quot;Summary&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AbuserID: &quot; + AbuserID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(AbuseRegionName, &quot;AbuseRegionName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ScreenshotID: &quot; + ScreenshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;userreport_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28559,9 +22289,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -28570,7 +22300,6 @@
         private Header header;
         public override Header Header { get { return header; } set { header = value; } }
         public override PacketType Type { get { return PacketType.UserReport; } }
-        public MeanCollisionBlock[] MeanCollision;
         public ReportDataBlock ReportData;
         public AgentDataBlock AgentData;
 
@@ -28580,7 +22309,6 @@
             Header.ID = 161;
             Header.Reliable = true;
             Header.Zerocoded = true;
-            MeanCollision = new MeanCollisionBlock[0];
             ReportData = new ReportDataBlock();
             AgentData = new AgentDataBlock();
         }
@@ -28589,10 +22317,6 @@
         {
             int packetEnd = bytes.Length - 1;
             Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            MeanCollision = new MeanCollisionBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MeanCollision[j] = new MeanCollisionBlock(bytes, ref i); }
             ReportData = new ReportDataBlock(bytes, ref i);
             AgentData = new AgentDataBlock(bytes, ref i);
         }
@@ -28600,10 +22324,6 @@
         public UserReportPacket(Header head, byte[] bytes, ref int i)
         {
             Header = head;
-            int count = (int)bytes[i++];
-            MeanCollision = new MeanCollisionBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MeanCollision[j] = new MeanCollisionBlock(bytes, ref i); }
             ReportData = new ReportDataBlock(bytes, ref i);
             AgentData = new AgentDataBlock(bytes, ref i);
         }
@@ -28612,14 +22332,10 @@
         {
             int length = 8;
             length += ReportData.Length;            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; MeanCollision.Length; j++) { length += MeanCollision[j].Length; }
             if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
             byte[] bytes = new byte[length];
             int i = 0;
             header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)MeanCollision.Length;
-            for (int j = 0; j &lt; MeanCollision.Length; j++) { MeanCollision[j].ToBytes(bytes, ref i); }
             ReportData.ToBytes(bytes, ref i);
             AgentData.ToBytes(bytes, ref i);
             if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
@@ -28628,13 +22344,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UserReport ---\n&quot;;
-            for (int j = 0; j &lt; MeanCollision.Length; j++)
-            {
-                output += MeanCollision[j].ToString() + &quot;\n&quot;;
-            }
-                output += ReportData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UserReport ---&quot; + Environment.NewLine;
+                output += ReportData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -28644,6 +22356,7 @@
     public class AlertMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;alertmessage_alertdata&quot;)]
         public class AlertDataBlock
         {
             private byte[] _message;
@@ -28658,6 +22371,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28693,8 +22407,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AlertData --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
+                string output = &quot;-- AlertData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -28741,8 +22455,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AlertMessage ---\n&quot;;
-                output += AlertData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AlertMessage ---&quot; + Environment.NewLine;
+                output += AlertData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -28752,6 +22466,7 @@
     public class AgentAlertMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentalertmessage_alertdata&quot;)]
         public class AlertDataBlock
         {
             private byte[] _message;
@@ -28767,6 +22482,7 @@
             }
             public bool Modal;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28804,19 +22520,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AlertData --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;Modal: &quot; + Modal.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AlertData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Modal: &quot; + Modal.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentalertmessage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28846,8 +22564,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -28899,9 +22617,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentAlertMessage ---\n&quot;;
-                output += AlertData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentAlertMessage ---&quot; + Environment.NewLine;
+                output += AlertData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -28911,6 +22629,7 @@
     public class MeanCollisionAlertPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;meancollisionalert_meancollision&quot;)]
         public class MeanCollisionBlock
         {
             public float Mag;
@@ -28919,6 +22638,7 @@
             public byte Type;
             public LLUUID Victim;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -28964,12 +22684,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MeanCollision --\n&quot;;
-                output += &quot;Mag: &quot; + Mag.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Perp: &quot; + Perp.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Victim: &quot; + Victim.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MeanCollision --&quot; + Environment.NewLine;
+                output += &quot;Mag: &quot; + Mag.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Time: &quot; + Time.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Perp: &quot; + Perp.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Victim: &quot; + Victim.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29026,10 +22746,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MeanCollisionAlert ---\n&quot;;
+            string output = &quot;--- MeanCollisionAlert ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; MeanCollision.Length; j++)
             {
-                output += MeanCollision[j].ToString() + &quot;\n&quot;;
+                output += MeanCollision[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -29040,10 +22760,12 @@
     public class ViewerFrozenMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerfrozenmessage_frozendata&quot;)]
         public class FrozenDataBlock
         {
             public bool Data;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29072,8 +22794,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FrozenData --\n&quot;;
-                output += &quot;Data: &quot; + Data.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FrozenData --&quot; + Environment.NewLine;
+                output += &quot;Data: &quot; + Data.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29120,8 +22842,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ViewerFrozenMessage ---\n&quot;;
-                output += FrozenData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ViewerFrozenMessage ---&quot; + Environment.NewLine;
+                output += FrozenData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29131,10 +22853,12 @@
     public class HealthMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;healthmessage_healthdata&quot;)]
         public class HealthDataBlock
         {
             public float Health;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29167,8 +22891,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HealthData --\n&quot;;
-                output += &quot;Health: &quot; + Health.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HealthData --&quot; + Environment.NewLine;
+                output += &quot;Health: &quot; + Health.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29216,8 +22940,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- HealthMessage ---\n&quot;;
-                output += HealthData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- HealthMessage ---&quot; + Environment.NewLine;
+                output += HealthData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29227,6 +22951,7 @@
     public class ChatFromSimulatorPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;chatfromsimulator_chatdata&quot;)]
         public class ChatDataBlock
         {
             private byte[] _message;
@@ -29258,6 +22983,7 @@
             public LLUUID SourceID;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29310,21 +23036,20 @@
                 bytes[i++] = SourceType;
                 if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
                 Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ChatData --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;Audible: &quot; + Audible.ToString() + &quot;\n&quot;;
-                output += &quot;ChatType: &quot; + ChatType.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromName, &quot;FromName&quot;) + &quot;\n&quot;;
-                output += &quot;SourceType: &quot; + SourceType.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ChatData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Audible: &quot; + Audible.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChatType: &quot; + ChatType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FromName, &quot;FromName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SourceType: &quot; + SourceType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29371,8 +23096,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChatFromSimulator ---\n&quot;;
-                output += ChatData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChatFromSimulator ---&quot; + Environment.NewLine;
+                output += ChatData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29382,11 +23107,13 @@
     public class SimStatsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;simstats_stat&quot;)]
         public class StatBlock
         {
             public float StatValue;
             public uint StatID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29424,15 +23151,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Stat --\n&quot;;
-                output += &quot;StatValue: &quot; + StatValue.ToString() + &quot;\n&quot;;
-                output += &quot;StatID: &quot; + StatID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Stat --&quot; + Environment.NewLine;
+                output += &quot;StatValue: &quot; + StatValue.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StatID: &quot; + StatID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;simstats_region&quot;)]
         public class RegionBlock
         {
             public uint RegionX;
@@ -29440,6 +23168,7 @@
             public uint RegionFlags;
             public uint ObjectCapacity;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29486,11 +23215,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Region --\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectCapacity: &quot; + ObjectCapacity.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Region --&quot; + Environment.NewLine;
+                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectCapacity: &quot; + ObjectCapacity.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29551,12 +23280,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SimStats ---\n&quot;;
+            string output = &quot;--- SimStats ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Stat.Length; j++)
             {
-                output += Stat[j].ToString() + &quot;\n&quot;;
+                output += Stat[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += Region.ToString() + &quot;\n&quot;;
+                output += Region.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29566,11 +23295,13 @@
     public class RequestRegionInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestregioninfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29603,9 +23334,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29652,8 +23383,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestRegionInfo ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestRegionInfo ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29663,6 +23394,7 @@
     public class RegionInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regioninfo_regioninfo&quot;)]
         public class RegionInfoBlock
         {
             public float BillableFactor;
@@ -29692,6 +23424,7 @@
             public float TerrainRaiseLimit;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29794,34 +23527,36 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectBonusFactor: &quot; + ObjectBonusFactor.ToString() + &quot;\n&quot;;
-                output += &quot;RedirectGridX: &quot; + RedirectGridX.ToString() + &quot;\n&quot;;
-                output += &quot;RedirectGridY: &quot; + RedirectGridY.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;PricePerMeter: &quot; + PricePerMeter.ToString() + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;\n&quot;;
-                output += &quot;UseEstateSun: &quot; + UseEstateSun.ToString() + &quot;\n&quot;;
-                output += &quot;SunHour: &quot; + SunHour.ToString() + &quot;\n&quot;;
-                output += &quot;MaxAgents: &quot; + MaxAgents.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainLowerLimit: &quot; + TerrainLowerLimit.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainRaiseLimit: &quot; + TerrainRaiseLimit.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionInfo --&quot; + Environment.NewLine;
+                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectBonusFactor: &quot; + ObjectBonusFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RedirectGridX: &quot; + RedirectGridX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RedirectGridY: &quot; + RedirectGridY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PricePerMeter: &quot; + PricePerMeter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UseEstateSun: &quot; + UseEstateSun.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SunHour: &quot; + SunHour.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaxAgents: &quot; + MaxAgents.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainLowerLimit: &quot; + TerrainLowerLimit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainRaiseLimit: &quot; + TerrainRaiseLimit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regioninfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -29854,9 +23589,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -29909,9 +23644,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RegionInfo ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RegionInfo ---&quot; + Environment.NewLine;
+                output += RegionInfo.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -29921,6 +23656,7 @@
     public class GodUpdateRegionInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godupdateregioninfo_regioninfo&quot;)]
         public class RegionInfoBlock
         {
             public float BillableFactor;
@@ -29942,6 +23678,7 @@
             public uint ParentEstateID;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30013,26 +23750,28 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;\n&quot;;
-                output += &quot;RedirectGridX: &quot; + RedirectGridX.ToString() + &quot;\n&quot;;
-                output += &quot;RedirectGridY: &quot; + RedirectGridY.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;PricePerMeter: &quot; + PricePerMeter.ToString() + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionInfo --&quot; + Environment.NewLine;
+                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RedirectGridX: &quot; + RedirectGridX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RedirectGridY: &quot; + RedirectGridY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PricePerMeter: &quot; + PricePerMeter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godupdateregioninfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30065,9 +23804,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -30120,218 +23859,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GodUpdateRegionInfo ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GodUpdateRegionInfo ---&quot; + Environment.NewLine;
+                output += RegionInfo.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class NearestLandingRegionRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RequestingRegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RequestingRegionDataBlock() { }
-            public RequestingRegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RequestingRegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.NearestLandingRegionRequest; } }
-        public RequestingRegionDataBlock RequestingRegionData;
-
-        public NearestLandingRegionRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 172;
-            Header.Reliable = true;
-            RequestingRegionData = new RequestingRegionDataBlock();
-        }
-
-        public NearestLandingRegionRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            RequestingRegionData = new RequestingRegionDataBlock(bytes, ref i);
-        }
-
-        public NearestLandingRegionRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            RequestingRegionData = new RequestingRegionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RequestingRegionData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            RequestingRegionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- NearestLandingRegionRequest ---\n&quot;;
-                output += RequestingRegionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class NearestLandingRegionReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class LandingRegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public LandingRegionDataBlock() { }
-            public LandingRegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- LandingRegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.NearestLandingRegionReply; } }
-        public LandingRegionDataBlock LandingRegionData;
-
-        public NearestLandingRegionReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 173;
-            Header.Reliable = true;
-            LandingRegionData = new LandingRegionDataBlock();
-        }
-
-        public NearestLandingRegionReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            LandingRegionData = new LandingRegionDataBlock(bytes, ref i);
-        }
-
-        public NearestLandingRegionReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            LandingRegionData = new LandingRegionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += LandingRegionData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            LandingRegionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- NearestLandingRegionReply ---\n&quot;;
-                output += LandingRegionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class NearestLandingRegionUpdatedPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;nearestlandingregionupdated_regiondata&quot;)]
         public class RegionDataBlock
         {
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30367,8 +23912,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -30415,115 +23960,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- NearestLandingRegionUpdated ---\n&quot;;
-                output += RegionData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- NearestLandingRegionUpdated ---&quot; + Environment.NewLine;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class TeleportLandingStatusChangedPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.TeleportLandingStatusChanged; } }
-        public RegionDataBlock RegionData;
-
-        public TeleportLandingStatusChangedPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 175;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock();
-        }
-
-        public TeleportLandingStatusChangedPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            RegionData = new RegionDataBlock(bytes, ref i);
-        }
-
-        public TeleportLandingStatusChangedPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            RegionData = new RegionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            RegionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- TeleportLandingStatusChanged ---\n&quot;;
-                output += RegionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class RegionHandshakePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regionhandshake_regioninfo&quot;)]
         public class RegionInfoBlock
         {
             public float BillableFactor;
@@ -30561,6 +24009,7 @@
             public bool IsEstateManager;
             public LLUUID CacheID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30686,31 +24135,31 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainHeightRange00: &quot; + TerrainHeightRange00.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainHeightRange01: &quot; + TerrainHeightRange01.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainHeightRange10: &quot; + TerrainHeightRange10.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainHeightRange11: &quot; + TerrainHeightRange11.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainStartHeight00: &quot; + TerrainStartHeight00.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainStartHeight01: &quot; + TerrainStartHeight01.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainStartHeight10: &quot; + TerrainStartHeight10.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainStartHeight11: &quot; + TerrainStartHeight11.ToString() + &quot;\n&quot;;
-                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;\n&quot;;
-                output += &quot;SimOwner: &quot; + SimOwner.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainBase0: &quot; + TerrainBase0.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainBase1: &quot; + TerrainBase1.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainBase2: &quot; + TerrainBase2.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainBase3: &quot; + TerrainBase3.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainDetail0: &quot; + TerrainDetail0.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainDetail1: &quot; + TerrainDetail1.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainDetail2: &quot; + TerrainDetail2.ToString() + &quot;\n&quot;;
-                output += &quot;TerrainDetail3: &quot; + TerrainDetail3.ToString() + &quot;\n&quot;;
-                output += &quot;IsEstateManager: &quot; + IsEstateManager.ToString() + &quot;\n&quot;;
-                output += &quot;CacheID: &quot; + CacheID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionInfo --&quot; + Environment.NewLine;
+                output += &quot;BillableFactor: &quot; + BillableFactor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainHeightRange00: &quot; + TerrainHeightRange00.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainHeightRange01: &quot; + TerrainHeightRange01.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainHeightRange10: &quot; + TerrainHeightRange10.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainHeightRange11: &quot; + TerrainHeightRange11.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainStartHeight00: &quot; + TerrainStartHeight00.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainStartHeight01: &quot; + TerrainStartHeight01.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainStartHeight10: &quot; + TerrainStartHeight10.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainStartHeight11: &quot; + TerrainStartHeight11.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimOwner: &quot; + SimOwner.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainBase0: &quot; + TerrainBase0.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainBase1: &quot; + TerrainBase1.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainBase2: &quot; + TerrainBase2.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainBase3: &quot; + TerrainBase3.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainDetail0: &quot; + TerrainDetail0.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainDetail1: &quot; + TerrainDetail1.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainDetail2: &quot; + TerrainDetail2.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TerrainDetail3: &quot; + TerrainDetail3.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsEstateManager: &quot; + IsEstateManager.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CacheID: &quot; + CacheID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -30758,8 +24207,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RegionHandshake ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RegionHandshake ---&quot; + Environment.NewLine;
+                output += RegionInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -30769,10 +24218,12 @@
     public class RegionHandshakeReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regionhandshakereply_regioninfo&quot;)]
         public class RegionInfoBlock
         {
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30804,19 +24255,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionInfo --\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionInfo --&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regionhandshakereply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30849,9 +24302,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -30904,9 +24357,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RegionHandshakeReply ---\n&quot;;
-                output += RegionInfo.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RegionHandshakeReply ---&quot; + Environment.NewLine;
+                output += RegionInfo.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -30916,6 +24369,7 @@
     public class SimulatorViewerTimeMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;simulatorviewertimemessage_timeinfo&quot;)]
         public class TimeInfoBlock
         {
             public uint SecPerDay;
@@ -30925,6 +24379,7 @@
             public float SunPhase;
             public LLVector3 SunDirection;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -30971,24 +24426,22 @@
                 bytes[i++] = (byte)((SecPerYear &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((SecPerYear &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((SecPerYear &gt;&gt; 24) % 256);
-                if(SunAngVelocity == null) { Console.WriteLine(&quot;Warning: SunAngVelocity is null, in &quot; + this.GetType()); }
                 Array.Copy(SunAngVelocity.GetBytes(), 0, bytes, i, 12); i += 12;
                 ba = BitConverter.GetBytes(SunPhase);
                 if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
                 Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                if(SunDirection == null) { Console.WriteLine(&quot;Warning: SunDirection is null, in &quot; + this.GetType()); }
                 Array.Copy(SunDirection.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- TimeInfo --\n&quot;;
-                output += &quot;SecPerDay: &quot; + SecPerDay.ToString() + &quot;\n&quot;;
-                output += &quot;UsecSinceStart: &quot; + UsecSinceStart.ToString() + &quot;\n&quot;;
-                output += &quot;SecPerYear: &quot; + SecPerYear.ToString() + &quot;\n&quot;;
-                output += &quot;SunAngVelocity: &quot; + SunAngVelocity.ToString() + &quot;\n&quot;;
-                output += &quot;SunPhase: &quot; + SunPhase.ToString() + &quot;\n&quot;;
-                output += &quot;SunDirection: &quot; + SunDirection.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TimeInfo --&quot; + Environment.NewLine;
+                output += &quot;SecPerDay: &quot; + SecPerDay.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UsecSinceStart: &quot; + UsecSinceStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SecPerYear: &quot; + SecPerYear.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SunAngVelocity: &quot; + SunAngVelocity.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SunPhase: &quot; + SunPhase.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SunDirection: &quot; + SunDirection.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31035,8 +24488,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SimulatorViewerTimeMessage ---\n&quot;;
-                output += TimeInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SimulatorViewerTimeMessage ---&quot; + Environment.NewLine;
+                output += TimeInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31046,12 +24499,14 @@
     public class EnableSimulatorPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;enablesimulator_simulatorinfo&quot;)]
         public class SimulatorInfoBlock
         {
             public uint IP;
             public ushort Port;
             public ulong Handle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31095,10 +24550,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- SimulatorInfo --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;Handle: &quot; + Handle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SimulatorInfo --&quot; + Environment.NewLine;
+                output += &quot;IP: &quot; + IP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Port: &quot; + Port.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Handle: &quot; + Handle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31145,8 +24600,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EnableSimulator ---\n&quot;;
-                output += SimulatorInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EnableSimulator ---&quot; + Environment.NewLine;
+                output += SimulatorInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31191,7 +24646,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DisableSimulator ---\n&quot;;
+            string output = &quot;--- DisableSimulator ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31201,6 +24656,7 @@
     public class TransferRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;transferrequest_transferinfo&quot;)]
         public class TransferInfoBlock
         {
             public LLUUID TransferID;
@@ -31219,6 +24675,7 @@
             public int SourceType;
             public float Priority;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31274,12 +24731,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransferInfo --\n&quot;;
-                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Params, &quot;Params&quot;) + &quot;\n&quot;;
-                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;\n&quot;;
-                output += &quot;SourceType: &quot; + SourceType.ToString() + &quot;\n&quot;;
-                output += &quot;Priority: &quot; + Priority.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransferInfo --&quot; + Environment.NewLine;
+                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Params, &quot;Params&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SourceType: &quot; + SourceType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Priority: &quot; + Priority.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31327,8 +24784,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TransferRequest ---\n&quot;;
-                output += TransferInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TransferRequest ---&quot; + Environment.NewLine;
+                output += TransferInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31338,29 +24795,48 @@
     public class TransferInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;transferinfo_transferinfo&quot;)]
         public class TransferInfoBlock
         {
             public LLUUID TransferID;
             public int Size;
+            private byte[] _params;
+            public byte[] Params
+            {
+                get { return _params; }
+                set
+                {
+                    if (value == null) { _params = null; return; }
+                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
+                    else { _params = new byte[value.Length]; Array.Copy(value, _params, value.Length); }
+                }
+            }
             public int ChannelType;
             public int TargetType;
             public int Status;
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    return 32;
+                    int length = 32;
+                    if (Params != null) { length += 2 + Params.Length; }
+                    return length;
                 }
             }
 
             public TransferInfoBlock() { }
             public TransferInfoBlock(byte[] bytes, ref int i)
             {
+                int length;
                 try
                 {
                     TransferID = new LLUUID(bytes, i); i += 16;
                     Size = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
+                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
+                    _params = new byte[length];
+                    Array.Copy(bytes, i, _params, 0, length); i += length;
                     ChannelType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                     TargetType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
                     Status = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
@@ -31379,6 +24855,10 @@
                 bytes[i++] = (byte)((Size &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((Size &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((Size &gt;&gt; 24) % 256);
+                if(Params == null) { Console.WriteLine(&quot;Warning: Params is null, in &quot; + this.GetType()); }
+                bytes[i++] = (byte)(Params.Length % 256);
+                bytes[i++] = (byte)((Params.Length &gt;&gt; 8) % 256);
+                Array.Copy(Params, 0, bytes, i, Params.Length); i += Params.Length;
                 bytes[i++] = (byte)(ChannelType % 256);
                 bytes[i++] = (byte)((ChannelType &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ChannelType &gt;&gt; 16) % 256);
@@ -31395,12 +24875,13 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransferInfo --\n&quot;;
-                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;\n&quot;;
-                output += &quot;Size: &quot; + Size.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;\n&quot;;
-                output += &quot;TargetType: &quot; + TargetType.ToString() + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransferInfo --&quot; + Environment.NewLine;
+                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Size: &quot; + Size.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Params, &quot;Params&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TargetType: &quot; + TargetType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Status: &quot; + Status.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31448,8 +24929,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TransferInfo ---\n&quot;;
-                output += TransferInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TransferInfo ---&quot; + Environment.NewLine;
+                output += TransferInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31459,11 +24940,13 @@
     public class TransferAbortPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;transferabort_transferinfo&quot;)]
         public class TransferInfoBlock
         {
             public LLUUID TransferID;
             public int ChannelType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31498,9 +24981,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransferInfo --\n&quot;;
-                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransferInfo --&quot; + Environment.NewLine;
+                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31548,8 +25031,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TransferAbort ---\n&quot;;
-                output += TransferInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TransferAbort ---&quot; + Environment.NewLine;
+                output += TransferInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31559,12 +25042,14 @@
     public class TransferPriorityPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;transferpriority_transferinfo&quot;)]
         public class TransferInfoBlock
         {
             public LLUUID TransferID;
             public int ChannelType;
             public float Priority;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31605,10 +25090,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransferInfo --\n&quot;;
-                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;\n&quot;;
-                output += &quot;Priority: &quot; + Priority.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransferInfo --&quot; + Environment.NewLine;
+                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Priority: &quot; + Priority.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31656,8 +25141,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TransferPriority ---\n&quot;;
-                output += TransferInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TransferPriority ---&quot; + Environment.NewLine;
+                output += TransferInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31667,6 +25152,7 @@
     public class RequestXferPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestxfer_xferid&quot;)]
         public class XferIDBlock
         {
             public ulong ID;
@@ -31687,6 +25173,7 @@
             public LLUUID VFileID;
             public short VFileType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31743,14 +25230,14 @@
 
             public override string ToString()
             {
-                string output = &quot;-- XferID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;UseBigPackets: &quot; + UseBigPackets.ToString() + &quot;\n&quot;;
-                output += &quot;DeleteOnCompletion: &quot; + DeleteOnCompletion.ToString() + &quot;\n&quot;;
-                output += &quot;FilePath: &quot; + FilePath.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;\n&quot;;
-                output += &quot;VFileID: &quot; + VFileID.ToString() + &quot;\n&quot;;
-                output += &quot;VFileType: &quot; + VFileType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- XferID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UseBigPackets: &quot; + UseBigPackets.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DeleteOnCompletion: &quot; + DeleteOnCompletion.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FilePath: &quot; + FilePath.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;VFileID: &quot; + VFileID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;VFileType: &quot; + VFileType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31798,8 +25285,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestXfer ---\n&quot;;
-                output += XferID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestXfer ---&quot; + Environment.NewLine;
+                output += XferID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31809,11 +25296,13 @@
     public class AbortXferPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;abortxfer_xferid&quot;)]
         public class XferIDBlock
         {
             public ulong ID;
             public int Result;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31854,9 +25343,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- XferID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Result: &quot; + Result.ToString() + &quot;\n&quot;;
+                string output = &quot;-- XferID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Result: &quot; + Result.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31903,8 +25392,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AbortXfer ---\n&quot;;
-                output += XferID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AbortXfer ---&quot; + Environment.NewLine;
+                output += XferID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -31914,10 +25403,12 @@
     public class RequestAvatarInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestavatarinfo_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID FullID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -31947,8 +25438,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;FullID: &quot; + FullID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;FullID: &quot; + FullID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -31995,8 +25486,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestAvatarInfo ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestAvatarInfo ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32006,10 +25497,12 @@
     public class AvatarAppearancePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarappearance_visualparam&quot;)]
         public class VisualParamBlock
         {
             public byte ParamValue;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32038,14 +25531,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- VisualParam --\n&quot;;
-                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;\n&quot;;
+                string output = &quot;-- VisualParam --&quot; + Environment.NewLine;
+                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarappearance_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _textureentry;
@@ -32060,6 +25554,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32096,19 +25591,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarappearance_sender&quot;)]
         public class SenderBlock
         {
             public LLUUID ID;
             public bool IsTrial;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32140,9 +25637,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Sender --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;IsTrial: &quot; + IsTrial.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Sender --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsTrial: &quot; + IsTrial.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32209,13 +25706,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarAppearance ---\n&quot;;
+            string output = &quot;--- AvatarAppearance ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; VisualParam.Length; j++)
             {
-                output += VisualParam[j].ToString() + &quot;\n&quot;;
+                output += VisualParam[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += Sender.ToString() + &quot;\n&quot;;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Sender.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32225,11 +25722,13 @@
     public class SetFollowCamPropertiesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setfollowcamproperties_cameraproperty&quot;)]
         public class CameraPropertyBlock
         {
             public int Type;
             public float Value;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32267,19 +25766,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- CameraProperty --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Value: &quot; + Value.ToString() + &quot;\n&quot;;
+                string output = &quot;-- CameraProperty --&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Value: &quot; + Value.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setfollowcamproperties_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32309,8 +25810,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32371,12 +25872,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetFollowCamProperties ---\n&quot;;
+            string output = &quot;--- SetFollowCamProperties ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; CameraProperty.Length; j++)
             {
-                output += CameraProperty[j].ToString() + &quot;\n&quot;;
+                output += CameraProperty[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ObjectData.ToString() + &quot;\n&quot;;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32386,10 +25887,12 @@
     public class ClearFollowCamPropertiesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;clearfollowcamproperties_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32419,8 +25922,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32467,8 +25970,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ClearFollowCamProperties ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ClearFollowCamProperties ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32478,10 +25981,12 @@
     public class RequestPayPricePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestpayprice_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32511,8 +26016,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32559,8 +26064,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestPayPrice ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestPayPrice ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32570,11 +26075,13 @@
     public class PayPriceReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;paypricereply_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
             public int DefaultPayPrice;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32609,19 +26116,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;DefaultPayPrice: &quot; + DefaultPayPrice.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DefaultPayPrice: &quot; + DefaultPayPrice.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;paypricereply_buttondata&quot;)]
         public class ButtonDataBlock
         {
             public int PayButton;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32653,8 +26162,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ButtonData --\n&quot;;
-                output += &quot;PayButton: &quot; + PayButton.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ButtonData --&quot; + Environment.NewLine;
+                output += &quot;PayButton: &quot; + PayButton.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32715,11 +26224,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PayPriceReply ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PayPriceReply ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ButtonData.Length; j++)
             {
-                output += ButtonData[j].ToString() + &quot;\n&quot;;
+                output += ButtonData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -32730,11 +26239,13 @@
     public class KickUserPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;kickuser_targetblock&quot;)]
         public class TargetBlockBlock
         {
             public uint TargetIP;
             public ushort TargetPort;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32769,15 +26280,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TargetBlock --\n&quot;;
-                output += &quot;TargetIP: &quot; + TargetIP.ToString() + &quot;\n&quot;;
-                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TargetBlock --&quot; + Environment.NewLine;
+                output += &quot;TargetIP: &quot; + TargetIP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;kickuser_userinfo&quot;)]
         public class UserInfoBlock
         {
             public LLUUID AgentID;
@@ -32794,6 +26306,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32836,10 +26349,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UserInfo --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;\n&quot;;
+                string output = &quot;-- UserInfo --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32891,9 +26404,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- KickUser ---\n&quot;;
-                output += TargetBlock.ToString() + &quot;\n&quot;;
-                output += UserInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- KickUser ---&quot; + Environment.NewLine;
+                output += TargetBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += UserInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -32903,11 +26416,13 @@
     public class KickUserAckPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;kickuserack_userinfo&quot;)]
         public class UserInfoBlock
         {
             public LLUUID SessionID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -32942,9 +26457,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UserInfo --\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UserInfo --&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -32991,8 +26506,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- KickUserAck ---\n&quot;;
-                output += UserInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- KickUserAck ---&quot; + Environment.NewLine;
+                output += UserInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -33002,6 +26517,7 @@
     public class GodKickUserPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godkickuser_userinfo&quot;)]
         public class UserInfoBlock
         {
             public LLUUID GodSessionID;
@@ -33020,6 +26536,7 @@
             public uint KickFlags;
             public LLUUID GodID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33070,12 +26587,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UserInfo --\n&quot;;
-                output += &quot;GodSessionID: &quot; + GodSessionID.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;\n&quot;;
-                output += &quot;KickFlags: &quot; + KickFlags.ToString() + &quot;\n&quot;;
-                output += &quot;GodID: &quot; + GodID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UserInfo --&quot; + Environment.NewLine;
+                output += &quot;GodSessionID: &quot; + GodSessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Reason, &quot;Reason&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;KickFlags: &quot; + KickFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GodID: &quot; + GodID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -33122,126 +26639,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GodKickUser ---\n&quot;;
-                output += UserInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GodKickUser ---&quot; + Environment.NewLine;
+                output += UserInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class SystemKickUserPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentInfoBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentInfoBlock() { }
-            public AgentInfoBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentInfo --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SystemKickUser; } }
-        public AgentInfoBlock[] AgentInfo;
-
-        public SystemKickUserPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 196;
-            Header.Reliable = true;
-            AgentInfo = new AgentInfoBlock[0];
-        }
-
-        public SystemKickUserPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            AgentInfo = new AgentInfoBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentInfo[j] = new AgentInfoBlock(bytes, ref i); }
-        }
-
-        public SystemKickUserPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            AgentInfo = new AgentInfoBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { AgentInfo[j] = new AgentInfoBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; AgentInfo.Length; j++) { length += AgentInfo[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)AgentInfo.Length;
-            for (int j = 0; j &lt; AgentInfo.Length; j++) { AgentInfo[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SystemKickUser ---\n&quot;;
-            for (int j = 0; j &lt; AgentInfo.Length; j++)
-            {
-                output += AgentInfo[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class EjectUserPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectuser_data&quot;)]
         public class DataBlock
         {
             public LLUUID TargetID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33276,20 +26691,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectuser_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33322,9 +26739,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -33376,9 +26793,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EjectUser ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EjectUser ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -33388,11 +26805,13 @@
     public class FreezeUserPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;freezeuser_data&quot;)]
         public class DataBlock
         {
             public LLUUID TargetID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33427,20 +26846,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;freezeuser_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33473,9 +26894,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -33527,9 +26948,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FreezeUser ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- FreezeUser ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -33539,12 +26960,14 @@
     public class AvatarPropertiesRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpropertiesrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33580,10 +27003,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -33630,122 +27053,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPropertiesRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarPropertiesRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class AvatarPropertiesRequestBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public byte GodLevel;
-            public bool WebProfilesDisabled;
-            public LLUUID AvatarID;
-
-            public int Length
-            {
-                get
-                {
-                    return 34;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    GodLevel = (byte)bytes[i++];
-                    WebProfilesDisabled = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    AvatarID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = GodLevel;
-                bytes[i++] = (byte)((WebProfilesDisabled) ? 1 : 0);
-                if(AvatarID == null) { Console.WriteLine(&quot;Warning: AvatarID is null, in &quot; + this.GetType()); }
-                Array.Copy(AvatarID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;\n&quot;;
-                output += &quot;WebProfilesDisabled: &quot; + WebProfilesDisabled.ToString() + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AvatarPropertiesRequestBackend; } }
-        public AgentDataBlock AgentData;
-
-        public AvatarPropertiesRequestBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 200;
-            Header.Reliable = true;
-            AgentData = new AgentDataBlock();
-        }
-
-        public AvatarPropertiesRequestBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public AvatarPropertiesRequestBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AvatarPropertiesRequestBackend ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class AvatarPropertiesReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpropertiesreply_propertiesdata&quot;)]
         public class PropertiesDataBlock
         {
             public LLUUID PartnerID;
@@ -33811,6 +27130,7 @@
             }
             public bool MaturePublish;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33892,30 +27212,32 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PropertiesData --\n&quot;;
-                output += &quot;PartnerID: &quot; + PartnerID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(AboutText, &quot;AboutText&quot;) + &quot;\n&quot;;
-                output += &quot;Transacted: &quot; + Transacted.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(CharterMember, &quot;CharterMember&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FLAboutText, &quot;FLAboutText&quot;) + &quot;\n&quot;;
-                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;\n&quot;;
-                output += &quot;FLImageID: &quot; + FLImageID.ToString() + &quot;\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ProfileURL, &quot;ProfileURL&quot;) + &quot;\n&quot;;
-                output += &quot;Identified: &quot; + Identified.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(BornOn, &quot;BornOn&quot;) + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
+                string output = &quot;-- PropertiesData --&quot; + Environment.NewLine;
+                output += &quot;PartnerID: &quot; + PartnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(AboutText, &quot;AboutText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Transacted: &quot; + Transacted.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(CharterMember, &quot;CharterMember&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FLAboutText, &quot;FLAboutText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FLImageID: &quot; + FLImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ProfileURL, &quot;ProfileURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Identified: &quot; + Identified.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(BornOn, &quot;BornOn&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpropertiesreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -33948,9 +27270,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -34003,9 +27325,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPropertiesReply ---\n&quot;;
-                output += PropertiesData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarPropertiesReply ---&quot; + Environment.NewLine;
+                output += PropertiesData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -34015,6 +27337,7 @@
     public class AvatarInterestsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarinterestsreply_propertiesdata&quot;)]
         public class PropertiesDataBlock
         {
             public uint WantToMask;
@@ -34053,6 +27376,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34112,23 +27436,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PropertiesData --\n&quot;;
-                output += &quot;WantToMask: &quot; + WantToMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(WantToText, &quot;WantToText&quot;) + &quot;\n&quot;;
-                output += &quot;SkillsMask: &quot; + SkillsMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SkillsText, &quot;SkillsText&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(LanguagesText, &quot;LanguagesText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- PropertiesData --&quot; + Environment.NewLine;
+                output += &quot;WantToMask: &quot; + WantToMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(WantToText, &quot;WantToText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SkillsMask: &quot; + SkillsMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SkillsText, &quot;SkillsText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LanguagesText, &quot;LanguagesText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarinterestsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34161,9 +27487,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -34216,9 +27542,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarInterestsReply ---\n&quot;;
-                output += PropertiesData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarInterestsReply ---&quot; + Environment.NewLine;
+                output += PropertiesData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -34228,11 +27554,13 @@
     public class AvatarGroupsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatargroupsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34265,15 +27593,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatargroupsreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             private byte[] _grouptitle;
@@ -34303,6 +27632,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34362,13 +27692,13 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;\n&quot;;
-                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupInsigniaID: &quot; + GroupInsigniaID.ToString() + &quot;\n&quot;;
-                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupInsigniaID: &quot; + GroupInsigniaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -34430,11 +27760,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarGroupsReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarGroupsReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; GroupData.Length; j++)
             {
-                output += GroupData[j].ToString() + &quot;\n&quot;;
+                output += GroupData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -34445,6 +27775,7 @@
     public class AvatarPropertiesUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpropertiesupdate_propertiesdata&quot;)]
         public class PropertiesDataBlock
         {
             private byte[] _abouttext;
@@ -34485,6 +27816,7 @@
             }
             public bool MaturePublish;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34545,25 +27877,27 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PropertiesData --\n&quot;;
-                output += Helpers.FieldToString(AboutText, &quot;AboutText&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FLAboutText, &quot;FLAboutText&quot;) + &quot;\n&quot;;
-                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;\n&quot;;
-                output += &quot;FLImageID: &quot; + FLImageID.ToString() + &quot;\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ProfileURL, &quot;ProfileURL&quot;) + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
+                string output = &quot;-- PropertiesData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(AboutText, &quot;AboutText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FLAboutText, &quot;FLAboutText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FLImageID: &quot; + FLImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ProfileURL, &quot;ProfileURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpropertiesupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34596,9 +27930,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -34651,9 +27985,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPropertiesUpdate ---\n&quot;;
-                output += PropertiesData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarPropertiesUpdate ---&quot; + Environment.NewLine;
+                output += PropertiesData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -34663,6 +27997,7 @@
     public class AvatarInterestsUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarinterestsupdate_propertiesdata&quot;)]
         public class PropertiesDataBlock
         {
             public uint WantToMask;
@@ -34701,6 +28036,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34760,23 +28096,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PropertiesData --\n&quot;;
-                output += &quot;WantToMask: &quot; + WantToMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(WantToText, &quot;WantToText&quot;) + &quot;\n&quot;;
-                output += &quot;SkillsMask: &quot; + SkillsMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SkillsText, &quot;SkillsText&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(LanguagesText, &quot;LanguagesText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- PropertiesData --&quot; + Environment.NewLine;
+                output += &quot;WantToMask: &quot; + WantToMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(WantToText, &quot;WantToText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SkillsMask: &quot; + SkillsMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SkillsText, &quot;SkillsText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LanguagesText, &quot;LanguagesText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarinterestsupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34809,9 +28147,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -34864,9 +28202,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarInterestsUpdate ---\n&quot;;
-                output += PropertiesData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarInterestsUpdate ---&quot; + Environment.NewLine;
+                output += PropertiesData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -34876,6 +28214,7 @@
     public class AvatarStatisticsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarstatisticsreply_statisticsdata&quot;)]
         public class StatisticsDataBlock
         {
             private byte[] _name;
@@ -34892,6 +28231,7 @@
             public int Negative;
             public int Positive;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34937,20 +28277,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- StatisticsData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Negative: &quot; + Negative.ToString() + &quot;\n&quot;;
-                output += &quot;Positive: &quot; + Positive.ToString() + &quot;\n&quot;;
+                string output = &quot;-- StatisticsData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Negative: &quot; + Negative.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Positive: &quot; + Positive.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarstatisticsreply_avatardata&quot;)]
         public class AvatarDataBlock
         {
             public LLUUID AvatarID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -34980,18 +28322,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AvatarData --\n&quot;;
-                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AvatarData --&quot; + Environment.NewLine;
+                output += &quot;AvatarID: &quot; + AvatarID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarstatisticsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35021,8 +28365,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -35089,13 +28433,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarStatisticsReply ---\n&quot;;
+            string output = &quot;--- AvatarStatisticsReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; StatisticsData.Length; j++)
             {
-                output += StatisticsData[j].ToString() + &quot;\n&quot;;
+                output += StatisticsData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AvatarData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AvatarData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -35105,6 +28449,7 @@
     public class AvatarNotesReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarnotesreply_data&quot;)]
         public class DataBlock
         {
             public LLUUID TargetID;
@@ -35120,6 +28465,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35159,19 +28505,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Notes, &quot;Notes&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Notes, &quot;Notes&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarnotesreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35201,8 +28549,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -35254,9 +28602,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarNotesReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarNotesReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -35266,6 +28614,7 @@
     public class AvatarNotesUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarnotesupdate_data&quot;)]
         public class DataBlock
         {
             public LLUUID TargetID;
@@ -35281,6 +28630,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35320,20 +28670,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Notes, &quot;Notes&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Notes, &quot;Notes&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarnotesupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35366,9 +28718,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -35420,9 +28772,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarNotesUpdate ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarNotesUpdate ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -35432,6 +28784,7 @@
     public class AvatarPicksReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpicksreply_data&quot;)]
         public class DataBlock
         {
             private byte[] _pickname;
@@ -35447,6 +28800,7 @@
             }
             public LLUUID PickID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35485,20 +28839,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(PickName, &quot;PickName&quot;) + &quot;\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(PickName, &quot;PickName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarpicksreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID TargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35531,9 +28887,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -35594,12 +28950,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarPicksReply ---\n&quot;;
+            string output = &quot;--- AvatarPicksReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -35609,10 +28965,12 @@
     public class EventInfoRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventinforequest_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint EventID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35644,19 +29002,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventinforequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35689,9 +29049,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -35743,9 +29103,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EventInfoRequest ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EventInfoRequest ---&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -35755,6 +29115,7 @@
     public class EventInfoReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventinforeply_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint Duration;
@@ -35831,6 +29192,7 @@
             public uint Amount;
             public uint Cover;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35897,7 +29259,6 @@
                 if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)SimName.Length;
                 Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(GlobalPos == null) { Console.WriteLine(&quot;Warning: GlobalPos is null, in &quot; + this.GetType()); }
                 Array.Copy(GlobalPos.GetBytes(), 0, bytes, i, 24); i += 24;
                 if(Creator == null) { Console.WriteLine(&quot;Warning: Creator is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)Creator.Length;
@@ -35935,30 +29296,32 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;Duration: &quot; + Duration.ToString() + &quot;\n&quot;;
-                output += &quot;DateUTC: &quot; + DateUTC.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;GlobalPos: &quot; + GlobalPos.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Creator, &quot;Creator&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Date, &quot;Date&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Category, &quot;Category&quot;) + &quot;\n&quot;;
-                output += &quot;EventFlags: &quot; + EventFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += &quot;Cover: &quot; + Cover.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;Duration: &quot; + Duration.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DateUTC: &quot; + DateUTC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalPos: &quot; + GlobalPos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Creator, &quot;Creator&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Date, &quot;Date&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Category, &quot;Category&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;EventFlags: &quot; + EventFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Cover: &quot; + Cover.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventinforeply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -35988,8 +29351,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36041,9 +29404,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EventInfoReply ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EventInfoReply ---&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36053,10 +29416,12 @@
     public class EventNotificationAddRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventnotificationaddrequest_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint EventID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36088,19 +29453,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventnotificationaddrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36133,9 +29500,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36187,9 +29554,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EventNotificationAddRequest ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EventNotificationAddRequest ---&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36199,10 +29566,12 @@
     public class EventNotificationRemoveRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventnotificationremoverequest_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint EventID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36234,19 +29603,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventnotificationremoverequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36279,9 +29650,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36333,9 +29704,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EventNotificationRemoveRequest ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EventNotificationRemoveRequest ---&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36345,10 +29716,12 @@
     public class EventGodDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventgoddelete_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint EventID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36380,14 +29753,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventgoddelete_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
@@ -36405,6 +29779,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36453,22 +29828,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;\n&quot;;
-                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryFlags: &quot; + QueryFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryStart: &quot; + QueryStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(QueryText, &quot;QueryText&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;eventgoddelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36501,9 +29878,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36560,10 +29937,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EventGodDelete ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EventGodDelete ---&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36573,10 +29950,12 @@
     public class PickInfoRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinforequest_data&quot;)]
         public class DataBlock
         {
             public LLUUID PickID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36606,19 +29985,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinforequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36651,9 +30032,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36706,9 +30087,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PickInfoRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PickInfoRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36718,6 +30099,7 @@
     public class PickInfoReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinforeply_data&quot;)]
         public class DataBlock
         {
             private byte[] _originalname;
@@ -36784,6 +30166,7 @@
             public LLUUID SnapshotID;
             public int SortOrder;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36843,7 +30226,6 @@
                 bytes[i++] = (byte)SimName.Length;
                 Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
                 bytes[i++] = (byte)((Enabled) ? 1 : 0);
-                if(PosGlobal == null) { Console.WriteLine(&quot;Warning: PosGlobal is null, in &quot; + this.GetType()); }
                 Array.Copy(PosGlobal.GetBytes(), 0, bytes, i, 24); i += 24;
                 bytes[i++] = (byte)((TopPick) ? 1 : 0);
                 if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
@@ -36872,30 +30254,32 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(OriginalName, &quot;OriginalName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;\n&quot;;
-                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;\n&quot;;
-                output += &quot;TopPick: &quot; + TopPick.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(OriginalName, &quot;OriginalName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TopPick: &quot; + TopPick.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinforeply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -36925,8 +30309,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -36978,9 +30362,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PickInfoReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PickInfoReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -36990,6 +30374,7 @@
     public class PickInfoUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinfoupdate_data&quot;)]
         public class DataBlock
         {
             public bool Enabled;
@@ -37023,6 +30408,7 @@
             public LLUUID SnapshotID;
             public int SortOrder;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37064,7 +30450,6 @@
             public void ToBytes(byte[] bytes, ref int i)
             {
                 bytes[i++] = (byte)((Enabled) ? 1 : 0);
-                if(PosGlobal == null) { Console.WriteLine(&quot;Warning: PosGlobal is null, in &quot; + this.GetType()); }
                 Array.Copy(PosGlobal.GetBytes(), 0, bytes, i, 24); i += 24;
                 bytes[i++] = (byte)((TopPick) ? 1 : 0);
                 if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
@@ -37090,28 +30475,30 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;\n&quot;;
-                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;\n&quot;;
-                output += &quot;TopPick: &quot; + TopPick.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TopPick: &quot; + TopPick.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickinfoupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37144,9 +30531,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -37198,9 +30585,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PickInfoUpdate ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PickInfoUpdate ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -37210,10 +30597,12 @@
     public class PickDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickdelete_data&quot;)]
         public class DataBlock
         {
             public LLUUID PickID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37243,19 +30632,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickdelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37288,9 +30679,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -37342,9 +30733,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PickDelete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PickDelete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -37354,11 +30745,13 @@
     public class PickGodDeletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickgoddelete_data&quot;)]
         public class DataBlock
         {
             public LLUUID QueryID;
             public LLUUID PickID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37391,20 +30784,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;PickID: &quot; + PickID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PickID: &quot; + PickID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;pickgoddelete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37437,9 +30832,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -37491,9 +30886,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PickGodDelete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PickGodDelete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -37503,6 +30898,7 @@
     public class ScriptQuestionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptquestion_data&quot;)]
         public class DataBlock
         {
             private byte[] _objectname;
@@ -37531,6 +30927,7 @@
             public LLUUID ItemID;
             public int Questions;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37584,12 +30981,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ObjectOwner, &quot;ObjectOwner&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;Questions: &quot; + Questions.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectOwner, &quot;ObjectOwner&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Questions: &quot; + Questions.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -37636,8 +31033,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptQuestion ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptQuestion ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -37647,12 +31044,14 @@
     public class ScriptControlChangePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptcontrolchange_data&quot;)]
         public class DataBlock
         {
             public bool PassToAgent;
             public uint Controls;
             public bool TakeControls;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37688,10 +31087,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;PassToAgent: &quot; + PassToAgent.ToString() + &quot;\n&quot;;
-                output += &quot;Controls: &quot; + Controls.ToString() + &quot;\n&quot;;
-                output += &quot;TakeControls: &quot; + TakeControls.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;PassToAgent: &quot; + PassToAgent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Controls: &quot; + Controls.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TakeControls: &quot; + TakeControls.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -37747,10 +31146,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptControlChange ---\n&quot;;
+            string output = &quot;--- ScriptControlChange ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -37761,6 +31160,7 @@
     public class ScriptDialogPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptdialog_data&quot;)]
         public class DataBlock
         {
             private byte[] _objectname;
@@ -37811,6 +31211,7 @@
             }
             public int ChatChannel;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37879,20 +31280,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;\n&quot;;
-                output += &quot;ChatChannel: &quot; + ChatChannel.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChatChannel: &quot; + ChatChannel.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptdialog_buttons&quot;)]
         public class ButtonsBlock
         {
             private byte[] _buttonlabel;
@@ -37907,6 +31309,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -37942,8 +31345,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Buttons --\n&quot;;
-                output += Helpers.FieldToString(ButtonLabel, &quot;ButtonLabel&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Buttons --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ButtonLabel, &quot;ButtonLabel&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38005,11 +31408,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptDialog ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptDialog ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Buttons.Length; j++)
             {
-                output += Buttons[j].ToString() + &quot;\n&quot;;
+                output += Buttons[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -38020,6 +31423,7 @@
     public class ScriptDialogReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptdialogreply_data&quot;)]
         public class DataBlock
         {
             public LLUUID ObjectID;
@@ -38037,6 +31441,7 @@
             public int ButtonIndex;
             public int ChatChannel;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38085,22 +31490,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ButtonLabel, &quot;ButtonLabel&quot;) + &quot;\n&quot;;
-                output += &quot;ButtonIndex: &quot; + ButtonIndex.ToString() + &quot;\n&quot;;
-                output += &quot;ChatChannel: &quot; + ChatChannel.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ButtonLabel, &quot;ButtonLabel&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ButtonIndex: &quot; + ButtonIndex.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChatChannel: &quot; + ChatChannel.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptdialogreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38133,9 +31540,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38188,9 +31595,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptDialogReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptDialogReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38200,11 +31607,13 @@
     public class ForceScriptControlReleasePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;forcescriptcontrolrelease_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38237,9 +31646,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38286,8 +31695,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ForceScriptControlRelease ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ForceScriptControlRelease ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38297,11 +31706,13 @@
     public class RevokePermissionsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;revokepermissions_data&quot;)]
         public class DataBlock
         {
             public uint ObjectPermissions;
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38336,20 +31747,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ObjectPermissions: &quot; + ObjectPermissions.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;ObjectPermissions: &quot; + ObjectPermissions.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;revokepermissions_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38382,9 +31795,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38436,9 +31849,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RevokePermissions ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RevokePermissions ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38448,6 +31861,7 @@
     public class LoadURLPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;loadurl_data&quot;)]
         public class DataBlock
         {
             private byte[] _url;
@@ -38487,6 +31901,7 @@
             }
             public LLUUID OwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38544,13 +31959,13 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(URL, &quot;URL&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += &quot;OwnerIsGroup: &quot; + OwnerIsGroup.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(URL, &quot;URL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerIsGroup: &quot; + OwnerIsGroup.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38597,8 +32012,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LoadURL ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LoadURL ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38608,6 +32023,7 @@
     public class ScriptTeleportRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptteleportrequest_data&quot;)]
         public class DataBlock
         {
             private byte[] _objectname;
@@ -38635,6 +32051,7 @@
             public LLVector3 LookAt;
             public LLVector3 SimPosition;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38675,19 +32092,17 @@
                 if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)SimName.Length;
                 Array.Copy(SimName, 0, bytes, i, SimName.Length); i += SimName.Length;
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(SimPosition == null) { Console.WriteLine(&quot;Warning: SimPosition is null, in &quot; + this.GetType()); }
                 Array.Copy(SimPosition.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;SimPosition: &quot; + SimPosition.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectName, &quot;ObjectName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimPosition: &quot; + SimPosition.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38734,8 +32149,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptTeleportRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptTeleportRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38745,6 +32160,7 @@
     public class ParcelOverlayPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceloverlay_parceldata&quot;)]
         public class ParcelDataBlock
         {
             private byte[] _data;
@@ -38760,6 +32176,7 @@
             }
             public int SequenceID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38801,9 +32218,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -38851,8 +32268,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelOverlay ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelOverlay ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -38862,11 +32279,13 @@
     public class ParcelPropertiesRequestByIDPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesrequestbyid_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public int SequenceID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38903,20 +32322,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesrequestbyid_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -38949,9 +32370,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -39004,9 +32425,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelPropertiesRequestByID ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelPropertiesRequestByID ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -39016,6 +32437,7 @@
     public class ParcelPropertiesUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesupdate_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public LLUUID MediaID;
@@ -39078,6 +32500,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39137,7 +32560,6 @@
                 byte[] ba;
                 if(MediaID == null) { Console.WriteLine(&quot;Warning: MediaID is null, in &quot; + this.GetType()); }
                 Array.Copy(MediaID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(UserLookAt == null) { Console.WriteLine(&quot;Warning: UserLookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(UserLookAt.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(MediaURL == null) { Console.WriteLine(&quot;Warning: MediaURL is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)MediaURL.Length;
@@ -39146,7 +32568,6 @@
                 bytes[i++] = (byte)((LocalID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((LocalID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((LocalID &gt;&gt; 24) % 256);
-                if(UserLocation == null) { Console.WriteLine(&quot;Warning: UserLocation is null, in &quot; + this.GetType()); }
                 Array.Copy(UserLocation.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)Name.Length;
@@ -39189,37 +32610,39 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;\n&quot;;
-                output += &quot;UserLookAt: &quot; + UserLookAt.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;UserLocation: &quot; + UserLocation.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;LandingType: &quot; + LandingType.ToString() + &quot;\n&quot;;
-                output += &quot;AuthBuyerID: &quot; + AuthBuyerID.ToString() + &quot;\n&quot;;
-                output += &quot;PassHours: &quot; + PassHours.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelFlags: &quot; + ParcelFlags.ToString() + &quot;\n&quot;;
-                output += &quot;PassPrice: &quot; + PassPrice.ToString() + &quot;\n&quot;;
-                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MusicURL, &quot;MusicURL&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UserLookAt: &quot; + UserLookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UserLocation: &quot; + UserLocation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandingType: &quot; + LandingType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AuthBuyerID: &quot; + AuthBuyerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PassHours: &quot; + PassHours.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelFlags: &quot; + ParcelFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PassPrice: &quot; + PassPrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MusicURL, &quot;MusicURL&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39252,9 +32675,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -39307,9 +32730,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelPropertiesUpdate ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelPropertiesUpdate ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -39319,10 +32742,12 @@
     public class ParcelReturnObjectsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreturnobjects_taskids&quot;)]
         public class TaskIDsBlock
         {
             public LLUUID TaskID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39352,19 +32777,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TaskIDs --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TaskIDs --&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreturnobjects_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public uint ReturnType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39401,20 +32828,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreturnobjects_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39447,19 +32876,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreturnobjects_ownerids&quot;)]
         public class OwnerIDsBlock
         {
             public LLUUID OwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39489,8 +32920,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- OwnerIDs --\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- OwnerIDs --&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -39571,16 +33002,16 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelReturnObjects ---\n&quot;;
+            string output = &quot;--- ParcelReturnObjects ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; TaskIDs.Length; j++)
             {
-                output += TaskIDs[j].ToString() + &quot;\n&quot;;
+                output += TaskIDs[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; OwnerIDs.Length; j++)
             {
-                output += OwnerIDs[j].ToString() + &quot;\n&quot;;
+                output += OwnerIDs[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -39591,11 +33022,13 @@
     public class ParcelSetOtherCleanTimePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelsetothercleantime_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public int OtherCleanTime;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39632,20 +33065,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;OtherCleanTime: &quot; + OtherCleanTime.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OtherCleanTime: &quot; + OtherCleanTime.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelsetothercleantime_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39678,9 +33113,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -39733,9 +33168,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelSetOtherCleanTime ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelSetOtherCleanTime ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -39745,10 +33180,12 @@
     public class ParcelDisableObjectsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldisableobjects_taskids&quot;)]
         public class TaskIDsBlock
         {
             public LLUUID TaskID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39778,19 +33215,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TaskIDs --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TaskIDs --&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldisableobjects_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public uint ReturnType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39827,20 +33266,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldisableobjects_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39873,19 +33314,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldisableobjects_ownerids&quot;)]
         public class OwnerIDsBlock
         {
             public LLUUID OwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -39915,8 +33358,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- OwnerIDs --\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- OwnerIDs --&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -39997,16 +33440,16 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelDisableObjects ---\n&quot;;
+            string output = &quot;--- ParcelDisableObjects ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; TaskIDs.Length; j++)
             {
-                output += TaskIDs[j].ToString() + &quot;\n&quot;;
+                output += TaskIDs[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; OwnerIDs.Length; j++)
             {
-                output += OwnerIDs[j].ToString() + &quot;\n&quot;;
+                output += OwnerIDs[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -40017,10 +33460,12 @@
     public class ParcelSelectObjectsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelselectobjects_returnids&quot;)]
         public class ReturnIDsBlock
         {
             public LLUUID ReturnID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40050,19 +33495,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReturnIDs --\n&quot;;
-                output += &quot;ReturnID: &quot; + ReturnID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReturnIDs --&quot; + Environment.NewLine;
+                output += &quot;ReturnID: &quot; + ReturnID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelselectobjects_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public uint ReturnType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40099,20 +33546,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReturnType: &quot; + ReturnType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelselectobjects_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40145,9 +33594,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40214,13 +33663,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelSelectObjects ---\n&quot;;
+            string output = &quot;--- ParcelSelectObjects ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ReturnIDs.Length; j++)
             {
-                output += ReturnIDs[j].ToString() + &quot;\n&quot;;
+                output += ReturnIDs[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40230,11 +33679,13 @@
     public class EstateCovenantRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;estatecovenantrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40267,9 +33718,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40316,8 +33767,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EstateCovenantRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EstateCovenantRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40327,6 +33778,7 @@
     public class EstateCovenantReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;estatecovenantreply_data&quot;)]
         public class DataBlock
         {
             public LLUUID CovenantID;
@@ -40344,6 +33796,7 @@
             }
             public LLUUID EstateOwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40390,11 +33843,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;CovenantID: &quot; + CovenantID.ToString() + &quot;\n&quot;;
-                output += &quot;CovenantTimestamp: &quot; + CovenantTimestamp.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(EstateName, &quot;EstateName&quot;) + &quot;\n&quot;;
-                output += &quot;EstateOwnerID: &quot; + EstateOwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;CovenantID: &quot; + CovenantID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CovenantTimestamp: &quot; + CovenantTimestamp.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(EstateName, &quot;EstateName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateOwnerID: &quot; + EstateOwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40441,8 +33894,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EstateCovenantReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EstateCovenantReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40452,10 +33905,12 @@
     public class ForceObjectSelectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;forceobjectselect_data&quot;)]
         public class DataBlock
         {
             public uint LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40487,18 +33942,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;forceobjectselect_header&quot;)]
         public class HeaderBlock
         {
             public bool ResetList;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40527,8 +33984,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Header --\n&quot;;
-                output += &quot;ResetList: &quot; + ResetList.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Header --&quot; + Environment.NewLine;
+                output += &quot;ResetList: &quot; + ResetList.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40589,12 +34046,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ForceObjectSelect ---\n&quot;;
+            string output = &quot;--- ForceObjectSelect ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += _Header.ToString() + &quot;\n&quot;;
+                output += _Header.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40604,10 +34061,12 @@
     public class ParcelBuyPassPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelbuypass_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40639,19 +34098,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelbuypass_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40684,9 +34145,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40738,9 +34199,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelBuyPass ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelBuyPass ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40750,11 +34211,13 @@
     public class ParcelDeedToGroupPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldeedtogroup_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40789,20 +34252,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldeedtogroup_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40835,9 +34300,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -40889,9 +34354,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelDeedToGroup ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelDeedToGroup ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -40901,10 +34366,12 @@
     public class ParcelReclaimPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreclaim_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40936,19 +34403,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelreclaim_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -40981,9 +34450,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41035,9 +34504,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelReclaim ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelReclaim ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41047,12 +34516,14 @@
     public class ParcelClaimPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelclaim_data&quot;)]
         public class DataBlock
         {
             public bool IsGroupOwned;
             public LLUUID GroupID;
             public bool Final;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41086,16 +34557,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;Final: &quot; + Final.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Final: &quot; + Final.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelclaim_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public float East;
@@ -41103,6 +34575,7 @@
             public float North;
             public float South;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41150,22 +34623,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;East: &quot; + East.ToString() + &quot;\n&quot;;
-                output += &quot;West: &quot; + West.ToString() + &quot;\n&quot;;
-                output += &quot;North: &quot; + North.ToString() + &quot;\n&quot;;
-                output += &quot;South: &quot; + South.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;East: &quot; + East.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;West: &quot; + West.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;North: &quot; + North.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;South: &quot; + South.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelclaim_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41198,9 +34673,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41267,13 +34742,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelClaim ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelClaim ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParcelData.Length; j++)
             {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
+                output += ParcelData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41283,6 +34758,7 @@
     public class ParcelJoinPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceljoin_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public float East;
@@ -41290,6 +34766,7 @@
             public float North;
             public float South;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41337,22 +34814,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;East: &quot; + East.ToString() + &quot;\n&quot;;
-                output += &quot;West: &quot; + West.ToString() + &quot;\n&quot;;
-                output += &quot;North: &quot; + North.ToString() + &quot;\n&quot;;
-                output += &quot;South: &quot; + South.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;East: &quot; + East.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;West: &quot; + West.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;North: &quot; + North.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;South: &quot; + South.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceljoin_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41385,9 +34864,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41439,9 +34918,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelJoin ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelJoin ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41451,6 +34930,7 @@
     public class ParcelDividePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldivide_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public float East;
@@ -41458,6 +34938,7 @@
             public float North;
             public float South;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41505,22 +34986,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;East: &quot; + East.ToString() + &quot;\n&quot;;
-                output += &quot;West: &quot; + West.ToString() + &quot;\n&quot;;
-                output += &quot;North: &quot; + North.ToString() + &quot;\n&quot;;
-                output += &quot;South: &quot; + South.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;East: &quot; + East.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;West: &quot; + West.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;North: &quot; + North.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;South: &quot; + South.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldivide_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41553,9 +35036,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41607,9 +35090,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelDivide ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelDivide ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41619,10 +35102,12 @@
     public class ParcelReleasePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelrelease_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41654,19 +35139,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelrelease_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41699,9 +35186,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41753,9 +35240,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelRelease ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelRelease ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41765,6 +35252,7 @@
     public class ParcelBuyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelbuy_data&quot;)]
         public class DataBlock
         {
             public bool RemoveContribution;
@@ -41773,6 +35261,7 @@
             public LLUUID GroupID;
             public bool Final;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41813,23 +35302,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;RemoveContribution: &quot; + RemoveContribution.ToString() + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;Final: &quot; + Final.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;RemoveContribution: &quot; + RemoveContribution.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Final: &quot; + Final.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelbuy_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41862,9 +35353,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -41917,9 +35408,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelBuy ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelBuy ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -41929,11 +35420,13 @@
     public class ParcelGodForceOwnerPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodforceowner_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
             public LLUUID OwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -41968,20 +35461,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodforceowner_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42014,9 +35509,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42069,9 +35564,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelGodForceOwner ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelGodForceOwner ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -42081,12 +35576,14 @@
     public class ParcelAccessListRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistrequest_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
             public int SequenceID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42128,21 +35625,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42175,9 +35674,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42230,9 +35729,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelAccessListRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelAccessListRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -42242,6 +35741,7 @@
     public class ParcelAccessListReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistreply_data&quot;)]
         public class DataBlock
         {
             public LLUUID AgentID;
@@ -42249,6 +35749,7 @@
             public int SequenceID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42293,23 +35794,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistreply_list&quot;)]
         public class ListBlock
         {
             public LLUUID ID;
             public int Time;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42349,10 +35852,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- List --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- List --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Time: &quot; + Time.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42414,11 +35917,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelAccessListReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelAccessListReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; List.Length; j++)
             {
-                output += List[j].ToString() + &quot;\n&quot;;
+                output += List[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -42429,6 +35932,7 @@
     public class ParcelAccessListUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistupdate_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
@@ -42437,6 +35941,7 @@
             public uint Flags;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42486,24 +35991,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Sections: &quot; + Sections.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Sections: &quot; + Sections.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistupdate_list&quot;)]
         public class ListBlock
         {
             public LLUUID ID;
             public int Time;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42543,21 +36050,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- List --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- List --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Time: &quot; + Time.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelaccesslistupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42590,9 +36099,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42659,13 +36168,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelAccessListUpdate ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelAccessListUpdate ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; List.Length; j++)
             {
-                output += List[j].ToString() + &quot;\n&quot;;
+                output += List[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -42675,11 +36184,13 @@
     public class ParcelDwellRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldwellrequest_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
             public LLUUID ParcelID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42714,20 +36225,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldwellrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42760,9 +36273,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42814,9 +36327,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelDwellRequest ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelDwellRequest ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -42826,12 +36339,14 @@
     public class ParcelDwellReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldwellreply_data&quot;)]
         public class DataBlock
         {
             public int LocalID;
             public LLUUID ParcelID;
             public float Dwell;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42872,20 +36387,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dwell: &quot; + Dwell.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parceldwellreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -42915,8 +36432,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -42968,1132 +36485,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelDwellReply ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelDwellReply ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class RequestParcelTransferPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public bool ReservedNewbie;
-            public int BillableArea;
-            public int ActualArea;
-            public LLUUID OwnerID;
-            public LLUUID DestID;
-            public int Amount;
-            public byte Flags;
-            public bool Final;
-            public LLUUID SourceID;
-            public LLUUID TransactionID;
-            public uint TransactionTime;
-            public int TransactionType;
-
-            public int Length
-            {
-                get
-                {
-                    return 87;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ReservedNewbie = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    BillableArea = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ActualArea = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    DestID = new LLUUID(bytes, i); i += 16;
-                    Amount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Flags = (byte)bytes[i++];
-                    Final = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                    TransactionTime = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TransactionType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((ReservedNewbie) ? 1 : 0);
-                bytes[i++] = (byte)(BillableArea % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(ActualArea % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 24) % 256);
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(DestID == null) { Console.WriteLine(&quot;Warning: DestID is null, in &quot; + this.GetType()); }
-                Array.Copy(DestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Amount % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 24) % 256);
-                bytes[i++] = Flags;
-                bytes[i++] = (byte)((Final) ? 1 : 0);
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(TransactionTime % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TransactionType % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;Final: &quot; + Final.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionTime: &quot; + TransactionTime.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RequestParcelTransfer; } }
-        public DataBlock Data;
-
-        public RequestParcelTransferPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 252;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            Data = new DataBlock();
-        }
-
-        public RequestParcelTransferPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public RequestParcelTransferPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RequestParcelTransfer ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class UpdateParcelPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public bool ReservedNewbie;
-            public bool GroupOwned;
-            public float RegionX;
-            public float RegionY;
-            public bool AllowPublish;
-            public int BillableArea;
-            public bool ShowDir;
-            public int ActualArea;
-            public LLUUID ParcelID;
-            public LLVector3 UserLocation;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public ulong RegionHandle;
-            public byte Category;
-            public LLUUID AuthorizedBuyerID;
-            public int SalePrice;
-            public LLUUID OwnerID;
-            public bool IsForSale;
-            public byte Status;
-            public LLUUID SnapshotID;
-            public bool MaturePublish;
-            private byte[] _description;
-            public byte[] Description
-            {
-                get { return _description; }
-                set
-                {
-                    if (value == null) { _description = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _description = new byte[value.Length]; Array.Copy(value, _description, value.Length); }
-                }
-            }
-            private byte[] _musicurl;
-            public byte[] MusicURL
-            {
-                get { return _musicurl; }
-                set
-                {
-                    if (value == null) { _musicurl = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _musicurl = new byte[value.Length]; Array.Copy(value, _musicurl, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 112;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    if (Description != null) { length += 1 + Description.Length; }
-                    if (MusicURL != null) { length += 1 + MusicURL.Length; }
-                    return length;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ReservedNewbie = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    GroupOwned = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    RegionX = BitConverter.ToSingle(bytes, i); i += 4;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    RegionY = BitConverter.ToSingle(bytes, i); i += 4;
-                    AllowPublish = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    BillableArea = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ShowDir = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    ActualArea = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    UserLocation = new LLVector3(bytes, i); i += 12;
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    Category = (byte)bytes[i++];
-                    AuthorizedBuyerID = new LLUUID(bytes, i); i += 16;
-                    SalePrice = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    IsForSale = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    Status = (byte)bytes[i++];
-                    SnapshotID = new LLUUID(bytes, i); i += 16;
-                    MaturePublish = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    length = (ushort)bytes[i++];
-                    _description = new byte[length];
-                    Array.Copy(bytes, i, _description, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _musicurl = new byte[length];
-                    Array.Copy(bytes, i, _musicurl, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                bytes[i++] = (byte)((ReservedNewbie) ? 1 : 0);
-                bytes[i++] = (byte)((GroupOwned) ? 1 : 0);
-                ba = BitConverter.GetBytes(RegionX);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                ba = BitConverter.GetBytes(RegionY);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)((AllowPublish) ? 1 : 0);
-                bytes[i++] = (byte)(BillableArea % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((BillableArea &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((ShowDir) ? 1 : 0);
-                bytes[i++] = (byte)(ActualArea % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 24) % 256);
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(UserLocation == null) { Console.WriteLine(&quot;Warning: UserLocation is null, in &quot; + this.GetType()); }
-                Array.Copy(UserLocation.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                bytes[i++] = Category;
-                if(AuthorizedBuyerID == null) { Console.WriteLine(&quot;Warning: AuthorizedBuyerID is null, in &quot; + this.GetType()); }
-                Array.Copy(AuthorizedBuyerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(SalePrice % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 24) % 256);
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((IsForSale) ? 1 : 0);
-                bytes[i++] = Status;
-                if(SnapshotID == null) { Console.WriteLine(&quot;Warning: SnapshotID is null, in &quot; + this.GetType()); }
-                Array.Copy(SnapshotID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((MaturePublish) ? 1 : 0);
-                if(Description == null) { Console.WriteLine(&quot;Warning: Description is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Description.Length;
-                Array.Copy(Description, 0, bytes, i, Description.Length); i += Description.Length;
-                if(MusicURL == null) { Console.WriteLine(&quot;Warning: MusicURL is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)MusicURL.Length;
-                Array.Copy(MusicURL, 0, bytes, i, MusicURL.Length); i += MusicURL.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += &quot;BillableArea: &quot; + BillableArea.ToString() + &quot;\n&quot;;
-                output += &quot;ShowDir: &quot; + ShowDir.ToString() + &quot;\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;UserLocation: &quot; + UserLocation.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;AuthorizedBuyerID: &quot; + AuthorizedBuyerID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;IsForSale: &quot; + IsForSale.ToString() + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(MusicURL, &quot;MusicURL&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.UpdateParcel; } }
-        public ParcelDataBlock ParcelData;
-
-        public UpdateParcelPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 253;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ParcelData = new ParcelDataBlock();
-        }
-
-        public UpdateParcelPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            ParcelData = new ParcelDataBlock(bytes, ref i);
-        }
-
-        public UpdateParcelPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            ParcelData = new ParcelDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += ParcelData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            ParcelData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- UpdateParcel ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RemoveParcelPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RemoveParcel; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public RemoveParcelPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 254;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public RemoveParcelPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public RemoveParcelPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RemoveParcel ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class MergeParcelPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MasterParcelDataBlock
-        {
-            public LLUUID MasterID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public MasterParcelDataBlock() { }
-            public MasterParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    MasterID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(MasterID == null) { Console.WriteLine(&quot;Warning: MasterID is null, in &quot; + this.GetType()); }
-                Array.Copy(MasterID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MasterParcelData --\n&quot;;
-                output += &quot;MasterID: &quot; + MasterID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class SlaveParcelDataBlock
-        {
-            public LLUUID SlaveID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public SlaveParcelDataBlock() { }
-            public SlaveParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    SlaveID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SlaveID == null) { Console.WriteLine(&quot;Warning: SlaveID is null, in &quot; + this.GetType()); }
-                Array.Copy(SlaveID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SlaveParcelData --\n&quot;;
-                output += &quot;SlaveID: &quot; + SlaveID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.MergeParcel; } }
-        public MasterParcelDataBlock MasterParcelData;
-        public SlaveParcelDataBlock[] SlaveParcelData;
-
-        public MergeParcelPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 255;
-            Header.Reliable = true;
-            MasterParcelData = new MasterParcelDataBlock();
-            SlaveParcelData = new SlaveParcelDataBlock[0];
-        }
-
-        public MergeParcelPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            MasterParcelData = new MasterParcelDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            SlaveParcelData = new SlaveParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SlaveParcelData[j] = new SlaveParcelDataBlock(bytes, ref i); }
-        }
-
-        public MergeParcelPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            MasterParcelData = new MasterParcelDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            SlaveParcelData = new SlaveParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SlaveParcelData[j] = new SlaveParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += MasterParcelData.Length;;
-            length++;
-            for (int j = 0; j &lt; SlaveParcelData.Length; j++) { length += SlaveParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            MasterParcelData.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)SlaveParcelData.Length;
-            for (int j = 0; j &lt; SlaveParcelData.Length; j++) { SlaveParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- MergeParcel ---\n&quot;;
-                output += MasterParcelData.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; SlaveParcelData.Length; j++)
-            {
-                output += SlaveParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class LogParcelChangesPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public int ActualArea;
-            public LLUUID ParcelID;
-            public bool IsOwnerGroup;
-            public LLUUID OwnerID;
-            public sbyte Action;
-            public LLUUID TransactionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 54;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ActualArea = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    IsOwnerGroup = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    Action = (sbyte)bytes[i++];
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(ActualArea % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ActualArea &gt;&gt; 24) % 256);
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((IsOwnerGroup) ? 1 : 0);
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)Action;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ActualArea: &quot; + ActualArea.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;IsOwnerGroup: &quot; + IsOwnerGroup.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Action: &quot; + Action.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.LogParcelChanges; } }
-        public ParcelDataBlock[] ParcelData;
-        public RegionDataBlock RegionData;
-        public AgentDataBlock AgentData;
-
-        public LogParcelChangesPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 256;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ParcelData = new ParcelDataBlock[0];
-            RegionData = new RegionDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public LogParcelChangesPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-            RegionData = new RegionDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public LogParcelChangesPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-            RegionData = new RegionDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += RegionData.Length;            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            RegionData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- LogParcelChanges ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-                output += RegionData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class CheckParcelSalesPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.CheckParcelSales; } }
-        public RegionDataBlock[] RegionData;
-
-        public CheckParcelSalesPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 257;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock[0];
-        }
-
-        public CheckParcelSalesPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public CheckParcelSalesPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; RegionData.Length; j++) { length += RegionData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)RegionData.Length;
-            for (int j = 0; j &lt; RegionData.Length; j++) { RegionData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- CheckParcelSales ---\n&quot;;
-            for (int j = 0; j &lt; RegionData.Length; j++)
-            {
-                output += RegionData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ParcelSalesPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-            public LLUUID BuyerID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    BuyerID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(BuyerID == null) { Console.WriteLine(&quot;Warning: BuyerID is null, in &quot; + this.GetType()); }
-                Array.Copy(BuyerID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;BuyerID: &quot; + BuyerID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ParcelSales; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public ParcelSalesPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 258;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public ParcelSalesPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public ParcelSalesPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ParcelSales ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ParcelGodMarkAsContentPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodmarkascontent_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44125,19 +36534,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodmarkascontent_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44170,9 +36581,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -44224,9 +36635,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelGodMarkAsContent ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelGodMarkAsContent ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -44236,11 +36647,13 @@
     public class ParcelGodReserveForNewbiePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodreservefornewbie_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public LLUUID SnapshotID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44275,20 +36688,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelgodreservefornewbie_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44321,9 +36736,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -44375,9 +36790,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelGodReserveForNewbie ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelGodReserveForNewbie ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -44387,11 +36802,13 @@
     public class ViewerStartAuctionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstartauction_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public int LocalID;
             public LLUUID SnapshotID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44426,20 +36843,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewerstartauction_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -44472,9 +36891,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -44526,713 +36945,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ViewerStartAuction ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ViewerStartAuction ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class StartAuctionPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public LLUUID SnapshotID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 32;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    SnapshotID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                if(SnapshotID == null) { Console.WriteLine(&quot;Warning: SnapshotID is null, in &quot; + this.GetType()); }
-                Array.Copy(SnapshotID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartAuction; } }
-        public ParcelDataBlock ParcelData;
-        public AgentDataBlock AgentData;
-
-        public StartAuctionPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 262;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public StartAuctionPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            ParcelData = new ParcelDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public StartAuctionPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            ParcelData = new ParcelDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += ParcelData.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            ParcelData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartAuction ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ConfirmAuctionStartPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AuctionDataBlock
-        {
-            public LLUUID ParcelID;
-            public uint AuctionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 20;
-                }
-            }
-
-            public AuctionDataBlock() { }
-            public AuctionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    AuctionID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(AuctionID % 256);
-                bytes[i++] = (byte)((AuctionID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((AuctionID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((AuctionID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AuctionData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;AuctionID: &quot; + AuctionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ConfirmAuctionStart; } }
-        public AuctionDataBlock AuctionData;
-
-        public ConfirmAuctionStartPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 263;
-            Header.Reliable = true;
-            AuctionData = new AuctionDataBlock();
-        }
-
-        public ConfirmAuctionStartPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            AuctionData = new AuctionDataBlock(bytes, ref i);
-        }
-
-        public ConfirmAuctionStartPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            AuctionData = new AuctionDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AuctionData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            AuctionData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ConfirmAuctionStart ---\n&quot;;
-                output += AuctionData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class CompleteAuctionPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.CompleteAuction; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public CompleteAuctionPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 264;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public CompleteAuctionPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public CompleteAuctionPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- CompleteAuction ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class CancelAuctionPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.CancelAuction; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public CancelAuctionPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 265;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public CancelAuctionPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public CancelAuctionPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- CancelAuction ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class CheckParcelAuctionsPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RegionDataBlock
-        {
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public RegionDataBlock() { }
-            public RegionDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.CheckParcelAuctions; } }
-        public RegionDataBlock[] RegionData;
-
-        public CheckParcelAuctionsPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 266;
-            Header.Reliable = true;
-            RegionData = new RegionDataBlock[0];
-        }
-
-        public CheckParcelAuctionsPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public CheckParcelAuctionsPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            RegionData = new RegionDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { RegionData[j] = new RegionDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; RegionData.Length; j++) { length += RegionData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)RegionData.Length;
-            for (int j = 0; j &lt; RegionData.Length; j++) { RegionData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- CheckParcelAuctions ---\n&quot;;
-            for (int j = 0; j &lt; RegionData.Length; j++)
-            {
-                output += RegionData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ParcelAuctionsPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-            public LLUUID WinnerID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    WinnerID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(WinnerID == null) { Console.WriteLine(&quot;Warning: WinnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(WinnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;WinnerID: &quot; + WinnerID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ParcelAuctions; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public ParcelAuctionsPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 267;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public ParcelAuctionsPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public ParcelAuctionsPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ParcelAuctions ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class UUIDNameRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;uuidnamerequest_uuidnameblock&quot;)]
         public class UUIDNameBlockBlock
         {
             public LLUUID ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -45262,8 +36992,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UUIDNameBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UUIDNameBlock --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -45319,10 +37049,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UUIDNameRequest ---\n&quot;;
+            string output = &quot;--- UUIDNameRequest ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; UUIDNameBlock.Length; j++)
             {
-                output += UUIDNameBlock[j].ToString() + &quot;\n&quot;;
+                output += UUIDNameBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -45333,6 +37063,7 @@
     public class UUIDNameReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;uuidnamereply_uuidnameblock&quot;)]
         public class UUIDNameBlockBlock
         {
             public LLUUID ID;
@@ -45359,6 +37090,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -45404,10 +37136,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UUIDNameBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- UUIDNameBlock --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -45463,10 +37195,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UUIDNameReply ---\n&quot;;
+            string output = &quot;--- UUIDNameReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; UUIDNameBlock.Length; j++)
             {
-                output += UUIDNameBlock[j].ToString() + &quot;\n&quot;;
+                output += UUIDNameBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -45477,10 +37209,12 @@
     public class UUIDGroupNameRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;uuidgroupnamerequest_uuidnameblock&quot;)]
         public class UUIDNameBlockBlock
         {
             public LLUUID ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -45510,8 +37244,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UUIDNameBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UUIDNameBlock --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -45567,10 +37301,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UUIDGroupNameRequest ---\n&quot;;
+            string output = &quot;--- UUIDGroupNameRequest ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; UUIDNameBlock.Length; j++)
             {
-                output += UUIDNameBlock[j].ToString() + &quot;\n&quot;;
+                output += UUIDNameBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -45581,6 +37315,7 @@
     public class UUIDGroupNameReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;uuidgroupnamereply_uuidnameblock&quot;)]
         public class UUIDNameBlockBlock
         {
             public LLUUID ID;
@@ -45596,6 +37331,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -45634,9 +37370,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UUIDNameBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- UUIDNameBlock --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -45692,10 +37428,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UUIDGroupNameReply ---\n&quot;;
+            string output = &quot;--- UUIDGroupNameReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; UUIDNameBlock.Length; j++)
             {
-                output += UUIDNameBlock[j].ToString() + &quot;\n&quot;;
+                output += UUIDNameBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -45703,185 +37439,16 @@
     }
 
     /// &lt;exclude/&gt;
-    public class ChatPassPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ChatDataBlock
-        {
-            public LLUUID ID;
-            public int Channel;
-            private byte[] _message;
-            public byte[] Message
-            {
-                get { return _message; }
-                set
-                {
-                    if (value == null) { _message = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _message = new byte[value.Length]; Array.Copy(value, _message, value.Length); }
-                }
-            }
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public byte Type;
-            public LLUUID OwnerID;
-            public byte SimAccess;
-            public float Radius;
-            public byte SourceType;
-            public LLVector3 Position;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 55;
-                    if (Message != null) { length += 2 + Message.Length; }
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public ChatDataBlock() { }
-            public ChatDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                    Channel = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _message = new byte[length];
-                    Array.Copy(bytes, i, _message, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    Type = (byte)bytes[i++];
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    SimAccess = (byte)bytes[i++];
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Radius = BitConverter.ToSingle(bytes, i); i += 4;
-                    SourceType = (byte)bytes[i++];
-                    Position = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Channel % 256);
-                bytes[i++] = (byte)((Channel &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Channel &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Channel &gt;&gt; 24) % 256);
-                if(Message == null) { Console.WriteLine(&quot;Warning: Message is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Message.Length % 256);
-                bytes[i++] = (byte)((Message.Length &gt;&gt; 8) % 256);
-                Array.Copy(Message, 0, bytes, i, Message.Length); i += Message.Length;
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = Type;
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = SimAccess;
-                ba = BitConverter.GetBytes(Radius);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = SourceType;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
-                Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ChatData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Channel: &quot; + Channel.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;Radius: &quot; + Radius.ToString() + &quot;\n&quot;;
-                output += &quot;SourceType: &quot; + SourceType.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ChatPass; } }
-        public ChatDataBlock ChatData;
-
-        public ChatPassPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 272;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ChatData = new ChatDataBlock();
-        }
-
-        public ChatPassPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            ChatData = new ChatDataBlock(bytes, ref i);
-        }
-
-        public ChatPassPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            ChatData = new ChatDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += ChatData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            ChatData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ChatPass ---\n&quot;;
-                output += ChatData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ChildAgentDyingPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentdying_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -45914,9 +37481,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -45964,8 +37531,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChildAgentDying ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChildAgentDying ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -45975,11 +37542,13 @@
     public class ChildAgentUnknownPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentunknown_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46012,9 +37581,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -46061,114 +37630,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChildAgentUnknown ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChildAgentUnknown ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class KillChildAgentsPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class IDBlockBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public IDBlockBlock() { }
-            public IDBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- IDBlock --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.KillChildAgents; } }
-        public IDBlockBlock IDBlock;
-
-        public KillChildAgentsPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 275;
-            Header.Reliable = true;
-            IDBlock = new IDBlockBlock();
-        }
-
-        public KillChildAgentsPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            IDBlock = new IDBlockBlock(bytes, ref i);
-        }
-
-        public KillChildAgentsPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            IDBlock = new IDBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += IDBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            IDBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- KillChildAgents ---\n&quot;;
-                output += IDBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class GetScriptRunningPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;getscriptrunning_script&quot;)]
         public class ScriptBlock
         {
             public LLUUID ObjectID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46201,9 +37680,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Script --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Script --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -46250,8 +37729,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GetScriptRunning ---\n&quot;;
-                output += Script.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GetScriptRunning ---&quot; + Environment.NewLine;
+                output += Script.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -46261,12 +37740,14 @@
     public class ScriptRunningReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptrunningreply_script&quot;)]
         public class ScriptBlock
         {
             public LLUUID ObjectID;
             public bool Running;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46301,10 +37782,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Script --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Running: &quot; + Running.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Script --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Running: &quot; + Running.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -46351,8 +37832,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptRunningReply ---\n&quot;;
-                output += Script.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptRunningReply ---&quot; + Environment.NewLine;
+                output += Script.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -46362,12 +37843,14 @@
     public class SetScriptRunningPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setscriptrunning_script&quot;)]
         public class ScriptBlock
         {
             public LLUUID ObjectID;
             public bool Running;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46402,21 +37885,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Script --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Running: &quot; + Running.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Script --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Running: &quot; + Running.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setscriptrunning_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46449,9 +37934,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -46503,9 +37988,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetScriptRunning ---\n&quot;;
-                output += Script.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetScriptRunning ---&quot; + Environment.NewLine;
+                output += Script.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -46515,11 +38000,13 @@
     public class ScriptResetPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptreset_script&quot;)]
         public class ScriptBlock
         {
             public LLUUID ObjectID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46552,20 +38039,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Script --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Script --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;scriptreset_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -46598,9 +38087,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -46652,408 +38141,26 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ScriptReset ---\n&quot;;
-                output += Script.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ScriptReset ---&quot; + Environment.NewLine;
+                output += Script.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class ScriptSensorRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class RequesterBlock
-        {
-            public float Arc;
-            public LLUUID RequestID;
-            public LLUUID SearchID;
-            private byte[] _searchname;
-            public byte[] SearchName
-            {
-                get { return _searchname; }
-                set
-                {
-                    if (value == null) { _searchname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _searchname = new byte[value.Length]; Array.Copy(value, _searchname, value.Length); }
-                }
-            }
-            public int Type;
-            public ulong RegionHandle;
-            public LLQuaternion SearchDir;
-            public byte SearchRegions;
-            public LLVector3 SearchPos;
-            public float Range;
-            public LLUUID SourceID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 93;
-                    if (SearchName != null) { length += 1 + SearchName.Length; }
-                    return length;
-                }
-            }
-
-            public RequesterBlock() { }
-            public RequesterBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Arc = BitConverter.ToSingle(bytes, i); i += 4;
-                    RequestID = new LLUUID(bytes, i); i += 16;
-                    SearchID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _searchname = new byte[length];
-                    Array.Copy(bytes, i, _searchname, 0, length); i += length;
-                    Type = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    SearchDir = new LLQuaternion(bytes, i, true); i += 12;
-                    SearchRegions = (byte)bytes[i++];
-                    SearchPos = new LLVector3(bytes, i); i += 12;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Range = BitConverter.ToSingle(bytes, i); i += 4;
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                ba = BitConverter.GetBytes(Arc);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                if(RequestID == null) { Console.WriteLine(&quot;Warning: RequestID is null, in &quot; + this.GetType()); }
-                Array.Copy(RequestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SearchID == null) { Console.WriteLine(&quot;Warning: SearchID is null, in &quot; + this.GetType()); }
-                Array.Copy(SearchID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SearchName == null) { Console.WriteLine(&quot;Warning: SearchName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)SearchName.Length;
-                Array.Copy(SearchName, 0, bytes, i, SearchName.Length); i += SearchName.Length;
-                bytes[i++] = (byte)(Type % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                if(SearchDir == null) { Console.WriteLine(&quot;Warning: SearchDir is null, in &quot; + this.GetType()); }
-                Array.Copy(SearchDir.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = SearchRegions;
-                if(SearchPos == null) { Console.WriteLine(&quot;Warning: SearchPos is null, in &quot; + this.GetType()); }
-                Array.Copy(SearchPos.GetBytes(), 0, bytes, i, 12); i += 12;
-                ba = BitConverter.GetBytes(Range);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Requester --\n&quot;;
-                output += &quot;Arc: &quot; + Arc.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;SearchID: &quot; + SearchID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SearchName, &quot;SearchName&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;SearchDir: &quot; + SearchDir.ToString() + &quot;\n&quot;;
-                output += &quot;SearchRegions: &quot; + SearchRegions.ToString() + &quot;\n&quot;;
-                output += &quot;SearchPos: &quot; + SearchPos.ToString() + &quot;\n&quot;;
-                output += &quot;Range: &quot; + Range.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ScriptSensorRequest; } }
-        public RequesterBlock Requester;
-
-        public ScriptSensorRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 280;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            Requester = new RequesterBlock();
-        }
-
-        public ScriptSensorRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Requester = new RequesterBlock(bytes, ref i);
-        }
-
-        public ScriptSensorRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Requester = new RequesterBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Requester.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Requester.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ScriptSensorRequest ---\n&quot;;
-                output += Requester.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ScriptSensorReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SensedDataBlock
-        {
-            public LLUUID ObjectID;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public int Type;
-            public LLUUID GroupID;
-            public LLUUID OwnerID;
-            public LLVector3 Velocity;
-            public float Range;
-            public LLQuaternion Rotation;
-            public LLVector3 Position;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 92;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public SensedDataBlock() { }
-            public SensedDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ObjectID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    Type = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GroupID = new LLUUID(bytes, i); i += 16;
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    Velocity = new LLVector3(bytes, i); i += 12;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Range = BitConverter.ToSingle(bytes, i); i += 4;
-                    Rotation = new LLQuaternion(bytes, i, true); i += 12;
-                    Position = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
-                Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = (byte)(Type % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Type &gt;&gt; 24) % 256);
-                if(GroupID == null) { Console.WriteLine(&quot;Warning: GroupID is null, in &quot; + this.GetType()); }
-                Array.Copy(GroupID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Velocity == null) { Console.WriteLine(&quot;Warning: Velocity is null, in &quot; + this.GetType()); }
-                Array.Copy(Velocity.GetBytes(), 0, bytes, i, 12); i += 12;
-                ba = BitConverter.GetBytes(Range);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
-                Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
-                Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SensedData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Velocity: &quot; + Velocity.ToString() + &quot;\n&quot;;
-                output += &quot;Range: &quot; + Range.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class RequesterBlock
-        {
-            public LLUUID SourceID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public RequesterBlock() { }
-            public RequesterBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Requester --\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ScriptSensorReply; } }
-        public SensedDataBlock[] SensedData;
-        public RequesterBlock Requester;
-
-        public ScriptSensorReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 281;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            SensedData = new SensedDataBlock[0];
-            Requester = new RequesterBlock();
-        }
-
-        public ScriptSensorReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            SensedData = new SensedDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SensedData[j] = new SensedDataBlock(bytes, ref i); }
-            Requester = new RequesterBlock(bytes, ref i);
-        }
-
-        public ScriptSensorReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            SensedData = new SensedDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { SensedData[j] = new SensedDataBlock(bytes, ref i); }
-            Requester = new RequesterBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Requester.Length;;
-            length++;
-            for (int j = 0; j &lt; SensedData.Length; j++) { length += SensedData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)SensedData.Length;
-            for (int j = 0; j &lt; SensedData.Length; j++) { SensedData[j].ToBytes(bytes, ref i); }
-            Requester.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ScriptSensorReply ---\n&quot;;
-            for (int j = 0; j &lt; SensedData.Length; j++)
-            {
-                output += SensedData[j].ToString() + &quot;\n&quot;;
-            }
-                output += Requester.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class CompleteAgentMovementPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;completeagentmovement_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint CircuitCode;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47091,10 +38198,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CircuitCode: &quot; + CircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -47141,8 +38248,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CompleteAgentMovement ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CompleteAgentMovement ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -47152,6 +38259,7 @@
     public class AgentMovementCompletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentmovementcomplete_data&quot;)]
         public class DataBlock
         {
             public uint Timestamp;
@@ -47159,6 +38267,7 @@
             public LLVector3 LookAt;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47197,30 +38306,30 @@
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentmovementcomplete_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47253,9 +38362,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -47307,178 +38416,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentMovementComplete ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentMovementComplete ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class LogLoginPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public LLUUID ViewerDigest;
-            public uint SpaceIP;
-            public bool LastExecFroze;
-
-            public int Length
-            {
-                get
-                {
-                    return 21;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ViewerDigest = new LLUUID(bytes, i); i += 16;
-                    SpaceIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    LastExecFroze = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ViewerDigest == null) { Console.WriteLine(&quot;Warning: ViewerDigest is null, in &quot; + this.GetType()); }
-                Array.Copy(ViewerDigest.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(SpaceIP % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SpaceIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((LastExecFroze) ? 1 : 0);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;ViewerDigest: &quot; + ViewerDigest.ToString() + &quot;\n&quot;;
-                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;\n&quot;;
-                output += &quot;LastExecFroze: &quot; + LastExecFroze.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.LogLogin; } }
-        public DataBlock Data;
-        public AgentDataBlock AgentData;
-
-        public LogLoginPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 284;
-            Header.Reliable = true;
-            Data = new DataBlock();
-            AgentData = new AgentDataBlock();
-        }
-
-        public LogLoginPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public LogLoginPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;            length += AgentData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- LogLogin ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ConnectAgentToUserserverPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;connectagenttouserserver_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47511,9 +38467,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -47560,8 +38516,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ConnectAgentToUserserver ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ConnectAgentToUserserver ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -47606,129 +38562,23 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ConnectToUserserver ---\n&quot;;
+            string output = &quot;--- ConnectToUserserver ---&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class DataServerLogoutPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class UserDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-            public uint ViewerIP;
-            public bool Disconnect;
-
-            public int Length
-            {
-                get
-                {
-                    return 37;
-                }
-            }
-
-            public UserDataBlock() { }
-            public UserDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                    ViewerIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Disconnect = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(ViewerIP % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((ViewerIP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Disconnect) ? 1 : 0);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- UserData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;ViewerIP: &quot; + ViewerIP.ToString() + &quot;\n&quot;;
-                output += &quot;Disconnect: &quot; + Disconnect.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.DataServerLogout; } }
-        public UserDataBlock UserData;
-
-        public DataServerLogoutPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 287;
-            Header.Reliable = true;
-            UserData = new UserDataBlock();
-        }
-
-        public DataServerLogoutPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            UserData = new UserDataBlock(bytes, ref i);
-        }
-
-        public DataServerLogoutPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            UserData = new UserDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += UserData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            UserData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- DataServerLogout ---\n&quot;;
-                output += UserData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class LogoutRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logoutrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47761,9 +38611,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -47810,8 +38660,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LogoutRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LogoutRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -47821,11 +38671,13 @@
     public class FinalizeLogoutPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;finalizelogout_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -47858,9 +38710,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -47907,8 +38759,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FinalizeLogout ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- FinalizeLogout ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -47918,16 +38770,17 @@
     public class LogoutReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logoutreply_inventorydata&quot;)]
         public class InventoryDataBlock
         {
-            public LLUUID NewAssetID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
                 {
-                    return 32;
+                    return 16;
                 }
             }
 
@@ -47936,7 +38789,6 @@
             {
                 try
                 {
-                    NewAssetID = new LLUUID(bytes, i); i += 16;
                     ItemID = new LLUUID(bytes, i); i += 16;
                 }
                 catch (Exception)
@@ -47947,28 +38799,27 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(NewAssetID == null) { Console.WriteLine(&quot;Warning: NewAssetID is null, in &quot; + this.GetType()); }
-                Array.Copy(NewAssetID.GetBytes(), 0, bytes, i, 16); i += 16;
                 if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
                 Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;NewAssetID: &quot; + NewAssetID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logoutreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48001,9 +38852,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48065,12 +38916,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LogoutReply ---\n&quot;;
+            string output = &quot;--- LogoutReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48080,10 +38931,12 @@
     public class LogoutDemandPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;logoutdemand_logoutblock&quot;)]
         public class LogoutBlockBlock
         {
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48113,8 +38966,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- LogoutBlock --\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- LogoutBlock --&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48161,8 +39014,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LogoutDemand ---\n&quot;;
-                output += LogoutBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LogoutDemand ---&quot; + Environment.NewLine;
+                output += LogoutBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48172,6 +39025,7 @@
     public class ImprovedInstantMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;improvedinstantmessage_messageblock&quot;)]
         public class MessageBlockBlock
         {
             public LLUUID ID;
@@ -48217,6 +39071,7 @@
             }
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48290,36 +39145,37 @@
                 if(FromAgentName == null) { Console.WriteLine(&quot;Warning: FromAgentName is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)FromAgentName.Length;
                 Array.Copy(FromAgentName, 0, bytes, i, FromAgentName.Length); i += FromAgentName.Length;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- MessageBlock --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;ToAgentID: &quot; + ToAgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Offline: &quot; + Offline.ToString() + &quot;\n&quot;;
-                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;Dialog: &quot; + Dialog.ToString() + &quot;\n&quot;;
-                output += &quot;FromGroup: &quot; + FromGroup.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(BinaryBucket, &quot;BinaryBucket&quot;) + &quot;\n&quot;;
-                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromAgentName, &quot;FromAgentName&quot;) + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MessageBlock --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ToAgentID: &quot; + ToAgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Offline: &quot; + Offline.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Timestamp: &quot; + Timestamp.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Dialog: &quot; + Dialog.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromGroup: &quot; + FromGroup.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(BinaryBucket, &quot;BinaryBucket&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentEstateID: &quot; + ParentEstateID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FromAgentName, &quot;FromAgentName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;improvedinstantmessage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48352,9 +39208,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48407,9 +39263,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ImprovedInstantMessage ---\n&quot;;
-                output += MessageBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ImprovedInstantMessage ---&quot; + Environment.NewLine;
+                output += MessageBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48419,11 +39275,13 @@
     public class RetrieveInstantMessagesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;retrieveinstantmessages_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48456,9 +39314,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48505,8 +39363,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RetrieveInstantMessages ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RetrieveInstantMessages ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48551,7 +39409,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DequeueInstantMessages ---\n&quot;;
+            string output = &quot;--- DequeueInstantMessages ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48561,11 +39419,13 @@
     public class FindAgentPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;findagent_locationblock&quot;)]
         public class LocationBlockBlock
         {
             public double GlobalX;
             public double GlobalY;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48603,21 +39463,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- LocationBlock --\n&quot;;
-                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;\n&quot;;
+                string output = &quot;-- LocationBlock --&quot; + Environment.NewLine;
+                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;findagent_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public uint SpaceIP;
             public LLUUID Prey;
             public LLUUID Hunter;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48655,10 +39517,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;\n&quot;;
-                output += &quot;Prey: &quot; + Prey.ToString() + &quot;\n&quot;;
-                output += &quot;Hunter: &quot; + Hunter.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;SpaceIP: &quot; + SpaceIP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Prey: &quot; + Prey.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Hunter: &quot; + Hunter.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48719,12 +39581,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FindAgent ---\n&quot;;
+            string output = &quot;--- FindAgent ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; LocationBlock.Length; j++)
             {
-                output += LocationBlock[j].ToString() + &quot;\n&quot;;
+                output += LocationBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentBlock.ToString() + &quot;\n&quot;;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48734,11 +39596,13 @@
     public class RequestGodlikePowersPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestgodlikepowers_requestblock&quot;)]
         public class RequestBlockBlock
         {
             public bool Godlike;
             public LLUUID Token;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48770,20 +39634,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestBlock --\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;Token: &quot; + Token.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestBlock --&quot; + Environment.NewLine;
+                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Token: &quot; + Token.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestgodlikepowers_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48816,9 +39682,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -48870,9 +39736,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestGodlikePowers ---\n&quot;;
-                output += RequestBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestGodlikePowers ---&quot; + Environment.NewLine;
+                output += RequestBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -48882,11 +39748,13 @@
     public class GrantGodlikePowersPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grantgodlikepowers_grantdata&quot;)]
         public class GrantDataBlock
         {
             public byte GodLevel;
             public LLUUID Token;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48918,20 +39786,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GrantData --\n&quot;;
-                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;\n&quot;;
-                output += &quot;Token: &quot; + Token.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GrantData --&quot; + Environment.NewLine;
+                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Token: &quot; + Token.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grantgodlikepowers_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -48964,9 +39834,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -49018,9 +39888,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GrantGodlikePowers ---\n&quot;;
-                output += GrantData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GrantGodlikePowers ---&quot; + Environment.NewLine;
+                output += GrantData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -49030,6 +39900,7 @@
     public class GodlikeMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godlikemessage_methoddata&quot;)]
         public class MethodDataBlock
         {
             public LLUUID Invoice;
@@ -49045,6 +39916,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49083,15 +39955,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MethodData --\n&quot;;
-                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MethodData --&quot; + Environment.NewLine;
+                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godlikemessage_paramlist&quot;)]
         public class ParamListBlock
         {
             private byte[] _parameter;
@@ -49106,6 +39979,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49141,19 +40015,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParamList --\n&quot;;
-                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ParamList --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godlikemessage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49186,9 +40062,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -49255,13 +40131,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GodlikeMessage ---\n&quot;;
-                output += MethodData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GodlikeMessage ---&quot; + Environment.NewLine;
+                output += MethodData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParamList.Length; j++)
             {
-                output += ParamList[j].ToString() + &quot;\n&quot;;
+                output += ParamList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -49271,6 +40147,7 @@
     public class EstateOwnerMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;estateownermessage_methoddata&quot;)]
         public class MethodDataBlock
         {
             public LLUUID Invoice;
@@ -49286,6 +40163,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49324,15 +40202,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MethodData --\n&quot;;
-                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MethodData --&quot; + Environment.NewLine;
+                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;estateownermessage_paramlist&quot;)]
         public class ParamListBlock
         {
             private byte[] _parameter;
@@ -49347,6 +40226,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49382,19 +40262,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParamList --\n&quot;;
-                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ParamList --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;estateownermessage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49427,9 +40309,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -49496,13 +40378,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EstateOwnerMessage ---\n&quot;;
-                output += MethodData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EstateOwnerMessage ---&quot; + Environment.NewLine;
+                output += MethodData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParamList.Length; j++)
             {
-                output += ParamList[j].ToString() + &quot;\n&quot;;
+                output += ParamList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -49512,6 +40394,7 @@
     public class GenericMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;genericmessage_methoddata&quot;)]
         public class MethodDataBlock
         {
             public LLUUID Invoice;
@@ -49527,6 +40410,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49565,15 +40449,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MethodData --\n&quot;;
-                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MethodData --&quot; + Environment.NewLine;
+                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;genericmessage_paramlist&quot;)]
         public class ParamListBlock
         {
             private byte[] _parameter;
@@ -49588,6 +40473,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49623,19 +40509,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParamList --\n&quot;;
-                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ParamList --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;genericmessage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49668,9 +40556,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -49737,13 +40625,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GenericMessage ---\n&quot;;
-                output += MethodData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GenericMessage ---&quot; + Environment.NewLine;
+                output += MethodData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParamList.Length; j++)
             {
-                output += ParamList[j].ToString() + &quot;\n&quot;;
+                output += ParamList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -49753,11 +40641,13 @@
     public class MuteListRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mutelistrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49790,19 +40680,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mutelistrequest_mutedata&quot;)]
         public class MuteDataBlock
         {
             public uint MuteCRC;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49834,8 +40726,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MuteData --\n&quot;;
-                output += &quot;MuteCRC: &quot; + MuteCRC.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MuteData --&quot; + Environment.NewLine;
+                output += &quot;MuteCRC: &quot; + MuteCRC.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -49887,9 +40779,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MuteListRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += MuteData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MuteListRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += MuteData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -49899,11 +40791,13 @@
     public class UpdateMuteListEntryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatemutelistentry_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -49936,15 +40830,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatemutelistentry_mutedata&quot;)]
         public class MuteDataBlock
         {
             public LLUUID MuteID;
@@ -49962,6 +40857,7 @@
             }
             public int MuteType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50010,11 +40906,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MuteData --\n&quot;;
-                output += &quot;MuteID: &quot; + MuteID.ToString() + &quot;\n&quot;;
-                output += &quot;MuteFlags: &quot; + MuteFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MuteName, &quot;MuteName&quot;) + &quot;\n&quot;;
-                output += &quot;MuteType: &quot; + MuteType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MuteData --&quot; + Environment.NewLine;
+                output += &quot;MuteID: &quot; + MuteID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MuteFlags: &quot; + MuteFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MuteName, &quot;MuteName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;MuteType: &quot; + MuteType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -50066,9 +40962,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateMuteListEntry ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += MuteData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UpdateMuteListEntry ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += MuteData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -50078,11 +40974,13 @@
     public class RemoveMuteListEntryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removemutelistentry_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50115,15 +41013,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removemutelistentry_mutedata&quot;)]
         public class MuteDataBlock
         {
             public LLUUID MuteID;
@@ -50139,6 +41038,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50177,9 +41077,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MuteData --\n&quot;;
-                output += &quot;MuteID: &quot; + MuteID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MuteName, &quot;MuteName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MuteData --&quot; + Environment.NewLine;
+                output += &quot;MuteID: &quot; + MuteID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MuteName, &quot;MuteName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -50231,9 +41131,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RemoveMuteListEntry ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += MuteData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RemoveMuteListEntry ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += MuteData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -50243,11 +41143,13 @@
     public class CopyInventoryFromNotecardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;copyinventoryfromnotecard_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID ItemID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50280,20 +41182,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;copyinventoryfromnotecard_notecarddata&quot;)]
         public class NotecardDataBlock
         {
             public LLUUID ObjectID;
             public LLUUID NotecardItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50326,20 +41230,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NotecardData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;NotecardItemID: &quot; + NotecardItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- NotecardData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NotecardItemID: &quot; + NotecardItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;copyinventoryfromnotecard_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50372,9 +41278,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -50441,13 +41347,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CopyInventoryFromNotecard ---\n&quot;;
+            string output = &quot;--- CopyInventoryFromNotecard ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += NotecardData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += NotecardData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -50457,6 +41363,7 @@
     public class UpdateInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateinventoryitem_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public bool GroupOwned;
@@ -50502,6 +41409,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50620,40 +41528,42 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50686,9 +41596,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -50750,12 +41660,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateInventoryItem ---\n&quot;;
+            string output = &quot;--- UpdateInventoryItem ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -50765,6 +41675,7 @@
     public class UpdateCreateInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatecreateinventoryitem_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public bool GroupOwned;
@@ -50810,6 +41721,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50928,40 +41840,42 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatecreateinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public bool SimApproved;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -50993,9 +41907,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SimApproved: &quot; + SimApproved.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimApproved: &quot; + SimApproved.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51057,12 +41971,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateCreateInventoryItem ---\n&quot;;
+            string output = &quot;--- UpdateCreateInventoryItem ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51072,6 +41986,7 @@
     public class MoveInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moveinventoryitem_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             private byte[] _newname;
@@ -51088,6 +42003,7 @@
             public LLUUID ItemID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51129,22 +42045,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moveinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public bool Stamp;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51179,10 +42097,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Stamp: &quot; + Stamp.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Stamp: &quot; + Stamp.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51244,12 +42162,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoveInventoryItem ---\n&quot;;
+            string output = &quot;--- MoveInventoryItem ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51259,6 +42177,7 @@
     public class CopyInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;copyinventoryitem_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             private byte[] _newname;
@@ -51277,6 +42196,7 @@
             public LLUUID OldItemID;
             public LLUUID OldAgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51326,23 +42246,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;\n&quot;;
-                output += &quot;NewFolderID: &quot; + NewFolderID.ToString() + &quot;\n&quot;;
-                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;\n&quot;;
-                output += &quot;OldItemID: &quot; + OldItemID.ToString() + &quot;\n&quot;;
-                output += &quot;OldAgentID: &quot; + OldAgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;NewFolderID: &quot; + NewFolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OldItemID: &quot; + OldItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OldAgentID: &quot; + OldAgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;copyinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51375,9 +42297,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51439,12 +42361,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CopyInventoryItem ---\n&quot;;
+            string output = &quot;--- CopyInventoryItem ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51454,10 +42376,12 @@
     public class RemoveInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryitem_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51487,19 +42411,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51532,9 +42458,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51595,12 +42521,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RemoveInventoryItem ---\n&quot;;
+            string output = &quot;--- RemoveInventoryItem ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51610,11 +42536,13 @@
     public class ChangeInventoryItemFlagsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;changeinventoryitemflags_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID ItemID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51649,20 +42577,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;changeinventoryitemflags_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51695,9 +42625,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51758,12 +42688,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChangeInventoryItemFlags ---\n&quot;;
+            string output = &quot;--- ChangeInventoryItemFlags ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51773,11 +42703,13 @@
     public class SaveAssetIntoInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;saveassetintoinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID NewAssetID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51810,19 +42742,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;NewAssetID: &quot; + NewAssetID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;NewAssetID: &quot; + NewAssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;saveassetintoinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51852,8 +42786,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -51905,9 +42839,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SaveAssetIntoInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SaveAssetIntoInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -51917,11 +42851,13 @@
     public class CreateInventoryFolderPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createinventoryfolder_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -51954,15 +42890,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createinventoryfolder_folderdata&quot;)]
         public class FolderDataBlock
         {
             private byte[] _name;
@@ -51980,6 +42917,7 @@
             public sbyte Type;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52023,11 +42961,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -52079,9 +43017,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateInventoryFolder ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += FolderData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateInventoryFolder ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += FolderData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -52091,11 +43029,13 @@
     public class UpdateInventoryFolderPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateinventoryfolder_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52128,15 +43068,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateinventoryfolder_folderdata&quot;)]
         public class FolderDataBlock
         {
             private byte[] _name;
@@ -52154,6 +43095,7 @@
             public sbyte Type;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52197,11 +43139,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -52262,11 +43204,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateInventoryFolder ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UpdateInventoryFolder ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -52277,11 +43219,13 @@
     public class MoveInventoryFolderPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moveinventoryfolder_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID ParentID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52314,21 +43258,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moveinventoryfolder_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public bool Stamp;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52363,10 +43309,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Stamp: &quot; + Stamp.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Stamp: &quot; + Stamp.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -52428,12 +43374,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoveInventoryFolder ---\n&quot;;
+            string output = &quot;--- MoveInventoryFolder ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -52443,11 +43389,13 @@
     public class RemoveInventoryFolderPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryfolder_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52480,19 +43428,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryfolder_folderdata&quot;)]
         public class FolderDataBlock
         {
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52522,8 +43472,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -52584,11 +43534,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RemoveInventoryFolder ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RemoveInventoryFolder ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -52599,6 +43549,7 @@
     public class FetchInventoryDescendentsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventorydescendents_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID OwnerID;
@@ -52607,6 +43558,7 @@
             public bool FetchFolders;
             public bool FetchItems;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52648,23 +43600,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;\n&quot;;
-                output += &quot;FetchFolders: &quot; + FetchFolders.ToString() + &quot;\n&quot;;
-                output += &quot;FetchItems: &quot; + FetchItems.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SortOrder: &quot; + SortOrder.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FetchFolders: &quot; + FetchFolders.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FetchItems: &quot; + FetchItems.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventorydescendents_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52697,9 +43651,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -52752,9 +43706,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FetchInventoryDescendents ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- FetchInventoryDescendents ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -52764,6 +43718,7 @@
     public class InventoryDescendentsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;inventorydescendents_itemdata&quot;)]
         public class ItemDataBlock
         {
             public bool GroupOwned;
@@ -52808,6 +43763,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -52921,34 +43877,35 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ItemData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ItemData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;inventorydescendents_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -52957,6 +43914,7 @@
             public LLUUID OwnerID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53002,18 +43960,19 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Descendents: &quot; + Descendents.ToString() + &quot;\n&quot;;
-                output += &quot;Version: &quot; + Version.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Descendents: &quot; + Descendents.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Version: &quot; + Version.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;inventorydescendents_folderdata&quot;)]
         public class FolderDataBlock
         {
             private byte[] _name;
@@ -53031,6 +43990,7 @@
             public sbyte Type;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53074,11 +44034,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -53154,15 +44114,15 @@
 
         public override string ToString()
         {
-            string output = &quot;--- InventoryDescendents ---\n&quot;;
+            string output = &quot;--- InventoryDescendents ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ItemData.Length; j++)
             {
-                output += ItemData[j].ToString() + &quot;\n&quot;;
+                output += ItemData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -53173,11 +44133,13 @@
     public class FetchInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID OwnerID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53210,20 +44172,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53256,9 +44220,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -53320,12 +44284,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FetchInventory ---\n&quot;;
+            string output = &quot;--- FetchInventory ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -53335,6 +44299,7 @@
     public class FetchInventoryReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventoryreply_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public bool GroupOwned;
@@ -53379,6 +44344,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53492,38 +44458,40 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;fetchinventoryreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53553,8 +44521,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -53616,12 +44584,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FetchInventoryReply ---\n&quot;;
+            string output = &quot;--- FetchInventoryReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -53631,6 +44599,7 @@
     public class BulkUpdateInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;bulkupdateinventory_itemdata&quot;)]
         public class ItemDataBlock
         {
             public bool GroupOwned;
@@ -53676,6 +44645,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53794,40 +44764,42 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ItemData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ItemData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;bulkupdateinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53860,15 +44832,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;bulkupdateinventory_folderdata&quot;)]
         public class FolderDataBlock
         {
             private byte[] _name;
@@ -53886,6 +44859,7 @@
             public sbyte Type;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -53929,11 +44903,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54009,15 +44983,15 @@
 
         public override string ToString()
         {
-            string output = &quot;--- BulkUpdateInventory ---\n&quot;;
+            string output = &quot;--- BulkUpdateInventory ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ItemData.Length; j++)
             {
-                output += ItemData[j].ToString() + &quot;\n&quot;;
+                output += ItemData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -54028,6 +45002,7 @@
     public class RequestInventoryAssetPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestinventoryasset_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID AgentID;
@@ -54035,6 +45010,7 @@
             public LLUUID OwnerID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54073,11 +45049,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54124,8 +45100,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestInventoryAsset ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestInventoryAsset ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -54135,12 +45111,14 @@
     public class InventoryAssetResponsePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;inventoryassetresponse_querydata&quot;)]
         public class QueryDataBlock
         {
             public LLUUID QueryID;
             public LLUUID AssetID;
             public bool IsReadable;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54175,10 +45153,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;IsReadable: &quot; + IsReadable.ToString() + &quot;\n&quot;;
+                string output = &quot;-- QueryData --&quot; + Environment.NewLine;
+                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsReadable: &quot; + IsReadable.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54225,8 +45203,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- InventoryAssetResponse ---\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- InventoryAssetResponse ---&quot; + Environment.NewLine;
+                output += QueryData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -54236,10 +45214,12 @@
     public class RemoveInventoryObjectsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryobjects_itemdata&quot;)]
         public class ItemDataBlock
         {
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54269,19 +45249,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ItemData --\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ItemData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryobjects_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54314,19 +45296,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removeinventoryobjects_folderdata&quot;)]
         public class FolderDataBlock
         {
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54356,8 +45340,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54432,15 +45416,15 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RemoveInventoryObjects ---\n&quot;;
+            string output = &quot;--- RemoveInventoryObjects ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ItemData.Length; j++)
             {
-                output += ItemData[j].ToString() + &quot;\n&quot;;
+                output += ItemData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -54451,10 +45435,12 @@
     public class PurgeInventoryDescendentsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;purgeinventorydescendents_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54484,19 +45470,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;purgeinventorydescendents_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54529,9 +45517,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54584,9 +45572,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PurgeInventoryDescendents ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- PurgeInventoryDescendents ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -54596,6 +45584,7 @@
     public class UpdateTaskInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatetaskinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public bool GroupOwned;
@@ -54640,6 +45629,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54753,39 +45743,41 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatetaskinventory_updatedata&quot;)]
         public class UpdateDataBlock
         {
             public byte Key;
             public uint LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54819,20 +45811,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UpdateData --\n&quot;;
-                output += &quot;Key: &quot; + Key.ToString() + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UpdateData --&quot; + Environment.NewLine;
+                output += &quot;Key: &quot; + Key.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updatetaskinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54865,9 +45859,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -54925,10 +45919,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateTaskInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += UpdateData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UpdateTaskInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += UpdateData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -54938,11 +45932,13 @@
     public class RemoveTaskInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removetaskinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public uint LocalID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -54977,20 +45973,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;removetaskinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55023,9 +46021,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -55078,9 +46076,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RemoveTaskInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RemoveTaskInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55090,11 +46088,13 @@
     public class MoveTaskInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;movetaskinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public uint LocalID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55129,21 +46129,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;movetaskinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55179,10 +46181,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -55234,9 +46236,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoveTaskInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoveTaskInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55246,10 +46248,12 @@
     public class RequestTaskInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requesttaskinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public uint LocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55281,19 +46285,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requesttaskinventory_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55326,9 +46332,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -55380,9 +46386,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestTaskInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestTaskInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55392,6 +46398,7 @@
     public class ReplyTaskInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;replytaskinventory_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID TaskID;
@@ -55408,6 +46415,7 @@
             }
             public short Serial;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55449,10 +46457,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;\n&quot;;
-                output += &quot;Serial: &quot; + Serial.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Serial: &quot; + Serial.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -55500,8 +46508,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ReplyTaskInventory ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ReplyTaskInventory ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55511,10 +46519,12 @@
     public class DeRezObjectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;derezobject_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55546,14 +46556,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;derezobject_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID GroupID;
@@ -55563,6 +46574,7 @@
             public LLUUID TransactionID;
             public LLUUID DestinationID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55604,24 +46616,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;Destination: &quot; + Destination.ToString() + &quot;\n&quot;;
-                output += &quot;PacketNumber: &quot; + PacketNumber.ToString() + &quot;\n&quot;;
-                output += &quot;PacketCount: &quot; + PacketCount.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;DestinationID: &quot; + DestinationID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Destination: &quot; + Destination.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PacketNumber: &quot; + PacketNumber.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PacketCount: &quot; + PacketCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DestinationID: &quot; + DestinationID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;derezobject_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55654,9 +46668,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -55723,13 +46737,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeRezObject ---\n&quot;;
+            string output = &quot;--- DeRezObject ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55774,7 +46788,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeRezAck ---\n&quot;;
+            string output = &quot;--- DeRezAck ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -55784,6 +46798,7 @@
     public class RezObjectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobject_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public bool GroupOwned;
@@ -55828,6 +46843,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -55941,34 +46957,35 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobject_rezdata&quot;)]
         public class RezDataBlock
         {
             public bool RezSelected;
@@ -55984,6 +47001,7 @@
             public uint GroupMask;
             public LLUUID RayTargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56020,7 +47038,6 @@
             {
                 bytes[i++] = (byte)((RezSelected) ? 1 : 0);
                 bytes[i++] = (byte)((RemoveItem) ? 1 : 0);
-                if(RayStart == null) { Console.WriteLine(&quot;Warning: RayStart is null, in &quot; + this.GetType()); }
                 Array.Copy(RayStart.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(ItemFlags % 256);
                 bytes[i++] = (byte)((ItemFlags &gt;&gt; 8) % 256);
@@ -56029,7 +47046,6 @@
                 if(FromTaskID == null) { Console.WriteLine(&quot;Warning: FromTaskID is null, in &quot; + this.GetType()); }
                 Array.Copy(FromTaskID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = (byte)((RayEndIsIntersection) ? 1 : 0);
-                if(RayEnd == null) { Console.WriteLine(&quot;Warning: RayEnd is null, in &quot; + this.GetType()); }
                 Array.Copy(RayEnd.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = BypassRaycast;
                 bytes[i++] = (byte)(EveryoneMask % 256);
@@ -56050,31 +47066,33 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RezData --\n&quot;;
-                output += &quot;RezSelected: &quot; + RezSelected.ToString() + &quot;\n&quot;;
-                output += &quot;RemoveItem: &quot; + RemoveItem.ToString() + &quot;\n&quot;;
-                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;\n&quot;;
-                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;\n&quot;;
-                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;\n&quot;;
-                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;\n&quot;;
-                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;\n&quot;;
-                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RezData --&quot; + Environment.NewLine;
+                output += &quot;RezSelected: &quot; + RezSelected.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RemoveItem: &quot; + RemoveItem.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobject_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56110,10 +47128,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -56171,10 +47189,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RezObject ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += RezData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RezObject ---&quot; + Environment.NewLine;
+                output += InventoryData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += RezData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -56184,10 +47202,12 @@
     public class RezObjectFromNotecardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobjectfromnotecard_inventorydata&quot;)]
         public class InventoryDataBlock
         {
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56217,14 +47237,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryData --&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobjectfromnotecard_rezdata&quot;)]
         public class RezDataBlock
         {
             public bool RezSelected;
@@ -56240,6 +47261,7 @@
             public uint GroupMask;
             public LLUUID RayTargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56276,7 +47298,6 @@
             {
                 bytes[i++] = (byte)((RezSelected) ? 1 : 0);
                 bytes[i++] = (byte)((RemoveItem) ? 1 : 0);
-                if(RayStart == null) { Console.WriteLine(&quot;Warning: RayStart is null, in &quot; + this.GetType()); }
                 Array.Copy(RayStart.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(ItemFlags % 256);
                 bytes[i++] = (byte)((ItemFlags &gt;&gt; 8) % 256);
@@ -56285,7 +47306,6 @@
                 if(FromTaskID == null) { Console.WriteLine(&quot;Warning: FromTaskID is null, in &quot; + this.GetType()); }
                 Array.Copy(FromTaskID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = (byte)((RayEndIsIntersection) ? 1 : 0);
-                if(RayEnd == null) { Console.WriteLine(&quot;Warning: RayEnd is null, in &quot; + this.GetType()); }
                 Array.Copy(RayEnd.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = BypassRaycast;
                 bytes[i++] = (byte)(EveryoneMask % 256);
@@ -56306,30 +47326,32 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RezData --\n&quot;;
-                output += &quot;RezSelected: &quot; + RezSelected.ToString() + &quot;\n&quot;;
-                output += &quot;RemoveItem: &quot; + RemoveItem.ToString() + &quot;\n&quot;;
-                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;\n&quot;;
-                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;\n&quot;;
-                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;\n&quot;;
-                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;\n&quot;;
-                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;\n&quot;;
-                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RezData --&quot; + Environment.NewLine;
+                output += &quot;RezSelected: &quot; + RezSelected.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RemoveItem: &quot; + RemoveItem.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobjectfromnotecard_notecarddata&quot;)]
         public class NotecardDataBlock
         {
             public LLUUID ObjectID;
             public LLUUID NotecardItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56362,21 +47384,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NotecardData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;NotecardItemID: &quot; + NotecardItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- NotecardData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NotecardItemID: &quot; + NotecardItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezobjectfromnotecard_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56412,10 +47436,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -56487,14 +47511,14 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RezObjectFromNotecard ---\n&quot;;
+            string output = &quot;--- RezObjectFromNotecard ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InventoryData.Length; j++)
             {
-                output += InventoryData[j].ToString() + &quot;\n&quot;;
+                output += InventoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += RezData.ToString() + &quot;\n&quot;;
-                output += NotecardData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += RezData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += NotecardData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -56504,10 +47528,12 @@
     public class DeclineInventoryPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;declineinventory_infoblock&quot;)]
         public class InfoBlockBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56537,8 +47563,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InfoBlock --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InfoBlock --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -56585,287 +47611,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeclineInventory ---\n&quot;;
-                output += InfoBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DeclineInventory ---&quot; + Environment.NewLine;
+                output += InfoBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class TransferInventoryPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlockBlock
-        {
-            public LLUUID DestID;
-            public LLUUID SourceID;
-            public LLUUID TransactionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 48;
-                }
-            }
-
-            public InfoBlockBlock() { }
-            public InfoBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    DestID = new LLUUID(bytes, i); i += 16;
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(DestID == null) { Console.WriteLine(&quot;Warning: DestID is null, in &quot; + this.GetType()); }
-                Array.Copy(DestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- InfoBlock --\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class InventoryBlockBlock
-        {
-            public sbyte Type;
-            public LLUUID InventoryID;
-
-            public int Length
-            {
-                get
-                {
-                    return 17;
-                }
-            }
-
-            public InventoryBlockBlock() { }
-            public InventoryBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Type = (sbyte)bytes[i++];
-                    InventoryID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)Type;
-                if(InventoryID == null) { Console.WriteLine(&quot;Warning: InventoryID is null, in &quot; + this.GetType()); }
-                Array.Copy(InventoryID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- InventoryBlock --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;InventoryID: &quot; + InventoryID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.TransferInventory; } }
-        public InfoBlockBlock InfoBlock;
-        public InventoryBlockBlock[] InventoryBlock;
-
-        public TransferInventoryPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 335;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            InfoBlock = new InfoBlockBlock();
-            InventoryBlock = new InventoryBlockBlock[0];
-        }
-
-        public TransferInventoryPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            InfoBlock = new InfoBlockBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            InventoryBlock = new InventoryBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { InventoryBlock[j] = new InventoryBlockBlock(bytes, ref i); }
-        }
-
-        public TransferInventoryPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            InfoBlock = new InfoBlockBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            InventoryBlock = new InventoryBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { InventoryBlock[j] = new InventoryBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += InfoBlock.Length;;
-            length++;
-            for (int j = 0; j &lt; InventoryBlock.Length; j++) { length += InventoryBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            InfoBlock.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)InventoryBlock.Length;
-            for (int j = 0; j &lt; InventoryBlock.Length; j++) { InventoryBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- TransferInventory ---\n&quot;;
-                output += InfoBlock.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; InventoryBlock.Length; j++)
-            {
-                output += InventoryBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class TransferInventoryAckPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InfoBlockBlock
-        {
-            public LLUUID InventoryID;
-            public LLUUID TransactionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public InfoBlockBlock() { }
-            public InfoBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    InventoryID = new LLUUID(bytes, i); i += 16;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(InventoryID == null) { Console.WriteLine(&quot;Warning: InventoryID is null, in &quot; + this.GetType()); }
-                Array.Copy(InventoryID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- InfoBlock --\n&quot;;
-                output += &quot;InventoryID: &quot; + InventoryID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.TransferInventoryAck; } }
-        public InfoBlockBlock InfoBlock;
-
-        public TransferInventoryAckPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 336;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            InfoBlock = new InfoBlockBlock();
-        }
-
-        public TransferInventoryAckPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            InfoBlock = new InfoBlockBlock(bytes, ref i);
-        }
-
-        public TransferInventoryAckPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            InfoBlock = new InfoBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += InfoBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            InfoBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- TransferInventoryAck ---\n&quot;;
-                output += InfoBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class RequestFriendshipPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestfriendship_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID DestID;
             public LLUUID FolderID;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56901,21 +47665,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;DestID: &quot; + DestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestfriendship_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -56948,9 +47714,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57002,9 +47768,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestFriendship ---\n&quot;;
-                output += AgentBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestFriendship ---&quot; + Environment.NewLine;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -57014,10 +47780,12 @@
     public class AcceptFriendshipPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptfriendship_transactionblock&quot;)]
         public class TransactionBlockBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57047,19 +47815,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionBlock --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionBlock --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptfriendship_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57092,19 +47862,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptfriendship_folderdata&quot;)]
         public class FolderDataBlock
         {
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57134,8 +47906,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57201,12 +47973,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AcceptFriendship ---\n&quot;;
-                output += TransactionBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AcceptFriendship ---&quot; + Environment.NewLine;
+                output += TransactionBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -57217,10 +47989,12 @@
     public class DeclineFriendshipPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;declinefriendship_transactionblock&quot;)]
         public class TransactionBlockBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57250,19 +48024,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionBlock --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionBlock --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;declinefriendship_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57295,9 +48071,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57349,9 +48125,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeclineFriendship ---\n&quot;;
-                output += TransactionBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DeclineFriendship ---&quot; + Environment.NewLine;
+                output += TransactionBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -57361,11 +48137,13 @@
     public class FormFriendshipPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;formfriendship_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID DestID;
             public LLUUID SourceID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57398,9 +48176,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;DestID: &quot; + DestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57447,8 +48225,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- FormFriendship ---\n&quot;;
-                output += AgentBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- FormFriendship ---&quot; + Environment.NewLine;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -57458,10 +48236,12 @@
     public class TerminateFriendshipPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;terminatefriendship_exblock&quot;)]
         public class ExBlockBlock
         {
             public LLUUID OtherID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57491,19 +48271,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ExBlock --\n&quot;;
-                output += &quot;OtherID: &quot; + OtherID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ExBlock --&quot; + Environment.NewLine;
+                output += &quot;OtherID: &quot; + OtherID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;terminatefriendship_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57536,9 +48318,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57590,9 +48372,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TerminateFriendship ---\n&quot;;
-                output += ExBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TerminateFriendship ---&quot; + Environment.NewLine;
+                output += ExBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -57602,11 +48384,13 @@
     public class OfferCallingCardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;offercallingcard_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID DestID;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57639,20 +48423,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;DestID: &quot; + DestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;offercallingcard_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57685,9 +48471,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57739,9 +48525,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- OfferCallingCard ---\n&quot;;
-                output += AgentBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- OfferCallingCard ---&quot; + Environment.NewLine;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -57751,10 +48537,12 @@
     public class AcceptCallingCardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptcallingcard_transactionblock&quot;)]
         public class TransactionBlockBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57784,19 +48572,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionBlock --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionBlock --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptcallingcard_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57829,19 +48619,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;acceptcallingcard_folderdata&quot;)]
         public class FolderDataBlock
         {
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57871,8 +48663,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FolderData --\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- FolderData --&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -57938,12 +48730,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AcceptCallingCard ---\n&quot;;
-                output += TransactionBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AcceptCallingCard ---&quot; + Environment.NewLine;
+                output += TransactionBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; FolderData.Length; j++)
             {
-                output += FolderData[j].ToString() + &quot;\n&quot;;
+                output += FolderData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -57954,10 +48746,12 @@
     public class DeclineCallingCardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;declinecallingcard_transactionblock&quot;)]
         public class TransactionBlockBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -57987,19 +48781,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionBlock --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionBlock --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;declinecallingcard_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58032,9 +48828,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -58086,9 +48882,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeclineCallingCard ---\n&quot;;
-                output += TransactionBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DeclineCallingCard ---&quot; + Environment.NewLine;
+                output += TransactionBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -58098,11 +48894,13 @@
     public class RezScriptPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezscript_updateblock&quot;)]
         public class UpdateBlockBlock
         {
             public bool Enabled;
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58136,15 +48934,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UpdateBlock --\n&quot;;
-                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UpdateBlock --&quot; + Environment.NewLine;
+                output += &quot;Enabled: &quot; + Enabled.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezscript_inventoryblock&quot;)]
         public class InventoryBlockBlock
         {
             public bool GroupOwned;
@@ -58189,6 +48988,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58302,40 +49102,42 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryBlock --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryBlock --&quot; + Environment.NewLine;
+                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezscript_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58371,10 +49173,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -58432,10 +49234,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RezScript ---\n&quot;;
-                output += UpdateBlock.ToString() + &quot;\n&quot;;
-                output += InventoryBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RezScript ---&quot; + Environment.NewLine;
+                output += UpdateBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += InventoryBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -58445,6 +49247,7 @@
     public class CreateInventoryItemPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createinventoryitem_inventoryblock&quot;)]
         public class InventoryBlockBlock
         {
             public uint CallbackID;
@@ -58477,6 +49280,7 @@
             public uint NextOwnerMask;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58541,27 +49345,29 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryBlock --\n&quot;;
-                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;\n&quot;;
-                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryBlock --&quot; + Environment.NewLine;
+                output += &quot;CallbackID: &quot; + CallbackID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InvType: &quot; + InvType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createinventoryitem_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58594,9 +49400,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -58649,9 +49455,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateInventoryItem ---\n&quot;;
-                output += InventoryBlock.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateInventoryItem ---&quot; + Environment.NewLine;
+                output += InventoryBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -58661,6 +49467,7 @@
     public class CreateLandmarkForEventPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createlandmarkforevent_inventoryblock&quot;)]
         public class InventoryBlockBlock
         {
             private byte[] _name;
@@ -58676,6 +49483,7 @@
             }
             public LLUUID FolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58714,19 +49522,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InventoryBlock --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InventoryBlock --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createlandmarkforevent_eventdata&quot;)]
         public class EventDataBlock
         {
             public uint EventID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58758,19 +49568,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EventData --&quot; + Environment.NewLine;
+                output += &quot;EventID: &quot; + EventID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createlandmarkforevent_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -58803,9 +49615,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -58863,314 +49675,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateLandmarkForEvent ---\n&quot;;
-                output += InventoryBlock.ToString() + &quot;\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateLandmarkForEvent ---&quot; + Environment.NewLine;
+                output += InventoryBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += EventData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class EventLocationRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class EventDataBlock
-        {
-            public uint EventID;
-
-            public int Length
-            {
-                get
-                {
-                    return 4;
-                }
-            }
-
-            public EventDataBlock() { }
-            public EventDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    EventID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(EventID % 256);
-                bytes[i++] = (byte)((EventID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EventID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EventID &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;EventID: &quot; + EventID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public LLUUID QueryID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EventLocationRequest; } }
-        public EventDataBlock EventData;
-        public QueryDataBlock QueryData;
-
-        public EventLocationRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 348;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            EventData = new EventDataBlock();
-            QueryData = new QueryDataBlock();
-        }
-
-        public EventLocationRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            EventData = new EventDataBlock(bytes, ref i);
-            QueryData = new QueryDataBlock(bytes, ref i);
-        }
-
-        public EventLocationRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            EventData = new EventDataBlock(bytes, ref i);
-            QueryData = new QueryDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += EventData.Length;            length += QueryData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            EventData.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EventLocationRequest ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class EventLocationReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class EventDataBlock
-        {
-            public LLUUID RegionID;
-            public bool Success;
-            public LLVector3 RegionPos;
-
-            public int Length
-            {
-                get
-                {
-                    return 29;
-                }
-            }
-
-            public EventDataBlock() { }
-            public EventDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    Success = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    RegionPos = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((Success) ? 1 : 0);
-                if(RegionPos == null) { Console.WriteLine(&quot;Warning: RegionPos is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionPos.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- EventData --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
-                output += &quot;RegionPos: &quot; + RegionPos.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class QueryDataBlock
-        {
-            public LLUUID QueryID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public QueryDataBlock() { }
-            public QueryDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    QueryID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(QueryID == null) { Console.WriteLine(&quot;Warning: QueryID is null, in &quot; + this.GetType()); }
-                Array.Copy(QueryID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- QueryData --\n&quot;;
-                output += &quot;QueryID: &quot; + QueryID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EventLocationReply; } }
-        public EventDataBlock EventData;
-        public QueryDataBlock QueryData;
-
-        public EventLocationReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 349;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            EventData = new EventDataBlock();
-            QueryData = new QueryDataBlock();
-        }
-
-        public EventLocationReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            EventData = new EventDataBlock(bytes, ref i);
-            QueryData = new QueryDataBlock(bytes, ref i);
-        }
-
-        public EventLocationReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            EventData = new EventDataBlock(bytes, ref i);
-            QueryData = new QueryDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += EventData.Length;            length += QueryData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            EventData.ToBytes(bytes, ref i);
-            QueryData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EventLocationReply ---\n&quot;;
-                output += EventData.ToString() + &quot;\n&quot;;
-                output += QueryData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class RegionHandleRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regionhandlerequest_requestblock&quot;)]
         public class RequestBlockBlock
         {
             public LLUUID RegionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -59200,8 +49723,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestBlock --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestBlock --&quot; + Environment.NewLine;
+                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -59248,8 +49771,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RegionHandleRequest ---\n&quot;;
-                output += RequestBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RegionHandleRequest ---&quot; + Environment.NewLine;
+                output += RequestBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -59259,11 +49782,13 @@
     public class RegionIDAndHandleReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;regionidandhandlereply_replyblock&quot;)]
         public class ReplyBlockBlock
         {
             public LLUUID RegionID;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -59302,9 +49827,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReplyBlock --\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReplyBlock --&quot; + Environment.NewLine;
+                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -59351,8 +49876,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RegionIDAndHandleReply ---\n&quot;;
-                output += ReplyBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RegionIDAndHandleReply ---&quot; + Environment.NewLine;
+                output += ReplyBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -59362,6 +49887,7 @@
     public class MoneyTransferRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransferrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public byte AggregatePermInventory;
@@ -59383,6 +49909,7 @@
             public LLUUID SourceID;
             public int TransactionType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -59440,26 +49967,28 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;AggregatePermInventory: &quot; + AggregatePermInventory.ToString() + &quot;\n&quot;;
-                output += &quot;AggregatePermNextOwner: &quot; + AggregatePermNextOwner.ToString() + &quot;\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;AggregatePermInventory: &quot; + AggregatePermInventory.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AggregatePermNextOwner: &quot; + AggregatePermNextOwner.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DestID: &quot; + DestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransferrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -59492,9 +50021,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -59547,390 +50076,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyTransferRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyTransferRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class MoneyTransferBackendPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MoneyDataBlock
-        {
-            public byte AggregatePermInventory;
-            public byte AggregatePermNextOwner;
-            public LLUUID DestID;
-            public int Amount;
-            private byte[] _description;
-            public byte[] Description
-            {
-                get { return _description; }
-                set
-                {
-                    if (value == null) { _description = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _description = new byte[value.Length]; Array.Copy(value, _description, value.Length); }
-                }
-            }
-            public byte Flags;
-            public LLUUID SourceID;
-            public LLUUID TransactionID;
-            public uint TransactionTime;
-            public int TransactionType;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 63;
-                    if (Description != null) { length += 1 + Description.Length; }
-                    return length;
-                }
-            }
-
-            public MoneyDataBlock() { }
-            public MoneyDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    AggregatePermInventory = (byte)bytes[i++];
-                    AggregatePermNextOwner = (byte)bytes[i++];
-                    DestID = new LLUUID(bytes, i); i += 16;
-                    Amount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _description = new byte[length];
-                    Array.Copy(bytes, i, _description, 0, length); i += length;
-                    Flags = (byte)bytes[i++];
-                    SourceID = new LLUUID(bytes, i); i += 16;
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                    TransactionTime = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    TransactionType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = AggregatePermInventory;
-                bytes[i++] = AggregatePermNextOwner;
-                if(DestID == null) { Console.WriteLine(&quot;Warning: DestID is null, in &quot; + this.GetType()); }
-                Array.Copy(DestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Amount % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 24) % 256);
-                if(Description == null) { Console.WriteLine(&quot;Warning: Description is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Description.Length;
-                Array.Copy(Description, 0, bytes, i, Description.Length); i += Description.Length;
-                bytes[i++] = Flags;
-                if(SourceID == null) { Console.WriteLine(&quot;Warning: SourceID is null, in &quot; + this.GetType()); }
-                Array.Copy(SourceID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(TransactionTime % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionTime &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(TransactionType % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;AggregatePermInventory: &quot; + AggregatePermInventory.ToString() + &quot;\n&quot;;
-                output += &quot;AggregatePermNextOwner: &quot; + AggregatePermNextOwner.ToString() + &quot;\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;SourceID: &quot; + SourceID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionTime: &quot; + TransactionTime.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.MoneyTransferBackend; } }
-        public MoneyDataBlock MoneyData;
-
-        public MoneyTransferBackendPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 353;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            MoneyData = new MoneyDataBlock();
-        }
-
-        public MoneyTransferBackendPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            MoneyData = new MoneyDataBlock(bytes, ref i);
-        }
-
-        public MoneyTransferBackendPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            MoneyData = new MoneyDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += MoneyData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            MoneyData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- MoneyTransferBackend ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class BulkMoneyTransferPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class MoneyDataBlock
-        {
-            public LLUUID DestID;
-            public int Amount;
-            private byte[] _description;
-            public byte[] Description
-            {
-                get { return _description; }
-                set
-                {
-                    if (value == null) { _description = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _description = new byte[value.Length]; Array.Copy(value, _description, value.Length); }
-                }
-            }
-            public byte Flags;
-            public LLUUID TransactionID;
-            public int TransactionType;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 41;
-                    if (Description != null) { length += 1 + Description.Length; }
-                    return length;
-                }
-            }
-
-            public MoneyDataBlock() { }
-            public MoneyDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    DestID = new LLUUID(bytes, i); i += 16;
-                    Amount = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _description = new byte[length];
-                    Array.Copy(bytes, i, _description, 0, length); i += length;
-                    Flags = (byte)bytes[i++];
-                    TransactionID = new LLUUID(bytes, i); i += 16;
-                    TransactionType = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(DestID == null) { Console.WriteLine(&quot;Warning: DestID is null, in &quot; + this.GetType()); }
-                Array.Copy(DestID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(Amount % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Amount &gt;&gt; 24) % 256);
-                if(Description == null) { Console.WriteLine(&quot;Warning: Description is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Description.Length;
-                Array.Copy(Description, 0, bytes, i, Description.Length); i += Description.Length;
-                bytes[i++] = Flags;
-                if(TransactionID == null) { Console.WriteLine(&quot;Warning: TransactionID is null, in &quot; + this.GetType()); }
-                Array.Copy(TransactionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(TransactionType % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((TransactionType &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;DestID: &quot; + DestID.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionType: &quot; + TransactionType.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public uint RegionX;
-            public uint RegionY;
-
-            public int Length
-            {
-                get
-                {
-                    return 24;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    RegionX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionX % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionY % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.BulkMoneyTransfer; } }
-        public MoneyDataBlock[] MoneyData;
-        public AgentDataBlock AgentData;
-
-        public BulkMoneyTransferPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 354;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            MoneyData = new MoneyDataBlock[0];
-            AgentData = new AgentDataBlock();
-        }
-
-        public BulkMoneyTransferPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            MoneyData = new MoneyDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MoneyData[j] = new MoneyDataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public BulkMoneyTransferPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            MoneyData = new MoneyDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { MoneyData[j] = new MoneyDataBlock(bytes, ref i); }
-            AgentData = new AgentDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;;
-            length++;
-            for (int j = 0; j &lt; MoneyData.Length; j++) { length += MoneyData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)MoneyData.Length;
-            for (int j = 0; j &lt; MoneyData.Length; j++) { MoneyData[j].ToBytes(bytes, ref i); }
-            AgentData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- BulkMoneyTransfer ---\n&quot;;
-            for (int j = 0; j &lt; MoneyData.Length; j++)
-            {
-                output += MoneyData[j].ToString() + &quot;\n&quot;;
-            }
-                output += AgentData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class AdjustBalancePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;adjustbalance_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public int Delta;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -59965,9 +50129,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Delta: &quot; + Delta.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Delta: &quot; + Delta.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60015,8 +50179,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AdjustBalance ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AdjustBalance ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60026,10 +50190,12 @@
     public class MoneyBalanceRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneybalancerequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60059,19 +50225,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneybalancerequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60104,9 +50272,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60159,9 +50327,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyBalanceRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyBalanceRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60171,6 +50339,7 @@
     public class MoneyBalanceReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneybalancereply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID AgentID;
@@ -60191,6 +50360,7 @@
             public LLUUID TransactionID;
             public bool TransactionSuccess;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60249,14 +50419,14 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;MoneyBalance: &quot; + MoneyBalance.ToString() + &quot;\n&quot;;
-                output += &quot;SquareMetersCredit: &quot; + SquareMetersCredit.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;SquareMetersCommitted: &quot; + SquareMetersCommitted.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionSuccess: &quot; + TransactionSuccess.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MoneyBalance: &quot; + MoneyBalance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SquareMetersCredit: &quot; + SquareMetersCredit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SquareMetersCommitted: &quot; + SquareMetersCommitted.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionSuccess: &quot; + TransactionSuccess.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60304,8 +50474,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyBalanceReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyBalanceReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60315,11 +50485,13 @@
     public class RoutedMoneyBalanceReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;routedmoneybalancereply_targetblock&quot;)]
         public class TargetBlockBlock
         {
             public uint TargetIP;
             public ushort TargetPort;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60354,15 +50526,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TargetBlock --\n&quot;;
-                output += &quot;TargetIP: &quot; + TargetIP.ToString() + &quot;\n&quot;;
-                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TargetBlock --&quot; + Environment.NewLine;
+                output += &quot;TargetIP: &quot; + TargetIP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;routedmoneybalancereply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID AgentID;
@@ -60383,6 +50556,7 @@
             public LLUUID TransactionID;
             public bool TransactionSuccess;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60441,14 +50615,14 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;MoneyBalance: &quot; + MoneyBalance.ToString() + &quot;\n&quot;;
-                output += &quot;SquareMetersCredit: &quot; + SquareMetersCredit.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;SquareMetersCommitted: &quot; + SquareMetersCommitted.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionSuccess: &quot; + TransactionSuccess.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MoneyBalance: &quot; + MoneyBalance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SquareMetersCredit: &quot; + SquareMetersCredit.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SquareMetersCommitted: &quot; + SquareMetersCommitted.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionSuccess: &quot; + TransactionSuccess.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60501,9 +50675,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RoutedMoneyBalanceReply ---\n&quot;;
-                output += TargetBlock.ToString() + &quot;\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RoutedMoneyBalanceReply ---&quot; + Environment.NewLine;
+                output += TargetBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60513,12 +50687,14 @@
     public class MoneyHistoryRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneyhistoryrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID AgentID;
             public int StartPeriod;
             public int EndPeriod;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60558,10 +50734,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;StartPeriod: &quot; + StartPeriod.ToString() + &quot;\n&quot;;
-                output += &quot;EndPeriod: &quot; + EndPeriod.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StartPeriod: &quot; + StartPeriod.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EndPeriod: &quot; + EndPeriod.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60608,8 +50784,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyHistoryRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyHistoryRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60619,6 +50795,7 @@
     public class MoneyHistoryReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneyhistoryreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public int Balance;
@@ -60639,6 +50816,7 @@
             public int EndPeriod;
             public int BonusEstimate;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60704,20 +50882,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;Balance: &quot; + Balance.ToString() + &quot;\n&quot;;
-                output += &quot;TaxEstimate: &quot; + TaxEstimate.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;StartPeriod: &quot; + StartPeriod.ToString() + &quot;\n&quot;;
-                output += &quot;StipendEstimate: &quot; + StipendEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;EndPeriod: &quot; + EndPeriod.ToString() + &quot;\n&quot;;
-                output += &quot;BonusEstimate: &quot; + BonusEstimate.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;Balance: &quot; + Balance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TaxEstimate: &quot; + TaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;StartPeriod: &quot; + StartPeriod.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StipendEstimate: &quot; + StipendEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EndPeriod: &quot; + EndPeriod.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BonusEstimate: &quot; + BonusEstimate.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneyhistoryreply_historydata&quot;)]
         public class HistoryDataBlock
         {
             public int Amount;
@@ -60733,6 +50912,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60773,19 +50953,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryData --\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
+                string output = &quot;-- HistoryData --&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneyhistoryreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60815,8 +50997,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -60883,13 +51065,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyHistoryReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyHistoryReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; HistoryData.Length; j++)
             {
-                output += HistoryData[j].ToString() + &quot;\n&quot;;
+                output += HistoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -60899,12 +51081,14 @@
     public class MoneySummaryRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneysummaryrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60944,21 +51128,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneysummaryrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -60991,9 +51177,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -61045,9 +51231,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneySummaryRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneySummaryRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -61057,6 +51243,7 @@
     public class MoneySummaryReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneysummaryreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public int ParcelDirFeeCurrent;
@@ -61111,6 +51298,7 @@
             public int CurrentInterval;
             public int BonusEstimate;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61248,38 +51436,40 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;ParcelDirFeeCurrent: &quot; + ParcelDirFeeCurrent.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TaxDate, &quot;TaxDate&quot;) + &quot;\n&quot;;
-                output += &quot;Balance: &quot; + Balance.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelDirFeeEstimate: &quot; + ParcelDirFeeEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectTaxCurrent: &quot; + ObjectTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;LightTaxCurrent: &quot; + LightTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;LandTaxCurrent: &quot; + LandTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;GroupTaxCurrent: &quot; + GroupTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;TotalDebits: &quot; + TotalDebits.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectTaxEstimate: &quot; + ObjectTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;LightTaxEstimate: &quot; + LightTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;LandTaxEstimate: &quot; + LandTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;GroupTaxEstimate: &quot; + GroupTaxEstimate.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastTaxDate, &quot;LastTaxDate&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;TotalCredits: &quot; + TotalCredits.ToString() + &quot;\n&quot;;
-                output += &quot;StipendEstimate: &quot; + StipendEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
-                output += &quot;BonusEstimate: &quot; + BonusEstimate.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;ParcelDirFeeCurrent: &quot; + ParcelDirFeeCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TaxDate, &quot;TaxDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Balance: &quot; + Balance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelDirFeeEstimate: &quot; + ParcelDirFeeEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectTaxCurrent: &quot; + ObjectTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LightTaxCurrent: &quot; + LightTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandTaxCurrent: &quot; + LandTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupTaxCurrent: &quot; + GroupTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalDebits: &quot; + TotalDebits.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectTaxEstimate: &quot; + ObjectTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LightTaxEstimate: &quot; + LightTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandTaxEstimate: &quot; + LandTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupTaxEstimate: &quot; + GroupTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastTaxDate, &quot;LastTaxDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalCredits: &quot; + TotalCredits.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StipendEstimate: &quot; + StipendEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BonusEstimate: &quot; + BonusEstimate.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneysummaryreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61309,8 +51499,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -61363,9 +51553,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneySummaryReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneySummaryReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -61375,12 +51565,14 @@
     public class MoneyDetailsRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneydetailsrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61420,21 +51612,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneydetailsrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61467,9 +51661,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -61521,9 +51715,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyDetailsRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyDetailsRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -61533,6 +51727,7 @@
     public class MoneyDetailsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneydetailsreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
@@ -61550,6 +51745,7 @@
             }
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61598,17 +51794,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneydetailsreply_historydata&quot;)]
         public class HistoryDataBlock
         {
             public int Amount;
@@ -61624,6 +51821,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61664,19 +51862,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryData --\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
+                string output = &quot;-- HistoryData --&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneydetailsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61706,8 +51906,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -61774,13 +51974,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyDetailsReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyDetailsReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; HistoryData.Length; j++)
             {
-                output += HistoryData[j].ToString() + &quot;\n&quot;;
+                output += HistoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -61790,12 +51990,14 @@
     public class MoneyTransactionsRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransactionsrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61835,21 +52037,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransactionsrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -61882,9 +52086,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -61936,9 +52140,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyTransactionsRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyTransactionsRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -61948,6 +52152,7 @@
     public class MoneyTransactionsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransactionsreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
@@ -61965,6 +52170,7 @@
             }
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62013,17 +52219,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransactionsreply_historydata&quot;)]
         public class HistoryDataBlock
         {
             private byte[] _time;
@@ -62062,6 +52269,7 @@
             public int Type;
             public int Amount;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62121,22 +52329,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryData --\n&quot;;
-                output += Helpers.FieldToString(Time, &quot;Time&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Item, &quot;Item&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HistoryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Time, &quot;Time&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Item, &quot;Item&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;moneytransactionsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62166,8 +52376,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62234,13 +52444,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MoneyTransactionsReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MoneyTransactionsReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; HistoryData.Length; j++)
             {
-                output += HistoryData[j].ToString() + &quot;\n&quot;;
+                output += HistoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62250,11 +52460,13 @@
     public class GestureRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;gesturerequest_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID AgentID;
             public bool Reset;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62286,9 +52498,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Reset: &quot; + Reset.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Reset: &quot; + Reset.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62335,8 +52547,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GestureRequest ---\n&quot;;
-                output += AgentBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GestureRequest ---&quot; + Environment.NewLine;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62346,12 +52558,14 @@
     public class ActivateGesturesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;activategestures_data&quot;)]
         public class DataBlock
         {
             public LLUUID AssetID;
             public uint GestureFlags;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62389,22 +52603,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GestureFlags: &quot; + GestureFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GestureFlags: &quot; + GestureFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;activategestures_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62442,10 +52658,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62506,12 +52722,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ActivateGestures ---\n&quot;;
+            string output = &quot;--- ActivateGestures ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62521,11 +52737,13 @@
     public class DeactivateGesturesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;deactivategestures_data&quot;)]
         public class DataBlock
         {
             public uint GestureFlags;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62560,21 +52778,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;GestureFlags: &quot; + GestureFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;GestureFlags: &quot; + GestureFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;deactivategestures_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62612,10 +52832,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62676,12 +52896,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DeactivateGestures ---\n&quot;;
+            string output = &quot;--- DeactivateGestures ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62691,6 +52911,7 @@
     public class MuteListUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mutelistupdate_mutedata&quot;)]
         public class MuteDataBlock
         {
             public LLUUID AgentID;
@@ -62706,6 +52927,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62744,9 +52966,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MuteData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MuteData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62793,8 +53015,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MuteListUpdate ---\n&quot;;
-                output += MuteData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MuteListUpdate ---&quot; + Environment.NewLine;
+                output += MuteData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62804,10 +53026,12 @@
     public class UseCachedMuteListPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;usecachedmutelist_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62837,8 +53061,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -62885,8 +53109,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UseCachedMuteList ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UseCachedMuteList ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -62896,11 +53120,13 @@
     public class GrantUserRightsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grantuserrights_rights&quot;)]
         public class RightsBlock
         {
             public int RelatedRights;
             public LLUUID AgentRelated;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62935,20 +53161,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Rights --\n&quot;;
-                output += &quot;RelatedRights: &quot; + RelatedRights.ToString() + &quot;\n&quot;;
-                output += &quot;AgentRelated: &quot; + AgentRelated.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Rights --&quot; + Environment.NewLine;
+                output += &quot;RelatedRights: &quot; + RelatedRights.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentRelated: &quot; + AgentRelated.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grantuserrights_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -62981,9 +53209,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -63044,12 +53272,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GrantUserRights ---\n&quot;;
+            string output = &quot;--- GrantUserRights ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Rights.Length; j++)
             {
-                output += Rights[j].ToString() + &quot;\n&quot;;
+                output += Rights[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -63059,11 +53287,13 @@
     public class ChangeUserRightsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;changeuserrights_rights&quot;)]
         public class RightsBlock
         {
             public int RelatedRights;
             public LLUUID AgentRelated;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63098,19 +53328,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Rights --\n&quot;;
-                output += &quot;RelatedRights: &quot; + RelatedRights.ToString() + &quot;\n&quot;;
-                output += &quot;AgentRelated: &quot; + AgentRelated.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Rights --&quot; + Environment.NewLine;
+                output += &quot;RelatedRights: &quot; + RelatedRights.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentRelated: &quot; + AgentRelated.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;changeuserrights_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63140,8 +53372,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -63202,12 +53434,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChangeUserRights ---\n&quot;;
+            string output = &quot;--- ChangeUserRights ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Rights.Length; j++)
             {
-                output += Rights[j].ToString() + &quot;\n&quot;;
+                output += Rights[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -63217,10 +53449,12 @@
     public class OnlineNotificationPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;onlinenotification_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63250,8 +53484,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -63307,10 +53541,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- OnlineNotification ---\n&quot;;
+            string output = &quot;--- OnlineNotification ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AgentBlock.Length; j++)
             {
-                output += AgentBlock[j].ToString() + &quot;\n&quot;;
+                output += AgentBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -63321,10 +53555,12 @@
     public class OfflineNotificationPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;offlinenotification_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63354,8 +53590,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -63411,10 +53647,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- OfflineNotification ---\n&quot;;
+            string output = &quot;--- OfflineNotification ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AgentBlock.Length; j++)
             {
-                output += AgentBlock[j].ToString() + &quot;\n&quot;;
+                output += AgentBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -63425,6 +53661,7 @@
     public class SetStartLocationRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setstartlocationrequest_startlocationdata&quot;)]
         public class StartLocationDataBlock
         {
             public LLVector3 LocationPos;
@@ -63442,6 +53679,7 @@
             public uint LocationID;
             public LLVector3 LocationLookAt;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63473,7 +53711,6 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(LocationPos == null) { Console.WriteLine(&quot;Warning: LocationPos is null, in &quot; + this.GetType()); }
                 Array.Copy(LocationPos.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(SimName == null) { Console.WriteLine(&quot;Warning: SimName is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)SimName.Length;
@@ -63482,28 +53719,29 @@
                 bytes[i++] = (byte)((LocationID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((LocationID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((LocationID &gt;&gt; 24) % 256);
-                if(LocationLookAt == null) { Console.WriteLine(&quot;Warning: LocationLookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LocationLookAt.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- StartLocationData --\n&quot;;
-                output += &quot;LocationPos: &quot; + LocationPos.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;\n&quot;;
-                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;\n&quot;;
-                output += &quot;LocationLookAt: &quot; + LocationLookAt.ToString() + &quot;\n&quot;;
+                string output = &quot;-- StartLocationData --&quot; + Environment.NewLine;
+                output += &quot;LocationPos: &quot; + LocationPos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimName, &quot;SimName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationLookAt: &quot; + LocationLookAt.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setstartlocationrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -63536,9 +53774,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -63591,1524 +53829,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetStartLocationRequest ---\n&quot;;
-                output += StartLocationData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetStartLocationRequest ---&quot; + Environment.NewLine;
+                output += StartLocationData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class SetStartLocationPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class StartLocationDataBlock
-        {
-            public LLVector3 LocationPos;
-            public LLUUID AgentID;
-            public LLUUID RegionID;
-            public ulong RegionHandle;
-            public uint LocationID;
-            public LLVector3 LocationLookAt;
-
-            public int Length
-            {
-                get
-                {
-                    return 68;
-                }
-            }
-
-            public StartLocationDataBlock() { }
-            public StartLocationDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    LocationPos = new LLVector3(bytes, i); i += 12;
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    LocationID = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    LocationLookAt = new LLVector3(bytes, i); i += 12;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(LocationPos == null) { Console.WriteLine(&quot;Warning: LocationPos is null, in &quot; + this.GetType()); }
-                Array.Copy(LocationPos.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                bytes[i++] = (byte)(LocationID % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((LocationID &gt;&gt; 24) % 256);
-                if(LocationLookAt == null) { Console.WriteLine(&quot;Warning: LocationLookAt is null, in &quot; + this.GetType()); }
-                Array.Copy(LocationLookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- StartLocationData --\n&quot;;
-                output += &quot;LocationPos: &quot; + LocationPos.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;LocationID: &quot; + LocationID.ToString() + &quot;\n&quot;;
-                output += &quot;LocationLookAt: &quot; + LocationLookAt.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SetStartLocation; } }
-        public StartLocationDataBlock StartLocationData;
-
-        public SetStartLocationPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 377;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            StartLocationData = new StartLocationDataBlock();
-        }
-
-        public SetStartLocationPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            StartLocationData = new StartLocationDataBlock(bytes, ref i);
-        }
-
-        public SetStartLocationPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            StartLocationData = new StartLocationDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += StartLocationData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            StartLocationData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SetStartLocation ---\n&quot;;
-                output += StartLocationData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class NetTestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class NetBlockBlock
-        {
-            public ushort Port;
-
-            public int Length
-            {
-                get
-                {
-                    return 2;
-                }
-            }
-
-            public NetBlockBlock() { }
-            public NetBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NetBlock --\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.NetTest; } }
-        public NetBlockBlock NetBlock;
-
-        public NetTestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 378;
-            Header.Reliable = true;
-            NetBlock = new NetBlockBlock();
-        }
-
-        public NetTestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            NetBlock = new NetBlockBlock(bytes, ref i);
-        }
-
-        public NetTestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            NetBlock = new NetBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += NetBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            NetBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- NetTest ---\n&quot;;
-                output += NetBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SetCPURatioPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public byte Ratio;
-
-            public int Length
-            {
-                get
-                {
-                    return 1;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Ratio = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = Ratio;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Ratio: &quot; + Ratio.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SetCPURatio; } }
-        public DataBlock Data;
-
-        public SetCPURatioPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 379;
-            Header.Reliable = true;
-            Data = new DataBlock();
-        }
-
-        public SetCPURatioPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public SetCPURatioPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SetCPURatio ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class SimCrashedPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlock
-        {
-            public uint RegionX;
-            public uint RegionY;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public DataBlock() { }
-            public DataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    RegionX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RegionY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RegionX % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(RegionY % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;RegionX: &quot; + RegionX.ToString() + &quot;\n&quot;;
-                output += &quot;RegionY: &quot; + RegionY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class UsersBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public UsersBlock() { }
-            public UsersBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Users --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimCrashed; } }
-        public DataBlock Data;
-        public UsersBlock[] Users;
-
-        public SimCrashedPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 380;
-            Header.Reliable = true;
-            Data = new DataBlock();
-            Users = new UsersBlock[0];
-        }
-
-        public SimCrashedPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            Data = new DataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            Users = new UsersBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Users[j] = new UsersBlock(bytes, ref i); }
-        }
-
-        public SimCrashedPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            Data = new DataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            Users = new UsersBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { Users[j] = new UsersBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += Data.Length;;
-            length++;
-            for (int j = 0; j &lt; Users.Length; j++) { length += Users[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            Data.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)Users.Length;
-            for (int j = 0; j &lt; Users.Length; j++) { Users[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimCrashed ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; Users.Length; j++)
-            {
-                output += Users[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class NameValuePairPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class NameValueDataBlock
-        {
-            private byte[] _nvpair;
-            public byte[] NVPair
-            {
-                get { return _nvpair; }
-                set
-                {
-                    if (value == null) { _nvpair = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _nvpair = new byte[value.Length]; Array.Copy(value, _nvpair, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 0;
-                    if (NVPair != null) { length += 2 + NVPair.Length; }
-                    return length;
-                }
-            }
-
-            public NameValueDataBlock() { }
-            public NameValueDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _nvpair = new byte[length];
-                    Array.Copy(bytes, i, _nvpair, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NVPair == null) { Console.WriteLine(&quot;Warning: NVPair is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(NVPair.Length % 256);
-                bytes[i++] = (byte)((NVPair.Length &gt;&gt; 8) % 256);
-                Array.Copy(NVPair, 0, bytes, i, NVPair.Length); i += NVPair.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NameValueData --\n&quot;;
-                output += Helpers.FieldToString(NVPair, &quot;NVPair&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class TaskDataBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public TaskDataBlock() { }
-            public TaskDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TaskData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.NameValuePair; } }
-        public NameValueDataBlock[] NameValueData;
-        public TaskDataBlock TaskData;
-
-        public NameValuePairPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 381;
-            Header.Reliable = true;
-            NameValueData = new NameValueDataBlock[0];
-            TaskData = new TaskDataBlock();
-        }
-
-        public NameValuePairPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            NameValueData = new NameValueDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueData[j] = new NameValueDataBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public NameValuePairPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            NameValueData = new NameValueDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueData[j] = new NameValueDataBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TaskData.Length;;
-            length++;
-            for (int j = 0; j &lt; NameValueData.Length; j++) { length += NameValueData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)NameValueData.Length;
-            for (int j = 0; j &lt; NameValueData.Length; j++) { NameValueData[j].ToBytes(bytes, ref i); }
-            TaskData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- NameValuePair ---\n&quot;;
-            for (int j = 0; j &lt; NameValueData.Length; j++)
-            {
-                output += NameValueData[j].ToString() + &quot;\n&quot;;
-            }
-                output += TaskData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RemoveNameValuePairPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class NameValueDataBlock
-        {
-            private byte[] _nvpair;
-            public byte[] NVPair
-            {
-                get { return _nvpair; }
-                set
-                {
-                    if (value == null) { _nvpair = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _nvpair = new byte[value.Length]; Array.Copy(value, _nvpair, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 0;
-                    if (NVPair != null) { length += 2 + NVPair.Length; }
-                    return length;
-                }
-            }
-
-            public NameValueDataBlock() { }
-            public NameValueDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _nvpair = new byte[length];
-                    Array.Copy(bytes, i, _nvpair, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NVPair == null) { Console.WriteLine(&quot;Warning: NVPair is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(NVPair.Length % 256);
-                bytes[i++] = (byte)((NVPair.Length &gt;&gt; 8) % 256);
-                Array.Copy(NVPair, 0, bytes, i, NVPair.Length); i += NVPair.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NameValueData --\n&quot;;
-                output += Helpers.FieldToString(NVPair, &quot;NVPair&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class TaskDataBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public TaskDataBlock() { }
-            public TaskDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TaskData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RemoveNameValuePair; } }
-        public NameValueDataBlock[] NameValueData;
-        public TaskDataBlock TaskData;
-
-        public RemoveNameValuePairPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 382;
-            Header.Reliable = true;
-            NameValueData = new NameValueDataBlock[0];
-            TaskData = new TaskDataBlock();
-        }
-
-        public RemoveNameValuePairPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            NameValueData = new NameValueDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueData[j] = new NameValueDataBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public RemoveNameValuePairPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            NameValueData = new NameValueDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueData[j] = new NameValueDataBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TaskData.Length;;
-            length++;
-            for (int j = 0; j &lt; NameValueData.Length; j++) { length += NameValueData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)NameValueData.Length;
-            for (int j = 0; j &lt; NameValueData.Length; j++) { NameValueData[j].ToBytes(bytes, ref i); }
-            TaskData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RemoveNameValuePair ---\n&quot;;
-            for (int j = 0; j &lt; NameValueData.Length; j++)
-            {
-                output += NameValueData[j].ToString() + &quot;\n&quot;;
-            }
-                output += TaskData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class GetNameValuePairPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class NameValueNameBlock
-        {
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 0;
-                    if (Name != null) { length += 2 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public NameValueNameBlock() { }
-            public NameValueNameBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Name.Length % 256);
-                bytes[i++] = (byte)((Name.Length &gt;&gt; 8) % 256);
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NameValueName --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class TaskDataBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public TaskDataBlock() { }
-            public TaskDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TaskData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.GetNameValuePair; } }
-        public NameValueNameBlock[] NameValueName;
-        public TaskDataBlock TaskData;
-
-        public GetNameValuePairPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 383;
-            Header.Reliable = true;
-            NameValueName = new NameValueNameBlock[0];
-            TaskData = new TaskDataBlock();
-        }
-
-        public GetNameValuePairPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            NameValueName = new NameValueNameBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueName[j] = new NameValueNameBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public GetNameValuePairPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            NameValueName = new NameValueNameBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NameValueName[j] = new NameValueNameBlock(bytes, ref i); }
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TaskData.Length;;
-            length++;
-            for (int j = 0; j &lt; NameValueName.Length; j++) { length += NameValueName[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)NameValueName.Length;
-            for (int j = 0; j &lt; NameValueName.Length; j++) { NameValueName[j].ToBytes(bytes, ref i); }
-            TaskData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- GetNameValuePair ---\n&quot;;
-            for (int j = 0; j &lt; NameValueName.Length; j++)
-            {
-                output += NameValueName[j].ToString() + &quot;\n&quot;;
-            }
-                output += TaskData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class UpdateAttachmentPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InventoryDataBlock
-        {
-            public bool GroupOwned;
-            public uint CRC;
-            public int CreationDate;
-            public byte SaleType;
-            public uint BaseMask;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public sbyte InvType;
-            public sbyte Type;
-            public LLUUID AssetID;
-            public LLUUID GroupID;
-            public int SalePrice;
-            public LLUUID OwnerID;
-            public LLUUID CreatorID;
-            public LLUUID ItemID;
-            public LLUUID FolderID;
-            public uint EveryoneMask;
-            private byte[] _description;
-            public byte[] Description
-            {
-                get { return _description; }
-                set
-                {
-                    if (value == null) { _description = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _description = new byte[value.Length]; Array.Copy(value, _description, value.Length); }
-                }
-            }
-            public uint Flags;
-            public uint NextOwnerMask;
-            public uint GroupMask;
-            public uint OwnerMask;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 136;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    if (Description != null) { length += 1 + Description.Length; }
-                    return length;
-                }
-            }
-
-            public InventoryDataBlock() { }
-            public InventoryDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    GroupOwned = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    CRC = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    CreationDate = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    SaleType = (byte)bytes[i++];
-                    BaseMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    InvType = (sbyte)bytes[i++];
-                    Type = (sbyte)bytes[i++];
-                    AssetID = new LLUUID(bytes, i); i += 16;
-                    GroupID = new LLUUID(bytes, i); i += 16;
-                    SalePrice = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    CreatorID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    FolderID = new LLUUID(bytes, i); i += 16;
-                    EveryoneMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _description = new byte[length];
-                    Array.Copy(bytes, i, _description, 0, length); i += length;
-                    Flags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    NextOwnerMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GroupMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    OwnerMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((GroupOwned) ? 1 : 0);
-                bytes[i++] = (byte)(CRC % 256);
-                bytes[i++] = (byte)((CRC &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((CRC &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((CRC &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(CreationDate % 256);
-                bytes[i++] = (byte)((CreationDate &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((CreationDate &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((CreationDate &gt;&gt; 24) % 256);
-                bytes[i++] = SaleType;
-                bytes[i++] = (byte)(BaseMask % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 24) % 256);
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = (byte)InvType;
-                bytes[i++] = (byte)Type;
-                if(AssetID == null) { Console.WriteLine(&quot;Warning: AssetID is null, in &quot; + this.GetType()); }
-                Array.Copy(AssetID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(GroupID == null) { Console.WriteLine(&quot;Warning: GroupID is null, in &quot; + this.GetType()); }
-                Array.Copy(GroupID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(SalePrice % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((SalePrice &gt;&gt; 24) % 256);
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(CreatorID == null) { Console.WriteLine(&quot;Warning: CreatorID is null, in &quot; + this.GetType()); }
-                Array.Copy(CreatorID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(FolderID == null) { Console.WriteLine(&quot;Warning: FolderID is null, in &quot; + this.GetType()); }
-                Array.Copy(FolderID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(EveryoneMask % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 24) % 256);
-                if(Description == null) { Console.WriteLine(&quot;Warning: Description is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Description.Length;
-                Array.Copy(Description, 0, bytes, i, Description.Length); i += Description.Length;
-                bytes[i++] = (byte)(Flags % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(NextOwnerMask % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GroupMask % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(OwnerMask % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- InventoryData --\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;CreationDate: &quot; + CreationDate.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InvType: &quot; + InvType.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class OperationDataBlock
-        {
-            public bool AddItem;
-            public bool UseExistingAsset;
-
-            public int Length
-            {
-                get
-                {
-                    return 2;
-                }
-            }
-
-            public OperationDataBlock() { }
-            public OperationDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AddItem = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    UseExistingAsset = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((AddItem) ? 1 : 0);
-                bytes[i++] = (byte)((UseExistingAsset) ? 1 : 0);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- OperationData --\n&quot;;
-                output += &quot;AddItem: &quot; + AddItem.ToString() + &quot;\n&quot;;
-                output += &quot;UseExistingAsset: &quot; + UseExistingAsset.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AttachmentBlockBlock
-        {
-            public byte AttachmentPoint;
-
-            public int Length
-            {
-                get
-                {
-                    return 1;
-                }
-            }
-
-            public AttachmentBlockBlock() { }
-            public AttachmentBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AttachmentPoint = (byte)bytes[i++];
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = AttachmentPoint;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AttachmentBlock --\n&quot;;
-                output += &quot;AttachmentPoint: &quot; + AttachmentPoint.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.UpdateAttachment; } }
-        public InventoryDataBlock InventoryData;
-        public AgentDataBlock AgentData;
-        public OperationDataBlock OperationData;
-        public AttachmentBlockBlock AttachmentBlock;
-
-        public UpdateAttachmentPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 384;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            InventoryData = new InventoryDataBlock();
-            AgentData = new AgentDataBlock();
-            OperationData = new OperationDataBlock();
-            AttachmentBlock = new AttachmentBlockBlock();
-        }
-
-        public UpdateAttachmentPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            InventoryData = new InventoryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-            OperationData = new OperationDataBlock(bytes, ref i);
-            AttachmentBlock = new AttachmentBlockBlock(bytes, ref i);
-        }
-
-        public UpdateAttachmentPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            InventoryData = new InventoryDataBlock(bytes, ref i);
-            AgentData = new AgentDataBlock(bytes, ref i);
-            OperationData = new OperationDataBlock(bytes, ref i);
-            AttachmentBlock = new AttachmentBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += InventoryData.Length;            length += AgentData.Length;            length += OperationData.Length;            length += AttachmentBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            InventoryData.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            OperationData.ToBytes(bytes, ref i);
-            AttachmentBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- UpdateAttachment ---\n&quot;;
-                output += InventoryData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += OperationData.ToString() + &quot;\n&quot;;
-                output += AttachmentBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RemoveAttachmentPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class AgentDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID SessionID;
-
-            public int Length
-            {
-                get
-                {
-                    return 32;
-                }
-            }
-
-            public AgentDataBlock() { }
-            public AgentDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    SessionID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
-                Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class AttachmentBlockBlock
-        {
-            public byte AttachmentPoint;
-            public LLUUID ItemID;
-
-            public int Length
-            {
-                get
-                {
-                    return 17;
-                }
-            }
-
-            public AttachmentBlockBlock() { }
-            public AttachmentBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AttachmentPoint = (byte)bytes[i++];
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = AttachmentPoint;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- AttachmentBlock --\n&quot;;
-                output += &quot;AttachmentPoint: &quot; + AttachmentPoint.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RemoveAttachment; } }
-        public AgentDataBlock AgentData;
-        public AttachmentBlockBlock AttachmentBlock;
-
-        public RemoveAttachmentPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 385;
-            Header.Reliable = true;
-            AgentData = new AgentDataBlock();
-            AttachmentBlock = new AttachmentBlockBlock();
-        }
-
-        public RemoveAttachmentPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            AgentData = new AgentDataBlock(bytes, ref i);
-            AttachmentBlock = new AttachmentBlockBlock(bytes, ref i);
-        }
-
-        public RemoveAttachmentPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            AgentData = new AgentDataBlock(bytes, ref i);
-            AttachmentBlock = new AttachmentBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += AgentData.Length;            length += AttachmentBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            AgentData.ToBytes(bytes, ref i);
-            AttachmentBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RemoveAttachment ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += AttachmentBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class AssetUploadRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;assetuploadrequest_assetblock&quot;)]
         public class AssetBlockBlock
         {
             public sbyte Type;
@@ -65127,6 +53860,7 @@
             public LLUUID TransactionID;
             public bool StoreLocal;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -65172,12 +53906,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AssetBlock --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Tempfile: &quot; + Tempfile.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(AssetData, &quot;AssetData&quot;) + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
-                output += &quot;StoreLocal: &quot; + StoreLocal.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AssetBlock --&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Tempfile: &quot; + Tempfile.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(AssetData, &quot;AssetData&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StoreLocal: &quot; + StoreLocal.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -65224,8 +53958,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AssetUploadRequest ---\n&quot;;
-                output += AssetBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AssetUploadRequest ---&quot; + Environment.NewLine;
+                output += AssetBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -65235,12 +53969,14 @@
     public class AssetUploadCompletePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;assetuploadcomplete_assetblock&quot;)]
         public class AssetBlockBlock
         {
             public LLUUID UUID;
             public bool Success;
             public sbyte Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -65274,10 +54010,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AssetBlock --\n&quot;;
-                output += &quot;UUID: &quot; + UUID.ToString() + &quot;\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AssetBlock --&quot; + Environment.NewLine;
+                output += &quot;UUID: &quot; + UUID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Success: &quot; + Success.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -65324,8 +54060,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AssetUploadComplete ---\n&quot;;
-                output += AssetBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AssetUploadComplete ---&quot; + Environment.NewLine;
+                output += AssetBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -65335,6 +54071,7 @@
     public class ReputationAgentAssignPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;reputationagentassign_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID RateeID;
@@ -65343,6 +54080,7 @@
             public float Behavior;
             public float Building;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -65391,12 +54129,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;RateeID: &quot; + RateeID.ToString() + &quot;\n&quot;;
-                output += &quot;RatorID: &quot; + RatorID.ToString() + &quot;\n&quot;;
-                output += &quot;Appearance: &quot; + Appearance.ToString() + &quot;\n&quot;;
-                output += &quot;Behavior: &quot; + Behavior.ToString() + &quot;\n&quot;;
-                output += &quot;Building: &quot; + Building.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;RateeID: &quot; + RateeID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RatorID: &quot; + RatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Appearance: &quot; + Appearance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Behavior: &quot; + Behavior.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Building: &quot; + Building.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -65443,8 +54181,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ReputationAgentAssign ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ReputationAgentAssign ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -65454,11 +54192,13 @@
     public class ReputationIndividualRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;reputationindividualrequest_reputationdata&quot;)]
         public class ReputationDataBlock
         {
             public LLUUID ToID;
             public LLUUID FromID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -65491,9 +54231,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReputationData --\n&quot;;
-                output += &quot;ToID: &quot; + ToID.ToString() + &quot;\n&quot;;
-                output += &quot;FromID: &quot; + FromID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReputationData --&quot; + Environment.NewLine;
+                output += &quot;ToID: &quot; + ToID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromID: &quot; + FromID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -65540,8 +54280,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ReputationIndividualRequest ---\n&quot;;
-                output += ReputationData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ReputationIndividualRequest ---&quot; + Environment.NewLine;
+                output += ReputationData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -65551,6 +54291,7 @@
     public class ReputationIndividualReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;reputationindividualreply_reputationdata&quot;)]
         public class ReputationDataBlock
         {
             public float Appearance;
@@ -65559,6 +54300,7 @@
             public LLUUID FromID;
             public float Building;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -65607,12 +54349,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReputationData --\n&quot;;
-                output += &quot;Appearance: &quot; + Appearance.ToString() + &quot;\n&quot;;
-                output += &quot;ToID: &quot; + ToID.ToString() + &quot;\n&quot;;
-                output += &quot;Behavior: &quot; + Behavior.ToString() + &quot;\n&quot;;
-                output += &quot;FromID: &quot; + FromID.ToString() + &quot;\n&quot;;
-                output += &quot;Building: &quot; + Building.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReputationData --&quot; + Environment.NewLine;
+                output += &quot;Appearance: &quot; + Appearance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ToID: &quot; + ToID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Behavior: &quot; + Behavior.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromID: &quot; + FromID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Building: &quot; + Building.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -65659,607 +54401,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ReputationIndividualReply ---\n&quot;;
-                output += ReputationData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ReputationIndividualReply ---&quot; + Environment.NewLine;
+                output += ReputationData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class EmailMessageRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID ObjectID;
-            private byte[] _subject;
-            public byte[] Subject
-            {
-                get { return _subject; }
-                set
-                {
-                    if (value == null) { _subject = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _subject = new byte[value.Length]; Array.Copy(value, _subject, value.Length); }
-                }
-            }
-            private byte[] _fromaddress;
-            public byte[] FromAddress
-            {
-                get { return _fromaddress; }
-                set
-                {
-                    if (value == null) { _fromaddress = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _fromaddress = new byte[value.Length]; Array.Copy(value, _fromaddress, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 16;
-                    if (Subject != null) { length += 1 + Subject.Length; }
-                    if (FromAddress != null) { length += 1 + FromAddress.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ObjectID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _subject = new byte[length];
-                    Array.Copy(bytes, i, _subject, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _fromaddress = new byte[length];
-                    Array.Copy(bytes, i, _fromaddress, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
-                Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Subject == null) { Console.WriteLine(&quot;Warning: Subject is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Subject.Length;
-                Array.Copy(Subject, 0, bytes, i, Subject.Length); i += Subject.Length;
-                if(FromAddress == null) { Console.WriteLine(&quot;Warning: FromAddress is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)FromAddress.Length;
-                Array.Copy(FromAddress, 0, bytes, i, FromAddress.Length); i += FromAddress.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromAddress, &quot;FromAddress&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EmailMessageRequest; } }
-        public DataBlockBlock DataBlock;
-
-        public EmailMessageRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 391;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public EmailMessageRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public EmailMessageRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EmailMessageRequest ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class EmailMessageReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID ObjectID;
-            private byte[] _data;
-            public byte[] Data
-            {
-                get { return _data; }
-                set
-                {
-                    if (value == null) { _data = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _data = new byte[value.Length]; Array.Copy(value, _data, value.Length); }
-                }
-            }
-            private byte[] _subject;
-            public byte[] Subject
-            {
-                get { return _subject; }
-                set
-                {
-                    if (value == null) { _subject = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _subject = new byte[value.Length]; Array.Copy(value, _subject, value.Length); }
-                }
-            }
-            public uint Time;
-            private byte[] _fromaddress;
-            public byte[] FromAddress
-            {
-                get { return _fromaddress; }
-                set
-                {
-                    if (value == null) { _fromaddress = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _fromaddress = new byte[value.Length]; Array.Copy(value, _fromaddress, value.Length); }
-                }
-            }
-            public uint More;
-            private byte[] _mailfilter;
-            public byte[] MailFilter
-            {
-                get { return _mailfilter; }
-                set
-                {
-                    if (value == null) { _mailfilter = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _mailfilter = new byte[value.Length]; Array.Copy(value, _mailfilter, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 24;
-                    if (Data != null) { length += 2 + Data.Length; }
-                    if (Subject != null) { length += 1 + Subject.Length; }
-                    if (FromAddress != null) { length += 1 + FromAddress.Length; }
-                    if (MailFilter != null) { length += 1 + MailFilter.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ObjectID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _data = new byte[length];
-                    Array.Copy(bytes, i, _data, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _subject = new byte[length];
-                    Array.Copy(bytes, i, _subject, 0, length); i += length;
-                    Time = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _fromaddress = new byte[length];
-                    Array.Copy(bytes, i, _fromaddress, 0, length); i += length;
-                    More = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)bytes[i++];
-                    _mailfilter = new byte[length];
-                    Array.Copy(bytes, i, _mailfilter, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ObjectID == null) { Console.WriteLine(&quot;Warning: ObjectID is null, in &quot; + this.GetType()); }
-                Array.Copy(ObjectID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Data == null) { Console.WriteLine(&quot;Warning: Data is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Data.Length % 256);
-                bytes[i++] = (byte)((Data.Length &gt;&gt; 8) % 256);
-                Array.Copy(Data, 0, bytes, i, Data.Length); i += Data.Length;
-                if(Subject == null) { Console.WriteLine(&quot;Warning: Subject is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Subject.Length;
-                Array.Copy(Subject, 0, bytes, i, Subject.Length); i += Subject.Length;
-                bytes[i++] = (byte)(Time % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 24) % 256);
-                if(FromAddress == null) { Console.WriteLine(&quot;Warning: FromAddress is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)FromAddress.Length;
-                Array.Copy(FromAddress, 0, bytes, i, FromAddress.Length); i += FromAddress.Length;
-                bytes[i++] = (byte)(More % 256);
-                bytes[i++] = (byte)((More &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((More &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((More &gt;&gt; 24) % 256);
-                if(MailFilter == null) { Console.WriteLine(&quot;Warning: MailFilter is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)MailFilter.Length;
-                Array.Copy(MailFilter, 0, bytes, i, MailFilter.Length); i += MailFilter.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(FromAddress, &quot;FromAddress&quot;) + &quot;\n&quot;;
-                output += &quot;More: &quot; + More.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MailFilter, &quot;MailFilter&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EmailMessageReply; } }
-        public DataBlockBlock DataBlock;
-
-        public EmailMessageReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 392;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public EmailMessageReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public EmailMessageReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EmailMessageReply ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ScriptDataRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public sbyte RequestType;
-            private byte[] _request;
-            public byte[] Request
-            {
-                get { return _request; }
-                set
-                {
-                    if (value == null) { _request = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _request = new byte[value.Length]; Array.Copy(value, _request, value.Length); }
-                }
-            }
-            public ulong Hash;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 9;
-                    if (Request != null) { length += 2 + Request.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    RequestType = (sbyte)bytes[i++];
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _request = new byte[length];
-                    Array.Copy(bytes, i, _request, 0, length); i += length;
-                    Hash = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)RequestType;
-                if(Request == null) { Console.WriteLine(&quot;Warning: Request is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Request.Length % 256);
-                bytes[i++] = (byte)((Request.Length &gt;&gt; 8) % 256);
-                Array.Copy(Request, 0, bytes, i, Request.Length); i += Request.Length;
-                bytes[i++] = (byte)(Hash % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;RequestType: &quot; + RequestType.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Request, &quot;Request&quot;) + &quot;\n&quot;;
-                output += &quot;Hash: &quot; + Hash.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ScriptDataRequest; } }
-        public DataBlockBlock[] DataBlock;
-
-        public ScriptDataRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 393;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock[0];
-        }
-
-        public ScriptDataRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public ScriptDataRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { length += DataBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)DataBlock.Length;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { DataBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ScriptDataRequest ---\n&quot;;
-            for (int j = 0; j &lt; DataBlock.Length; j++)
-            {
-                output += DataBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ScriptDataReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public ulong Hash;
-            private byte[] _reply;
-            public byte[] Reply
-            {
-                get { return _reply; }
-                set
-                {
-                    if (value == null) { _reply = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _reply = new byte[value.Length]; Array.Copy(value, _reply, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 8;
-                    if (Reply != null) { length += 2 + Reply.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    Hash = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _reply = new byte[length];
-                    Array.Copy(bytes, i, _reply, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(Hash % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((Hash &gt;&gt; 56) % 256);
-                if(Reply == null) { Console.WriteLine(&quot;Warning: Reply is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Reply.Length % 256);
-                bytes[i++] = (byte)((Reply.Length &gt;&gt; 8) % 256);
-                Array.Copy(Reply, 0, bytes, i, Reply.Length); i += Reply.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;Hash: &quot; + Hash.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Reply, &quot;Reply&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ScriptDataReply; } }
-        public DataBlockBlock[] DataBlock;
-
-        public ScriptDataReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 394;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock[0];
-        }
-
-        public ScriptDataReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public ScriptDataReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { length += DataBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)DataBlock.Length;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { DataBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ScriptDataReply ---\n&quot;;
-            for (int j = 0; j &lt; DataBlock.Length; j++)
-            {
-                output += DataBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class CreateGroupRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;creategrouprequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66292,15 +54451,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;creategrouprequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public bool AllowPublish;
@@ -66332,6 +54492,7 @@
             public bool MaturePublish;
             public bool OpenEnrollment;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66391,15 +54552,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;\n&quot;;
-                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;\n&quot;;
-                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
-                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -66452,9 +54613,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateGroupRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateGroupRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -66464,6 +54625,7 @@
     public class CreateGroupReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;creategroupreply_replydata&quot;)]
         public class ReplyDataBlock
         {
             private byte[] _message;
@@ -66480,6 +54642,7 @@
             public bool Success;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66520,20 +54683,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReplyData --\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ReplyData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Success: &quot; + Success.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;creategroupreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66563,8 +54728,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -66616,9 +54781,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateGroupReply ---\n&quot;;
-                output += ReplyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateGroupReply ---&quot; + Environment.NewLine;
+                output += ReplyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -66628,11 +54793,13 @@
     public class UpdateGroupInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updategroupinfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66665,15 +54832,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updategroupinfo_groupdata&quot;)]
         public class GroupDataBlock
         {
             public bool AllowPublish;
@@ -66695,6 +54863,7 @@
             public bool MaturePublish;
             public bool OpenEnrollment;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66750,15 +54919,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;\n&quot;;
-                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;\n&quot;;
-                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
-                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -66811,9 +54980,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateGroupInfo ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UpdateGroupInfo ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -66823,12 +54992,14 @@
     public class GroupRoleChangesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolechanges_rolechange&quot;)]
         public class RoleChangeBlock
         {
             public LLUUID MemberID;
             public uint Change;
             public LLUUID RoleID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66866,22 +55037,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RoleChange --\n&quot;;
-                output += &quot;MemberID: &quot; + MemberID.ToString() + &quot;\n&quot;;
-                output += &quot;Change: &quot; + Change.ToString() + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RoleChange --&quot; + Environment.NewLine;
+                output += &quot;MemberID: &quot; + MemberID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Change: &quot; + Change.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolechanges_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -66917,10 +55090,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -66981,12 +55154,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleChanges ---\n&quot;;
+            string output = &quot;--- GroupRoleChanges ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; RoleChange.Length; j++)
             {
-                output += RoleChange[j].ToString() + &quot;\n&quot;;
+                output += RoleChange[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -66996,11 +55169,13 @@
     public class JoinGroupRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;joingrouprequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67033,19 +55208,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;joingrouprequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67075,8 +55252,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67129,9 +55306,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- JoinGroupRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- JoinGroupRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67141,10 +55318,12 @@
     public class JoinGroupReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;joingroupreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67174,19 +55353,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;joingroupreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public bool Success;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67218,9 +55399,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;Success: &quot; + Success.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67272,9 +55453,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- JoinGroupReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- JoinGroupReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67284,11 +55465,13 @@
     public class EjectGroupMemberRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67321,19 +55504,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberrequest_ejectdata&quot;)]
         public class EjectDataBlock
         {
             public LLUUID EjecteeID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67363,18 +55548,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EjectData --\n&quot;;
-                output += &quot;EjecteeID: &quot; + EjecteeID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EjectData --&quot; + Environment.NewLine;
+                output += &quot;EjecteeID: &quot; + EjecteeID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberrequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67404,8 +55591,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67471,13 +55658,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EjectGroupMemberRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EjectGroupMemberRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; EjectData.Length; j++)
             {
-                output += EjectData[j].ToString() + &quot;\n&quot;;
+                output += EjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += GroupData.ToString() + &quot;\n&quot;;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67487,10 +55674,12 @@
     public class EjectGroupMemberReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67520,18 +55709,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberreply_ejectdata&quot;)]
         public class EjectDataBlock
         {
             public bool Success;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67560,18 +55751,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- EjectData --\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
+                string output = &quot;-- EjectData --&quot; + Environment.NewLine;
+                output += &quot;Success: &quot; + Success.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;ejectgroupmemberreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67601,8 +55794,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67659,10 +55852,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- EjectGroupMemberReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += EjectData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- EjectGroupMemberReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += EjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67672,11 +55865,13 @@
     public class LeaveGroupRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leavegrouprequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67709,19 +55904,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leavegrouprequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67751,8 +55948,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67804,9 +56001,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LeaveGroupRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LeaveGroupRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67816,10 +56013,12 @@
     public class LeaveGroupReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leavegroupreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67849,19 +56048,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;leavegroupreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public bool Success;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67893,9 +56094,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;Success: &quot; + Success.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;Success: &quot; + Success.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -67947,9 +56148,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LeaveGroupReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LeaveGroupReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -67959,11 +56160,13 @@
     public class InviteGroupRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;invitegrouprequest_invitedata&quot;)]
         public class InviteDataBlock
         {
             public LLUUID RoleID;
             public LLUUID InviteeID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -67996,20 +56199,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- InviteData --\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
-                output += &quot;InviteeID: &quot; + InviteeID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- InviteData --&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;InviteeID: &quot; + InviteeID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;invitegrouprequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68042,19 +56247,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;invitegrouprequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68084,8 +56291,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -68151,141 +56358,29 @@
 
         public override string ToString()
         {
-            string output = &quot;--- InviteGroupRequest ---\n&quot;;
+            string output = &quot;--- InviteGroupRequest ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; InviteData.Length; j++)
             {
-                output += InviteData[j].ToString() + &quot;\n&quot;;
+                output += InviteData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class InviteGroupResponsePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class InviteDataBlock
-        {
-            public LLUUID AgentID;
-            public LLUUID GroupID;
-            public int MembershipFee;
-            public LLUUID RoleID;
-            public LLUUID InviteeID;
-
-            public int Length
-            {
-                get
-                {
-                    return 68;
-                }
-            }
-
-            public InviteDataBlock() { }
-            public InviteDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                    GroupID = new LLUUID(bytes, i); i += 16;
-                    MembershipFee = (int)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    RoleID = new LLUUID(bytes, i); i += 16;
-                    InviteeID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(GroupID == null) { Console.WriteLine(&quot;Warning: GroupID is null, in &quot; + this.GetType()); }
-                Array.Copy(GroupID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(MembershipFee % 256);
-                bytes[i++] = (byte)((MembershipFee &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((MembershipFee &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((MembershipFee &gt;&gt; 24) % 256);
-                if(RoleID == null) { Console.WriteLine(&quot;Warning: RoleID is null, in &quot; + this.GetType()); }
-                Array.Copy(RoleID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(InviteeID == null) { Console.WriteLine(&quot;Warning: InviteeID is null, in &quot; + this.GetType()); }
-                Array.Copy(InviteeID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- InviteData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
-                output += &quot;InviteeID: &quot; + InviteeID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.InviteGroupResponse; } }
-        public InviteDataBlock InviteData;
-
-        public InviteGroupResponsePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 406;
-            Header.Reliable = true;
-            InviteData = new InviteDataBlock();
-        }
-
-        public InviteGroupResponsePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            InviteData = new InviteDataBlock(bytes, ref i);
-        }
-
-        public InviteGroupResponsePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            InviteData = new InviteDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += InviteData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            InviteData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- InviteGroupResponse ---\n&quot;;
-                output += InviteData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class GroupProfileRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupprofilerequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68318,19 +56413,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupprofilerequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68360,8 +56457,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -68413,9 +56510,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupProfileRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupProfileRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -68425,10 +56522,12 @@
     public class GroupProfileReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupprofilereply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68458,14 +56557,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupprofilereply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID OwnerRole;
@@ -68515,6 +56615,7 @@
             public LLUUID FounderID;
             public bool OpenEnrollment;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68614,23 +56715,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;OwnerRole: &quot; + OwnerRole.ToString() + &quot;\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;\n&quot;;
-                output += &quot;GroupMembershipCount: &quot; + GroupMembershipCount.ToString() + &quot;\n&quot;;
-                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(MemberTitle, &quot;MemberTitle&quot;) + &quot;\n&quot;;
-                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupRolesCount: &quot; + GroupRolesCount.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
-                output += &quot;PowersMask: &quot; + PowersMask.ToString() + &quot;\n&quot;;
-                output += &quot;Money: &quot; + Money.ToString() + &quot;\n&quot;;
-                output += &quot;FounderID: &quot; + FounderID.ToString() + &quot;\n&quot;;
-                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;OwnerRole: &quot; + OwnerRole.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Charter, &quot;Charter&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMembershipCount: &quot; + GroupMembershipCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ShowInList: &quot; + ShowInList.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MemberTitle, &quot;MemberTitle&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;InsigniaID: &quot; + InsigniaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupRolesCount: &quot; + GroupRolesCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MembershipFee: &quot; + MembershipFee.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PowersMask: &quot; + PowersMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Money: &quot; + Money.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FounderID: &quot; + FounderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OpenEnrollment: &quot; + OpenEnrollment.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -68683,9 +56784,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupProfileReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupProfileReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -68695,12 +56796,14 @@
     public class GroupAccountSummaryRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountsummaryrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68740,22 +56843,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountsummaryrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -68791,10 +56896,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -68847,9 +56952,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountSummaryRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountSummaryRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -68859,6 +56964,7 @@
     public class GroupAccountSummaryReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountsummaryreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public int ParcelDirFeeCurrent;
@@ -68912,6 +57018,7 @@
             public int TotalCredits;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69044,38 +57151,40 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;ParcelDirFeeCurrent: &quot; + ParcelDirFeeCurrent.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TaxDate, &quot;TaxDate&quot;) + &quot;\n&quot;;
-                output += &quot;Balance: &quot; + Balance.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelDirFeeEstimate: &quot; + ParcelDirFeeEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectTaxCurrent: &quot; + ObjectTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;LightTaxCurrent: &quot; + LightTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;LandTaxCurrent: &quot; + LandTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;GroupTaxCurrent: &quot; + GroupTaxCurrent.ToString() + &quot;\n&quot;;
-                output += &quot;TotalDebits: &quot; + TotalDebits.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectTaxEstimate: &quot; + ObjectTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;LightTaxEstimate: &quot; + LightTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;LandTaxEstimate: &quot; + LandTaxEstimate.ToString() + &quot;\n&quot;;
-                output += &quot;GroupTaxEstimate: &quot; + GroupTaxEstimate.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastTaxDate, &quot;LastTaxDate&quot;) + &quot;\n&quot;;
-                output += &quot;NonExemptMembers: &quot; + NonExemptMembers.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;TotalCredits: &quot; + TotalCredits.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;ParcelDirFeeCurrent: &quot; + ParcelDirFeeCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TaxDate, &quot;TaxDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Balance: &quot; + Balance.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelDirFeeEstimate: &quot; + ParcelDirFeeEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectTaxCurrent: &quot; + ObjectTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LightTaxCurrent: &quot; + LightTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandTaxCurrent: &quot; + LandTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupTaxCurrent: &quot; + GroupTaxCurrent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalDebits: &quot; + TotalDebits.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectTaxEstimate: &quot; + ObjectTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LightTaxEstimate: &quot; + LightTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandTaxEstimate: &quot; + LandTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupTaxEstimate: &quot; + GroupTaxEstimate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastTaxDate, &quot;LastTaxDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;NonExemptMembers: &quot; + NonExemptMembers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalCredits: &quot; + TotalCredits.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountsummaryreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69108,9 +57217,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -69163,9 +57272,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountSummaryReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountSummaryReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -69175,12 +57284,14 @@
     public class GroupAccountDetailsRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountdetailsrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69220,22 +57331,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountdetailsrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69271,10 +57384,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -69327,9 +57440,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountDetailsRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountDetailsRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -69339,6 +57452,7 @@
     public class GroupAccountDetailsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountdetailsreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
@@ -69356,6 +57470,7 @@
             }
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69404,17 +57519,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountdetailsreply_historydata&quot;)]
         public class HistoryDataBlock
         {
             public int Amount;
@@ -69430,6 +57546,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69470,20 +57587,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryData --\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
+                string output = &quot;-- HistoryData --&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccountdetailsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69516,9 +57635,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -69585,13 +57704,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountDetailsReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountDetailsReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; HistoryData.Length; j++)
             {
-                output += HistoryData[j].ToString() + &quot;\n&quot;;
+                output += HistoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -69601,12 +57720,14 @@
     public class GroupAccountTransactionsRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccounttransactionsrequest_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
             public int IntervalDays;
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69646,22 +57767,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccounttransactionsrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69697,10 +57820,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -69753,9 +57876,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountTransactionsRequest ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountTransactionsRequest ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -69765,6 +57888,7 @@
     public class GroupAccountTransactionsReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccounttransactionsreply_moneydata&quot;)]
         public class MoneyDataBlock
         {
             public LLUUID RequestID;
@@ -69782,6 +57906,7 @@
             }
             public int CurrentInterval;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69830,17 +57955,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MoneyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;\n&quot;;
-                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MoneyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IntervalDays: &quot; + IntervalDays.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDate, &quot;StartDate&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;CurrentInterval: &quot; + CurrentInterval.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccounttransactionsreply_historydata&quot;)]
         public class HistoryDataBlock
         {
             private byte[] _time;
@@ -69879,6 +58005,7 @@
             public int Type;
             public int Amount;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69938,23 +58065,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryData --\n&quot;;
-                output += Helpers.FieldToString(Time, &quot;Time&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Item, &quot;Item&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Amount: &quot; + Amount.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HistoryData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Time, &quot;Time&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Item, &quot;Item&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(User, &quot;User&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Amount: &quot; + Amount.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupaccounttransactionsreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -69987,9 +58116,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -70056,13 +58185,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupAccountTransactionsReply ---\n&quot;;
-                output += MoneyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupAccountTransactionsReply ---&quot; + Environment.NewLine;
+                output += MoneyData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; HistoryData.Length; j++)
             {
-                output += HistoryData[j].ToString() + &quot;\n&quot;;
+                output += HistoryData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -70072,11 +58201,13 @@
     public class GroupActiveProposalsRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalsrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70109,19 +58240,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalsrequest_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70151,18 +58284,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalsrequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70192,8 +58327,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -70250,10 +58385,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupActiveProposalsRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupActiveProposalsRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -70263,6 +58398,7 @@
     public class GroupActiveProposalItemReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalitemreply_proposaldata&quot;)]
         public class ProposalDataBlock
         {
             private byte[] _startdatetime;
@@ -70326,6 +58462,7 @@
             public int Quorum;
             public LLUUID VoteInitiator;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70408,28 +58545,30 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ProposalData --\n&quot;;
-                output += Helpers.FieldToString(StartDateTime, &quot;StartDateTime&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;\n&quot;;
-                output += &quot;Majority: &quot; + Majority.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TerseDateID, &quot;TerseDateID&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(EndDateTime, &quot;EndDateTime&quot;) + &quot;\n&quot;;
-                output += &quot;VoteID: &quot; + VoteID.ToString() + &quot;\n&quot;;
-                output += &quot;AlreadyVoted: &quot; + AlreadyVoted.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;\n&quot;;
-                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;\n&quot;;
-                output += &quot;VoteInitiator: &quot; + VoteInitiator.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ProposalData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDateTime, &quot;StartDateTime&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Majority: &quot; + Majority.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TerseDateID, &quot;TerseDateID&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(EndDateTime, &quot;EndDateTime&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;VoteID: &quot; + VoteID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AlreadyVoted: &quot; + AlreadyVoted.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;VoteInitiator: &quot; + VoteInitiator.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalitemreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70462,20 +58601,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupactiveproposalitemreply_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public uint TotalNumItems;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70510,9 +58651,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TotalNumItems: &quot; + TotalNumItems.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TotalNumItems: &quot; + TotalNumItems.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -70579,13 +58720,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupActiveProposalItemReply ---\n&quot;;
+            string output = &quot;--- GroupActiveProposalItemReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ProposalData.Length; j++)
             {
-                output += ProposalData[j].ToString() + &quot;\n&quot;;
+                output += ProposalData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -70595,11 +58736,13 @@
     public class GroupVoteHistoryRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70632,19 +58775,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryrequest_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70674,18 +58819,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryrequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70715,8 +58862,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -70773,10 +58920,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupVoteHistoryRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupVoteHistoryRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -70786,6 +58933,7 @@
     public class GroupVoteHistoryItemReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryitemreply_historyitemdata&quot;)]
         public class HistoryItemDataBlock
         {
             private byte[] _startdatetime;
@@ -70859,6 +59007,7 @@
             }
             public LLUUID VoteInitiator;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -70947,23 +59096,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HistoryItemData --\n&quot;;
-                output += Helpers.FieldToString(StartDateTime, &quot;StartDateTime&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(VoteResult, &quot;VoteResult&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;\n&quot;;
-                output += &quot;Majority: &quot; + Majority.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TerseDateID, &quot;TerseDateID&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(EndDateTime, &quot;EndDateTime&quot;) + &quot;\n&quot;;
-                output += &quot;VoteID: &quot; + VoteID.ToString() + &quot;\n&quot;;
-                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(VoteType, &quot;VoteType&quot;) + &quot;\n&quot;;
-                output += &quot;VoteInitiator: &quot; + VoteInitiator.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HistoryItemData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(StartDateTime, &quot;StartDateTime&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VoteResult, &quot;VoteResult&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Majority: &quot; + Majority.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TerseDateID, &quot;TerseDateID&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(EndDateTime, &quot;EndDateTime&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;VoteID: &quot; + VoteID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VoteType, &quot;VoteType&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;VoteInitiator: &quot; + VoteInitiator.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryitemreply_voteitem&quot;)]
         public class VoteItemBlock
         {
             public LLUUID CandidateID;
@@ -70980,6 +59130,7 @@
             }
             public int NumVotes;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71023,21 +59174,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- VoteItem --\n&quot;;
-                output += &quot;CandidateID: &quot; + CandidateID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;\n&quot;;
-                output += &quot;NumVotes: &quot; + NumVotes.ToString() + &quot;\n&quot;;
+                string output = &quot;-- VoteItem --&quot; + Environment.NewLine;
+                output += &quot;CandidateID: &quot; + CandidateID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;NumVotes: &quot; + NumVotes.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryitemreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71070,20 +59223,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupvotehistoryitemreply_transactiondata&quot;)]
         public class TransactionDataBlock
         {
             public uint TotalNumItems;
             public LLUUID TransactionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71118,9 +59273,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransactionData --\n&quot;;
-                output += &quot;TotalNumItems: &quot; + TotalNumItems.ToString() + &quot;\n&quot;;
-                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransactionData --&quot; + Environment.NewLine;
+                output += &quot;TotalNumItems: &quot; + TotalNumItems.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TransactionID: &quot; + TransactionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -71192,14 +59347,14 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupVoteHistoryItemReply ---\n&quot;;
-                output += HistoryItemData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupVoteHistoryItemReply ---&quot; + Environment.NewLine;
+                output += HistoryItemData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; VoteItem.Length; j++)
             {
-                output += VoteItem[j].ToString() + &quot;\n&quot;;
+                output += VoteItem[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += TransactionData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TransactionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -71209,6 +59364,7 @@
     public class StartGroupProposalPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;startgroupproposal_proposaldata&quot;)]
         public class ProposalDataBlock
         {
             public int Duration;
@@ -71227,6 +59383,7 @@
             public LLUUID GroupID;
             public int Quorum;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71281,23 +59438,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ProposalData --\n&quot;;
-                output += &quot;Duration: &quot; + Duration.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;\n&quot;;
-                output += &quot;Majority: &quot; + Majority.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ProposalData --&quot; + Environment.NewLine;
+                output += &quot;Duration: &quot; + Duration.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ProposalText, &quot;ProposalText&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Majority: &quot; + Majority.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Quorum: &quot; + Quorum.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;startgroupproposal_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71330,9 +59489,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -71385,9 +59544,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- StartGroupProposal ---\n&quot;;
-                output += ProposalData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- StartGroupProposal ---&quot; + Environment.NewLine;
+                output += ProposalData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -71397,6 +59556,7 @@
     public class GroupProposalBallotPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupproposalballot_proposaldata&quot;)]
         public class ProposalDataBlock
         {
             public LLUUID ProposalID;
@@ -71413,6 +59573,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71454,21 +59615,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ProposalData --\n&quot;;
-                output += &quot;ProposalID: &quot; + ProposalID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ProposalData --&quot; + Environment.NewLine;
+                output += &quot;ProposalID: &quot; + ProposalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(VoteCast, &quot;VoteCast&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupproposalballot_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71501,9 +59664,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -71555,68 +59718,25 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupProposalBallot ---\n&quot;;
-                output += ProposalData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupProposalBallot ---&quot; + Environment.NewLine;
+                output += ProposalData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class TallyVotesPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.TallyVotes; } }
-
-        public TallyVotesPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 421;
-            Header.Reliable = true;
-        }
-
-        public TallyVotesPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public TallyVotesPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- TallyVotes ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class GroupMembersRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupmembersrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71649,20 +59769,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupmembersrequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71695,9 +59817,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -71749,9 +59871,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupMembersRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupMembersRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -71761,6 +59883,7 @@
     public class GroupMembersReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupmembersreply_memberdata&quot;)]
         public class MemberDataBlock
         {
             private byte[] _onlinestatus;
@@ -71790,6 +59913,7 @@
             }
             public ulong AgentPowers;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71851,23 +59975,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MemberData --\n&quot;;
-                output += Helpers.FieldToString(OnlineStatus, &quot;OnlineStatus&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;\n&quot;;
-                output += &quot;IsOwner: &quot; + IsOwner.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;\n&quot;;
-                output += &quot;AgentPowers: &quot; + AgentPowers.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MemberData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(OnlineStatus, &quot;OnlineStatus&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsOwner: &quot; + IsOwner.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentPowers: &quot; + AgentPowers.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupmembersreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71897,20 +60023,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupmembersreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID RequestID;
             public int MemberCount;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -71948,10 +60076,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;MemberCount: &quot; + MemberCount.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MemberCount: &quot; + MemberCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72018,13 +60146,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupMembersReply ---\n&quot;;
+            string output = &quot;--- GroupMembersReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; MemberData.Length; j++)
             {
-                output += MemberData[j].ToString() + &quot;\n&quot;;
+                output += MemberData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72034,12 +60162,14 @@
     public class ActivateGroupPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;activategroup_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72075,10 +60205,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72126,8 +60256,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ActivateGroup ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ActivateGroup ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72137,11 +60267,13 @@
     public class SetGroupContributionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setgroupcontribution_data&quot;)]
         public class DataBlock
         {
             public int Contribution;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72176,20 +60308,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setgroupcontribution_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72222,9 +60356,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72276,9 +60410,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetGroupContribution ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetGroupContribution ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72288,11 +60422,13 @@
     public class SetGroupAcceptNoticesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setgroupacceptnotices_data&quot;)]
         public class DataBlock
         {
             public LLUUID GroupID;
             public bool AcceptNotices;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72324,20 +60460,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setgroupacceptnotices_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72370,9 +60508,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72424,9 +60562,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetGroupAcceptNotices ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetGroupAcceptNotices ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72436,11 +60574,13 @@
     public class GroupRoleDataRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproledatarequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72473,20 +60613,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproledatarequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72519,9 +60661,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72573,9 +60715,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleDataRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupRoleDataRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72585,6 +60727,7 @@
     public class GroupRoleDataReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproledatareply_roledata&quot;)]
         public class RoleDataBlock
         {
             public uint Members;
@@ -72624,6 +60767,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72690,23 +60834,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RoleData --\n&quot;;
-                output += &quot;Members: &quot; + Members.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
-                output += &quot;Powers: &quot; + Powers.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;\n&quot;;
+                string output = &quot;-- RoleData --&quot; + Environment.NewLine;
+                output += &quot;Members: &quot; + Members.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Powers: &quot; + Powers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproledatareply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72736,20 +60882,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproledatareply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public int RoleCount;
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72787,10 +60935,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;RoleCount: &quot; + RoleCount.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;RoleCount: &quot; + RoleCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -72856,13 +61004,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleDataReply ---\n&quot;;
+            string output = &quot;--- GroupRoleDataReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; RoleData.Length; j++)
             {
-                output += RoleData[j].ToString() + &quot;\n&quot;;
+                output += RoleData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -72872,11 +61020,13 @@
     public class GroupRoleMembersRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolemembersrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72909,20 +61059,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolemembersrequest_groupdata&quot;)]
         public class GroupDataBlock
         {
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -72955,9 +61107,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73009,9 +61161,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleMembersRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += GroupData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupRoleMembersRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += GroupData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73021,11 +61173,13 @@
     public class GroupRoleMembersReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolemembersreply_memberdata&quot;)]
         public class MemberDataBlock
         {
             public LLUUID MemberID;
             public LLUUID RoleID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73058,15 +61212,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MemberData --\n&quot;;
-                output += &quot;MemberID: &quot; + MemberID.ToString() + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- MemberData --&quot; + Environment.NewLine;
+                output += &quot;MemberID: &quot; + MemberID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouprolemembersreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -73074,6 +61229,7 @@
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73114,11 +61270,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;TotalPairs: &quot; + TotalPairs.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalPairs: &quot; + TotalPairs.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73179,12 +61335,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleMembersReply ---\n&quot;;
+            string output = &quot;--- GroupRoleMembersReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; MemberData.Length; j++)
             {
-                output += MemberData[j].ToString() + &quot;\n&quot;;
+                output += MemberData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73194,6 +61350,7 @@
     public class GroupTitlesRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouptitlesrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -73201,6 +61358,7 @@
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73239,11 +61397,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73290,8 +61448,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupTitlesRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupTitlesRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73301,12 +61459,14 @@
     public class GroupTitlesReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouptitlesreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID RequestID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73342,16 +61502,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouptitlesreply_groupdata&quot;)]
         public class GroupDataBlock
         {
             public bool Selected;
@@ -73368,6 +61529,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73408,10 +61570,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;Selected: &quot; + Selected.ToString() + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;Selected: &quot; + Selected.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73473,11 +61635,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupTitlesReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupTitlesReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; GroupData.Length; j++)
             {
-                output += GroupData[j].ToString() + &quot;\n&quot;;
+                output += GroupData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -73488,6 +61650,7 @@
     public class GroupTitleUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouptitleupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -73495,6 +61658,7 @@
             public LLUUID GroupID;
             public LLUUID TitleRoleID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73533,11 +61697,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;TitleRoleID: &quot; + TitleRoleID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TitleRoleID: &quot; + TitleRoleID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73584,8 +61748,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupTitleUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GroupTitleUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73595,6 +61759,7 @@
     public class GroupRoleUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproleupdate_roledata&quot;)]
         public class RoleDataBlock
         {
             private byte[] _name;
@@ -73634,6 +61799,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73697,25 +61863,27 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RoleData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;\n&quot;;
-                output += &quot;UpdateType: &quot; + UpdateType.ToString() + &quot;\n&quot;;
-                output += &quot;Powers: &quot; + Powers.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;\n&quot;;
+                string output = &quot;-- RoleData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;RoleID: &quot; + RoleID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UpdateType: &quot; + UpdateType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Powers: &quot; + Powers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Title, &quot;Title&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;grouproleupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73751,10 +61919,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73815,12 +61983,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupRoleUpdate ---\n&quot;;
+            string output = &quot;--- GroupRoleUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; RoleData.Length; j++)
             {
-                output += RoleData[j].ToString() + &quot;\n&quot;;
+                output += RoleData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73830,11 +61998,13 @@
     public class LiveHelpGroupRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;livehelpgrouprequest_requestdata&quot;)]
         public class RequestDataBlock
         {
             public LLUUID AgentID;
             public LLUUID RequestID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73867,9 +62037,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -73916,8 +62086,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LiveHelpGroupRequest ---\n&quot;;
-                output += RequestData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LiveHelpGroupRequest ---&quot; + Environment.NewLine;
+                output += RequestData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -73927,6 +62097,7 @@
     public class LiveHelpGroupReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;livehelpgroupreply_replydata&quot;)]
         public class ReplyDataBlock
         {
             public LLUUID RequestID;
@@ -73943,6 +62114,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -73984,10 +62156,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReplyData --\n&quot;;
-                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Selection, &quot;Selection&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ReplyData --&quot; + Environment.NewLine;
+                output += &quot;RequestID: &quot; + RequestID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Selection, &quot;Selection&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74034,8 +62206,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LiveHelpGroupReply ---\n&quot;;
-                output += ReplyData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LiveHelpGroupReply ---&quot; + Environment.NewLine;
+                output += ReplyData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74045,11 +62217,13 @@
     public class AgentWearablesRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentwearablesrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74082,9 +62256,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74131,8 +62305,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentWearablesRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentWearablesRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74142,12 +62316,14 @@
     public class AgentWearablesUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentwearablesupdate_wearabledata&quot;)]
         public class WearableDataBlock
         {
             public byte WearableType;
             public LLUUID AssetID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74182,22 +62358,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- WearableData --&quot; + Environment.NewLine;
+                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentwearablesupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint SerialNum;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74235,10 +62413,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74300,12 +62478,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentWearablesUpdate ---\n&quot;;
+            string output = &quot;--- AgentWearablesUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; WearableData.Length; j++)
             {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
+                output += WearableData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74315,11 +62493,13 @@
     public class AgentIsNowWearingPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentisnowwearing_wearabledata&quot;)]
         public class WearableDataBlock
         {
             public byte WearableType;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74351,20 +62531,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- WearableData --&quot; + Environment.NewLine;
+                output += &quot;WearableType: &quot; + WearableType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentisnowwearing_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74397,9 +62579,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74461,12 +62643,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentIsNowWearing ---\n&quot;;
+            string output = &quot;--- AgentIsNowWearing ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; WearableData.Length; j++)
             {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
+                output += WearableData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74476,11 +62658,13 @@
     public class AgentCachedTexturePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentcachedtexture_wearabledata&quot;)]
         public class WearableDataBlock
         {
             public LLUUID ID;
             public byte TextureIndex;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74512,21 +62696,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;\n&quot;;
+                string output = &quot;-- WearableData --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentcachedtexture_agentdata&quot;)]
         public class AgentDataBlock
         {
             public int SerialNum;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74564,10 +62750,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74628,12 +62814,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentCachedTexture ---\n&quot;;
+            string output = &quot;--- AgentCachedTexture ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; WearableData.Length; j++)
             {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
+                output += WearableData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74643,6 +62829,7 @@
     public class AgentCachedTextureResponsePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentcachedtextureresponse_wearabledata&quot;)]
         public class WearableDataBlock
         {
             public LLUUID TextureID;
@@ -74659,6 +62846,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74699,22 +62887,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- WearableData --\n&quot;;
-                output += &quot;TextureID: &quot; + TextureID.ToString() + &quot;\n&quot;;
-                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(HostName, &quot;HostName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- WearableData --&quot; + Environment.NewLine;
+                output += &quot;TextureID: &quot; + TextureID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TextureIndex: &quot; + TextureIndex.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(HostName, &quot;HostName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentcachedtextureresponse_agentdata&quot;)]
         public class AgentDataBlock
         {
             public int SerialNum;
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74752,10 +62942,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;SerialNum: &quot; + SerialNum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74816,12 +63006,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentCachedTextureResponse ---\n&quot;;
+            string output = &quot;--- AgentCachedTextureResponse ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; WearableData.Length; j++)
             {
-                output += WearableData[j].ToString() + &quot;\n&quot;;
+                output += WearableData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74831,11 +63021,13 @@
     public class AgentDataUpdateRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentdataupdaterequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -74868,9 +63060,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -74917,8 +63109,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentDataUpdateRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentDataUpdateRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -74928,6 +63120,7 @@
     public class AgentDataUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentdataupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             private byte[] _grouptitle;
@@ -74978,6 +63171,7 @@
             }
             public LLUUID ActiveGroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75049,14 +63243,14 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;\n&quot;;
-                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;\n&quot;;
-                output += &quot;ActiveGroupID: &quot; + ActiveGroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(LastName, &quot;LastName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(FirstName, &quot;FirstName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ActiveGroupID: &quot; + ActiveGroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75104,8 +63298,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentDataUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentDataUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -75115,6 +63309,7 @@
     public class GroupDataUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;groupdataupdate_agentgroupdata&quot;)]
         public class AgentGroupDataBlock
         {
             private byte[] _grouptitle;
@@ -75132,6 +63327,7 @@
             public LLUUID GroupID;
             public ulong AgentPowers;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75182,11 +63378,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentGroupData --\n&quot;;
-                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;AgentPowers: &quot; + AgentPowers.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentGroupData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupTitle, &quot;GroupTitle&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentPowers: &quot; + AgentPowers.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75243,10 +63439,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GroupDataUpdate ---\n&quot;;
+            string output = &quot;--- GroupDataUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AgentGroupData.Length; j++)
             {
-                output += AgentGroupData[j].ToString() + &quot;\n&quot;;
+                output += AgentGroupData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -75257,10 +63453,12 @@
     public class AgentGroupDataUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentgroupdataupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75290,14 +63488,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentgroupdataupdate_groupdata&quot;)]
         public class GroupDataBlock
         {
             public ulong GroupPowers;
@@ -75317,6 +63516,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75374,13 +63574,13 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;\n&quot;;
-                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupInsigniaID: &quot; + GroupInsigniaID.ToString() + &quot;\n&quot;;
-                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Contribution: &quot; + Contribution.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupInsigniaID: &quot; + GroupInsigniaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(GroupName, &quot;GroupName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75442,11 +63642,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentGroupDataUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentGroupDataUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; GroupData.Length; j++)
             {
-                output += GroupData[j].ToString() + &quot;\n&quot;;
+                output += GroupData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -75457,11 +63657,13 @@
     public class AgentDropGroupPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentdropgroup_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75494,9 +63696,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75544,176 +63746,24 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentDropGroup ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentDropGroup ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class LogTextMessagePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID ToAgentId;
-            private byte[] _message;
-            public byte[] Message
-            {
-                get { return _message; }
-                set
-                {
-                    if (value == null) { _message = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _message = new byte[value.Length]; Array.Copy(value, _message, value.Length); }
-                }
-            }
-            public double GlobalX;
-            public double GlobalY;
-            public uint Time;
-            public LLUUID FromAgentId;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 52;
-                    if (Message != null) { length += 2 + Message.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ToAgentId = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _message = new byte[length];
-                    Array.Copy(bytes, i, _message, 0, length); i += length;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    GlobalX = BitConverter.ToDouble(bytes, i); i += 8;
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 8);
-                    GlobalY = BitConverter.ToDouble(bytes, i); i += 8;
-                    Time = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    FromAgentId = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                if(ToAgentId == null) { Console.WriteLine(&quot;Warning: ToAgentId is null, in &quot; + this.GetType()); }
-                Array.Copy(ToAgentId.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Message == null) { Console.WriteLine(&quot;Warning: Message is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Message.Length % 256);
-                bytes[i++] = (byte)((Message.Length &gt;&gt; 8) % 256);
-                Array.Copy(Message, 0, bytes, i, Message.Length); i += Message.Length;
-                ba = BitConverter.GetBytes(GlobalX);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                ba = BitConverter.GetBytes(GlobalY);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }
-                Array.Copy(ba, 0, bytes, i, 8); i += 8;
-                bytes[i++] = (byte)(Time % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Time &gt;&gt; 24) % 256);
-                if(FromAgentId == null) { Console.WriteLine(&quot;Warning: FromAgentId is null, in &quot; + this.GetType()); }
-                Array.Copy(FromAgentId.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ToAgentId: &quot; + ToAgentId.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Message, &quot;Message&quot;) + &quot;\n&quot;;
-                output += &quot;GlobalX: &quot; + GlobalX.ToString() + &quot;\n&quot;;
-                output += &quot;GlobalY: &quot; + GlobalY.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;FromAgentId: &quot; + FromAgentId.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.LogTextMessage; } }
-        public DataBlockBlock[] DataBlock;
-
-        public LogTextMessagePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 447;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            DataBlock = new DataBlockBlock[0];
-        }
-
-        public LogTextMessagePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public LogTextMessagePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            DataBlock = new DataBlockBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { DataBlock[j] = new DataBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { length += DataBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)DataBlock.Length;
-            for (int j = 0; j &lt; DataBlock.Length; j++) { DataBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- LogTextMessage ---\n&quot;;
-            for (int j = 0; j &lt; DataBlock.Length; j++)
-            {
-                output += DataBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class CreateTrustedCircuitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createtrustedcircuit_datablock&quot;)]
         public class DataBlockBlock
         {
             public byte[] Digest;
             public LLUUID EndPointID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75746,9 +63796,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += Helpers.FieldToString(Digest, &quot;Digest&quot;) + &quot;\n&quot;;
-                output += &quot;EndPointID: &quot; + EndPointID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Digest, &quot;Digest&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;EndPointID: &quot; + EndPointID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75795,8 +63845,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateTrustedCircuit ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CreateTrustedCircuit ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -75806,10 +63856,12 @@
     public class DenyTrustedCircuitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;denytrustedcircuit_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID EndPointID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -75839,8 +63891,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;EndPointID: &quot; + EndPointID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;EndPointID: &quot; + EndPointID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -75887,8 +63939,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DenyTrustedCircuit ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DenyTrustedCircuit ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -75933,7 +63985,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestTrustedCircuit ---\n&quot;;
+            string output = &quot;--- RequestTrustedCircuit ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -75943,6 +63995,7 @@
     public class RezSingleAttachmentFromInvPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezsingleattachmentfrominv_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _name;
@@ -75975,6 +64028,7 @@
             public uint NextOwnerMask;
             public uint GroupMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76045,27 +64099,29 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;AttachmentPt: &quot; + AttachmentPt.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AttachmentPt: &quot; + AttachmentPt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezsingleattachmentfrominv_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76098,9 +64154,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -76153,9 +64209,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RezSingleAttachmentFromInv ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RezSingleAttachmentFromInv ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -76165,6 +64221,7 @@
     public class RezMultipleAttachmentsFromInvPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezmultipleattachmentsfrominv_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _name;
@@ -76197,6 +64254,7 @@
             public uint NextOwnerMask;
             public uint GroupMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76267,27 +64325,29 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;AttachmentPt: &quot; + AttachmentPt.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemFlags: &quot; + ItemFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AttachmentPt: &quot; + AttachmentPt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezmultipleattachmentsfrominv_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76320,21 +64380,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;rezmultipleattachmentsfrominv_headerdata&quot;)]
         public class HeaderDataBlock
         {
             public LLUUID CompoundMsgID;
             public bool FirstDetachAll;
             public byte TotalObjects;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76368,10 +64430,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HeaderData --\n&quot;;
-                output += &quot;CompoundMsgID: &quot; + CompoundMsgID.ToString() + &quot;\n&quot;;
-                output += &quot;FirstDetachAll: &quot; + FirstDetachAll.ToString() + &quot;\n&quot;;
-                output += &quot;TotalObjects: &quot; + TotalObjects.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HeaderData --&quot; + Environment.NewLine;
+                output += &quot;CompoundMsgID: &quot; + CompoundMsgID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FirstDetachAll: &quot; + FirstDetachAll.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalObjects: &quot; + TotalObjects.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -76438,13 +64500,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RezMultipleAttachmentsFromInv ---\n&quot;;
+            string output = &quot;--- RezMultipleAttachmentsFromInv ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += HeaderData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += HeaderData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -76454,11 +64516,13 @@
     public class DetachAttachmentIntoInvPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;detachattachmentintoinv_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID AgentID;
             public LLUUID ItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76491,9 +64555,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -76540,8 +64604,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- DetachAttachmentIntoInv ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- DetachAttachmentIntoInv ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -76551,11 +64615,13 @@
     public class CreateNewOutfitAttachmentsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createnewoutfitattachments_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID OldFolderID;
             public LLUUID OldItemID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76588,20 +64654,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;OldFolderID: &quot; + OldFolderID.ToString() + &quot;\n&quot;;
-                output += &quot;OldItemID: &quot; + OldItemID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;OldFolderID: &quot; + OldFolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OldItemID: &quot; + OldItemID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createnewoutfitattachments_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76634,19 +64702,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;createnewoutfitattachments_headerdata&quot;)]
         public class HeaderDataBlock
         {
             public LLUUID NewFolderID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76676,8 +64746,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- HeaderData --\n&quot;;
-                output += &quot;NewFolderID: &quot; + NewFolderID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- HeaderData --&quot; + Environment.NewLine;
+                output += &quot;NewFolderID: &quot; + NewFolderID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -76743,13 +64813,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CreateNewOutfitAttachments ---\n&quot;;
+            string output = &quot;--- CreateNewOutfitAttachments ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
-                output += HeaderData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += HeaderData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -76759,11 +64829,13 @@
     public class UserInfoRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;userinforequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76796,9 +64868,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -76845,8 +64917,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UserInfoRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UserInfoRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -76856,6 +64928,7 @@
     public class UserInfoReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;userinforeply_userdata&quot;)]
         public class UserDataBlock
         {
             private byte[] _email;
@@ -76882,6 +64955,7 @@
             }
             public bool IMViaEMail;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76927,20 +65001,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UserData --\n&quot;;
-                output += Helpers.FieldToString(EMail, &quot;EMail&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(DirectoryVisibility, &quot;DirectoryVisibility&quot;) + &quot;\n&quot;;
-                output += &quot;IMViaEMail: &quot; + IMViaEMail.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UserData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(EMail, &quot;EMail&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(DirectoryVisibility, &quot;DirectoryVisibility&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;IMViaEMail: &quot; + IMViaEMail.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;userinforeply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -76970,8 +65046,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -77023,9 +65099,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UserInfoReply ---\n&quot;;
-                output += UserData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UserInfoReply ---&quot; + Environment.NewLine;
+                output += UserData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -77035,6 +65111,7 @@
     public class UpdateUserInfoPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateuserinfo_userdata&quot;)]
         public class UserDataBlock
         {
             private byte[] _directoryvisibility;
@@ -77050,6 +65127,7 @@
             }
             public bool IMViaEMail;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -77087,20 +65165,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- UserData --\n&quot;;
-                output += Helpers.FieldToString(DirectoryVisibility, &quot;DirectoryVisibility&quot;) + &quot;\n&quot;;
-                output += &quot;IMViaEMail: &quot; + IMViaEMail.ToString() + &quot;\n&quot;;
+                string output = &quot;-- UserData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(DirectoryVisibility, &quot;DirectoryVisibility&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;IMViaEMail: &quot; + IMViaEMail.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;updateuserinfo_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -77133,9 +65213,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -77187,9 +65267,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- UpdateUserInfo ---\n&quot;;
-                output += UserData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- UpdateUserInfo ---&quot; + Environment.NewLine;
+                output += UserData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -77199,10 +65279,12 @@
     public class GodExpungeUserPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godexpungeuser_expungedata&quot;)]
         public class ExpungeDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -77232,19 +65314,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ExpungeData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ExpungeData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;godexpungeuser_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -77277,9 +65361,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -77341,704 +65425,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GodExpungeUser ---\n&quot;;
+            string output = &quot;--- GodExpungeUser ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ExpungeData.Length; j++)
             {
-                output += ExpungeData[j].ToString() + &quot;\n&quot;;
+                output += ExpungeData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class StartExpungeProcessPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ExpungeDataBlock
-        {
-            public LLUUID AgentID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ExpungeDataBlock() { }
-            public ExpungeDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AgentID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
-                Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ExpungeData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartExpungeProcess; } }
-        public ExpungeDataBlock[] ExpungeData;
-
-        public StartExpungeProcessPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 459;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ExpungeData = new ExpungeDataBlock[0];
-        }
-
-        public StartExpungeProcessPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ExpungeData = new ExpungeDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ExpungeData[j] = new ExpungeDataBlock(bytes, ref i); }
-        }
-
-        public StartExpungeProcessPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ExpungeData = new ExpungeDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ExpungeData[j] = new ExpungeDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ExpungeData.Length; j++) { length += ExpungeData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ExpungeData.Length;
-            for (int j = 0; j &lt; ExpungeData.Length; j++) { ExpungeData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartExpungeProcess ---\n&quot;;
-            for (int j = 0; j &lt; ExpungeData.Length; j++)
-            {
-                output += ExpungeData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class StartExpungeProcessAckPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartExpungeProcessAck; } }
-
-        public StartExpungeProcessAckPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 460;
-            Header.Reliable = true;
-        }
-
-        public StartExpungeProcessAckPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public StartExpungeProcessAckPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartExpungeProcessAck ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class StartParcelRenamePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            private byte[] _newname;
-            public byte[] NewName
-            {
-                get { return _newname; }
-                set
-                {
-                    if (value == null) { _newname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _newname = new byte[value.Length]; Array.Copy(value, _newname, value.Length); }
-                }
-            }
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 16;
-                    if (NewName != null) { length += 1 + NewName.Length; }
-                    return length;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _newname = new byte[length];
-                    Array.Copy(bytes, i, _newname, 0, length); i += length;
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NewName == null) { Console.WriteLine(&quot;Warning: NewName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)NewName.Length;
-                Array.Copy(NewName, 0, bytes, i, NewName.Length); i += NewName.Length;
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartParcelRename; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public StartParcelRenamePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 461;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public StartParcelRenamePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public StartParcelRenamePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartParcelRename ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class StartParcelRenameAckPacket : Packet
-    {
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartParcelRenameAck; } }
-
-        public StartParcelRenameAckPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 462;
-            Header.Reliable = true;
-        }
-
-        public StartParcelRenameAckPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-        }
-
-        public StartParcelRenameAckPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartParcelRenameAck ---\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class BulkParcelRenamePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            private byte[] _newname;
-            public byte[] NewName
-            {
-                get { return _newname; }
-                set
-                {
-                    if (value == null) { _newname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _newname = new byte[value.Length]; Array.Copy(value, _newname, value.Length); }
-                }
-            }
-            public LLUUID ParcelID;
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 24;
-                    if (NewName != null) { length += 1 + NewName.Length; }
-                    return length;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _newname = new byte[length];
-                    Array.Copy(bytes, i, _newname, 0, length); i += length;
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NewName == null) { Console.WriteLine(&quot;Warning: NewName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)NewName.Length;
-                Array.Copy(NewName, 0, bytes, i, NewName.Length); i += NewName.Length;
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.BulkParcelRename; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public BulkParcelRenamePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 463;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public BulkParcelRenamePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public BulkParcelRenamePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- BulkParcelRename ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ParcelRenamePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            private byte[] _newname;
-            public byte[] NewName
-            {
-                get { return _newname; }
-                set
-                {
-                    if (value == null) { _newname = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _newname = new byte[value.Length]; Array.Copy(value, _newname, value.Length); }
-                }
-            }
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 16;
-                    if (NewName != null) { length += 1 + NewName.Length; }
-                    return length;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _newname = new byte[length];
-                    Array.Copy(bytes, i, _newname, 0, length); i += length;
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NewName == null) { Console.WriteLine(&quot;Warning: NewName is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)NewName.Length;
-                Array.Copy(NewName, 0, bytes, i, NewName.Length); i += NewName.Length;
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += Helpers.FieldToString(NewName, &quot;NewName&quot;) + &quot;\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ParcelRename; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public ParcelRenamePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 464;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public ParcelRenamePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public ParcelRenamePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ParcelRename ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class StartParcelRemovePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.StartParcelRemove; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public StartParcelRemovePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 465;
-            Header.Reliable = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public StartParcelRemovePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public StartParcelRemovePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- StartParcelRemove ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class StartParcelRemoveAckPacket : Packet
     {
         private Header header;
@@ -78077,132 +65475,17 @@
 
         public override string ToString()
         {
-            string output = &quot;--- StartParcelRemoveAck ---\n&quot;;
+            string output = &quot;--- StartParcelRemoveAck ---&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class BulkParcelRemovePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ParcelDataBlock
-        {
-            public LLUUID ParcelID;
-            public ulong RegionHandle;
-
-            public int Length
-            {
-                get
-                {
-                    return 24;
-                }
-            }
-
-            public ParcelDataBlock() { }
-            public ParcelDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ParcelID = new LLUUID(bytes, i); i += 16;
-                    RegionHandle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ParcelID == null) { Console.WriteLine(&quot;Warning: ParcelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParcelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(RegionHandle % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ParcelID: &quot; + ParcelID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.BulkParcelRemove; } }
-        public ParcelDataBlock[] ParcelData;
-
-        public BulkParcelRemovePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 467;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ParcelData = new ParcelDataBlock[0];
-        }
-
-        public BulkParcelRemovePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public BulkParcelRemovePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            int count = (int)bytes[i++];
-            ParcelData = new ParcelDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { ParcelData[j] = new ParcelDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-;
-            length++;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { length += ParcelData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)ParcelData.Length;
-            for (int j = 0; j &lt; ParcelData.Length; j++) { ParcelData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- BulkParcelRemove ---\n&quot;;
-            for (int j = 0; j &lt; ParcelData.Length; j++)
-            {
-                output += ParcelData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class InitiateUploadPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;initiateupload_filedata&quot;)]
         public class FileDataBlock
         {
             private byte[] _sourcefilename;
@@ -78228,6 +65511,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78270,19 +65554,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FileData --\n&quot;;
-                output += Helpers.FieldToString(SourceFilename, &quot;SourceFilename&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(BaseFilename, &quot;BaseFilename&quot;) + &quot;\n&quot;;
+                string output = &quot;-- FileData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SourceFilename, &quot;SourceFilename&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(BaseFilename, &quot;BaseFilename&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;initiateupload_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78312,8 +65598,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -78365,9 +65651,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- InitiateUpload ---\n&quot;;
-                output += FileData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- InitiateUpload ---&quot; + Environment.NewLine;
+                output += FileData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -78377,6 +65663,7 @@
     public class InitiateDownloadPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;initiatedownload_filedata&quot;)]
         public class FileDataBlock
         {
             private byte[] _simfilename;
@@ -78402,6 +65689,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78444,19 +65732,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- FileData --\n&quot;;
-                output += Helpers.FieldToString(SimFilename, &quot;SimFilename&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(ViewerFilename, &quot;ViewerFilename&quot;) + &quot;\n&quot;;
+                string output = &quot;-- FileData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SimFilename, &quot;SimFilename&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ViewerFilename, &quot;ViewerFilename&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;initiatedownload_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78486,8 +65776,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -78539,9 +65829,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- InitiateDownload ---\n&quot;;
-                output += FileData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- InitiateDownload ---&quot; + Environment.NewLine;
+                output += FileData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -78551,6 +65841,7 @@
     public class SystemMessagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;systemmessage_methoddata&quot;)]
         public class MethodDataBlock
         {
             public LLUUID Invoice;
@@ -78567,6 +65858,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78608,16 +65900,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- MethodData --\n&quot;;
-                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Digest, &quot;Digest&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;\n&quot;;
+                string output = &quot;-- MethodData --&quot; + Environment.NewLine;
+                output += &quot;Invoice: &quot; + Invoice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Digest, &quot;Digest&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Method, &quot;Method&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;systemmessage_paramlist&quot;)]
         public class ParamListBlock
         {
             private byte[] _parameter;
@@ -78632,6 +65925,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78667,8 +65961,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParamList --\n&quot;;
-                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ParamList --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Parameter, &quot;Parameter&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -78730,11 +66024,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SystemMessage ---\n&quot;;
-                output += MethodData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SystemMessage ---&quot; + Environment.NewLine;
+                output += MethodData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ParamList.Length; j++)
             {
-                output += ParamList[j].ToString() + &quot;\n&quot;;
+                output += ParamList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -78745,6 +66039,7 @@
     public class MapLayerRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;maplayerrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -78753,6 +66048,7 @@
             public uint Flags;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78797,12 +66093,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -78849,8 +66145,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapLayerRequest ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapLayerRequest ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -78860,11 +66156,13 @@
     public class MapLayerReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;maplayerreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78899,15 +66197,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;maplayerreply_layerdata&quot;)]
         public class LayerDataBlock
         {
             public uint Top;
@@ -78916,6 +66215,7 @@
             public uint Bottom;
             public uint Right;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -78965,12 +66265,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- LayerData --\n&quot;;
-                output += &quot;Top: &quot; + Top.ToString() + &quot;\n&quot;;
-                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;\n&quot;;
-                output += &quot;Left: &quot; + Left.ToString() + &quot;\n&quot;;
-                output += &quot;Bottom: &quot; + Bottom.ToString() + &quot;\n&quot;;
-                output += &quot;Right: &quot; + Right.ToString() + &quot;\n&quot;;
+                string output = &quot;-- LayerData --&quot; + Environment.NewLine;
+                output += &quot;Top: &quot; + Top.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ImageID: &quot; + ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Left: &quot; + Left.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Bottom: &quot; + Bottom.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Right: &quot; + Right.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -79031,11 +66331,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapLayerReply ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapLayerReply ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; LayerData.Length; j++)
             {
-                output += LayerData[j].ToString() + &quot;\n&quot;;
+                output += LayerData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -79046,6 +66346,7 @@
     public class MapBlockRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapblockrequest_positiondata&quot;)]
         public class PositionDataBlock
         {
             public ushort MaxX;
@@ -79053,6 +66354,7 @@
             public ushort MinX;
             public ushort MinY;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79091,17 +66393,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PositionData --\n&quot;;
-                output += &quot;MaxX: &quot; + MaxX.ToString() + &quot;\n&quot;;
-                output += &quot;MaxY: &quot; + MaxY.ToString() + &quot;\n&quot;;
-                output += &quot;MinX: &quot; + MinX.ToString() + &quot;\n&quot;;
-                output += &quot;MinY: &quot; + MinY.ToString() + &quot;\n&quot;;
+                string output = &quot;-- PositionData --&quot; + Environment.NewLine;
+                output += &quot;MaxX: &quot; + MaxX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaxY: &quot; + MaxY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MinX: &quot; + MinX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MinY: &quot; + MinY.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapblockrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -79110,6 +66413,7 @@
             public uint Flags;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79154,12 +66458,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -79211,9 +66515,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapBlockRequest ---\n&quot;;
-                output += PositionData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapBlockRequest ---&quot; + Environment.NewLine;
+                output += PositionData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -79223,6 +66527,7 @@
     public class MapNameRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapnamerequest_namedata&quot;)]
         public class NameDataBlock
         {
             private byte[] _name;
@@ -79237,6 +66542,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79272,14 +66578,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NameData --\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
+                string output = &quot;-- NameData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapnamerequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -79288,6 +66595,7 @@
             public uint Flags;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79332,12 +66640,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -79389,9 +66697,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapNameRequest ---\n&quot;;
-                output += NameData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapNameRequest ---&quot; + Environment.NewLine;
+                output += NameData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -79401,6 +66709,7 @@
     public class MapBlockReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapblockreply_data&quot;)]
         public class DataBlock
         {
             public ushort X;
@@ -79422,6 +66731,7 @@
             public LLUUID MapImageID;
             public byte Agents;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79477,26 +66787,28 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;X: &quot; + X.ToString() + &quot;\n&quot;;
-                output += &quot;Y: &quot; + Y.ToString() + &quot;\n&quot;;
-                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;\n&quot;;
-                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Access: &quot; + Access.ToString() + &quot;\n&quot;;
-                output += &quot;MapImageID: &quot; + MapImageID.ToString() + &quot;\n&quot;;
-                output += &quot;Agents: &quot; + Agents.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;X: &quot; + X.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Y: &quot; + Y.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionFlags: &quot; + RegionFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;WaterHeight: &quot; + WaterHeight.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Access: &quot; + Access.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MapImageID: &quot; + MapImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Agents: &quot; + Agents.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapblockreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79531,9 +66843,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -79594,12 +66906,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapBlockReply ---\n&quot;;
+            string output = &quot;--- MapBlockReply ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -79609,11 +66921,13 @@
     public class MapItemRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapitemrequest_requestdata&quot;)]
         public class RequestDataBlock
         {
             public ulong RegionHandle;
             public uint ItemType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79654,15 +66968,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestData --\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;ItemType: &quot; + ItemType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestData --&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemType: &quot; + ItemType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapitemrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
@@ -79671,6 +66986,7 @@
             public uint Flags;
             public uint EstateID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79715,12 +67031,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Godlike: &quot; + Godlike.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EstateID: &quot; + EstateID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -79772,9 +67088,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapItemRequest ---\n&quot;;
-                output += RequestData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapItemRequest ---&quot; + Environment.NewLine;
+                output += RequestData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -79784,10 +67100,12 @@
     public class MapItemReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapitemreply_requestdata&quot;)]
         public class RequestDataBlock
         {
             public uint ItemType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79819,14 +67137,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestData --\n&quot;;
-                output += &quot;ItemType: &quot; + ItemType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestData --&quot; + Environment.NewLine;
+                output += &quot;ItemType: &quot; + ItemType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapitemreply_data&quot;)]
         public class DataBlock
         {
             public uint X;
@@ -79846,6 +67165,7 @@
             public int Extra2;
             public int Extra;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79904,24 +67224,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;X: &quot; + X.ToString() + &quot;\n&quot;;
-                output += &quot;Y: &quot; + Y.ToString() + &quot;\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Extra2: &quot; + Extra2.ToString() + &quot;\n&quot;;
-                output += &quot;Extra: &quot; + Extra.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;X: &quot; + X.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Y: &quot; + Y.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Extra2: &quot; + Extra2.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Extra: &quot; + Extra.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;mapitemreply_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public uint Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -79956,9 +67278,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -80024,13 +67346,13 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MapItemReply ---\n&quot;;
-                output += RequestData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- MapItemReply ---&quot; + Environment.NewLine;
+                output += RequestData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Data.Length; j++)
             {
-                output += Data[j].ToString() + &quot;\n&quot;;
+                output += Data[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -80040,6 +67362,7 @@
     public class SendPostcardPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;sendpostcard_agentdata&quot;)]
         public class AgentDataBlock
         {
             private byte[] _to;
@@ -80104,6 +67427,7 @@
             public LLUUID AssetID;
             public bool MaturePublish;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -80164,7 +67488,6 @@
                 bytes[i++] = (byte)((Msg.Length &gt;&gt; 8) % 256);
                 Array.Copy(Msg, 0, bytes, i, Msg.Length); i += Msg.Length;
                 bytes[i++] = (byte)((AllowPublish) ? 1 : 0);
-                if(PosGlobal == null) { Console.WriteLine(&quot;Warning: PosGlobal is null, in &quot; + this.GetType()); }
                 Array.Copy(PosGlobal.GetBytes(), 0, bytes, i, 24); i += 24;
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
@@ -80184,18 +67507,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += Helpers.FieldToString(To, &quot;To&quot;) + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Msg, &quot;Msg&quot;) + &quot;\n&quot;;
-                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;\n&quot;;
-                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(From, &quot;From&quot;) + &quot;\n&quot;;
-                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;\n&quot;;
-                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(To, &quot;To&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Msg, &quot;Msg&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AllowPublish: &quot; + AllowPublish.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PosGlobal: &quot; + PosGlobal.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(From, &quot;From&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AssetID: &quot; + AssetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaturePublish: &quot; + MaturePublish.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -80242,1177 +67565,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SendPostcard ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SendPostcard ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class RpcChannelRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID TaskID;
-            public LLUUID ItemID;
-            public uint GridX;
-            public uint GridY;
-
-            public int Length
-            {
-                get
-                {
-                    return 40;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    GridX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RpcChannelRequest; } }
-        public DataBlockBlock DataBlock;
-
-        public RpcChannelRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 479;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public RpcChannelRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public RpcChannelRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RpcChannelRequest ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RpcChannelReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID TaskID;
-            public LLUUID ItemID;
-            public LLUUID ChannelID;
-
-            public int Length
-            {
-                get
-                {
-                    return 48;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    ChannelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ChannelID == null) { Console.WriteLine(&quot;Warning: ChannelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ChannelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelID: &quot; + ChannelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RpcChannelReply; } }
-        public DataBlockBlock DataBlock;
-
-        public RpcChannelReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 480;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public RpcChannelReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public RpcChannelReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RpcChannelReply ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RpcScriptRequestInboundPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TargetBlockBlock
-        {
-            public uint GridX;
-            public uint GridY;
-
-            public int Length
-            {
-                get
-                {
-                    return 8;
-                }
-            }
-
-            public TargetBlockBlock() { }
-            public TargetBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    GridX = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GridY = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(GridX % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridX &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GridY % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GridY &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TargetBlock --\n&quot;;
-                output += &quot;GridX: &quot; + GridX.ToString() + &quot;\n&quot;;
-                output += &quot;GridY: &quot; + GridY.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            private byte[] _stringvalue;
-            public byte[] StringValue
-            {
-                get { return _stringvalue; }
-                set
-                {
-                    if (value == null) { _stringvalue = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _stringvalue = new byte[value.Length]; Array.Copy(value, _stringvalue, value.Length); }
-                }
-            }
-            public LLUUID TaskID;
-            public LLUUID ItemID;
-            public uint IntValue;
-            public LLUUID ChannelID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 52;
-                    if (StringValue != null) { length += 2 + StringValue.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _stringvalue = new byte[length];
-                    Array.Copy(bytes, i, _stringvalue, 0, length); i += length;
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    IntValue = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ChannelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(StringValue == null) { Console.WriteLine(&quot;Warning: StringValue is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(StringValue.Length % 256);
-                bytes[i++] = (byte)((StringValue.Length &gt;&gt; 8) % 256);
-                Array.Copy(StringValue, 0, bytes, i, StringValue.Length); i += StringValue.Length;
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(IntValue % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 24) % 256);
-                if(ChannelID == null) { Console.WriteLine(&quot;Warning: ChannelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ChannelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += Helpers.FieldToString(StringValue, &quot;StringValue&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;IntValue: &quot; + IntValue.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelID: &quot; + ChannelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RpcScriptRequestInbound; } }
-        public TargetBlockBlock TargetBlock;
-        public DataBlockBlock DataBlock;
-
-        public RpcScriptRequestInboundPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 481;
-            Header.Reliable = true;
-            TargetBlock = new TargetBlockBlock();
-            DataBlock = new DataBlockBlock();
-        }
-
-        public RpcScriptRequestInboundPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            TargetBlock = new TargetBlockBlock(bytes, ref i);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public RpcScriptRequestInboundPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TargetBlock = new TargetBlockBlock(bytes, ref i);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TargetBlock.Length;            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TargetBlock.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RpcScriptRequestInbound ---\n&quot;;
-                output += TargetBlock.ToString() + &quot;\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RpcScriptRequestInboundForwardPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public uint RPCServerIP;
-            private byte[] _stringvalue;
-            public byte[] StringValue
-            {
-                get { return _stringvalue; }
-                set
-                {
-                    if (value == null) { _stringvalue = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _stringvalue = new byte[value.Length]; Array.Copy(value, _stringvalue, value.Length); }
-                }
-            }
-            public LLUUID TaskID;
-            public LLUUID ItemID;
-            public uint IntValue;
-            public LLUUID ChannelID;
-            public ushort RPCServerPort;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 58;
-                    if (StringValue != null) { length += 2 + StringValue.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    RPCServerIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _stringvalue = new byte[length];
-                    Array.Copy(bytes, i, _stringvalue, 0, length); i += length;
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    IntValue = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ChannelID = new LLUUID(bytes, i); i += 16;
-                    RPCServerPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(RPCServerIP % 256);
-                bytes[i++] = (byte)((RPCServerIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((RPCServerIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((RPCServerIP &gt;&gt; 24) % 256);
-                if(StringValue == null) { Console.WriteLine(&quot;Warning: StringValue is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(StringValue.Length % 256);
-                bytes[i++] = (byte)((StringValue.Length &gt;&gt; 8) % 256);
-                Array.Copy(StringValue, 0, bytes, i, StringValue.Length); i += StringValue.Length;
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(IntValue % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 24) % 256);
-                if(ChannelID == null) { Console.WriteLine(&quot;Warning: ChannelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ChannelID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((RPCServerPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(RPCServerPort % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;RPCServerIP: &quot; + RPCServerIP.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(StringValue, &quot;StringValue&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;IntValue: &quot; + IntValue.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelID: &quot; + ChannelID.ToString() + &quot;\n&quot;;
-                output += &quot;RPCServerPort: &quot; + RPCServerPort.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RpcScriptRequestInboundForward; } }
-        public DataBlockBlock DataBlock;
-
-        public RpcScriptRequestInboundForwardPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 482;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public RpcScriptRequestInboundForwardPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public RpcScriptRequestInboundForwardPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RpcScriptRequestInboundForward ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class RpcScriptReplyInboundPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            private byte[] _stringvalue;
-            public byte[] StringValue
-            {
-                get { return _stringvalue; }
-                set
-                {
-                    if (value == null) { _stringvalue = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _stringvalue = new byte[value.Length]; Array.Copy(value, _stringvalue, value.Length); }
-                }
-            }
-            public LLUUID TaskID;
-            public LLUUID ItemID;
-            public uint IntValue;
-            public LLUUID ChannelID;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 52;
-                    if (StringValue != null) { length += 2 + StringValue.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _stringvalue = new byte[length];
-                    Array.Copy(bytes, i, _stringvalue, 0, length); i += length;
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    ItemID = new LLUUID(bytes, i); i += 16;
-                    IntValue = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ChannelID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(StringValue == null) { Console.WriteLine(&quot;Warning: StringValue is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(StringValue.Length % 256);
-                bytes[i++] = (byte)((StringValue.Length &gt;&gt; 8) % 256);
-                Array.Copy(StringValue, 0, bytes, i, StringValue.Length); i += StringValue.Length;
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(ItemID == null) { Console.WriteLine(&quot;Warning: ItemID is null, in &quot; + this.GetType()); }
-                Array.Copy(ItemID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(IntValue % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IntValue &gt;&gt; 24) % 256);
-                if(ChannelID == null) { Console.WriteLine(&quot;Warning: ChannelID is null, in &quot; + this.GetType()); }
-                Array.Copy(ChannelID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += Helpers.FieldToString(StringValue, &quot;StringValue&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;IntValue: &quot; + IntValue.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelID: &quot; + ChannelID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.RpcScriptReplyInbound; } }
-        public DataBlockBlock DataBlock;
-
-        public RpcScriptReplyInboundPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 483;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public RpcScriptReplyInboundPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public RpcScriptReplyInboundPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- RpcScriptReplyInbound ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class MailTaskSimRequestPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID TaskID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.MailTaskSimRequest; } }
-        public DataBlockBlock DataBlock;
-
-        public MailTaskSimRequestPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 484;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public MailTaskSimRequestPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public MailTaskSimRequestPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- MailTaskSimRequest ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class MailTaskSimReplyPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TargetBlockBlock
-        {
-            private byte[] _targetip;
-            public byte[] TargetIP
-            {
-                get { return _targetip; }
-                set
-                {
-                    if (value == null) { _targetip = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _targetip = new byte[value.Length]; Array.Copy(value, _targetip, value.Length); }
-                }
-            }
-            public ushort TargetPort;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 2;
-                    if (TargetIP != null) { length += 1 + TargetIP.Length; }
-                    return length;
-                }
-            }
-
-            public TargetBlockBlock() { }
-            public TargetBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _targetip = new byte[length];
-                    Array.Copy(bytes, i, _targetip, 0, length); i += length;
-                    TargetPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TargetIP == null) { Console.WriteLine(&quot;Warning: TargetIP is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)TargetIP.Length;
-                Array.Copy(TargetIP, 0, bytes, i, TargetIP.Length); i += TargetIP.Length;
-                bytes[i++] = (byte)((TargetPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(TargetPort % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TargetBlock --\n&quot;;
-                output += Helpers.FieldToString(TargetIP, &quot;TargetIP&quot;) + &quot;\n&quot;;
-                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID TaskID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.MailTaskSimReply; } }
-        public TargetBlockBlock TargetBlock;
-        public DataBlockBlock DataBlock;
-
-        public MailTaskSimReplyPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 485;
-            Header.Reliable = true;
-            TargetBlock = new TargetBlockBlock();
-            DataBlock = new DataBlockBlock();
-        }
-
-        public MailTaskSimReplyPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            TargetBlock = new TargetBlockBlock(bytes, ref i);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public MailTaskSimReplyPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TargetBlock = new TargetBlockBlock(bytes, ref i);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += TargetBlock.Length;            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TargetBlock.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- MailTaskSimReply ---\n&quot;;
-                output += TargetBlock.ToString() + &quot;\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ScriptMailRegistrationPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            private byte[] _targetip;
-            public byte[] TargetIP
-            {
-                get { return _targetip; }
-                set
-                {
-                    if (value == null) { _targetip = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _targetip = new byte[value.Length]; Array.Copy(value, _targetip, value.Length); }
-                }
-            }
-            public LLUUID TaskID;
-            public ushort TargetPort;
-            public uint Flags;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 22;
-                    if (TargetIP != null) { length += 1 + TargetIP.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)bytes[i++];
-                    _targetip = new byte[length];
-                    Array.Copy(bytes, i, _targetip, 0, length); i += length;
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                    TargetPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    Flags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(TargetIP == null) { Console.WriteLine(&quot;Warning: TargetIP is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)TargetIP.Length;
-                Array.Copy(TargetIP, 0, bytes, i, TargetIP.Length); i += TargetIP.Length;
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((TargetPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(TargetPort % 256);
-                bytes[i++] = (byte)(Flags % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += Helpers.FieldToString(TargetIP, &quot;TargetIP&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;TargetPort: &quot; + TargetPort.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ScriptMailRegistration; } }
-        public DataBlockBlock DataBlock;
-
-        public ScriptMailRegistrationPacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 486;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public ScriptMailRegistrationPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public ScriptMailRegistrationPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ScriptMailRegistration ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class ParcelMediaCommandMessagePacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class CommandBlockBlock
-        {
-            public uint Command;
-            public float Time;
-            public uint Flags;
-
-            public int Length
-            {
-                get
-                {
-                    return 12;
-                }
-            }
-
-            public CommandBlockBlock() { }
-            public CommandBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    Command = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    if (!BitConverter.IsLittleEndian) Array.Reverse(bytes, i, 4);
-                    Time = BitConverter.ToSingle(bytes, i); i += 4;
-                    Flags = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                byte[] ba;
-                bytes[i++] = (byte)(Command % 256);
-                bytes[i++] = (byte)((Command &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Command &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Command &gt;&gt; 24) % 256);
-                ba = BitConverter.GetBytes(Time);
-                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
-                Array.Copy(ba, 0, bytes, i, 4); i += 4;
-                bytes[i++] = (byte)(Flags % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Flags &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- CommandBlock --\n&quot;;
-                output += &quot;Command: &quot; + Command.ToString() + &quot;\n&quot;;
-                output += &quot;Time: &quot; + Time.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ParcelMediaCommandMessage; } }
-        public CommandBlockBlock CommandBlock;
-
-        public ParcelMediaCommandMessagePacket()
-        {
-            Header = new LowHeader();
-            Header.ID = 487;
-            Header.Reliable = true;
-            CommandBlock = new CommandBlockBlock();
-        }
-
-        public ParcelMediaCommandMessagePacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new LowHeader(bytes, ref i, ref packetEnd);
-            CommandBlock = new CommandBlockBlock(bytes, ref i);
-        }
-
-        public ParcelMediaCommandMessagePacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            CommandBlock = new CommandBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 8;
-            length += CommandBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            CommandBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ParcelMediaCommandMessage ---\n&quot;;
-                output += CommandBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ParcelMediaUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelmediaupdate_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID MediaID;
@@ -81429,6 +67593,7 @@
             }
             public byte MediaAutoScale;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81469,10 +67634,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;\n&quot;;
-                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -81519,8 +67684,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelMediaUpdate ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelMediaUpdate ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -81530,6 +67695,7 @@
     public class LandStatRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;landstatrequest_requestdata&quot;)]
         public class RequestDataBlock
         {
             public uint RequestFlags;
@@ -81547,6 +67713,7 @@
             }
             public int ParcelLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81597,22 +67764,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestData --\n&quot;;
-                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Filter, &quot;Filter&quot;) + &quot;\n&quot;;
-                output += &quot;ParcelLocalID: &quot; + ParcelLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestData --&quot; + Environment.NewLine;
+                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filter, &quot;Filter&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelLocalID: &quot; + ParcelLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;landstatrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81645,9 +67814,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -81699,9 +67868,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LandStatRequest ---\n&quot;;
-                output += RequestData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LandStatRequest ---&quot; + Environment.NewLine;
+                output += RequestData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -81711,12 +67880,14 @@
     public class LandStatReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;landstatreply_requestdata&quot;)]
         public class RequestDataBlock
         {
             public uint RequestFlags;
             public uint ReportType;
             public uint TotalObjectCount;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81758,16 +67929,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestData --\n&quot;;
-                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;\n&quot;;
-                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;\n&quot;;
-                output += &quot;TotalObjectCount: &quot; + TotalObjectCount.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestData --&quot; + Environment.NewLine;
+                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ReportType: &quot; + ReportType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalObjectCount: &quot; + TotalObjectCount.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;landstatreply_reportdata&quot;)]
         public class ReportDataBlock
         {
             public float LocationX;
@@ -81799,6 +67971,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81870,15 +68043,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ReportData --\n&quot;;
-                output += &quot;LocationX: &quot; + LocationX.ToString() + &quot;\n&quot;;
-                output += &quot;LocationY: &quot; + LocationY.ToString() + &quot;\n&quot;;
-                output += &quot;LocationZ: &quot; + LocationZ.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TaskName, &quot;TaskName&quot;) + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output += &quot;Score: &quot; + Score.ToString() + &quot;\n&quot;;
-                output += &quot;TaskLocalID: &quot; + TaskLocalID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(OwnerName, &quot;OwnerName&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ReportData --&quot; + Environment.NewLine;
+                output += &quot;LocationX: &quot; + LocationX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationY: &quot; + LocationY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocationZ: &quot; + LocationZ.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TaskName, &quot;TaskName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Score: &quot; + Score.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TaskLocalID: &quot; + TaskLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(OwnerName, &quot;OwnerName&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -81939,11 +68112,11 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LandStatReply ---\n&quot;;
-                output += RequestData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LandStatReply ---&quot; + Environment.NewLine;
+                output += RequestData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ReportData.Length; j++)
             {
-                output += ReportData[j].ToString() + &quot;\n&quot;;
+                output += ReportData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -81954,10 +68127,12 @@
     public class SecuredTemplateChecksumRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;securedtemplatechecksumrequest_tokenblock&quot;)]
         public class TokenBlockBlock
         {
             public LLUUID Token;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -81987,8 +68162,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TokenBlock --\n&quot;;
-                output += &quot;Token: &quot; + Token.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TokenBlock --&quot; + Environment.NewLine;
+                output += &quot;Token: &quot; + Token.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -82035,8 +68210,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SecuredTemplateChecksumRequest ---\n&quot;;
-                output += TokenBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SecuredTemplateChecksumRequest ---&quot; + Environment.NewLine;
+                output += TokenBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -82046,10 +68221,12 @@
     public class PacketAckPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;packetack_packets&quot;)]
         public class PacketsBlock
         {
             public uint ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82081,8 +68258,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Packets --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Packets --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -82138,10 +68315,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PacketAck ---\n&quot;;
+            string output = &quot;--- PacketAck ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Packets.Length; j++)
             {
-                output += Packets[j].ToString() + &quot;\n&quot;;
+                output += Packets[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -82152,11 +68329,13 @@
     public class OpenCircuitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;opencircuit_circuitinfo&quot;)]
         public class CircuitInfoBlock
         {
             public uint IP;
             public ushort Port;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82191,9 +68370,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- CircuitInfo --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
+                string output = &quot;-- CircuitInfo --&quot; + Environment.NewLine;
+                output += &quot;IP: &quot; + IP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Port: &quot; + Port.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -82240,8 +68419,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- OpenCircuit ---\n&quot;;
-                output += CircuitInfo.ToString() + &quot;\n&quot;;
+            string output = &quot;--- OpenCircuit ---&quot; + Environment.NewLine;
+                output += CircuitInfo.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -82286,7 +68465,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CloseCircuit ---\n&quot;;
+            string output = &quot;--- CloseCircuit ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -82331,7 +68510,7 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TemplateChecksumRequest ---\n&quot;;
+            string output = &quot;--- TemplateChecksumRequest ---&quot; + Environment.NewLine;
             return output;
         }
 
@@ -82341,6 +68520,7 @@
     public class TemplateChecksumReplyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;templatechecksumreply_datablock&quot;)]
         public class DataBlockBlock
         {
             public byte ServerVersion;
@@ -82350,6 +68530,7 @@
             public byte MajorVersion;
             public byte MinorVersion;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82394,23 +68575,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ServerVersion: &quot; + ServerVersion.ToString() + &quot;\n&quot;;
-                output += &quot;PatchVersion: &quot; + PatchVersion.ToString() + &quot;\n&quot;;
-                output += &quot;Checksum: &quot; + Checksum.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;MajorVersion: &quot; + MajorVersion.ToString() + &quot;\n&quot;;
-                output += &quot;MinorVersion: &quot; + MinorVersion.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;ServerVersion: &quot; + ServerVersion.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PatchVersion: &quot; + PatchVersion.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Checksum: &quot; + Checksum.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MajorVersion: &quot; + MajorVersion.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MinorVersion: &quot; + MinorVersion.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;templatechecksumreply_tokenblock&quot;)]
         public class TokenBlockBlock
         {
             public LLUUID Token;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82440,8 +68623,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TokenBlock --\n&quot;;
-                output += &quot;Token: &quot; + Token.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TokenBlock --&quot; + Environment.NewLine;
+                output += &quot;Token: &quot; + Token.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -82493,175 +68676,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TemplateChecksumReply ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-                output += TokenBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TemplateChecksumReply ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
+                output += TokenBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class ClosestSimulatorPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SimulatorBlockBlock
-        {
-            public uint IP;
-            public ushort Port;
-            public ulong Handle;
-
-            public int Length
-            {
-                get
-                {
-                    return 14;
-                }
-            }
-
-            public SimulatorBlockBlock() { }
-            public SimulatorBlockBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    IP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    Handle = (ulong)((ulong)bytes[i++] + ((ulong)bytes[i++] &lt;&lt; 8) + ((ulong)bytes[i++] &lt;&lt; 16) + ((ulong)bytes[i++] &lt;&lt; 24) + ((ulong)bytes[i++] &lt;&lt; 32) + ((ulong)bytes[i++] &lt;&lt; 40) + ((ulong)bytes[i++] &lt;&lt; 48) + ((ulong)bytes[i++] &lt;&lt; 56));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(IP % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = (byte)(Handle % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 32) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 40) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 48) % 256);
-                bytes[i++] = (byte)((Handle &gt;&gt; 56) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimulatorBlock --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;Handle: &quot; + Handle.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class ViewerBlock
-        {
-            public LLUUID ID;
-
-            public int Length
-            {
-                get
-                {
-                    return 16;
-                }
-            }
-
-            public ViewerBlock() { }
-            public ViewerBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- Viewer --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.ClosestSimulator; } }
-        public SimulatorBlockBlock SimulatorBlock;
-        public ViewerBlock Viewer;
-
-        public ClosestSimulatorPacket()
-        {
-            Header = new MediumHeader();
-            Header.ID = 1;
-            Header.Reliable = true;
-            SimulatorBlock = new SimulatorBlockBlock();
-            Viewer = new ViewerBlock();
-        }
-
-        public ClosestSimulatorPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new MediumHeader(bytes, ref i, ref packetEnd);
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-            Viewer = new ViewerBlock(bytes, ref i);
-        }
-
-        public ClosestSimulatorPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            SimulatorBlock = new SimulatorBlockBlock(bytes, ref i);
-            Viewer = new ViewerBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 6;
-            length += SimulatorBlock.Length;            length += Viewer.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            SimulatorBlock.ToBytes(bytes, ref i);
-            Viewer.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- ClosestSimulator ---\n&quot;;
-                output += SimulatorBlock.ToString() + &quot;\n&quot;;
-                output += Viewer.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ObjectAddPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectadd_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint AddFlags;
@@ -82694,6 +68721,7 @@
             public LLQuaternion Rotation;
             public LLUUID RayTargetID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82754,7 +68782,6 @@
                 bytes[i++] = ProfileBegin;
                 bytes[i++] = (byte)PathRadiusOffset;
                 bytes[i++] = (byte)PathSkew;
-                if(RayStart == null) { Console.WriteLine(&quot;Warning: RayStart is null, in &quot; + this.GetType()); }
                 Array.Copy(RayStart.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = ProfileCurve;
                 bytes[i++] = PathScaleX;
@@ -82765,20 +68792,17 @@
                 bytes[i++] = (byte)PathTaperX;
                 bytes[i++] = (byte)PathTaperY;
                 bytes[i++] = RayEndIsIntersection;
-                if(RayEnd == null) { Console.WriteLine(&quot;Warning: RayEnd is null, in &quot; + this.GetType()); }
                 Array.Copy(RayEnd.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = ProfileEnd;
                 bytes[i++] = PathBegin;
                 bytes[i++] = BypassRaycast;
                 bytes[i++] = PCode;
                 bytes[i++] = PathCurve;
-                if(Scale == null) { Console.WriteLine(&quot;Warning: Scale is null, in &quot; + this.GetType()); }
                 Array.Copy(Scale.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = State;
                 bytes[i++] = (byte)PathTwist;
                 bytes[i++] = ProfileHollow;
                 bytes[i++] = PathRevolutions;
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
                 Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(RayTargetID == null) { Console.WriteLine(&quot;Warning: RayTargetID is null, in &quot; + this.GetType()); }
                 Array.Copy(RayTargetID.GetBytes(), 0, bytes, i, 16); i += 16;
@@ -82786,48 +68810,50 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;AddFlags: &quot; + AddFlags.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;\n&quot;;
-                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;\n&quot;;
-                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;\n&quot;;
-                output += &quot;Material: &quot; + Material.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;\n&quot;;
-                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;\n&quot;;
-                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;\n&quot;;
-                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;\n&quot;;
-                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;\n&quot;;
-                output += &quot;PCode: &quot; + PCode.ToString() + &quot;\n&quot;;
-                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;\n&quot;;
-                output += &quot;Scale: &quot; + Scale.ToString() + &quot;\n&quot;;
-                output += &quot;State: &quot; + State.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;\n&quot;;
-                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
-                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;AddFlags: &quot; + AddFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayStart: &quot; + RayStart.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Material: &quot; + Material.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEndIsIntersection: &quot; + RayEndIsIntersection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayEnd: &quot; + RayEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BypassRaycast: &quot; + BypassRaycast.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PCode: &quot; + PCode.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Scale: &quot; + Scale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;State: &quot; + State.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RayTargetID: &quot; + RayTargetID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectadd_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
             public LLUUID GroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82863,10 +68889,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -82919,9 +68945,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectAdd ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectAdd ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -82931,6 +68957,7 @@
     public class MultipleObjectUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;multipleobjectupdate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _data;
@@ -82947,6 +68974,7 @@
             public byte Type;
             public uint ObjectLocalID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -82989,21 +69017,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;multipleobjectupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83036,9 +69066,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83100,12 +69130,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- MultipleObjectUpdate ---\n&quot;;
+            string output = &quot;--- MultipleObjectUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83115,11 +69145,13 @@
     public class RequestMultipleObjectsPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestmultipleobjects_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ID;
             public byte CacheMissType;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83153,20 +69185,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;CacheMissType: &quot; + CacheMissType.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CacheMissType: &quot; + CacheMissType.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestmultipleobjects_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83199,9 +69233,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83263,12 +69297,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestMultipleObjects ---\n&quot;;
+            string output = &quot;--- RequestMultipleObjects ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83278,11 +69312,13 @@
     public class ObjectPositionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectposition_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ObjectLocalID;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83311,26 +69347,27 @@
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((ObjectLocalID &gt;&gt; 24) % 256);
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectLocalID: &quot; + ObjectLocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectposition_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83363,9 +69400,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83427,12 +69464,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectPosition ---\n&quot;;
+            string output = &quot;--- ObjectPosition ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83442,11 +69479,13 @@
     public class RequestObjectPropertiesFamilyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestobjectpropertiesfamily_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public LLUUID ObjectID;
             public uint RequestFlags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83481,20 +69520,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestobjectpropertiesfamily_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83527,9 +69568,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83582,9 +69623,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestObjectPropertiesFamily ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- RequestObjectPropertiesFamily ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83594,12 +69635,14 @@
     public class CoarseLocationUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;coarselocationupdate_location&quot;)]
         public class LocationBlock
         {
             public byte X;
             public byte Y;
             public byte Z;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83632,21 +69675,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Location --\n&quot;;
-                output += &quot;X: &quot; + X.ToString() + &quot;\n&quot;;
-                output += &quot;Y: &quot; + Y.ToString() + &quot;\n&quot;;
-                output += &quot;Z: &quot; + Z.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Location --&quot; + Environment.NewLine;
+                output += &quot;X: &quot; + X.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Y: &quot; + Y.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Z: &quot; + Z.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;coarselocationupdate_index&quot;)]
         public class IndexBlock
         {
             public short You;
             public short Prey;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83679,9 +69724,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Index --\n&quot;;
-                output += &quot;You: &quot; + You.ToString() + &quot;\n&quot;;
-                output += &quot;Prey: &quot; + Prey.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Index --&quot; + Environment.NewLine;
+                output += &quot;You: &quot; + You.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Prey: &quot; + Prey.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83742,12 +69787,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CoarseLocationUpdate ---\n&quot;;
+            string output = &quot;--- CoarseLocationUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Location.Length; j++)
             {
-                output += Location[j].ToString() + &quot;\n&quot;;
+                output += Location[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += Index.ToString() + &quot;\n&quot;;
+                output += Index.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83757,11 +69802,13 @@
     public class CrossedRegionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;crossedregion_info&quot;)]
         public class InfoBlock
         {
             public LLVector3 LookAt;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83786,23 +69833,22 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(LookAt == null) { Console.WriteLine(&quot;Warning: LookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(LookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- Info --\n&quot;;
-                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Info --&quot; + Environment.NewLine;
+                output += &quot;LookAt: &quot; + LookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;crossedregion_regiondata&quot;)]
         public class RegionDataBlock
         {
             private byte[] _seedcapability;
@@ -83820,6 +69866,7 @@
             public ulong RegionHandle;
             public uint SimIP;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83873,22 +69920,24 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += Helpers.FieldToString(SeedCapability, &quot;SeedCapability&quot;) + &quot;\n&quot;;
-                output += &quot;SimPort: &quot; + SimPort.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;SimIP: &quot; + SimIP.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SeedCapability, &quot;SeedCapability&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimPort: &quot; + SimPort.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimIP: &quot; + SimIP.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;crossedregion_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -83921,9 +69970,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -83980,10 +70029,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CrossedRegion ---\n&quot;;
-                output += Info.ToString() + &quot;\n&quot;;
-                output += RegionData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CrossedRegion ---&quot; + Environment.NewLine;
+                output += Info.ToString() + &quot;&quot; + Environment.NewLine;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -83993,11 +70042,13 @@
     public class ConfirmEnableSimulatorPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;confirmenablesimulator_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84030,9 +70081,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -84079,8 +70130,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ConfirmEnableSimulator ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ConfirmEnableSimulator ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -84090,6 +70141,7 @@
     public class ObjectPropertiesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectproperties_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public int OwnershipCost;
@@ -84169,6 +70221,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84307,33 +70360,33 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;OwnershipCost: &quot; + OwnershipCost.ToString() + &quot;\n&quot;;
-                output += &quot;AggregatePermTexturesOwner: &quot; + AggregatePermTexturesOwner.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(SitName, &quot;SitName&quot;) + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureID, &quot;TextureID&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(TouchName, &quot;TouchName&quot;) + &quot;\n&quot;;
-                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;\n&quot;;
-                output += &quot;AggregatePermTextures: &quot; + AggregatePermTextures.ToString() + &quot;\n&quot;;
-                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;\n&quot;;
-                output += &quot;InventorySerial: &quot; + InventorySerial.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;LastOwnerID: &quot; + LastOwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;AggregatePerms: &quot; + AggregatePerms.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;OwnershipCost: &quot; + OwnershipCost.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AggregatePermTexturesOwner: &quot; + AggregatePermTexturesOwner.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(SitName, &quot;SitName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FromTaskID: &quot; + FromTaskID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureID, &quot;TextureID&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TouchName, &quot;TouchName&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ItemID: &quot; + ItemID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AggregatePermTextures: &quot; + AggregatePermTextures.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FolderID: &quot; + FolderID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;InventorySerial: &quot; + InventorySerial.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LastOwnerID: &quot; + LastOwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AggregatePerms: &quot; + AggregatePerms.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -84390,10 +70443,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectProperties ---\n&quot;;
+            string output = &quot;--- ObjectProperties ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -84404,6 +70457,7 @@
     public class ObjectPropertiesFamilyPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectpropertiesfamily_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public int OwnershipCost;
@@ -84443,6 +70497,7 @@
             public uint GroupMask;
             public uint OwnerMask;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84544,23 +70599,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;OwnershipCost: &quot; + OwnershipCost.ToString() + &quot;\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;\n&quot;;
-                output += &quot;LastOwnerID: &quot; + LastOwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;OwnershipCost: &quot; + OwnershipCost.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SaleType: &quot; + SaleType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestFlags: &quot; + RequestFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Description, &quot;Description&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LastOwnerID: &quot; + LastOwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -84608,8 +70663,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectPropertiesFamily ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ObjectPropertiesFamily ---&quot; + Environment.NewLine;
+                output += ObjectData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -84619,6 +70674,7 @@
     public class ParcelPropertiesRequestPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesrequest_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public float East;
@@ -84628,6 +70684,7 @@
             public float North;
             public float South;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84682,24 +70739,26 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;East: &quot; + East.ToString() + &quot;\n&quot;;
-                output += &quot;West: &quot; + West.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapSelection: &quot; + SnapSelection.ToString() + &quot;\n&quot;;
-                output += &quot;North: &quot; + North.ToString() + &quot;\n&quot;;
-                output += &quot;South: &quot; + South.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;East: &quot; + East.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;West: &quot; + West.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapSelection: &quot; + SnapSelection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;North: &quot; + North.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;South: &quot; + South.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelpropertiesrequest_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84732,9 +70791,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -84787,113 +70846,19 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelPropertiesRequest ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelPropertiesRequest ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class SimStatusPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class SimStatusBlock
-        {
-            public bool CanAcceptAgents;
-            public bool CanAcceptTasks;
-
-            public int Length
-            {
-                get
-                {
-                    return 2;
-                }
-            }
-
-            public SimStatusBlock() { }
-            public SimStatusBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    CanAcceptAgents = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    CanAcceptTasks = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((CanAcceptAgents) ? 1 : 0);
-                bytes[i++] = (byte)((CanAcceptTasks) ? 1 : 0);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- SimStatus --\n&quot;;
-                output += &quot;CanAcceptAgents: &quot; + CanAcceptAgents.ToString() + &quot;\n&quot;;
-                output += &quot;CanAcceptTasks: &quot; + CanAcceptTasks.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.SimStatus; } }
-        public SimStatusBlock SimStatus;
-
-        public SimStatusPacket()
-        {
-            Header = new MediumHeader();
-            Header.ID = 13;
-            Header.Reliable = true;
-            SimStatus = new SimStatusBlock();
-        }
-
-        public SimStatusPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new MediumHeader(bytes, ref i, ref packetEnd);
-            SimStatus = new SimStatusBlock(bytes, ref i);
-        }
-
-        public SimStatusPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            SimStatus = new SimStatusBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 6;
-            length += SimStatus.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            SimStatus.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- SimStatus ---\n&quot;;
-                output += SimStatus.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class GestureUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;gestureupdate_agentblock&quot;)]
         public class AgentBlockBlock
         {
             public LLUUID AgentID;
@@ -84910,6 +70875,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -84950,10 +70916,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentBlock --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;ToViewer: &quot; + ToViewer.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;\n&quot;;
+                string output = &quot;-- AgentBlock --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ToViewer: &quot; + ToViewer.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Filename, &quot;Filename&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85000,8 +70966,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- GestureUpdate ---\n&quot;;
-                output += AgentBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- GestureUpdate ---&quot; + Environment.NewLine;
+                output += AgentBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85011,6 +70977,7 @@
     public class AttachedSoundPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;attachedsound_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID ObjectID;
@@ -85019,6 +70986,7 @@
             public LLUUID OwnerID;
             public byte Flags;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85062,12 +71030,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Gain: &quot; + Gain.ToString() + &quot;\n&quot;;
-                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Gain: &quot; + Gain.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85114,8 +71082,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AttachedSound ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AttachedSound ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85125,11 +71093,13 @@
     public class AttachedSoundGainChangePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;attachedsoundgainchange_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID ObjectID;
             public float Gain;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85165,9 +71135,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Gain: &quot; + Gain.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Gain: &quot; + Gain.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85214,8 +71184,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AttachedSoundGainChange ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AttachedSoundGainChange ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85225,11 +71195,13 @@
     public class AttachedSoundCutoffRadiusPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;attachedsoundcutoffradius_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID ObjectID;
             public float Radius;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85265,9 +71237,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Radius: &quot; + Radius.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Radius: &quot; + Radius.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85314,8 +71286,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AttachedSoundCutoffRadius ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AttachedSoundCutoffRadius ---&quot; + Environment.NewLine;
+                output += DataBlock.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85325,12 +71297,14 @@
     public class PreloadSoundPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;preloadsound_datablock&quot;)]
         public class DataBlockBlock
         {
             public LLUUID ObjectID;
             public LLUUID SoundID;
             public LLUUID OwnerID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85366,10 +71340,10 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- DataBlock --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85425,10 +71399,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- PreloadSound ---\n&quot;;
+            string output = &quot;--- PreloadSound ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; DataBlock.Length; j++)
             {
-                output += DataBlock[j].ToString() + &quot;\n&quot;;
+                output += DataBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -85436,161 +71410,10 @@
     }
 
     /// &lt;exclude/&gt;
-    public class InternalScriptMailPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class DataBlockBlock
-        {
-            public LLUUID To;
-            private byte[] _subject;
-            public byte[] Subject
-            {
-                get { return _subject; }
-                set
-                {
-                    if (value == null) { _subject = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _subject = new byte[value.Length]; Array.Copy(value, _subject, value.Length); }
-                }
-            }
-            private byte[] _body;
-            public byte[] Body
-            {
-                get { return _body; }
-                set
-                {
-                    if (value == null) { _body = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _body = new byte[value.Length]; Array.Copy(value, _body, value.Length); }
-                }
-            }
-            private byte[] _from;
-            public byte[] From
-            {
-                get { return _from; }
-                set
-                {
-                    if (value == null) { _from = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _from = new byte[value.Length]; Array.Copy(value, _from, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 16;
-                    if (Subject != null) { length += 1 + Subject.Length; }
-                    if (Body != null) { length += 2 + Body.Length; }
-                    if (From != null) { length += 1 + From.Length; }
-                    return length;
-                }
-            }
-
-            public DataBlockBlock() { }
-            public DataBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    To = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _subject = new byte[length];
-                    Array.Copy(bytes, i, _subject, 0, length); i += length;
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _body = new byte[length];
-                    Array.Copy(bytes, i, _body, 0, length); i += length;
-                    length = (ushort)bytes[i++];
-                    _from = new byte[length];
-                    Array.Copy(bytes, i, _from, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(To == null) { Console.WriteLine(&quot;Warning: To is null, in &quot; + this.GetType()); }
-                Array.Copy(To.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Subject == null) { Console.WriteLine(&quot;Warning: Subject is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Subject.Length;
-                Array.Copy(Subject, 0, bytes, i, Subject.Length); i += Subject.Length;
-                if(Body == null) { Console.WriteLine(&quot;Warning: Body is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Body.Length % 256);
-                bytes[i++] = (byte)((Body.Length &gt;&gt; 8) % 256);
-                Array.Copy(Body, 0, bytes, i, Body.Length); i += Body.Length;
-                if(From == null) { Console.WriteLine(&quot;Warning: From is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)From.Length;
-                Array.Copy(From, 0, bytes, i, From.Length); i += From.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- DataBlock --\n&quot;;
-                output += &quot;To: &quot; + To.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Subject, &quot;Subject&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(Body, &quot;Body&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(From, &quot;From&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.InternalScriptMail; } }
-        public DataBlockBlock DataBlock;
-
-        public InternalScriptMailPacket()
-        {
-            Header = new MediumHeader();
-            Header.ID = 19;
-            Header.Reliable = true;
-            DataBlock = new DataBlockBlock();
-        }
-
-        public InternalScriptMailPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new MediumHeader(bytes, ref i, ref packetEnd);
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public InternalScriptMailPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            DataBlock = new DataBlockBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 6;
-            length += DataBlock.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            DataBlock.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- InternalScriptMail ---\n&quot;;
-                output += DataBlock.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ViewerEffectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;viewereffect_effect&quot;)]
         public class EffectBlock
         {
             public float Duration;
@@ -85609,6 +71432,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85658,12 +71482,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Effect --\n&quot;;
-                output += &quot;Duration: &quot; + Duration.ToString() + &quot;\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Color, &quot;Color&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(TypeData, &quot;TypeData&quot;) + &quot;\n&quot;;
+                string output = &quot;-- Effect --&quot; + Environment.NewLine;
+                output += &quot;Duration: &quot; + Duration.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Color, &quot;Color&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TypeData, &quot;TypeData&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85720,10 +71544,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ViewerEffect ---\n&quot;;
+            string output = &quot;--- ViewerEffect ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; Effect.Length; j++)
             {
-                output += Effect[j].ToString() + &quot;\n&quot;;
+                output += Effect[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -85734,10 +71558,12 @@
     public class SetSunPhasePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setsunphase_data&quot;)]
         public class DataBlock
         {
             public float Phase;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85770,19 +71596,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Data --\n&quot;;
-                output += &quot;Phase: &quot; + Phase.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Data --&quot; + Environment.NewLine;
+                output += &quot;Phase: &quot; + Phase.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;setsunphase_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85815,9 +71643,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85869,9 +71697,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SetSunPhase ---\n&quot;;
-                output += Data.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SetSunPhase ---&quot; + Environment.NewLine;
+                output += Data.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85881,11 +71709,13 @@
     public class StartPingCheckPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;startpingcheck_pingid&quot;)]
         public class PingIDBlock
         {
             public byte PingID;
             public uint OldestUnacked;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -85919,9 +71749,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PingID --\n&quot;;
-                output += &quot;PingID: &quot; + PingID.ToString() + &quot;\n&quot;;
-                output += &quot;OldestUnacked: &quot; + OldestUnacked.ToString() + &quot;\n&quot;;
+                string output = &quot;-- PingID --&quot; + Environment.NewLine;
+                output += &quot;PingID: &quot; + PingID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OldestUnacked: &quot; + OldestUnacked.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -85968,8 +71798,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- StartPingCheck ---\n&quot;;
-                output += PingID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- StartPingCheck ---&quot; + Environment.NewLine;
+                output += PingID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -85979,10 +71809,12 @@
     public class CompletePingCheckPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;completepingcheck_pingid&quot;)]
         public class PingIDBlock
         {
             public byte PingID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86011,8 +71843,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- PingID --\n&quot;;
-                output += &quot;PingID: &quot; + PingID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- PingID --&quot; + Environment.NewLine;
+                output += &quot;PingID: &quot; + PingID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86059,166 +71891,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CompletePingCheck ---\n&quot;;
-                output += PingID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CompletePingCheck ---&quot; + Environment.NewLine;
+                output += PingID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class NeighborListPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class NeighborBlockBlock
-        {
-            public uint IP;
-            public ushort PublicPort;
-            public LLUUID RegionID;
-            private byte[] _name;
-            public byte[] Name
-            {
-                get { return _name; }
-                set
-                {
-                    if (value == null) { _name = null; return; }
-                    if (value.Length &gt; 255) { throw new OverflowException(&quot;Value exceeds 255 characters&quot;); }
-                    else { _name = new byte[value.Length]; Array.Copy(value, _name, value.Length); }
-                }
-            }
-            public ushort Port;
-            public byte SimAccess;
-            public uint PublicIP;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 29;
-                    if (Name != null) { length += 1 + Name.Length; }
-                    return length;
-                }
-            }
-
-            public NeighborBlockBlock() { }
-            public NeighborBlockBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    IP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    PublicPort = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    RegionID = new LLUUID(bytes, i); i += 16;
-                    length = (ushort)bytes[i++];
-                    _name = new byte[length];
-                    Array.Copy(bytes, i, _name, 0, length); i += length;
-                    Port = (ushort)((bytes[i++] &lt;&lt; 8) + bytes[i++]);
-                    SimAccess = (byte)bytes[i++];
-                    PublicIP = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)(IP % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((IP &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)((PublicPort &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(PublicPort % 256);
-                if(RegionID == null) { Console.WriteLine(&quot;Warning: RegionID is null, in &quot; + this.GetType()); }
-                Array.Copy(RegionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Name == null) { Console.WriteLine(&quot;Warning: Name is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)Name.Length;
-                Array.Copy(Name, 0, bytes, i, Name.Length); i += Name.Length;
-                bytes[i++] = (byte)((Port &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(Port % 256);
-                bytes[i++] = SimAccess;
-                bytes[i++] = (byte)(PublicIP % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((PublicIP &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NeighborBlock --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;PublicPort: &quot; + PublicPort.ToString() + &quot;\n&quot;;
-                output += &quot;RegionID: &quot; + RegionID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;SimAccess: &quot; + SimAccess.ToString() + &quot;\n&quot;;
-                output += &quot;PublicIP: &quot; + PublicIP.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.NeighborList; } }
-        public NeighborBlockBlock[] NeighborBlock;
-
-        public NeighborListPacket()
-        {
-            Header = new HighHeader();
-            Header.ID = 3;
-            Header.Reliable = true;
-            NeighborBlock = new NeighborBlockBlock[4];
-        }
-
-        public NeighborListPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new HighHeader(bytes, ref i, ref packetEnd);
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public NeighborListPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            NeighborBlock = new NeighborBlockBlock[4];
-            for (int j = 0; j &lt; 4; j++)
-            { NeighborBlock[j] = new NeighborBlockBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 5;
-;
-            for (int j = 0; j &lt; 4; j++) { length += NeighborBlock[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            for (int j = 0; j &lt; 4; j++) { NeighborBlock[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- NeighborList ---\n&quot;;
-            for (int j = 0; j &lt; 4; j++)
-            {
-                output += NeighborBlock[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class AgentUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint ControlFlags;
@@ -86234,6 +71918,7 @@
             public byte Flags;
             public byte State;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86274,24 +71959,18 @@
                 bytes[i++] = (byte)((ControlFlags &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((ControlFlags &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((ControlFlags &gt;&gt; 24) % 256);
-                if(CameraAtAxis == null) { Console.WriteLine(&quot;Warning: CameraAtAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraAtAxis.GetBytes(), 0, bytes, i, 12); i += 12;
                 ba = BitConverter.GetBytes(Far);
                 if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
                 Array.Copy(ba, 0, bytes, i, 4); i += 4;
                 if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(CameraCenter == null) { Console.WriteLine(&quot;Warning: CameraCenter is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraCenter.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(CameraLeftAxis == null) { Console.WriteLine(&quot;Warning: CameraLeftAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraLeftAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(HeadRotation == null) { Console.WriteLine(&quot;Warning: HeadRotation is null, in &quot; + this.GetType()); }
                 Array.Copy(HeadRotation.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(CameraUpAxis == null) { Console.WriteLine(&quot;Warning: CameraUpAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraUpAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(BodyRotation == null) { Console.WriteLine(&quot;Warning: BodyRotation is null, in &quot; + this.GetType()); }
                 Array.Copy(BodyRotation.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = Flags;
                 bytes[i++] = State;
@@ -86299,19 +71978,19 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;ControlFlags: &quot; + ControlFlags.ToString() + &quot;\n&quot;;
-                output += &quot;CameraAtAxis: &quot; + CameraAtAxis.ToString() + &quot;\n&quot;;
-                output += &quot;Far: &quot; + Far.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;CameraCenter: &quot; + CameraCenter.ToString() + &quot;\n&quot;;
-                output += &quot;CameraLeftAxis: &quot; + CameraLeftAxis.ToString() + &quot;\n&quot;;
-                output += &quot;HeadRotation: &quot; + HeadRotation.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;CameraUpAxis: &quot; + CameraUpAxis.ToString() + &quot;\n&quot;;
-                output += &quot;BodyRotation: &quot; + BodyRotation.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;State: &quot; + State.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;ControlFlags: &quot; + ControlFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraAtAxis: &quot; + CameraAtAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Far: &quot; + Far.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraCenter: &quot; + CameraCenter.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraLeftAxis: &quot; + CameraLeftAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;HeadRotation: &quot; + HeadRotation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraUpAxis: &quot; + CameraUpAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BodyRotation: &quot; + BodyRotation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;State: &quot; + State.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86359,8 +72038,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -86370,11 +72049,13 @@
     public class AgentAnimationPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentanimation_animationlist&quot;)]
         public class AnimationListBlock
         {
             public LLUUID AnimID;
             public bool StartAnim;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86406,20 +72087,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AnimationList --\n&quot;;
-                output += &quot;AnimID: &quot; + AnimID.ToString() + &quot;\n&quot;;
-                output += &quot;StartAnim: &quot; + StartAnim.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AnimationList --&quot; + Environment.NewLine;
+                output += &quot;AnimID: &quot; + AnimID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;StartAnim: &quot; + StartAnim.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentanimation_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86452,9 +72135,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86515,12 +72198,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentAnimation ---\n&quot;;
+            string output = &quot;--- AgentAnimation ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AnimationList.Length; j++)
             {
-                output += AnimationList[j].ToString() + &quot;\n&quot;;
+                output += AnimationList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -86530,11 +72213,13 @@
     public class AgentRequestSitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentrequestsit_targetobject&quot;)]
         public class TargetObjectBlock
         {
             public LLUUID TargetID;
             public LLVector3 Offset;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86561,26 +72246,27 @@
             {
                 if(TargetID == null) { Console.WriteLine(&quot;Warning: TargetID is null, in &quot; + this.GetType()); }
                 Array.Copy(TargetID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(Offset == null) { Console.WriteLine(&quot;Warning: Offset is null, in &quot; + this.GetType()); }
                 Array.Copy(Offset.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- TargetObject --\n&quot;;
-                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;\n&quot;;
-                output += &quot;Offset: &quot; + Offset.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TargetObject --&quot; + Environment.NewLine;
+                output += &quot;TargetID: &quot; + TargetID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Offset: &quot; + Offset.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentrequestsit_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86613,9 +72299,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86668,9 +72354,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentRequestSit ---\n&quot;;
-                output += TargetObject.ToString() + &quot;\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentRequestSit ---&quot; + Environment.NewLine;
+                output += TargetObject.ToString() + &quot;&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -86680,11 +72366,13 @@
     public class AgentSitPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agentsit_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86717,9 +72405,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86766,8 +72454,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentSit ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentSit ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -86777,6 +72465,7 @@
     public class RequestImagePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestimage_requestimage&quot;)]
         public class RequestImageBlock
         {
             public float DownloadPriority;
@@ -86785,6 +72474,7 @@
             public uint Packet;
             public LLUUID Image;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86829,23 +72519,25 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RequestImage --\n&quot;;
-                output += &quot;DownloadPriority: &quot; + DownloadPriority.ToString() + &quot;\n&quot;;
-                output += &quot;DiscardLevel: &quot; + DiscardLevel.ToString() + &quot;\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
-                output += &quot;Packet: &quot; + Packet.ToString() + &quot;\n&quot;;
-                output += &quot;Image: &quot; + Image.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RequestImage --&quot; + Environment.NewLine;
+                output += &quot;DownloadPriority: &quot; + DownloadPriority.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;DiscardLevel: &quot; + DiscardLevel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packet: &quot; + Packet.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Image: &quot; + Image.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;requestimage_agentdata&quot;)]
         public class AgentDataBlock
         {
             public LLUUID AgentID;
             public LLUUID SessionID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -86878,9 +72570,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -86941,12 +72633,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- RequestImage ---\n&quot;;
+            string output = &quot;--- RequestImage ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; RequestImage.Length; j++)
             {
-                output += RequestImage[j].ToString() + &quot;\n&quot;;
+                output += RequestImage[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -86956,6 +72648,7 @@
     public class ImageDataPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;imagedata_imageid&quot;)]
         public class ImageIDBlock
         {
             public LLUUID ID;
@@ -86963,6 +72656,7 @@
             public uint Size;
             public byte Codec;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87002,17 +72696,18 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ImageID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Packets: &quot; + Packets.ToString() + &quot;\n&quot;;
-                output += &quot;Size: &quot; + Size.ToString() + &quot;\n&quot;;
-                output += &quot;Codec: &quot; + Codec.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ImageID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packets: &quot; + Packets.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Size: &quot; + Size.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Codec: &quot; + Codec.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;imagedata_imagedata&quot;)]
         public class ImageDataBlock
         {
             private byte[] _data;
@@ -87027,6 +72722,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87063,8 +72759,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ImageData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ImageData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -87116,9 +72812,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ImageData ---\n&quot;;
-                output += ImageID.ToString() + &quot;\n&quot;;
-                output += ImageData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ImageData ---&quot; + Environment.NewLine;
+                output += ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += ImageData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -87128,11 +72824,13 @@
     public class ImagePacketPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;imagepacket_imageid&quot;)]
         public class ImageIDBlock
         {
             public LLUUID ID;
             public ushort Packet;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87165,15 +72863,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ImageID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Packet: &quot; + Packet.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ImageID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packet: &quot; + Packet.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;imagepacket_imagedata&quot;)]
         public class ImageDataBlock
         {
             private byte[] _data;
@@ -87188,6 +72887,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87224,8 +72924,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ImageData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ImageData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -87277,9 +72977,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ImagePacket ---\n&quot;;
-                output += ImageID.ToString() + &quot;\n&quot;;
-                output += ImageData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ImagePacket ---&quot; + Environment.NewLine;
+                output += ImageID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += ImageData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -87289,10 +72989,12 @@
     public class LayerDataPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;layerdata_layerid&quot;)]
         public class LayerIDBlock
         {
             public byte Type;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87321,14 +73023,15 @@
 
             public override string ToString()
             {
-                string output = &quot;-- LayerID --\n&quot;;
-                output += &quot;Type: &quot; + Type.ToString() + &quot;\n&quot;;
+                string output = &quot;-- LayerID --&quot; + Environment.NewLine;
+                output += &quot;Type: &quot; + Type.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;layerdata_layerdata&quot;)]
         public class LayerDataBlock
         {
             private byte[] _data;
@@ -87343,6 +73046,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87379,8 +73083,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- LayerData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
+                string output = &quot;-- LayerData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -87432,9 +73136,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- LayerData ---\n&quot;;
-                output += LayerID.ToString() + &quot;\n&quot;;
-                output += LayerData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- LayerData ---&quot; + Environment.NewLine;
+                output += LayerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += LayerData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -87444,6 +73148,7 @@
     public class ObjectUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ID;
@@ -87583,6 +73288,7 @@
             public byte ProfileHollow;
             public byte PathRevolutions;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87700,7 +73406,6 @@
                 bytes[i++] = (byte)((CRC &gt;&gt; 8) % 256);
                 bytes[i++] = (byte)((CRC &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((CRC &gt;&gt; 24) % 256);
-                if(JointPivot == null) { Console.WriteLine(&quot;Warning: JointPivot is null, in &quot; + this.GetType()); }
                 Array.Copy(JointPivot.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = PathEnd;
                 if(MediaURL == null) { Console.WriteLine(&quot;Warning: MediaURL is null, in &quot; + this.GetType()); }
@@ -87758,9 +73463,7 @@
                 if(FullID == null) { Console.WriteLine(&quot;Warning: FullID is null, in &quot; + this.GetType()); }
                 Array.Copy(FullID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = PathCurve;
-                if(Scale == null) { Console.WriteLine(&quot;Warning: Scale is null, in &quot; + this.GetType()); }
                 Array.Copy(Scale.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(JointAxisOrAnchor == null) { Console.WriteLine(&quot;Warning: JointAxisOrAnchor is null, in &quot; + this.GetType()); }
                 Array.Copy(JointAxisOrAnchor.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = Flags;
                 bytes[i++] = State;
@@ -87777,64 +73480,66 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ObjectData, &quot;ObjectData&quot;) + &quot;\n&quot;;
-                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
-                output += &quot;JointPivot: &quot; + JointPivot.ToString() + &quot;\n&quot;;
-                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextColor, &quot;TextColor&quot;) + &quot;\n&quot;;
-                output += &quot;ClickAction: &quot; + ClickAction.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;\n&quot;;
-                output += &quot;Gain: &quot; + Gain.ToString() + &quot;\n&quot;;
-                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureAnim, &quot;TextureAnim&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Text, &quot;Text&quot;) + &quot;\n&quot;;
-                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;\n&quot;;
-                output += &quot;Material: &quot; + Material.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(ExtraParams, &quot;ExtraParams&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(NameValue, &quot;NameValue&quot;) + &quot;\n&quot;;
-                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;\n&quot;;
-                output += &quot;Radius: &quot; + Radius.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;\n&quot;;
-                output += &quot;JointType: &quot; + JointType.ToString() + &quot;\n&quot;;
-                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(PSBlock, &quot;PSBlock&quot;) + &quot;\n&quot;;
-                output += &quot;PCode: &quot; + PCode.ToString() + &quot;\n&quot;;
-                output += &quot;FullID: &quot; + FullID.ToString() + &quot;\n&quot;;
-                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;\n&quot;;
-                output += &quot;Scale: &quot; + Scale.ToString() + &quot;\n&quot;;
-                output += &quot;JointAxisOrAnchor: &quot; + JointAxisOrAnchor.ToString() + &quot;\n&quot;;
-                output += &quot;Flags: &quot; + Flags.ToString() + &quot;\n&quot;;
-                output += &quot;State: &quot; + State.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;\n&quot;;
-                output += &quot;Sound: &quot; + Sound.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
-                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;\n&quot;;
-                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ObjectData, &quot;ObjectData&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;JointPivot: &quot; + JointPivot.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextColor, &quot;TextColor&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClickAction: &quot; + ClickAction.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Gain: &quot; + Gain.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureAnim, &quot;TextureAnim&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Text, &quot;Text&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Material: &quot; + Material.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(ExtraParams, &quot;ExtraParams&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(NameValue, &quot;NameValue&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Radius: &quot; + Radius.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;JointType: &quot; + JointType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(PSBlock, &quot;PSBlock&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;PCode: &quot; + PCode.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;FullID: &quot; + FullID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Scale: &quot; + Scale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;JointAxisOrAnchor: &quot; + JointAxisOrAnchor.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Flags: &quot; + Flags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;State: &quot; + State.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Sound: &quot; + Sound.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdate_regiondata&quot;)]
         public class RegionDataBlock
         {
             public ushort TimeDilation;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -87873,9 +73578,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -87937,12 +73642,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectUpdate ---\n&quot;;
+            string output = &quot;--- ObjectUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += RegionData.ToString() + &quot;\n&quot;;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -87952,6 +73657,7 @@
     public class ObjectUpdateCompressedPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdatecompressed_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint UpdateFlags;
@@ -87967,6 +73673,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88008,20 +73715,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdatecompressed_regiondata&quot;)]
         public class RegionDataBlock
         {
             public ushort TimeDilation;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88060,9 +73769,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88123,12 +73832,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectUpdateCompressed ---\n&quot;;
+            string output = &quot;--- ObjectUpdateCompressed ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += RegionData.ToString() + &quot;\n&quot;;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -88138,12 +73847,14 @@
     public class ObjectUpdateCachedPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdatecached_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ID;
             public uint UpdateFlags;
             public uint CRC;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88185,21 +73896,23 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;\n&quot;;
-                output += &quot;CRC: &quot; + CRC.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UpdateFlags: &quot; + UpdateFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CRC: &quot; + CRC.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;objectupdatecached_regiondata&quot;)]
         public class RegionDataBlock
         {
             public ushort TimeDilation;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88238,9 +73951,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88301,12 +74014,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ObjectUpdateCached ---\n&quot;;
+            string output = &quot;--- ObjectUpdateCached ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += RegionData.ToString() + &quot;\n&quot;;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -88316,6 +74029,7 @@
     public class ImprovedTerseObjectUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;improvedterseobjectupdate_objectdata&quot;)]
         public class ObjectDataBlock
         {
             private byte[] _data;
@@ -88341,6 +74055,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88384,20 +74099,22 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;improvedterseobjectupdate_regiondata&quot;)]
         public class RegionDataBlock
         {
             public ushort TimeDilation;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88436,9 +74153,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;TimeDilation: &quot; + TimeDilation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88499,12 +74216,12 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ImprovedTerseObjectUpdate ---\n&quot;;
+            string output = &quot;--- ImprovedTerseObjectUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += RegionData.ToString() + &quot;\n&quot;;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -88514,10 +74231,12 @@
     public class KillObjectPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;killobject_objectdata&quot;)]
         public class ObjectDataBlock
         {
             public uint ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88549,8 +74268,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ObjectData --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88606,10 +74325,10 @@
 
         public override string ToString()
         {
-            string output = &quot;--- KillObject ---\n&quot;;
+            string output = &quot;--- KillObject ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; ObjectData.Length; j++)
             {
-                output += ObjectData[j].ToString() + &quot;\n&quot;;
+                output += ObjectData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -88620,6 +74339,7 @@
     public class AgentToNewRegionPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;agenttonewregion_regiondata&quot;)]
         public class RegionDataBlock
         {
             public uint IP;
@@ -88627,6 +74347,7 @@
             public ushort Port;
             public ulong Handle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88673,11 +74394,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- RegionData --\n&quot;;
-                output += &quot;IP: &quot; + IP.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;Port: &quot; + Port.ToString() + &quot;\n&quot;;
-                output += &quot;Handle: &quot; + Handle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- RegionData --&quot; + Environment.NewLine;
+                output += &quot;IP: &quot; + IP.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Port: &quot; + Port.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Handle: &quot; + Handle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88724,8 +74445,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AgentToNewRegion ---\n&quot;;
-                output += RegionData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AgentToNewRegion ---&quot; + Environment.NewLine;
+                output += RegionData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -88735,6 +74456,7 @@
     public class TransferPacketPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;transferpacket_transferdata&quot;)]
         public class TransferDataBlock
         {
             public LLUUID TransferID;
@@ -88753,6 +74475,7 @@
             public int ChannelType;
             public int Status;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88807,12 +74530,12 @@
 
             public override string ToString()
             {
-                string output = &quot;-- TransferData --\n&quot;;
-                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += &quot;Packet: &quot; + Packet.ToString() + &quot;\n&quot;;
-                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
+                string output = &quot;-- TransferData --&quot; + Environment.NewLine;
+                output += &quot;TransferID: &quot; + TransferID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packet: &quot; + Packet.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChannelType: &quot; + ChannelType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Status: &quot; + Status.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -88859,8 +74582,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- TransferPacket ---\n&quot;;
-                output += TransferData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- TransferPacket ---&quot; + Environment.NewLine;
+                output += TransferData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -88870,6 +74593,7 @@
     public class SendXferPacketPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;sendxferpacket_datapacket&quot;)]
         public class DataPacketBlock
         {
             private byte[] _data;
@@ -88884,6 +74608,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88920,19 +74645,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- DataPacket --\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
+                string output = &quot;-- DataPacket --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;sendxferpacket_xferid&quot;)]
         public class XferIDBlock
         {
             public ulong ID;
             public uint Packet;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -88973,9 +74700,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- XferID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Packet: &quot; + Packet.ToString() + &quot;\n&quot;;
+                string output = &quot;-- XferID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packet: &quot; + Packet.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -89027,9 +74754,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SendXferPacket ---\n&quot;;
-                output += DataPacket.ToString() + &quot;\n&quot;;
-                output += XferID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SendXferPacket ---&quot; + Environment.NewLine;
+                output += DataPacket.ToString() + &quot;&quot; + Environment.NewLine;
+                output += XferID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -89039,11 +74766,13 @@
     public class ConfirmXferPacketPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;confirmxferpacket_xferid&quot;)]
         public class XferIDBlock
         {
             public ulong ID;
             public uint Packet;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89084,9 +74813,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- XferID --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;Packet: &quot; + Packet.ToString() + &quot;\n&quot;;
+                string output = &quot;-- XferID --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Packet: &quot; + Packet.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -89133,8 +74862,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ConfirmXferPacket ---\n&quot;;
-                output += XferID.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ConfirmXferPacket ---&quot; + Environment.NewLine;
+                output += XferID.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -89144,10 +74873,12 @@
     public class AvatarAnimationPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avataranimation_animationsourcelist&quot;)]
         public class AnimationSourceListBlock
         {
             public LLUUID ObjectID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89177,18 +74908,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AnimationSourceList --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AnimationSourceList --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avataranimation_sender&quot;)]
         public class SenderBlock
         {
             public LLUUID ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89218,19 +74951,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- Sender --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- Sender --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avataranimation_animationlist&quot;)]
         public class AnimationListBlock
         {
             public LLUUID AnimID;
             public int AnimSequenceID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89265,9 +75000,9 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AnimationList --\n&quot;;
-                output += &quot;AnimID: &quot; + AnimID.ToString() + &quot;\n&quot;;
-                output += &quot;AnimSequenceID: &quot; + AnimSequenceID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AnimationList --&quot; + Environment.NewLine;
+                output += &quot;AnimID: &quot; + AnimID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AnimSequenceID: &quot; + AnimSequenceID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -89342,15 +75077,15 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarAnimation ---\n&quot;;
+            string output = &quot;--- AvatarAnimation ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AnimationSourceList.Length; j++)
             {
-                output += AnimationSourceList[j].ToString() + &quot;\n&quot;;
+                output += AnimationSourceList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += Sender.ToString() + &quot;\n&quot;;
+                output += Sender.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; AnimationList.Length; j++)
             {
-                output += AnimationList[j].ToString() + &quot;\n&quot;;
+                output += AnimationList[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -89361,6 +75096,7 @@
     public class AvatarSitResponsePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarsitresponse_sittransform&quot;)]
         public class SitTransformBlock
         {
             public bool AutoPilot;
@@ -89370,6 +75106,7 @@
             public LLVector3 SitPosition;
             public LLQuaternion SitRotation;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89400,35 +75137,33 @@
             {
                 bytes[i++] = (byte)((AutoPilot) ? 1 : 0);
                 bytes[i++] = (byte)((ForceMouselook) ? 1 : 0);
-                if(CameraEyeOffset == null) { Console.WriteLine(&quot;Warning: CameraEyeOffset is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraEyeOffset.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(CameraAtOffset == null) { Console.WriteLine(&quot;Warning: CameraAtOffset is null, in &quot; + this.GetType()); }
                 Array.Copy(CameraAtOffset.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(SitPosition == null) { Console.WriteLine(&quot;Warning: SitPosition is null, in &quot; + this.GetType()); }
                 Array.Copy(SitPosition.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(SitRotation == null) { Console.WriteLine(&quot;Warning: SitRotation is null, in &quot; + this.GetType()); }
                 Array.Copy(SitRotation.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- SitTransform --\n&quot;;
-                output += &quot;AutoPilot: &quot; + AutoPilot.ToString() + &quot;\n&quot;;
-                output += &quot;ForceMouselook: &quot; + ForceMouselook.ToString() + &quot;\n&quot;;
-                output += &quot;CameraEyeOffset: &quot; + CameraEyeOffset.ToString() + &quot;\n&quot;;
-                output += &quot;CameraAtOffset: &quot; + CameraAtOffset.ToString() + &quot;\n&quot;;
-                output += &quot;SitPosition: &quot; + SitPosition.ToString() + &quot;\n&quot;;
-                output += &quot;SitRotation: &quot; + SitRotation.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SitTransform --&quot; + Environment.NewLine;
+                output += &quot;AutoPilot: &quot; + AutoPilot.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ForceMouselook: &quot; + ForceMouselook.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraEyeOffset: &quot; + CameraEyeOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;CameraAtOffset: &quot; + CameraAtOffset.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SitPosition: &quot; + SitPosition.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SitRotation: &quot; + SitRotation.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;avatarsitresponse_sitobject&quot;)]
         public class SitObjectBlock
         {
             public LLUUID ID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89458,8 +75193,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- SitObject --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SitObject --&quot; + Environment.NewLine;
+                output += &quot;ID: &quot; + ID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -89512,9 +75247,9 @@
 
         public override string ToString()
         {
-            string output = &quot;--- AvatarSitResponse ---\n&quot;;
-                output += SitTransform.ToString() + &quot;\n&quot;;
-                output += SitObject.ToString() + &quot;\n&quot;;
+            string output = &quot;--- AvatarSitResponse ---&quot; + Environment.NewLine;
+                output += SitTransform.ToString() + &quot;&quot; + Environment.NewLine;
+                output += SitObject.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -89524,10 +75259,12 @@
     public class CameraConstraintPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;cameraconstraint_cameracollideplane&quot;)]
         public class CameraCollidePlaneBlock
         {
             public LLVector4 Plane;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89551,14 +75288,13 @@
 
             public void ToBytes(byte[] bytes, ref int i)
             {
-                if(Plane == null) { Console.WriteLine(&quot;Warning: Plane is null, in &quot; + this.GetType()); }
                 Array.Copy(Plane.GetBytes(), 0, bytes, i, 16); i += 16;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- CameraCollidePlane --\n&quot;;
-                output += &quot;Plane: &quot; + Plane.ToString() + &quot;\n&quot;;
+                string output = &quot;-- CameraCollidePlane --&quot; + Environment.NewLine;
+                output += &quot;Plane: &quot; + Plane.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -89606,8 +75342,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- CameraConstraint ---\n&quot;;
-                output += CameraCollidePlane.ToString() + &quot;\n&quot;;
+            string output = &quot;--- CameraConstraint ---&quot; + Environment.NewLine;
+                output += CameraCollidePlane.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -89617,6 +75353,7 @@
     public class ParcelPropertiesPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;parcelproperties_parceldata&quot;)]
         public class ParcelDataBlock
         {
             public bool ReservedNewbie;
@@ -89720,6 +75457,7 @@
             public int ClaimPrice;
             public int RentPrice;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -89823,11 +75561,8 @@
                 bytes[i++] = (byte)((SelectedPrims &gt;&gt; 24) % 256);
                 if(MediaID == null) { Console.WriteLine(&quot;Warning: MediaID is null, in &quot; + this.GetType()); }
                 Array.Copy(MediaID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(UserLookAt == null) { Console.WriteLine(&quot;Warning: UserLookAt is null, in &quot; + this.GetType()); }
                 Array.Copy(UserLookAt.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AABBMax == null) { Console.WriteLine(&quot;Warning: AABBMax is null, in &quot; + this.GetType()); }
                 Array.Copy(AABBMax.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AABBMin == null) { Console.WriteLine(&quot;Warning: AABBMin is null, in &quot; + this.GetType()); }
                 Array.Copy(AABBMin.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(RequestResult % 256);
                 bytes[i++] = (byte)((RequestResult &gt;&gt; 8) % 256);
@@ -89859,7 +75594,6 @@
                 bytes[i++] = (byte)((OtherCount &gt;&gt; 16) % 256);
                 bytes[i++] = (byte)((OtherCount &gt;&gt; 24) % 256);
                 bytes[i++] = (byte)((IsGroupOwned) ? 1 : 0);
-                if(UserLocation == null) { Console.WriteLine(&quot;Warning: UserLocation is null, in &quot; + this.GetType()); }
                 Array.Copy(UserLocation.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(MaxPrims % 256);
                 bytes[i++] = (byte)((MaxPrims &gt;&gt; 8) % 256);
@@ -89959,57 +75693,57 @@
 
             public override string ToString()
             {
-                string output = &quot;-- ParcelData --\n&quot;;
-                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;\n&quot;;
-                output += &quot;GroupPrims: &quot; + GroupPrims.ToString() + &quot;\n&quot;;
-                output += &quot;SelectedPrims: &quot; + SelectedPrims.ToString() + &quot;\n&quot;;
-                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;\n&quot;;
-                output += &quot;UserLookAt: &quot; + UserLookAt.ToString() + &quot;\n&quot;;
-                output += &quot;AABBMax: &quot; + AABBMax.ToString() + &quot;\n&quot;;
-                output += &quot;AABBMin: &quot; + AABBMin.ToString() + &quot;\n&quot;;
-                output += &quot;RequestResult: &quot; + RequestResult.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerPrims: &quot; + OwnerPrims.ToString() + &quot;\n&quot;;
-                output += &quot;RegionPushOverride: &quot; + RegionPushOverride.ToString() + &quot;\n&quot;;
-                output += &quot;RegionDenyAnonymous: &quot; + RegionDenyAnonymous.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;\n&quot;;
-                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;\n&quot;;
-                output += &quot;SimWideMaxPrims: &quot; + SimWideMaxPrims.ToString() + &quot;\n&quot;;
-                output += &quot;TotalPrims: &quot; + TotalPrims.ToString() + &quot;\n&quot;;
-                output += &quot;OtherCount: &quot; + OtherCount.ToString() + &quot;\n&quot;;
-                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;UserLocation: &quot; + UserLocation.ToString() + &quot;\n&quot;;
-                output += &quot;MaxPrims: &quot; + MaxPrims.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;\n&quot;;
-                output += &quot;OtherCleanTime: &quot; + OtherCleanTime.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;\n&quot;;
-                output += &quot;Area: &quot; + Area.ToString() + &quot;\n&quot;;
-                output += &quot;OtherPrims: &quot; + OtherPrims.ToString() + &quot;\n&quot;;
-                output += &quot;RegionDenyIdentified: &quot; + RegionDenyIdentified.ToString() + &quot;\n&quot;;
-                output += &quot;Category: &quot; + Category.ToString() + &quot;\n&quot;;
-                output += &quot;PublicCount: &quot; + PublicCount.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionDenyTransacted: &quot; + RegionDenyTransacted.ToString() + &quot;\n&quot;;
-                output += &quot;SelfCount: &quot; + SelfCount.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Bitmap, &quot;Bitmap&quot;) + &quot;\n&quot;;
-                output += &quot;Status: &quot; + Status.ToString() + &quot;\n&quot;;
-                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;\n&quot;;
-                output += &quot;SnapSelection: &quot; + SnapSelection.ToString() + &quot;\n&quot;;
-                output += &quot;LandingType: &quot; + LandingType.ToString() + &quot;\n&quot;;
-                output += &quot;SimWideTotalPrims: &quot; + SimWideTotalPrims.ToString() + &quot;\n&quot;;
-                output += &quot;AuctionID: &quot; + AuctionID.ToString() + &quot;\n&quot;;
-                output += &quot;AuthBuyerID: &quot; + AuthBuyerID.ToString() + &quot;\n&quot;;
-                output += &quot;PassHours: &quot; + PassHours.ToString() + &quot;\n&quot;;
-                output += &quot;ParcelFlags: &quot; + ParcelFlags.ToString() + &quot;\n&quot;;
-                output += &quot;PassPrice: &quot; + PassPrice.ToString() + &quot;\n&quot;;
-                output += &quot;ClaimDate: &quot; + ClaimDate.ToString() + &quot;\n&quot;;
-                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(MusicURL, &quot;MusicURL&quot;) + &quot;\n&quot;;
-                output += &quot;ParcelPrimBonus: &quot; + ParcelPrimBonus.ToString() + &quot;\n&quot;;
-                output += &quot;ClaimPrice: &quot; + ClaimPrice.ToString() + &quot;\n&quot;;
-                output += &quot;RentPrice: &quot; + RentPrice.ToString() + &quot;\n&quot;;
+                string output = &quot;-- ParcelData --&quot; + Environment.NewLine;
+                output += &quot;ReservedNewbie: &quot; + ReservedNewbie.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupPrims: &quot; + GroupPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SelectedPrims: &quot; + SelectedPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MediaID: &quot; + MediaID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UserLookAt: &quot; + UserLookAt.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AABBMax: &quot; + AABBMax.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AABBMin: &quot; + AABBMin.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RequestResult: &quot; + RequestResult.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerPrims: &quot; + OwnerPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionPushOverride: &quot; + RegionPushOverride.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionDenyAnonymous: &quot; + RegionDenyAnonymous.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MediaURL, &quot;MediaURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocalID: &quot; + LocalID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimWideMaxPrims: &quot; + SimWideMaxPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;TotalPrims: &quot; + TotalPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OtherCount: &quot; + OtherCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;IsGroupOwned: &quot; + IsGroupOwned.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UserLocation: &quot; + UserLocation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MaxPrims: &quot; + MaxPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Name, &quot;Name&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;OtherCleanTime: &quot; + OtherCleanTime.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Desc, &quot;Desc&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Area: &quot; + Area.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OtherPrims: &quot; + OtherPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionDenyIdentified: &quot; + RegionDenyIdentified.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Category: &quot; + Category.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PublicCount: &quot; + PublicCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SalePrice: &quot; + SalePrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SequenceID: &quot; + SequenceID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionDenyTransacted: &quot; + RegionDenyTransacted.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SelfCount: &quot; + SelfCount.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Bitmap, &quot;Bitmap&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;Status: &quot; + Status.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapshotID: &quot; + SnapshotID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SnapSelection: &quot; + SnapSelection.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LandingType: &quot; + LandingType.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SimWideTotalPrims: &quot; + SimWideTotalPrims.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AuctionID: &quot; + AuctionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AuthBuyerID: &quot; + AuthBuyerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PassHours: &quot; + PassHours.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelFlags: &quot; + ParcelFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PassPrice: &quot; + PassPrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClaimDate: &quot; + ClaimDate.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;MediaAutoScale: &quot; + MediaAutoScale.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(MusicURL, &quot;MusicURL&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParcelPrimBonus: &quot; + ParcelPrimBonus.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ClaimPrice: &quot; + ClaimPrice.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RentPrice: &quot; + RentPrice.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -90057,139 +75791,23 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ParcelProperties ---\n&quot;;
-                output += ParcelData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ParcelProperties ---&quot; + Environment.NewLine;
+                output += ParcelData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class EdgeDataPacketPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class EdgeDataBlock
-        {
-            public byte LayerType;
-            public byte Direction;
-            private byte[] _layerdata;
-            public byte[] LayerData
-            {
-                get { return _layerdata; }
-                set
-                {
-                    if (value == null) { _layerdata = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _layerdata = new byte[value.Length]; Array.Copy(value, _layerdata, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 2;
-                    if (LayerData != null) { length += 2 + LayerData.Length; }
-                    return length;
-                }
-            }
-
-            public EdgeDataBlock() { }
-            public EdgeDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    LayerType = (byte)bytes[i++];
-                    Direction = (byte)bytes[i++];
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _layerdata = new byte[length];
-                    Array.Copy(bytes, i, _layerdata, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = LayerType;
-                bytes[i++] = Direction;
-                if(LayerData == null) { Console.WriteLine(&quot;Warning: LayerData is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(LayerData.Length % 256);
-                bytes[i++] = (byte)((LayerData.Length &gt;&gt; 8) % 256);
-                Array.Copy(LayerData, 0, bytes, i, LayerData.Length); i += LayerData.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- EdgeData --\n&quot;;
-                output += &quot;LayerType: &quot; + LayerType.ToString() + &quot;\n&quot;;
-                output += &quot;Direction: &quot; + Direction.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(LayerData, &quot;LayerData&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.EdgeDataPacket; } }
-        public EdgeDataBlock EdgeData;
-
-        public EdgeDataPacketPacket()
-        {
-            Header = new HighHeader();
-            Header.ID = 25;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            EdgeData = new EdgeDataBlock();
-        }
-
-        public EdgeDataPacketPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new HighHeader(bytes, ref i, ref packetEnd);
-            EdgeData = new EdgeDataBlock(bytes, ref i);
-        }
-
-        public EdgeDataPacketPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            EdgeData = new EdgeDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 5;
-            length += EdgeData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            EdgeData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- EdgeDataPacket ---\n&quot;;
-                output += EdgeData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class ChildAgentUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_visualparam&quot;)]
         public class VisualParamBlock
         {
             public byte ParamValue;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90218,18 +75836,20 @@
 
             public override string ToString()
             {
-                string output = &quot;-- VisualParam --\n&quot;;
-                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;\n&quot;;
+                string output = &quot;-- VisualParam --&quot; + Environment.NewLine;
+                output += &quot;ParamValue: &quot; + ParamValue.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_granterblock&quot;)]
         public class GranterBlockBlock
         {
             public LLUUID GranterID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90259,19 +75879,21 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GranterBlock --\n&quot;;
-                output += &quot;GranterID: &quot; + GranterID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GranterBlock --&quot; + Environment.NewLine;
+                output += &quot;GranterID: &quot; + GranterID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_animationdata&quot;)]
         public class AnimationDataBlock
         {
             public LLUUID ObjectID;
             public LLUUID Animation;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90304,15 +75926,16 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AnimationData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Animation: &quot; + Animation.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AnimationData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Animation: &quot; + Animation.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint ViewerCircuitCode;
@@ -90362,6 +75985,7 @@
             public uint LocomotionState;
             public LLUUID ActiveGroupID;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90436,13 +76060,10 @@
                 if(AgentID == null) { Console.WriteLine(&quot;Warning: AgentID is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentID.GetBytes(), 0, bytes, i, 16); i += 16;
                 bytes[i++] = (byte)((ChangedGrid) ? 1 : 0);
-                if(HeadRotation == null) { Console.WriteLine(&quot;Warning: HeadRotation is null, in &quot; + this.GetType()); }
                 Array.Copy(HeadRotation.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(LeftAxis == null) { Console.WriteLine(&quot;Warning: LeftAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(LeftAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Size == null) { Console.WriteLine(&quot;Warning: Size is null, in &quot; + this.GetType()); }
                 Array.Copy(Size.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = GodLevel;
                 bytes[i++] = (byte)(RegionHandle % 256);
@@ -90454,26 +76075,20 @@
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
                 bytes[i++] = AgentAccess;
-                if(AgentVel == null) { Console.WriteLine(&quot;Warning: AgentVel is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentVel.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AgentPos == null) { Console.WriteLine(&quot;Warning: AgentPos is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentPos.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(PreyAgent == null) { Console.WriteLine(&quot;Warning: PreyAgent is null, in &quot; + this.GetType()); }
                 Array.Copy(PreyAgent.GetBytes(), 0, bytes, i, 16); i += 16;
                 if(Throttles == null) { Console.WriteLine(&quot;Warning: Throttles is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)Throttles.Length;
                 Array.Copy(Throttles, 0, bytes, i, Throttles.Length); i += Throttles.Length;
-                if(UpAxis == null) { Console.WriteLine(&quot;Warning: UpAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(UpAxis.GetBytes(), 0, bytes, i, 12); i += 12;
                 if(AgentTextures == null) { Console.WriteLine(&quot;Warning: AgentTextures is null, in &quot; + this.GetType()); }
                 bytes[i++] = (byte)(AgentTextures.Length % 256);
                 bytes[i++] = (byte)((AgentTextures.Length &gt;&gt; 8) % 256);
                 Array.Copy(AgentTextures, 0, bytes, i, AgentTextures.Length); i += AgentTextures.Length;
-                if(AtAxis == null) { Console.WriteLine(&quot;Warning: AtAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(AtAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Center == null) { Console.WriteLine(&quot;Warning: Center is null, in &quot; + this.GetType()); }
                 Array.Copy(Center.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(BodyRotation == null) { Console.WriteLine(&quot;Warning: BodyRotation is null, in &quot; + this.GetType()); }
                 Array.Copy(BodyRotation.GetBytes(), 0, bytes, i, 12); i += 12;
                 ba = BitConverter.GetBytes(Aspect);
                 if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }
@@ -90492,45 +76107,47 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;\n&quot;;
-                output += &quot;ControlFlags: &quot; + ControlFlags.ToString() + &quot;\n&quot;;
-                output += &quot;Far: &quot; + Far.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;ChangedGrid: &quot; + ChangedGrid.ToString() + &quot;\n&quot;;
-                output += &quot;HeadRotation: &quot; + HeadRotation.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;LeftAxis: &quot; + LeftAxis.ToString() + &quot;\n&quot;;
-                output += &quot;Size: &quot; + Size.ToString() + &quot;\n&quot;;
-                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;AgentAccess: &quot; + AgentAccess.ToString() + &quot;\n&quot;;
-                output += &quot;AgentVel: &quot; + AgentVel.ToString() + &quot;\n&quot;;
-                output += &quot;AgentPos: &quot; + AgentPos.ToString() + &quot;\n&quot;;
-                output += &quot;PreyAgent: &quot; + PreyAgent.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Throttles, &quot;Throttles&quot;) + &quot;\n&quot;;
-                output += &quot;UpAxis: &quot; + UpAxis.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(AgentTextures, &quot;AgentTextures&quot;) + &quot;\n&quot;;
-                output += &quot;AtAxis: &quot; + AtAxis.ToString() + &quot;\n&quot;;
-                output += &quot;Center: &quot; + Center.ToString() + &quot;\n&quot;;
-                output += &quot;BodyRotation: &quot; + BodyRotation.ToString() + &quot;\n&quot;;
-                output += &quot;Aspect: &quot; + Aspect.ToString() + &quot;\n&quot;;
-                output += &quot;AlwaysRun: &quot; + AlwaysRun.ToString() + &quot;\n&quot;;
-                output += &quot;EnergyLevel: &quot; + EnergyLevel.ToString() + &quot;\n&quot;;
-                output += &quot;LocomotionState: &quot; + LocomotionState.ToString() + &quot;\n&quot;;
-                output += &quot;ActiveGroupID: &quot; + ActiveGroupID.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ControlFlags: &quot; + ControlFlags.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Far: &quot; + Far.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChangedGrid: &quot; + ChangedGrid.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;HeadRotation: &quot; + HeadRotation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LeftAxis: &quot; + LeftAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Size: &quot; + Size.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GodLevel: &quot; + GodLevel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentAccess: &quot; + AgentAccess.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentVel: &quot; + AgentVel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentPos: &quot; + AgentPos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;PreyAgent: &quot; + PreyAgent.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(Throttles, &quot;Throttles&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;UpAxis: &quot; + UpAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(AgentTextures, &quot;AgentTextures&quot;) + &quot;&quot; + Environment.NewLine;
+                output += &quot;AtAxis: &quot; + AtAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Center: &quot; + Center.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;BodyRotation: &quot; + BodyRotation.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Aspect: &quot; + Aspect.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AlwaysRun: &quot; + AlwaysRun.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;EnergyLevel: &quot; + EnergyLevel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LocomotionState: &quot; + LocomotionState.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ActiveGroupID: &quot; + ActiveGroupID.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_groupdata&quot;)]
         public class GroupDataBlock
         {
             public ulong GroupPowers;
             public LLUUID GroupID;
             public bool AcceptNotices;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90571,16 +76188,17 @@
 
             public override string ToString()
             {
-                string output = &quot;-- GroupData --\n&quot;;
-                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;\n&quot;;
+                string output = &quot;-- GroupData --&quot; + Environment.NewLine;
+                output += &quot;GroupPowers: &quot; + GroupPowers.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AcceptNotices: &quot; + AcceptNotices.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
         }
 
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentupdate_nvpairdata&quot;)]
         public class NVPairDataBlock
         {
             private byte[] _nvpairs;
@@ -90595,6 +76213,7 @@
                 }
             }
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90631,8 +76250,8 @@
 
             public override string ToString()
             {
-                string output = &quot;-- NVPairData --\n&quot;;
-                output += Helpers.FieldToString(NVPairs, &quot;NVPairs&quot;) + &quot;\n&quot;;
+                string output = &quot;-- NVPairData --&quot; + Environment.NewLine;
+                output += Helpers.FieldToString(NVPairs, &quot;NVPairs&quot;) + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -90750,27 +76369,27 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChildAgentUpdate ---\n&quot;;
+            string output = &quot;--- ChildAgentUpdate ---&quot; + Environment.NewLine;
             for (int j = 0; j &lt; VisualParam.Length; j++)
             {
-                output += VisualParam[j].ToString() + &quot;\n&quot;;
+                output += VisualParam[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             for (int j = 0; j &lt; GranterBlock.Length; j++)
             {
-                output += GranterBlock[j].ToString() + &quot;\n&quot;;
+                output += GranterBlock[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             for (int j = 0; j &lt; AnimationData.Length; j++)
             {
-                output += AnimationData[j].ToString() + &quot;\n&quot;;
+                output += AnimationData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
-                output += AgentData.ToString() + &quot;\n&quot;;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             for (int j = 0; j &lt; GroupData.Length; j++)
             {
-                output += GroupData[j].ToString() + &quot;\n&quot;;
+                output += GroupData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             for (int j = 0; j &lt; NVPairData.Length; j++)
             {
-                output += NVPairData[j].ToString() + &quot;\n&quot;;
+                output += NVPairData[j].ToString() + &quot;&quot; + Environment.NewLine;
             }
             return output;
         }
@@ -90781,6 +76400,7 @@
     public class ChildAgentAlivePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentalive_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint ViewerCircuitCode;
@@ -90788,6 +76408,7 @@
             public LLUUID SessionID;
             public ulong RegionHandle;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90834,11 +76455,11 @@
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -90885,8 +76506,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChildAgentAlive ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChildAgentAlive ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
@@ -90896,6 +76517,7 @@
     public class ChildAgentPositionUpdatePacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;childagentpositionupdate_agentdata&quot;)]
         public class AgentDataBlock
         {
             public uint ViewerCircuitCode;
@@ -90911,6 +76533,7 @@
             public LLVector3 AtAxis;
             public LLVector3 Center;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -90954,9 +76577,7 @@
                 bytes[i++] = (byte)((ChangedGrid) ? 1 : 0);
                 if(SessionID == null) { Console.WriteLine(&quot;Warning: SessionID is null, in &quot; + this.GetType()); }
                 Array.Copy(SessionID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(LeftAxis == null) { Console.WriteLine(&quot;Warning: LeftAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(LeftAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Size == null) { Console.WriteLine(&quot;Warning: Size is null, in &quot; + this.GetType()); }
                 Array.Copy(Size.GetBytes(), 0, bytes, i, 12); i += 12;
                 bytes[i++] = (byte)(RegionHandle % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 8) % 256);
@@ -90966,33 +76587,28 @@
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 40) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 48) % 256);
                 bytes[i++] = (byte)((RegionHandle &gt;&gt; 56) % 256);
-                if(AgentVel == null) { Console.WriteLine(&quot;Warning: AgentVel is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentVel.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AgentPos == null) { Console.WriteLine(&quot;Warning: AgentPos is null, in &quot; + this.GetType()); }
                 Array.Copy(AgentPos.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(UpAxis == null) { Console.WriteLine(&quot;Warning: UpAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(UpAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(AtAxis == null) { Console.WriteLine(&quot;Warning: AtAxis is null, in &quot; + this.GetType()); }
                 Array.Copy(AtAxis.GetBytes(), 0, bytes, i, 12); i += 12;
-                if(Center == null) { Console.WriteLine(&quot;Warning: Center is null, in &quot; + this.GetType()); }
                 Array.Copy(Center.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- AgentData --\n&quot;;
-                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;\n&quot;;
-                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;\n&quot;;
-                output += &quot;ChangedGrid: &quot; + ChangedGrid.ToString() + &quot;\n&quot;;
-                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;\n&quot;;
-                output += &quot;LeftAxis: &quot; + LeftAxis.ToString() + &quot;\n&quot;;
-                output += &quot;Size: &quot; + Size.ToString() + &quot;\n&quot;;
-                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;\n&quot;;
-                output += &quot;AgentVel: &quot; + AgentVel.ToString() + &quot;\n&quot;;
-                output += &quot;AgentPos: &quot; + AgentPos.ToString() + &quot;\n&quot;;
-                output += &quot;UpAxis: &quot; + UpAxis.ToString() + &quot;\n&quot;;
-                output += &quot;AtAxis: &quot; + AtAxis.ToString() + &quot;\n&quot;;
-                output += &quot;Center: &quot; + Center.ToString() + &quot;\n&quot;;
+                string output = &quot;-- AgentData --&quot; + Environment.NewLine;
+                output += &quot;ViewerCircuitCode: &quot; + ViewerCircuitCode.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentID: &quot; + AgentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ChangedGrid: &quot; + ChangedGrid.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SessionID: &quot; + SessionID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;LeftAxis: &quot; + LeftAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Size: &quot; + Size.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;RegionHandle: &quot; + RegionHandle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentVel: &quot; + AgentVel.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AgentPos: &quot; + AgentPos.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;UpAxis: &quot; + UpAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;AtAxis: &quot; + AtAxis.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Center: &quot; + Center.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -91039,535 +76655,18 @@
 
         public override string ToString()
         {
-            string output = &quot;--- ChildAgentPositionUpdate ---\n&quot;;
-                output += AgentData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- ChildAgentPositionUpdate ---&quot; + Environment.NewLine;
+                output += AgentData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 
     }
 
     /// &lt;exclude/&gt;
-    public class PassObjectPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class ObjectDataBlock
-        {
-            public LLUUID ID;
-            public bool GroupOwned;
-            public sbyte PathTwistBegin;
-            public byte PathEnd;
-            public short AngVelX;
-            public short AngVelY;
-            public short AngVelZ;
-            public uint BaseMask;
-            public byte ProfileBegin;
-            public short SubType;
-            public sbyte PathRadiusOffset;
-            public short VelX;
-            public sbyte PathSkew;
-            public short VelY;
-            public short VelZ;
-            private byte[] _data;
-            public byte[] Data
-            {
-                get { return _data; }
-                set
-                {
-                    if (value == null) { _data = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _data = new byte[value.Length]; Array.Copy(value, _data, value.Length); }
-                }
-            }
-            public LLUUID ParentID;
-            public short PosX;
-            public short PosY;
-            public short PosZ;
-            public byte ProfileCurve;
-            public byte PathScaleX;
-            public byte PathScaleY;
-            public LLUUID GroupID;
-            public byte Material;
-            public LLUUID OwnerID;
-            public LLUUID CreatorID;
-            public byte PathShearX;
-            public byte PathShearY;
-            public sbyte PathTaperX;
-            public sbyte PathTaperY;
-            public byte ProfileEnd;
-            public byte UsePhysics;
-            public byte PathBegin;
-            public byte Active;
-            public byte PCode;
-            public byte PathCurve;
-            public uint EveryoneMask;
-            public LLVector3 Scale;
-            public byte State;
-            public sbyte PathTwist;
-            private byte[] _textureentry;
-            public byte[] TextureEntry
-            {
-                get { return _textureentry; }
-                set
-                {
-                    if (value == null) { _textureentry = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _textureentry = new byte[value.Length]; Array.Copy(value, _textureentry, value.Length); }
-                }
-            }
-            public byte ProfileHollow;
-            public byte PathRevolutions;
-            public LLQuaternion Rotation;
-            public uint NextOwnerMask;
-            public uint GroupMask;
-            public uint OwnerMask;
-
-            public int Length
-            {
-                get
-                {
-                    int length = 168;
-                    if (Data != null) { length += 2 + Data.Length; }
-                    if (TextureEntry != null) { length += 2 + TextureEntry.Length; }
-                    return length;
-                }
-            }
-
-            public ObjectDataBlock() { }
-            public ObjectDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    ID = new LLUUID(bytes, i); i += 16;
-                    GroupOwned = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    PathTwistBegin = (sbyte)bytes[i++];
-                    PathEnd = (byte)bytes[i++];
-                    AngVelX = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    AngVelY = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    AngVelZ = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    BaseMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    ProfileBegin = (byte)bytes[i++];
-                    SubType = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    PathRadiusOffset = (sbyte)bytes[i++];
-                    VelX = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    PathSkew = (sbyte)bytes[i++];
-                    VelY = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    VelZ = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _data = new byte[length];
-                    Array.Copy(bytes, i, _data, 0, length); i += length;
-                    ParentID = new LLUUID(bytes, i); i += 16;
-                    PosX = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    PosY = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    PosZ = (short)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    ProfileCurve = (byte)bytes[i++];
-                    PathScaleX = (byte)bytes[i++];
-                    PathScaleY = (byte)bytes[i++];
-                    GroupID = new LLUUID(bytes, i); i += 16;
-                    Material = (byte)bytes[i++];
-                    OwnerID = new LLUUID(bytes, i); i += 16;
-                    CreatorID = new LLUUID(bytes, i); i += 16;
-                    PathShearX = (byte)bytes[i++];
-                    PathShearY = (byte)bytes[i++];
-                    PathTaperX = (sbyte)bytes[i++];
-                    PathTaperY = (sbyte)bytes[i++];
-                    ProfileEnd = (byte)bytes[i++];
-                    UsePhysics = (byte)bytes[i++];
-                    PathBegin = (byte)bytes[i++];
-                    Active = (byte)bytes[i++];
-                    PCode = (byte)bytes[i++];
-                    PathCurve = (byte)bytes[i++];
-                    EveryoneMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    Scale = new LLVector3(bytes, i); i += 12;
-                    State = (byte)bytes[i++];
-                    PathTwist = (sbyte)bytes[i++];
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _textureentry = new byte[length];
-                    Array.Copy(bytes, i, _textureentry, 0, length); i += length;
-                    ProfileHollow = (byte)bytes[i++];
-                    PathRevolutions = (byte)bytes[i++];
-                    Rotation = new LLQuaternion(bytes, i, true); i += 12;
-                    NextOwnerMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    GroupMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                    OwnerMask = (uint)(bytes[i++] + (bytes[i++] &lt;&lt; 8) + (bytes[i++] &lt;&lt; 16) + (bytes[i++] &lt;&lt; 24));
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(ID == null) { Console.WriteLine(&quot;Warning: ID is null, in &quot; + this.GetType()); }
-                Array.Copy(ID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)((GroupOwned) ? 1 : 0);
-                bytes[i++] = (byte)PathTwistBegin;
-                bytes[i++] = PathEnd;
-                bytes[i++] = (byte)(AngVelX % 256);
-                bytes[i++] = (byte)((AngVelX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(AngVelY % 256);
-                bytes[i++] = (byte)((AngVelY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(AngVelZ % 256);
-                bytes[i++] = (byte)((AngVelZ &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(BaseMask % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((BaseMask &gt;&gt; 24) % 256);
-                bytes[i++] = ProfileBegin;
-                bytes[i++] = (byte)(SubType % 256);
-                bytes[i++] = (byte)((SubType &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)PathRadiusOffset;
-                bytes[i++] = (byte)(VelX % 256);
-                bytes[i++] = (byte)((VelX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)PathSkew;
-                bytes[i++] = (byte)(VelY % 256);
-                bytes[i++] = (byte)((VelY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(VelZ % 256);
-                bytes[i++] = (byte)((VelZ &gt;&gt; 8) % 256);
-                if(Data == null) { Console.WriteLine(&quot;Warning: Data is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(Data.Length % 256);
-                bytes[i++] = (byte)((Data.Length &gt;&gt; 8) % 256);
-                Array.Copy(Data, 0, bytes, i, Data.Length); i += Data.Length;
-                if(ParentID == null) { Console.WriteLine(&quot;Warning: ParentID is null, in &quot; + this.GetType()); }
-                Array.Copy(ParentID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = (byte)(PosX % 256);
-                bytes[i++] = (byte)((PosX &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(PosY % 256);
-                bytes[i++] = (byte)((PosY &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)(PosZ % 256);
-                bytes[i++] = (byte)((PosZ &gt;&gt; 8) % 256);
-                bytes[i++] = ProfileCurve;
-                bytes[i++] = PathScaleX;
-                bytes[i++] = PathScaleY;
-                if(GroupID == null) { Console.WriteLine(&quot;Warning: GroupID is null, in &quot; + this.GetType()); }
-                Array.Copy(GroupID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = Material;
-                if(OwnerID == null) { Console.WriteLine(&quot;Warning: OwnerID is null, in &quot; + this.GetType()); }
-                Array.Copy(OwnerID.GetBytes(), 0, bytes, i, 16); i += 16;
-                if(CreatorID == null) { Console.WriteLine(&quot;Warning: CreatorID is null, in &quot; + this.GetType()); }
-                Array.Copy(CreatorID.GetBytes(), 0, bytes, i, 16); i += 16;
-                bytes[i++] = PathShearX;
-                bytes[i++] = PathShearY;
-                bytes[i++] = (byte)PathTaperX;
-                bytes[i++] = (byte)PathTaperY;
-                bytes[i++] = ProfileEnd;
-                bytes[i++] = UsePhysics;
-                bytes[i++] = PathBegin;
-                bytes[i++] = Active;
-                bytes[i++] = PCode;
-                bytes[i++] = PathCurve;
-                bytes[i++] = (byte)(EveryoneMask % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((EveryoneMask &gt;&gt; 24) % 256);
-                if(Scale == null) { Console.WriteLine(&quot;Warning: Scale is null, in &quot; + this.GetType()); }
-                Array.Copy(Scale.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = State;
-                bytes[i++] = (byte)PathTwist;
-                if(TextureEntry == null) { Console.WriteLine(&quot;Warning: TextureEntry is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(TextureEntry.Length % 256);
-                bytes[i++] = (byte)((TextureEntry.Length &gt;&gt; 8) % 256);
-                Array.Copy(TextureEntry, 0, bytes, i, TextureEntry.Length); i += TextureEntry.Length;
-                bytes[i++] = ProfileHollow;
-                bytes[i++] = PathRevolutions;
-                if(Rotation == null) { Console.WriteLine(&quot;Warning: Rotation is null, in &quot; + this.GetType()); }
-                Array.Copy(Rotation.GetBytes(), 0, bytes, i, 12); i += 12;
-                bytes[i++] = (byte)(NextOwnerMask % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((NextOwnerMask &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(GroupMask % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((GroupMask &gt;&gt; 24) % 256);
-                bytes[i++] = (byte)(OwnerMask % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 8) % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 16) % 256);
-                bytes[i++] = (byte)((OwnerMask &gt;&gt; 24) % 256);
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- ObjectData --\n&quot;;
-                output += &quot;ID: &quot; + ID.ToString() + &quot;\n&quot;;
-                output += &quot;GroupOwned: &quot; + GroupOwned.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwistBegin: &quot; + PathTwistBegin.ToString() + &quot;\n&quot;;
-                output += &quot;PathEnd: &quot; + PathEnd.ToString() + &quot;\n&quot;;
-                output += &quot;AngVelX: &quot; + AngVelX.ToString() + &quot;\n&quot;;
-                output += &quot;AngVelY: &quot; + AngVelY.ToString() + &quot;\n&quot;;
-                output += &quot;AngVelZ: &quot; + AngVelZ.ToString() + &quot;\n&quot;;
-                output += &quot;BaseMask: &quot; + BaseMask.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileBegin: &quot; + ProfileBegin.ToString() + &quot;\n&quot;;
-                output += &quot;SubType: &quot; + SubType.ToString() + &quot;\n&quot;;
-                output += &quot;PathRadiusOffset: &quot; + PathRadiusOffset.ToString() + &quot;\n&quot;;
-                output += &quot;VelX: &quot; + VelX.ToString() + &quot;\n&quot;;
-                output += &quot;PathSkew: &quot; + PathSkew.ToString() + &quot;\n&quot;;
-                output += &quot;VelY: &quot; + VelY.ToString() + &quot;\n&quot;;
-                output += &quot;VelZ: &quot; + VelZ.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(Data, &quot;Data&quot;) + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;PosX: &quot; + PosX.ToString() + &quot;\n&quot;;
-                output += &quot;PosY: &quot; + PosY.ToString() + &quot;\n&quot;;
-                output += &quot;PosZ: &quot; + PosZ.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileCurve: &quot; + ProfileCurve.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleX: &quot; + PathScaleX.ToString() + &quot;\n&quot;;
-                output += &quot;PathScaleY: &quot; + PathScaleY.ToString() + &quot;\n&quot;;
-                output += &quot;GroupID: &quot; + GroupID.ToString() + &quot;\n&quot;;
-                output += &quot;Material: &quot; + Material.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;CreatorID: &quot; + CreatorID.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearX: &quot; + PathShearX.ToString() + &quot;\n&quot;;
-                output += &quot;PathShearY: &quot; + PathShearY.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperX: &quot; + PathTaperX.ToString() + &quot;\n&quot;;
-                output += &quot;PathTaperY: &quot; + PathTaperY.ToString() + &quot;\n&quot;;
-                output += &quot;ProfileEnd: &quot; + ProfileEnd.ToString() + &quot;\n&quot;;
-                output += &quot;UsePhysics: &quot; + UsePhysics.ToString() + &quot;\n&quot;;
-                output += &quot;PathBegin: &quot; + PathBegin.ToString() + &quot;\n&quot;;
-                output += &quot;Active: &quot; + Active.ToString() + &quot;\n&quot;;
-                output += &quot;PCode: &quot; + PCode.ToString() + &quot;\n&quot;;
-                output += &quot;PathCurve: &quot; + PathCurve.ToString() + &quot;\n&quot;;
-                output += &quot;EveryoneMask: &quot; + EveryoneMask.ToString() + &quot;\n&quot;;
-                output += &quot;Scale: &quot; + Scale.ToString() + &quot;\n&quot;;
-                output += &quot;State: &quot; + State.ToString() + &quot;\n&quot;;
-                output += &quot;PathTwist: &quot; + PathTwist.ToString() + &quot;\n&quot;;
-                output += Helpers.FieldToString(TextureEntry, &quot;TextureEntry&quot;) + &quot;\n&quot;;
-                output += &quot;ProfileHollow: &quot; + ProfileHollow.ToString() + &quot;\n&quot;;
-                output += &quot;PathRevolutions: &quot; + PathRevolutions.ToString() + &quot;\n&quot;;
-                output += &quot;Rotation: &quot; + Rotation.ToString() + &quot;\n&quot;;
-                output += &quot;NextOwnerMask: &quot; + NextOwnerMask.ToString() + &quot;\n&quot;;
-                output += &quot;GroupMask: &quot; + GroupMask.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerMask: &quot; + OwnerMask.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        /// &lt;exclude/&gt;
-        public class NVPairDataBlock
-        {
-            private byte[] _nvpairs;
-            public byte[] NVPairs
-            {
-                get { return _nvpairs; }
-                set
-                {
-                    if (value == null) { _nvpairs = null; return; }
-                    if (value.Length &gt; 1024) { throw new OverflowException(&quot;Value exceeds 1024 characters&quot;); }
-                    else { _nvpairs = new byte[value.Length]; Array.Copy(value, _nvpairs, value.Length); }
-                }
-            }
-
-            public int Length
-            {
-                get
-                {
-                    int length = 0;
-                    if (NVPairs != null) { length += 2 + NVPairs.Length; }
-                    return length;
-                }
-            }
-
-            public NVPairDataBlock() { }
-            public NVPairDataBlock(byte[] bytes, ref int i)
-            {
-                int length;
-                try
-                {
-                    length = (ushort)(bytes[i++] + (bytes[i++] &lt;&lt; 8));
-                    _nvpairs = new byte[length];
-                    Array.Copy(bytes, i, _nvpairs, 0, length); i += length;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                if(NVPairs == null) { Console.WriteLine(&quot;Warning: NVPairs is null, in &quot; + this.GetType()); }
-                bytes[i++] = (byte)(NVPairs.Length % 256);
-                bytes[i++] = (byte)((NVPairs.Length &gt;&gt; 8) % 256);
-                Array.Copy(NVPairs, 0, bytes, i, NVPairs.Length); i += NVPairs.Length;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- NVPairData --\n&quot;;
-                output += Helpers.FieldToString(NVPairs, &quot;NVPairs&quot;) + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.PassObject; } }
-        public ObjectDataBlock ObjectData;
-        public NVPairDataBlock[] NVPairData;
-
-        public PassObjectPacket()
-        {
-            Header = new HighHeader();
-            Header.ID = 29;
-            Header.Reliable = true;
-            Header.Zerocoded = true;
-            ObjectData = new ObjectDataBlock();
-            NVPairData = new NVPairDataBlock[0];
-        }
-
-        public PassObjectPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new HighHeader(bytes, ref i, ref packetEnd);
-            ObjectData = new ObjectDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            NVPairData = new NVPairDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NVPairData[j] = new NVPairDataBlock(bytes, ref i); }
-        }
-
-        public PassObjectPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            ObjectData = new ObjectDataBlock(bytes, ref i);
-            int count = (int)bytes[i++];
-            NVPairData = new NVPairDataBlock[count];
-            for (int j = 0; j &lt; count; j++)
-            { NVPairData[j] = new NVPairDataBlock(bytes, ref i); }
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 5;
-            length += ObjectData.Length;;
-            length++;
-            for (int j = 0; j &lt; NVPairData.Length; j++) { length += NVPairData[j].Length; }
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            ObjectData.ToBytes(bytes, ref i);
-            bytes[i++] = (byte)NVPairData.Length;
-            for (int j = 0; j &lt; NVPairData.Length; j++) { NVPairData[j].ToBytes(bytes, ref i); }
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- PassObject ---\n&quot;;
-                output += ObjectData.ToString() + &quot;\n&quot;;
-            for (int j = 0; j &lt; NVPairData.Length; j++)
-            {
-                output += NVPairData[j].ToString() + &quot;\n&quot;;
-            }
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
-    public class AtomicPassObjectPacket : Packet
-    {
-        /// &lt;exclude/&gt;
-        public class TaskDataBlock
-        {
-            public bool AttachmentNeedsSave;
-            public LLUUID TaskID;
-
-            public int Length
-            {
-                get
-                {
-                    return 17;
-                }
-            }
-
-            public TaskDataBlock() { }
-            public TaskDataBlock(byte[] bytes, ref int i)
-            {
-                try
-                {
-                    AttachmentNeedsSave = (bytes[i++] != 0) ? (bool)true : (bool)false;
-                    TaskID = new LLUUID(bytes, i); i += 16;
-                }
-                catch (Exception)
-                {
-                    throw new MalformedDataException();
-                }
-            }
-
-            public void ToBytes(byte[] bytes, ref int i)
-            {
-                bytes[i++] = (byte)((AttachmentNeedsSave) ? 1 : 0);
-                if(TaskID == null) { Console.WriteLine(&quot;Warning: TaskID is null, in &quot; + this.GetType()); }
-                Array.Copy(TaskID.GetBytes(), 0, bytes, i, 16); i += 16;
-            }
-
-            public override string ToString()
-            {
-                string output = &quot;-- TaskData --\n&quot;;
-                output += &quot;AttachmentNeedsSave: &quot; + AttachmentNeedsSave.ToString() + &quot;\n&quot;;
-                output += &quot;TaskID: &quot; + TaskID.ToString() + &quot;\n&quot;;
-                output = output.Trim();
-                return output;
-            }
-        }
-
-        private Header header;
-        public override Header Header { get { return header; } set { header = value; } }
-        public override PacketType Type { get { return PacketType.AtomicPassObject; } }
-        public TaskDataBlock TaskData;
-
-        public AtomicPassObjectPacket()
-        {
-            Header = new HighHeader();
-            Header.ID = 30;
-            Header.Reliable = true;
-            TaskData = new TaskDataBlock();
-        }
-
-        public AtomicPassObjectPacket(byte[] bytes, ref int i)
-        {
-            int packetEnd = bytes.Length - 1;
-            Header = new HighHeader(bytes, ref i, ref packetEnd);
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public AtomicPassObjectPacket(Header head, byte[] bytes, ref int i)
-        {
-            Header = head;
-            TaskData = new TaskDataBlock(bytes, ref i);
-        }
-
-        public override byte[] ToBytes()
-        {
-            int length = 5;
-            length += TaskData.Length;;
-            if (header.AckList.Length &gt; 0) { length += header.AckList.Length * 4 + 1; }
-            byte[] bytes = new byte[length];
-            int i = 0;
-            header.ToBytes(bytes, ref i);
-            TaskData.ToBytes(bytes, ref i);
-            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }
-            return bytes;
-        }
-
-        public override string ToString()
-        {
-            string output = &quot;--- AtomicPassObject ---\n&quot;;
-                output += TaskData.ToString() + &quot;\n&quot;;
-            return output;
-        }
-
-    }
-
-    /// &lt;exclude/&gt;
     public class SoundTriggerPacket : Packet
     {
         /// &lt;exclude/&gt;
+        [XmlType(&quot;soundtrigger_sounddata&quot;)]
         public class SoundDataBlock
         {
             public LLUUID ObjectID;
@@ -91578,6 +76677,7 @@
             public ulong Handle;
             public LLVector3 Position;
 
+            [XmlIgnore]
             public int Length
             {
                 get
@@ -91628,20 +76728,19 @@
                 bytes[i++] = (byte)((Handle &gt;&gt; 40) % 256);
                 bytes[i++] = (byte)((Handle &gt;&gt; 48) % 256);
                 bytes[i++] = (byte)((Handle &gt;&gt; 56) % 256);
-                if(Position == null) { Console.WriteLine(&quot;Warning: Position is null, in &quot; + this.GetType()); }
                 Array.Copy(Position.GetBytes(), 0, bytes, i, 12); i += 12;
             }
 
             public override string ToString()
             {
-                string output = &quot;-- SoundData --\n&quot;;
-                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;\n&quot;;
-                output += &quot;Gain: &quot; + Gain.ToString() + &quot;\n&quot;;
-                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;\n&quot;;
-                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;\n&quot;;
-                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;\n&quot;;
-                output += &quot;Handle: &quot; + Handle.ToString() + &quot;\n&quot;;
-                output += &quot;Position: &quot; + Position.ToString() + &quot;\n&quot;;
+                string output = &quot;-- SoundData --&quot; + Environment.NewLine;
+                output += &quot;ObjectID: &quot; + ObjectID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Gain: &quot; + Gain.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;ParentID: &quot; + ParentID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;SoundID: &quot; + SoundID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;OwnerID: &quot; + OwnerID.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Handle: &quot; + Handle.ToString() + &quot;&quot; + Environment.NewLine;
+                output += &quot;Position: &quot; + Position.ToString() + &quot;&quot; + Environment.NewLine;
                 output = output.Trim();
                 return output;
             }
@@ -91688,8 +76787,8 @@
 
         public override string ToString()
         {
-            string output = &quot;--- SoundTrigger ---\n&quot;;
-                output += SoundData.ToString() + &quot;\n&quot;;
+            string output = &quot;--- SoundTrigger ---&quot; + Environment.NewLine;
+                output += SoundData.ToString() + &quot;&quot; + Environment.NewLine;
             return output;
         }
 

Deleted: branches/aditi/libsecondlife-cs/build
===================================================================
--- branches/aditi/libsecondlife-cs/build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/build	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,24 +0,0 @@
-#!/usr/bin/perl -w
-
-system('prj2make libsecondlife.sln')
-	and die &quot;*** prj2make failed\n&quot;;
-
-open(MAKEFILE, 'Makefile')
-	or die &quot;*** failed to open Makefile for reading: $!\n&quot;;
-
-while (&lt;MAKEFILE&gt;) {
-	s/^MCS=mcs$/MCS=gmcs/;
-	push @patched, $_;
-}
-
-close(MAKEFILE);
-
-open(MAKEFILE, '&gt;Makefile')
-	or die &quot;*** failed to open Makefile for writing: $!\n&quot;;
-
-print MAKEFILE $_ foreach @patched;
-
-close(MAKEFILE);
-
-system('make', @ARGV)
-	and die &quot;*** make failed\n&quot;;

Modified: branches/aditi/libsecondlife-cs/examples/BodyPartMorphGenerator/genbodyparams.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/BodyPartMorphGenerator/genbodyparams.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/BodyPartMorphGenerator/genbodyparams.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -47,16 +47,16 @@
             MasterClass.WriteLine(&quot;using System.Collections.Generic;&quot;);
             MasterClass.WriteLine(&quot;using System.IO;&quot;);
             MasterClass.WriteLine(&quot;using System.Text;&quot;);
+//            MasterClass.WriteLine();
+//            MasterClass.WriteLine(&quot;using libsecondlife.AssetSystem.BodyShape;&quot;);
             MasterClass.WriteLine();
-            MasterClass.WriteLine(&quot;using libsecondlife.AssetSystem.BodyShape;&quot;);
-            MasterClass.WriteLine();
-            MasterClass.WriteLine(&quot;namespace libsecondlife.AssetSystem.BodyShape&quot;);
+            MasterClass.WriteLine(&quot;namespace libsecondlife.AssetSystem&quot;);
             MasterClass.WriteLine(&quot;{&quot;);
-            MasterClass.WriteLine(&quot;    class BodyShapeParams&quot;);
+            MasterClass.WriteLine(&quot;    public class BodyShapeParams&quot;);
             MasterClass.WriteLine(&quot;    {&quot;);
 
             StringWriter Labels = new StringWriter();
-            Labels.WriteLine(&quot;        public string GetLabel( uint Param )&quot;);
+            Labels.WriteLine(&quot;        public static string GetLabel( uint Param )&quot;);
             Labels.WriteLine(&quot;        {&quot;);
             Labels.WriteLine(&quot;            switch( Param )&quot;);
             Labels.WriteLine(&quot;            {&quot;);
@@ -64,7 +64,7 @@
             Labels.WriteLine(&quot;                    return \&quot;\&quot;;&quot;);
 
             StringWriter LabelMin = new StringWriter();
-            LabelMin.WriteLine(&quot;        public string GetLabelMin( uint Param )&quot;);
+            LabelMin.WriteLine(&quot;        public static string GetLabelMin( uint Param )&quot;);
             LabelMin.WriteLine(&quot;        {&quot;);
             LabelMin.WriteLine(&quot;            switch( Param )&quot;);
             LabelMin.WriteLine(&quot;            {&quot;);
@@ -72,7 +72,7 @@
             LabelMin.WriteLine(&quot;                    throw new Exception(\&quot;Unknown Body Part Parameter: \&quot; + Param);&quot;);
 
             StringWriter LabelMax = new StringWriter();
-            LabelMax.WriteLine(&quot;        public string GetLabelMax( uint Param )&quot;);
+            LabelMax.WriteLine(&quot;        public static string GetLabelMax( uint Param )&quot;);
             LabelMax.WriteLine(&quot;        {&quot;);
             LabelMax.WriteLine(&quot;            switch( Param )&quot;);
             LabelMax.WriteLine(&quot;            {&quot;);
@@ -81,7 +81,7 @@
 
 
             StringWriter Names = new StringWriter();
-            Names.WriteLine(&quot;        public string GetName( uint Param )&quot;);
+            Names.WriteLine(&quot;        public static string GetName( uint Param )&quot;);
             Names.WriteLine(&quot;        {&quot;);
             Names.WriteLine(&quot;            switch( Param )&quot;);
             Names.WriteLine(&quot;            {&quot;);
@@ -89,7 +89,7 @@
             Names.WriteLine(&quot;                    throw new Exception(\&quot;Unknown Body Part Parameter: \&quot; + Param);&quot;);
 
             StringWriter ValueMin = new StringWriter();
-            ValueMin.WriteLine(&quot;        public float GetValueMin( uint Param )&quot;);
+            ValueMin.WriteLine(&quot;        public static float GetValueMin( uint Param )&quot;);
             ValueMin.WriteLine(&quot;        {&quot;);
             ValueMin.WriteLine(&quot;            switch( Param )&quot;);
             ValueMin.WriteLine(&quot;            {&quot;);
@@ -97,7 +97,7 @@
             ValueMin.WriteLine(&quot;                    throw new Exception(\&quot;Unknown Body Part Parameter: \&quot; + Param);&quot;);
 
             StringWriter ValueMax = new StringWriter();
-            ValueMax.WriteLine(&quot;        public float GetValueMax( uint Param )&quot;);
+            ValueMax.WriteLine(&quot;        public static float GetValueMax( uint Param )&quot;);
             ValueMax.WriteLine(&quot;        {&quot;);
             ValueMax.WriteLine(&quot;            switch( Param )&quot;);
             ValueMax.WriteLine(&quot;            {&quot;);
@@ -105,7 +105,7 @@
             ValueMax.WriteLine(&quot;                    throw new Exception(\&quot;Unknown Body Part Parameter: \&quot; + Param);&quot;);
 
             StringWriter ValueDefault = new StringWriter();
-            ValueDefault.WriteLine(&quot;        public float GetValueDefault( uint Param )&quot;);
+            ValueDefault.WriteLine(&quot;        public static float GetValueDefault( uint Param )&quot;);
             ValueDefault.WriteLine(&quot;        {&quot;);
             ValueDefault.WriteLine(&quot;            switch( Param )&quot;);
             ValueDefault.WriteLine(&quot;            {&quot;);
@@ -113,7 +113,7 @@
             ValueDefault.WriteLine(&quot;                    throw new Exception(\&quot;Unknown Body Part Parameter: \&quot; + Param);&quot;);
 
             StringWriter ValueValid = new StringWriter();
-            ValueValid.WriteLine(&quot;        public bool IsValueValid( uint Param, float Value )&quot;);
+            ValueValid.WriteLine(&quot;        public static bool IsValueValid( uint Param, float Value )&quot;);
             ValueValid.WriteLine(&quot;        {&quot;);
             ValueValid.WriteLine(&quot;            switch( Param )&quot;);
             ValueValid.WriteLine(&quot;            {&quot;);
@@ -125,6 +125,10 @@
 
 //            XmlTextWriter xtw = new XmlTextWriter(sw);
 
+            File.Delete(&quot;ParamTable.csv&quot;);
+            StreamWriter ParamTable = File.AppendText(&quot;ParamTable.csv&quot;);
+            ParamTable.WriteLine(&quot;ID\tName\tEditGroup\tLabel\tLabelMin\tLabelMax\tMinValue\tMaxValue&quot;);
+
             foreach( XmlNode node in list )
             {
                 if ((node.Attributes[&quot;shared&quot;] != null) &amp;&amp; (node.Attributes[&quot;shared&quot;].Value.Equals(&quot;1&quot;)))
@@ -132,6 +136,17 @@
                     // this param will have been already been defined
                     continue;
                 }
+
+                if (
+                    (node.Attributes[&quot;edit_group&quot;] != null)
+                     &amp;&amp; ( node.Attributes[&quot;edit_group&quot;].Value.Equals(&quot;driven&quot;)
+//                         || node.Attributes[&quot;edit_group&quot;].Value.Equals(&quot;dummy&quot;)
+                        )
+                    )
+                {
+                    // this param is calculated by the client based on other params
+                    continue;
+                }
 /*
                 if( node.Attributes[&quot;edit_group&quot;] != null )
                 {
@@ -145,16 +160,36 @@
                 // Used to identify which nodes are bodyshape parameter nodes
                 if ( node.Attributes[&quot;id&quot;] != null
                      &amp;&amp; node.Attributes[&quot;name&quot;] != null
-                     &amp;&amp; ( (node.Attributes[&quot;label&quot;] != null) || (node.Attributes[&quot;label_min&quot;] != null) )
+                     &amp;&amp; node.Attributes[&quot;wearable&quot;] != null
+                     // &amp;&amp; ( (node.Attributes[&quot;label&quot;] != null) || (node.Attributes[&quot;label_min&quot;] != null) )
                     )
                 {
+                    string ParamName = node.Attributes[&quot;name&quot;].Value;
+                    Console.WriteLine(ParamName);
+                    string ParamEditGroup = &quot;&quot;;
+                    if( node.Attributes[&quot;edit_group&quot;] != null )
+                    {
+                        ParamEditGroup = node.Attributes[&quot;edit_group&quot;].Value;
+                    }
+
+                    string ParamLabel = &quot;&quot;;
+                    string ParamLabelMin = &quot;&quot;;
+                    string ParamLabelMax = &quot;&quot;;
+                    string ParamMin = &quot;&quot;;
+                    string ParamMax = &quot;&quot;;
+
+
                     string ID = node.Attributes[&quot;id&quot;].Value;
 
+                    
+
                     if (node.Attributes[&quot;label&quot;] != null)
                     {
                         // Label
                         Labels.WriteLine(&quot;                case &quot; + ID + &quot;:&quot;);
                         Labels.WriteLine(&quot;                    return \&quot;&quot; + node.Attributes[&quot;label&quot;].Value + &quot;\&quot;;&quot;);
+
+                        ParamLabel = node.Attributes[&quot;label&quot;].Value;
                     }
 
                     if (node.Attributes[&quot;label_min&quot;] != null)
@@ -162,6 +197,8 @@
                         // Label Min
                         LabelMin.WriteLine(&quot;                case &quot; + ID + &quot;:&quot;);
                         LabelMin.WriteLine(&quot;                    return \&quot;&quot; + node.Attributes[&quot;label_min&quot;].Value + &quot;\&quot;;&quot;);
+
+                        ParamLabelMin = node.Attributes[&quot;label_min&quot;].Value;
                     }
 
                     if (node.Attributes[&quot;label_max&quot;] != null)
@@ -169,6 +206,8 @@
                         // Label Max
                         LabelMax.WriteLine(&quot;                case &quot; + ID + &quot;:&quot;);
                         LabelMax.WriteLine(&quot;                    return \&quot;&quot; + node.Attributes[&quot;label_max&quot;].Value + &quot;\&quot;;&quot;);
+
+                        ParamLabelMax = node.Attributes[&quot;label_max&quot;].Value;
                     }
 
                     // Name
@@ -179,10 +218,14 @@
                     ValueMin.WriteLine(&quot;                case &quot; + ID + &quot;:&quot;);
                     ValueMin.WriteLine(&quot;                    return &quot; + node.Attributes[&quot;value_min&quot;].Value + &quot;f;&quot;);
 
+                    ParamMin = node.Attributes[&quot;value_min&quot;].Value;
+
                     // Max Values
                     ValueMax.WriteLine(&quot;                case &quot; + ID + &quot;:&quot;);
                     ValueMax.WriteLine(&quot;                    return &quot; + node.Attributes[&quot;value_max&quot;].Value + &quot;f;&quot;);
 
+                    ParamMax = node.Attributes[&quot;value_max&quot;].Value;
+
                     // Default values
                     if (node.Attributes[&quot;value_default&quot;] != null)
                     {
@@ -195,14 +238,24 @@
                         ValueDefault.WriteLine(&quot;                    return &quot; + node.Attributes[&quot;value_min&quot;].Value + &quot;f;&quot;);
                     }
 
-                    // Max Values
+                    // Validation Values
                     ValueValid.WriteLine(&quot;                case &quot; + node.Attributes[&quot;id&quot;].Value + &quot;:&quot;);
                     ValueValid.WriteLine(&quot;                    return ( (Value &gt;= &quot; + node.Attributes[&quot;value_min&quot;].Value + &quot;f) &amp;&amp; (Value &lt;= &quot; + node.Attributes[&quot;value_max&quot;].Value + &quot;f) );&quot;);
 
-
+                    ParamTable.WriteLine(    ID
+                                    + &quot;\t&quot; + ParamName
+                                    + &quot;\t&quot; + ParamEditGroup
+                                    + &quot;\t&quot; + ParamLabel
+                                    + &quot;\t&quot; + ParamLabelMin
+                                    + &quot;\t&quot; + ParamLabelMax
+                                    + &quot;\t&quot; + ParamMin 
+                                    + &quot;\t&quot; + ParamMax);
                 }
             }
 
+            ParamTable.Flush();
+            ParamTable.Close();
+
             // Finish up name stuff
             Names.WriteLine(&quot;            }&quot;); // Close switch
             Names.WriteLine(&quot;        }&quot;); // Close method
@@ -237,7 +290,7 @@
 
 
             StringWriter ValidateAll = new StringWriter();
-            ValidateAll.WriteLine(&quot;        public bool IsValid( Dictionary&lt;uint,float&gt; BodyShape )&quot;);
+            ValidateAll.WriteLine(&quot;        public static bool IsValid( Dictionary&lt;uint,float&gt; BodyShape )&quot;);
             ValidateAll.WriteLine(&quot;        {&quot;);
             ValidateAll.WriteLine(&quot;            foreach(KeyValuePair&lt;uint, float&gt; kvp in BodyShape)&quot;);
             ValidateAll.WriteLine(&quot;            {&quot;);
@@ -248,7 +301,7 @@
             ValidateAll.WriteLine(&quot;        }&quot;);
 
             StringWriter ToString = new StringWriter();
-            ToString.WriteLine(&quot;        public string ToString( Dictionary&lt;uint,float&gt; BodyShape )&quot;);
+            ToString.WriteLine(&quot;        public static string ToString( Dictionary&lt;uint,float&gt; BodyShape )&quot;);
             ToString.WriteLine(&quot;        {&quot;);
             ToString.WriteLine(&quot;            StringWriter sw = new StringWriter();&quot;);
             ToString.WriteLine(&quot;&quot;);

Modified: branches/aditi/libsecondlife-cs/examples/IA_ImageTool/ImageTool.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_ImageTool/ImageTool.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_ImageTool/ImageTool.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,6 +1,7 @@
 using System;
 using System.Collections.Generic;
 using System.IO;
+using System.Threading;
 
 using IA_SimpleInventory;
 
@@ -13,8 +14,12 @@
     /// &lt;summary&gt;
     /// Summary description for Class1.
     /// &lt;/summary&gt;
-    class ImageTool : SimpleInventory
+    class ImageTool
     {
+        private SecondLife _Client;
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
+
+
         private List&lt;LLUUID&gt; _ImageIDs = new List&lt;LLUUID&gt;();
         private string _FileName;
         private bool _Put;
@@ -24,7 +29,7 @@
         /// Used to upload/download images.
         /// &lt;/summary&gt;
         [STAThread]
-        static new void Main(string[] args)
+        static void Main(string[] args)
         {
             if ( (File.Exists(&quot;libjasper.dll&quot;) == false) )
             {
@@ -94,17 +99,16 @@
 
             ImageTool it = new ImageTool(uuidList, filename, put, rate);
 
-            // Only download the inventory tree if we're planning on putting/uploading files.
-            it.DownloadInventoryOnConnect = put; 
 
             if (it.Connect(args[0], args[1], args[2]))
             {
-                it.doStuff();
-                it.Disconnect();
+                if (it.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+                {
+                    it.doStuff();
 
-                System.Threading.Thread.Sleep(500);
+                    it.Disconnect();
+                }
 
-                Console.WriteLine(&quot;Done logging out.&quot;);
             }
         }
 
@@ -114,12 +118,62 @@
             _FileName = filename;
             _Put = put;
             _Rate = rate;
+
+            try
+            {
+                _Client = new SecondLife();
+                _Client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+            }
+            catch (Exception e)
+            {
+                // Error initializing the client
+                Console.WriteLine();
+                Console.WriteLine(e.ToString());
+            }
+
         }
 
-        protected new void doStuff()
+        void Network_OnConnected(object sender)
         {
+            ConnectedSignal.Set();
+        }
+
+        protected bool Connect(string FirstName, string LastName, string Password)
+        {
+            Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
+
+            // Setup Login to Second Life
+            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
+
+            // Login
+            if (!_Client.Network.Login(FirstName, LastName, Password, &quot;ImageTool&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            {
+                // Login failed
+                Console.WriteLine(&quot;Error logging in: &quot; + _Client.Network.LoginError);
+                return false;
+            }
+
+            // Login was successful
+            Console.WriteLine(&quot;Login was successful.&quot;);
+            Console.WriteLine(&quot;AgentID:   &quot; + _Client.Network.AgentID);
+            Console.WriteLine(&quot;SessionID: &quot; + _Client.Network.SessionID);
+
+            return true;
+        }
+
+        protected void Disconnect()
+        {
+            // Logout of Second Life
+            Console.WriteLine(&quot;Request logout&quot;);
+            _Client.Network.Logout();
+        }        
+
+        protected void doStuff()
+        {
             if (_Put)
             {
+                
+
                 Console.WriteLine(&quot;Reading: &quot; + _FileName);
 
                 byte[] j2cdata;
@@ -132,10 +186,12 @@
                 {
                     j2cdata = KakaduWrap.ReadJ2CData(_FileName);
                 }
-                
 
+
+                _Client.Inventory.DownloadInventory();
+
                 Console.WriteLine(&quot;Connecting to your Texture folder...&quot;);
-                InventoryFolder iFolder = AgentInventory.getFolder(&quot;Textures&quot;);
+                InventoryFolder iFolder = _Client.Inventory.getFolder(&quot;Textures&quot;);
 
                 Console.WriteLine(&quot;Uploading Texture...&quot;);
                 InventoryImage image = iFolder.NewImage(_FileName, &quot;ImageTool Upload&quot;, j2cdata);
@@ -162,7 +218,7 @@
 
                     try
                     {
-                        j2cdata = client.Images.RequestImage(ImageID);
+                        j2cdata = _Client.Images.RequestImage(ImageID);
 
                         int end = Environment.TickCount;
                         Console.WriteLine(&quot;Elapsed download time, in TickCounts: &quot; + (end - start));

Modified: branches/aditi/libsecondlife-cs/examples/IA_InventoryManager/iManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_InventoryManager/iManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_InventoryManager/iManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,12 +1,19 @@
 using System;
 using System.Collections.Generic;
+using System.IO;
 using System.Text;
+using System.Threading;
 
+using System.Xml;
+using System.Xml.Serialization;
+
 using IA_SimpleInventory;
 using libsecondlife;
 using libsecondlife.InventorySystem;
 using libsecondlife.AssetSystem;
 
+using libsecondlife.Packets;
+
 namespace IA_InventoryManager
 {
     /// &lt;summary&gt;
@@ -18,16 +25,17 @@
     /// * MOVE
     /// * GIVE
     /// &lt;/summary&gt;
-    class iManager : SimpleInventory
+    class iManager
     {
         private char[] cmdSeperators = { ' ' };
         private string curDirectory = &quot;/&quot;;
 
-        private string TYPE_DIR  = &quot;&lt;DIR&gt;  &quot;;
-        private string TYPE_ITEM = &quot;&lt;ITEM&gt; &quot;;
+        private SecondLife _Client;
+        private AppearanceManager aManager;
 
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
 
-        static new void Main(string[] args)
+        static void Main(string[] args)
         {
             if (args.Length &lt; 3)
             {
@@ -36,18 +44,41 @@
             }
 
             iManager it = new iManager();
-            it.Connect(args[0], args[1], args[2]);
-            it.doStuff();
-            it.Disconnect();
+            if (it.Connect(args[0], args[1], args[2]))
+            {
+                if (it.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+                {
+                    it.doStuff();
+                    it.Disconnect();
+                }
+            }
+        }
 
-            System.Threading.Thread.Sleep(500);
+        public iManager()
+        {
+            try
+            {
+                _Client = new SecondLife();
+                _Client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+                _Client.Self.OnTeleport += new MainAvatar.TeleportCallback(Self_OnTeleport);
+            }
+            catch (Exception e)
+            {
+                // Error initializing the client
+                Console.WriteLine();
+                Console.WriteLine(e.ToString());
+            }
 
         }
 
-        private new void doStuff()
+        private void doStuff()
         {
-            System.Threading.Thread.Sleep(1000);
+            // Setup Appearance Manager
+            aManager = new AppearanceManager(_Client);
 
+            // Download directory tree
+            _Client.Inventory.getRootFolder().RequestDownloadContents(true, false);
+
             Console.WriteLine(&quot;==================================================================&quot;);
             Console.WriteLine(&quot;The Inventory Manager program provides a simple shell for working with your Second Life[tm] Avatar.&quot;);
             Console.WriteLine();
@@ -152,6 +183,26 @@
                         xml(curCmdLine);
                         break;
 
+                    case &quot;setlook&quot;:
+                        setlook();
+                        break;
+
+                    case &quot;saveav&quot;:
+                        saveavatar(curCmdLine);
+                        break;
+
+                    case &quot;savew&quot;:
+                        savewearables(curCmdLine);
+                        break;
+
+                    case &quot;loadw&quot;:
+                        loadwearables(curCmdLine);
+                        break;
+
+                    case &quot;outfit&quot;:
+                        outfit(curCmdLine);
+                        break;
+
                     default:
                         Console.WriteLine(&quot;Unknown command '&quot; + curCmdLine[0] + &quot;'.&quot;);
                         Console.WriteLine(&quot;Type HELP for a list of available commands.&quot;);
@@ -162,10 +213,16 @@
             
         }
 
+        void Self_OnTeleport(Simulator currentSim, string message, MainAvatar.TeleportStatus status)
+        {
+            Console.WriteLine(&quot;Teleport Completed&quot;);
+            StandUpStraight();
+        }
+
         private void help()
         {
             Console.WriteLine(&quot;Currently available commands are: &quot;);
-            Console.WriteLine(&quot;LS          - List contents of the current directory.&quot;);
+            Console.WriteLine(&quot;LS          - List contents of the current directory. Options: /itemid /assetid /type&quot;);
             Console.WriteLine(&quot;CD          - Change directory.&quot;);
             Console.WriteLine(&quot;MKDIR       - Make a new directory.&quot;);
             Console.WriteLine(&quot;RMDIR       - Remove directory.&quot;);
@@ -173,10 +230,194 @@
             Console.WriteLine(&quot;REGIONINFO  - Display Grid Region Info.&quot;);
             Console.WriteLine(&quot;TELEPORT    - Teleport to a new sim.&quot;);
             Console.WriteLine(&quot;NOTECARD    - Create a new notecard.&quot;);
-            Console.WriteLine(&quot;XML         - Display an item as xml&quot;);
+            Console.WriteLine(&quot;XML         - Display an item as xml.&quot;);
+            Console.WriteLine(&quot;GETLOOK     - Send an AgentSetAppearance based on your current weables.&quot;);
+            Console.WriteLine(&quot;SAVEAV      - Serialize your current wearables and the info from them.&quot;);
+            Console.WriteLine(&quot;SAVEW       - Serialize your current wearables.&quot;);
+            Console.WriteLine(&quot;LOADW       - Load a previously serialized wearables.&quot;);
             Console.WriteLine(&quot;QUIT        - Exit the Inventory Manager.&quot;);
         }
 
+        private void outfit(string[] cmdLine)
+        {
+            if (cmdLine.Length &lt; 2 )
+            {
+                Console.WriteLine(&quot;Usage: outfit [folder]&quot;);
+                return;
+            }
+
+            // Resolve outfit folder
+            string targetDir = &quot;&quot;;
+
+            if (cmdLine[1].StartsWith(&quot;/&quot;))
+            {
+                targetDir += combineCmdArg(cmdLine);
+            }
+            else
+            {
+                if (!curDirectory.Equals(&quot;/&quot;))
+                {
+                    targetDir = curDirectory + &quot;/&quot;;
+
+                }
+
+                targetDir += combineCmdArg(cmdLine);
+            }
+
+            InventoryFolder iFolder = _Client.Inventory.getFolder(targetDir);
+
+            if (iFolder == null)
+            {
+                Console.WriteLine(&quot;Could not find directory: &quot; + targetDir);
+                return;
+            }
+
+            aManager.WearOutfit(iFolder);
+
+        }
+
+        private void savewearables(string[] cmdLine)
+        {
+            // Get Wearable Data
+            AgentWearablesUpdatePacket.WearableDataBlock[] wdbs = aManager.GetWearables();
+            List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt; WearablesList = new List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;();
+            foreach (AgentWearablesUpdatePacket.WearableDataBlock wdb in wdbs)
+            {
+                WearablesList.Add(wdb);
+            }
+            
+            // Serialize to XML
+            StringBuilder sb = new StringBuilder();
+            XmlWriterSettings xmlws = new XmlWriterSettings();
+            xmlws.Indent = true;
+            XmlWriter xmlw = XmlWriter.Create(sb, xmlws);
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;));
+            serializer.Serialize(xmlw, WearablesList);
+
+            // Output
+            if (cmdLine.Length &gt;= 2)
+            {
+                Console.WriteLine(&quot;Writing wearable data to : &quot; + cmdLine[1]);
+
+                File.WriteAllText(cmdLine[1], sb.ToString());
+
+                Console.WriteLine(&quot;Done...&quot;);
+            }
+            else
+            {
+                Console.WriteLine(sb.ToString());
+            }
+        }
+
+        private void loadwearables(string[] cmdLine)
+        {
+            if (cmdLine.Length &lt; 2)
+            {
+                Console.WriteLine(&quot;You must specify the file to load the wearables from.&quot;);
+                Console.WriteLine(&quot;Usage: loadw [file.xml]&quot;);
+                return;
+            }
+
+            Console.WriteLine(&quot;Reading Wearable data from: &quot; + cmdLine[1]);
+
+            try
+            {
+                XmlReader xmlr = XmlReader.Create(File.OpenText(cmdLine[1]));
+
+                XmlSerializer serializer = new XmlSerializer(typeof(List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;));
+                List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt; WearablesList = (List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;)serializer.Deserialize(xmlr);
+
+                foreach (AgentWearablesUpdatePacket.WearableDataBlock wdb in WearablesList)
+                {
+                    Console.WriteLine(wdb.AssetID);
+                }
+
+            }
+            catch (Exception e)
+            {
+                Console.WriteLine(&quot;An error has occured...&quot;);
+                Console.WriteLine(e.Message);
+                Console.WriteLine(e.StackTrace);
+            }
+
+        }
+
+        private void saveavatar(string[] cmdLine)
+        {
+            AgentWearablesUpdatePacket.WearableDataBlock[] wdbs = aManager.GetWearables();
+            aManager.GetAvatarAppearanceInfoFromWearableAssets();
+
+            // Get the list of wearables
+            
+            List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt; WearablesList = new List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;();
+            foreach (AgentWearablesUpdatePacket.WearableDataBlock wdb in wdbs)
+            {
+                WearablesList.Add(wdb);
+            }
+
+            XmlWriterSettings xmlws = new XmlWriterSettings();
+            xmlws.OmitXmlDeclaration = true;
+            xmlws.Indent = true;
+            xmlws.CloseOutput = false;
+
+            StringBuilder Save = new StringBuilder();
+            Save.Append(&quot;&lt;avatar_appearance&gt;&quot;);
+
+            // Wearables
+            StringBuilder sb = new StringBuilder();
+            XmlWriter xmlw   = XmlWriter.Create(sb, xmlws);
+            XmlSerializer serializer = new XmlSerializer(typeof(List&lt;AgentWearablesUpdatePacket.WearableDataBlock&gt;));
+            serializer.Serialize(xmlw, WearablesList);
+
+            Save.AppendLine(sb.ToString());
+
+            // Parameters
+            sb = new StringBuilder();
+            xmlw = XmlWriter.Create(sb, xmlws);
+            serializer = new XmlSerializer(typeof(SerializableDictionary&lt;uint, float&gt;));
+            serializer.Serialize(xmlw, aManager.AgentAppearanceParams);
+
+            Save.AppendLine(sb.ToString());
+
+            // Parameters
+            sb = new StringBuilder();
+            xmlw = XmlWriter.Create(sb, xmlws);
+            serializer = new XmlSerializer(typeof(TextureEntry));
+            serializer.Serialize(xmlw, aManager.AgentTextureEntry);
+
+            Save.AppendLine(sb.ToString());
+
+            // Finish off save data
+            Save.Append(&quot;&lt;/avatar_appearance&gt;&quot;);
+
+            Console.WriteLine(Save.ToString());
+
+            //aManager.SendAgentSetAppearance
+
+        }
+
+        private void StandUpStraight()
+        {
+            AgentUpdatePacket p = new AgentUpdatePacket();
+            p.AgentData.Far = 96.0f;
+            p.AgentData.CameraAtAxis = new LLVector3(0, 0, 0);
+            p.AgentData.CameraCenter = new LLVector3(0, 0, 0);
+            p.AgentData.CameraLeftAxis = new LLVector3(0, 0, 0);
+            p.AgentData.CameraUpAxis = new LLVector3(0, 0, 0);
+            p.AgentData.HeadRotation = new LLQuaternion(0, 0, 0, 1); ;
+            p.AgentData.BodyRotation = new LLQuaternion(0, 0, 0, 1); ;
+            p.AgentData.AgentID = _Client.Network.AgentID;
+            p.AgentData.SessionID = _Client.Network.SessionID;
+            p.AgentData.ControlFlags = (uint)Avatar.AgentUpdateFlags.AGENT_CONTROL_STAND_UP;
+            _Client.Network.SendPacket(p);
+        }
+
+        private void setlook()
+        {
+            aManager.SendAgentSetAppearance();
+
+        }
+
         private void xml(string[] cmdLine)
         {
             if (cmdLine.Length &lt; 2)
@@ -195,17 +436,20 @@
             {
             }
 
-            InventoryFolder iFolder = AgentInventory.getFolder(curDirectory);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(curDirectory);
 
             InventoryBase itemOfInterest = null;
 
-            foreach (InventoryBase ib in iFolder.alContents)
+            iFolder.RequestDownloadContents(false).RequestComplete.WaitOne(15000,false);
+            foreach (InventoryBase ib in iFolder.GetContents())
             {
                 if (ib is InventoryFolder)
                 {
                     InventoryFolder folder = (InventoryFolder)ib;
                     if (folder.Name.Equals(cmdLine[1]) || folder.FolderID.Equals(uuid))
                     {
+                        // Refresh the folder tree for this folder before outputing it.
+                        folder.RequestDownloadContents(true).RequestComplete.WaitOne(30000, false);
                         itemOfInterest = folder;
                         break;
                     }
@@ -262,7 +506,7 @@
                 sb.Append(cki.Key.ToString());
             } while (cki.Key != ConsoleKey.Escape);
 
-            InventoryFolder iFolder = AgentInventory.getFolder(curDirectory);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(curDirectory);
             iFolder.NewNotecard(cmdLine[1], NoteDesc, sb.ToString());
 
             Console.WriteLine(&quot;Notecard '&quot; + NoteName + &quot; 'Created&quot;);
@@ -277,23 +521,24 @@
                 return;
             }
 
-            if (cmdLine[1].ToLower() == client.Network.CurrentSim.Region.Name.ToLower())
+            if (cmdLine[1].ToLower() == _Client.Network.CurrentSim.Region.Name.ToLower())
             {
                 Console.WriteLine(&quot;TODO: Add the ability to teleport somewhere in the local region. &quot; +
                     &quot;Exiting for now, please specify a region other than the current one&quot;);
             }
             else
             {
-                if (client.Grid.Regions.Count == 0)
+                if (_Client.Grid.Regions.Count == 0)
                 {
                     Console.WriteLine(&quot;Caching estate sims...&quot;);
-                    client.Grid.AddEstateSims();
+                    _Client.Grid.AddEstateSims();
                     System.Threading.Thread.Sleep(3000);
                 }
 
-                
-                client.Self.Teleport(cmdLine[1], new LLVector3( float.Parse(cmdLine[2]), float.Parse(cmdLine[3]), float.Parse(cmdLine[4]) ) );
+
+                _Client.Self.Teleport(cmdLine[1], new LLVector3(float.Parse(cmdLine[2]), float.Parse(cmdLine[3]), float.Parse(cmdLine[4])));
             }
+
         }
 
         private void regioninfo(string[] cmdLine)
@@ -312,7 +557,7 @@
             }
             regionName = regionName.Trim();
 
-            GridRegion gr = client.Grid.GetGridRegion(regionName);
+            GridRegion gr = _Client.Grid.GetGridRegion(regionName);
             Console.WriteLine(gr);
         }
 
@@ -332,25 +577,26 @@
             if (cmdLine.Length == 3)
             {
                 // Arbitrary Asset
-                Asset asset = new Asset(cmdLine[2], sbyte.Parse(cmdLine[1]), null);
+                try
+                {
+                    Asset asset = new Asset(cmdLine[2], sbyte.Parse(cmdLine[1]), null);
 
-                if (asset.Type == 13)
-                {
-                    AgentInventory.getAssetManager().GetInventoryAsset(asset);
+                    _Client.Assets.GetInventoryAsset(asset);
+
+                    Console.WriteLine(asset.AssetDataToString());
                 }
-                else
+                catch (Exception)
                 {
-                    Console.WriteLine(&quot;Can't currently retrieve assets other then type 13 using this method.  If the item is in your inventory, change directory to the same folder and try specifying the retrieval by just UUID/Name without specifying type.&quot;);
-                    return;
+                    Console.WriteLine(&quot;Unable to find an asset with a UUID of: &quot; + cmdLine[2]);
                 }
-
-                Console.WriteLine(asset.AssetDataToString());
             }
             else
             {
                 // Asset for an item in inventory
-                InventoryFolder iFolder = AgentInventory.getFolder(curDirectory);
-                foreach (InventoryBase ib in iFolder.alContents)
+                InventoryFolder iFolder = _Client.Inventory.getFolder(curDirectory);
+
+                iFolder.RequestDownloadContents(false).RequestComplete.WaitOne(15000, false);
+                foreach (InventoryBase ib in iFolder.GetContents())
                 {
                     if (ib is InventoryItem)
                     {
@@ -383,7 +629,7 @@
             }
             targetDir += combineCmdArg(cmdLine);
 
-            InventoryFolder iFolder = AgentInventory.getFolder(targetDir);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(targetDir);
             if (iFolder == null)
             {
                 Console.WriteLine(&quot;Could not find directory: &quot; + targetDir);
@@ -406,7 +652,7 @@
 
             string targetDir = combineCmdArg(cmdLine);
 
-            InventoryFolder iFolder = AgentInventory.getFolder(curDirectory);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(curDirectory);
 
             InventoryFolder newFolder = iFolder.CreateFolder(targetDir);
 
@@ -452,7 +698,7 @@
             Console.WriteLine(&quot;Changing directory to: &quot; + targetDir );
 
 
-            InventoryFolder iFolder = AgentInventory.getFolder(targetDir);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(targetDir);
 
             if (iFolder == null)
             {
@@ -474,6 +720,26 @@
 
         private void ls(string[] cmdLine)
         {
+            bool displayType = false;
+            bool displayItemID = false;
+            bool displayAssetID = false;
+
+            foreach( string option in cmdLine )
+            {
+                if( option.ToLower().Equals(&quot;/itemid&quot;) )
+                {
+                    displayItemID = true;
+                }
+                if( option.ToLower().Equals(&quot;/assetid&quot;) )
+                {
+                    displayAssetID = true;
+                }
+                if( option.ToLower().Equals(&quot;/type&quot;) )
+                {
+                    displayType = true;
+                }
+            }
+
             Console.WriteLine(&quot;Contents of: &quot; + curDirectory);
             Console.WriteLine(&quot;--------------------------------------------------&quot;);
             if (!curDirectory.Equals(&quot;/&quot;))
@@ -481,18 +747,49 @@
                 Console.WriteLine(&quot;..&quot;);
             }
 
-            InventoryFolder iFolder = AgentInventory.getFolder(curDirectory);
-            foreach (InventoryBase ib in iFolder.alContents)
+            InventoryFolder iFolder = _Client.Inventory.getFolder(curDirectory);
+            iFolder.RequestDownloadContents(false).RequestComplete.WaitOne(15000, false);
+            foreach (InventoryBase ib in iFolder.GetContents())
             {
                 if (ib is InventoryFolder)
                 {
                     InventoryFolder folder = (InventoryFolder)ib;
-                    Console.WriteLine(TYPE_DIR + &quot;&lt;&quot; + folder.FolderID.ToStringHyphenated() + &quot;&gt; &quot; + folder.Name);
+                    StringBuilder output = new StringBuilder(&quot;[DIR] &quot;);
+
+                    if( displayItemID )
+                    {
+                        output.Append(&quot;&lt;itemid:&quot; + folder.FolderID.ToStringHyphenated() + &quot;&gt; &quot;);
+                    }
+                    if( displayType )
+                    {
+                        output.Append(&quot;&lt;type:&quot; + folder.GetDisplayType() + &quot;&gt; &quot;);
+                    }
+
+                    output.Append(folder.Name);
+
+                    Console.WriteLine( output );
                 }
                 else
                 {
                     InventoryItem item = (InventoryItem)ib;
-                    Console.WriteLine(TYPE_ITEM + &quot;&lt;&quot; + item.ItemID.ToStringHyphenated() + &quot;&gt; &quot; + item.Name);
+                    StringBuilder output = new StringBuilder();
+
+                    if (displayItemID)
+                    {
+                        output.Append(&quot;&lt;itemid:&quot; + item.ItemID.ToStringHyphenated() + &quot;&gt; &quot;);
+                    }
+                    if (displayAssetID)
+                    {
+                        output.Append(&quot;&lt;assetid:&quot; + item.AssetID.ToStringHyphenated() + &quot;&gt; &quot;);
+                    }
+                    if (displayType)
+                    {
+                        output.Append(&quot;&lt;type:&quot; + item.GetDisplayType() + &quot;&gt; &quot;);
+                    }
+
+                    output.Append(item.Name);
+
+                    Console.WriteLine(output);
                 }
             }
         }
@@ -510,5 +807,41 @@
             }
             return rtn.Trim();
         }
+
+        void Network_OnConnected(object sender)
+        {
+            ConnectedSignal.Set();
+        }
+
+        protected bool Connect(string FirstName, string LastName, string Password)
+        {
+            Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
+
+            // Setup Login to Second Life
+            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
+
+            // Login
+            if (!_Client.Network.Login(FirstName, LastName, Password, &quot;createnotecard&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            {
+                // Login failed
+                Console.WriteLine(&quot;Error logging in: &quot; + _Client.Network.LoginError);
+                return false;
+            }
+
+            // Login was successful
+            Console.WriteLine(&quot;Login was successful.&quot;);
+            Console.WriteLine(&quot;AgentID:   &quot; + _Client.Network.AgentID);
+            Console.WriteLine(&quot;SessionID: &quot; + _Client.Network.SessionID);
+
+            return true;
+        }
+
+        protected void Disconnect()
+        {
+            // Logout of Second Life
+            Console.WriteLine(&quot;Request logout&quot;);
+            _Client.Network.Logout();
+        }
+
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/IA_MultiImageUpload/MultiImageUpload.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_MultiImageUpload/MultiImageUpload.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_MultiImageUpload/MultiImageUpload.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,6 +1,7 @@
 using System;
 using System.Collections.Generic;
 using System.IO;
+using System.Threading;
 
 using IA_SimpleInventory;
 using IA_ImageTool;
@@ -11,11 +12,14 @@
 
 namespace IA_MultiImageUpload
 {
-    class MultiImageUpload : SimpleInventory
+    class MultiImageUpload
     {
+        private SecondLife _Client;
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
+
         protected string ImageDirectory;
 
-        static new void Main(string[] args)
+        static void Main(string[] args)
         {
             if (args.Length &lt; 4)
             {
@@ -32,14 +36,31 @@
             }
 
             MultiImageUpload app = new MultiImageUpload( fullpath );
-            app.Connect(args[0], args[1], args[2]);
-            app.doStuff();
-            app.Disconnect();
+            if (app.Connect(args[0], args[1], args[2]))
+            {
+                if (app.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+                {
+                    app.doStuff();
+                    app.Disconnect();
+                }
+            }
         }
 
         public MultiImageUpload(string dir)
         {
             ImageDirectory = dir;
+            try
+            {
+                _Client = new SecondLife();
+                _Client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+            }
+            catch (Exception e)
+            {
+                // Error initializing the client
+                Console.WriteLine();
+                Console.WriteLine(e.ToString());
+            }
+
         }
 
         public static void Usage()
@@ -47,9 +68,9 @@
             System.Console.WriteLine(&quot;MultiImageUpload [FirstName] [LastName] [Password] [Directory]&quot;);
         }
 
-        protected new void doStuff()
+        protected void doStuff()
         {
-            InventoryFolder iFolder = AgentInventory.getFolder(&quot;Textures&quot;);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(&quot;Textures&quot;);
             iFolder = iFolder.CreateFolder(Helpers.GetUnixTime().ToString());
 
             Console.WriteLine(&quot;Uploading images:&quot;);
@@ -79,5 +100,39 @@
                 }
             }
         }
+        void Network_OnConnected(object sender)
+        {
+            ConnectedSignal.Set();
+        }
+
+        protected bool Connect(string FirstName, string LastName, string Password)
+        {
+            Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
+
+            // Setup Login to Second Life
+            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
+
+            // Login
+            if (!_Client.Network.Login(FirstName, LastName, Password, &quot;MultiImageUpload&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            {
+                // Login failed
+                Console.WriteLine(&quot;Error logging in: &quot; + _Client.Network.LoginError);
+                return false;
+            }
+
+            // Login was successful
+            Console.WriteLine(&quot;Login was successful.&quot;);
+            Console.WriteLine(&quot;AgentID:   &quot; + _Client.Network.AgentID);
+            Console.WriteLine(&quot;SessionID: &quot; + _Client.Network.SessionID);
+
+            return true;
+        }
+
+        protected void Disconnect()
+        {
+            // Logout of Second Life
+            Console.WriteLine(&quot;Request logout&quot;);
+            _Client.Network.Logout();
+        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/IA_NotecardTool/NotecardTool.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_NotecardTool/NotecardTool.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_NotecardTool/NotecardTool.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -28,6 +28,7 @@
 using System.Collections.Generic;
 using System.IO;
 using System.Text;
+using System.Threading;
 
 using IA_SimpleInventory;
 using libsecondlife;
@@ -35,12 +36,16 @@
 
 namespace IA_NotecardTool
 {
-    class NotecardTool : SimpleInventory
+    class NotecardTool
     {
         private string FileName;
         private string NotecardName;
 
-        static new void Main(string[] args)
+        private SecondLife _Client;
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
+
+
+        static void Main(string[] args)
         {
             if (args.Length &lt; 6)
             {
@@ -59,21 +64,22 @@
             tool.FileName = args[5];
 
             tool.Connect(args[0], args[1], args[2]);
-            tool.doStuff();
-            tool.Disconnect();
 
-            System.Threading.Thread.Sleep(500);
-
+            if (tool.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+            {
+                tool.doStuff();
+                tool.Disconnect();
+            }
         }
 
-        private new void doStuff()
+        private void doStuff()
         {
             Console.WriteLine(&quot;Reading &quot; + FileName);
             StreamReader sr = File.OpenText(FileName);
             string Body = sr.ReadToEnd();
 
             Console.WriteLine(&quot;Getting Notecard Folder&quot;);
-            InventoryFolder iFolder = base.AgentInventory.getFolder(&quot;Notecards&quot;);
+            InventoryFolder iFolder = _Client.Inventory.getFolder(&quot;Notecards&quot;);
 
 
             Console.WriteLine(&quot;Creating Notecard&quot;);
@@ -81,5 +87,55 @@
 
             Console.WriteLine(&quot;Done.&quot;);
         }
+
+        public NotecardTool()
+        {
+            try
+            {
+                _Client = new SecondLife();
+                _Client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+            }
+            catch (Exception e)
+            {
+                // Error initializing the client
+                Console.WriteLine();
+                Console.WriteLine(e.ToString());
+            }
+        }
+
+        void Network_OnConnected(object sender)
+        {
+            ConnectedSignal.Set();
+        }
+
+        protected bool Connect(string FirstName, string LastName, string Password)
+        {
+            Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
+
+            // Setup Login to Second Life
+            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
+
+            // Login
+            if (!_Client.Network.Login(FirstName, LastName, Password, &quot;createnotecard&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            {
+                // Login failed
+                Console.WriteLine(&quot;Error logging in: &quot; + _Client.Network.LoginError);
+                return false;
+            }
+
+            // Login was successful
+            Console.WriteLine(&quot;Login was successful.&quot;);
+            Console.WriteLine(&quot;AgentID:   &quot; + _Client.Network.AgentID);
+            Console.WriteLine(&quot;SessionID: &quot; + _Client.Network.SessionID);
+
+            return true;
+        }
+
+        protected void Disconnect()
+        {
+            // Logout of Second Life
+            Console.WriteLine(&quot;Request logout&quot;);
+            _Client.Network.Logout();
+        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/IA_SimpleInventory/IA_SimpleInventory.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_SimpleInventory/IA_SimpleInventory.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_SimpleInventory/IA_SimpleInventory.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,7 +25,9 @@
  */
 
 using System;
+using System.Collections;
 using System.Collections.Generic;
+using System.Threading;
 
 using libsecondlife;
 using libsecondlife.InventorySystem;
@@ -37,11 +39,9 @@
     /// &lt;/summary&gt;
     public class SimpleInventory
     {
-        protected SecondLife client;
-        protected InventoryManager AgentInventory;
+        private SecondLife client;
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
 
-        protected bool DownloadInventoryOnConnect = true;
-
         public static void Main(string[] args)
         {
 
@@ -52,9 +52,14 @@
             }
 
             SimpleInventory simple = new SimpleInventory();
-            simple.Connect(args[0], args[1], args[2]);
-            simple.doStuff();
-            simple.Disconnect();
+            if (simple.Connect(args[0], args[1], args[2]))
+            {
+                if (simple.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+                {
+                    simple.doStuff();
+                    simple.Disconnect();
+                }
+            }
         }
 
         protected SimpleInventory()
@@ -62,6 +67,7 @@
             try
             {
                 client = new SecondLife();
+                client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
             }
             catch (Exception e)
             {
@@ -71,6 +77,11 @@
             }
         }
 
+        void Network_OnConnected(object sender)
+        {
+            ConnectedSignal.Set();
+        }
+
         protected bool Connect(string FirstName, string LastName, string Password)
         {
             Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
@@ -79,7 +90,7 @@
             Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
 
             // Login
-            if (!client.Network.Login(FirstName, LastName, Password, &quot;createnotecard&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            if (!client.Network.Login(FirstName, LastName, Password, &quot;IA_SimpleInventory&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
             {
                 // Login failed
                 Console.WriteLine(&quot;Error logging in: &quot; + client.Network.LoginError);
@@ -91,22 +102,6 @@
             Console.WriteLine(&quot;AgentID:   &quot; + client.Network.AgentID);
             Console.WriteLine(&quot;SessionID: &quot; + client.Network.SessionID);
 
-            // Get Root Inventory Folder UUID
-            Console.WriteLine(&quot;Pulling root folder UUID from login data.&quot;);
-            List&lt;object&gt; alInventoryRoot = (List&lt;object&gt;)client.Network.LoginValues[&quot;inventory-root&quot;];
-            Dictionary&lt;string, object&gt; htInventoryRoot = (Dictionary&lt;string, object&gt;)alInventoryRoot[0];
-            LLUUID agentRootFolderID = new LLUUID((string)htInventoryRoot[&quot;folder_id&quot;]);
-
-            // Initialize Inventory Manager object
-            Console.WriteLine(&quot;Initializing Inventory Manager.&quot;);
-            AgentInventory = new InventoryManager(client, agentRootFolderID);
-
-            if (DownloadInventoryOnConnect)
-            {
-                // and request an inventory download
-                Console.WriteLine(&quot;Downloading Inventory.&quot;);
-                AgentInventory.DownloadInventory();
-            }
             return true;
         }
 
@@ -119,17 +114,19 @@
 
         protected void doStuff()
         {
+            // and request an inventory download
+            Console.WriteLine(&quot;Downloading Inventory.&quot;);
+            client.Inventory.DownloadInventory();
+
+
             Console.WriteLine(&quot;Dumping a copy of &quot; + client.Self.FirstName + &quot;'s inventory to the console.&quot;);
             Console.WriteLine();
 
-            if (AgentInventory != null)
-            {
-                InventoryFolder root = AgentInventory.getRootFolder();
+            InventoryFolder root = client.Inventory.getRootFolder();
 
-                if (root != null)
-                {
-                    Console.WriteLine(root.toXML(false));
-                }
+            if (root != null)
+            {
+                Console.WriteLine(root.toXML(false));
             }
         }
     }

Modified: branches/aditi/libsecondlife-cs/examples/IA_TestAsyncImage/IA_TestAsyncImage.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/IA_TestAsyncImage/IA_TestAsyncImage.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/IA_TestAsyncImage/IA_TestAsyncImage.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -3,6 +3,7 @@
 using System.IO;
 using System.Text;
 using System.Threading;
+
 using IA_SimpleInventory;
 
 using libsecondlife;
@@ -10,76 +11,79 @@
 
 namespace IA_TestAsyncImage
 {
-    class TestAsync : SimpleInventory
+    class TestAsync
     {
-        ImageManager imgManager;
+        private SecondLife _Client;
+        private ManualResetEvent ConnectedSignal = new ManualResetEvent(false);
 
-        Queue&lt;LLUUID&gt; TextureQueue = new Queue&lt;LLUUID&gt;();
 
-        string OutputDirectory = &quot;IA_TestAsyncImages&quot;;
+        private Queue&lt;LLUUID&gt; TextureQueue = new Queue&lt;LLUUID&gt;();
 
+        private string OutputDirectory = &quot;IA_TestAsyncImages&quot;;
+
         [STAThread]
-        static new void Main(string[] args)
+        static void Main(string[] args)
         {
             TestAsync app = new TestAsync();
-            app.DownloadInventoryOnConnect = false;
 
-            app.client.Objects.OnNewPrim += new ObjectManager.NewPrimCallback(app.Objects_OnNewPrim);
-            app.client.Objects.OnNewAvatar += new ObjectManager.NewAvatarCallback(app.Objects_OnNewAvatar);
+            app._Client.Objects.OnNewPrim += new ObjectManager.NewPrimCallback(app.Objects_OnNewPrim);
+            app._Client.Objects.OnNewAvatar += new ObjectManager.NewAvatarCallback(app.Objects_OnNewAvatar);
 
 
             app.Connect(args[0], args[1], args[2]);
-            app.doStuff();
-            app.Disconnect();
-
-            System.Threading.Thread.Sleep(500);
-
+            if (app.ConnectedSignal.WaitOne(TimeSpan.FromMinutes(1), false))
+            {
+                app.doStuff();
+                app.Disconnect();
+            }
             Console.WriteLine(&quot;Done...&quot;);
         }
 
+        public TestAsync()
+        {
+            try
+            {
+                _Client = new SecondLife();
+                _Client.Images = new ImageManager(_Client, ImageManager.CacheTypes.Disk, OutputDirectory);
+                _Client.Network.OnConnected += new NetworkManager.ConnectedCallback(Network_OnConnected);
+            }
+            catch (Exception e)
+            {
+                // Error initializing the client
+                Console.WriteLine();
+                Console.WriteLine(e.ToString());
+            }
+        }
+
         private void Objects_OnNewAvatar(Simulator simulator, Avatar avatar, ulong regionHandle, ushort timeDilation)
         {
-            if (imgManager == null)
+            if (avatar.ProfileProperties.FirstLifeImage != null)
             {
-                Console.WriteLine(&quot;ImageManager not ready yet, queueing Avatar textures.&quot;);
-                TextureQueue.Enqueue(avatar.FirstLifeImage);
-                TextureQueue.Enqueue(avatar.ProfileImage);
-
-                foreach (TextureEntryFace tef in avatar.Textures.FaceTextures.Values)
+                if (_Client.Images.isCachedImage(avatar.ProfileProperties.FirstLifeImage) == false)
                 {
-                    TextureQueue.Enqueue(tef.TextureID);
+                    _Client.Images.RequestImageAsync(avatar.ProfileProperties.FirstLifeImage);
                 }
             }
-            else
+
+            if (avatar.ProfileProperties.ProfileImage != null)
             {
-                if (avatar.FirstLifeImage != null)
+                if (_Client.Images.isCachedImage(avatar.ProfileProperties.FirstLifeImage) == false)
                 {
-                    if (imgManager.isCachedImage(avatar.FirstLifeImage) == false)
-                    {
-                        imgManager.RequestImageAsync(avatar.FirstLifeImage);
-                    }
+                    _Client.Images.RequestImageAsync(avatar.ProfileProperties.ProfileImage);
                 }
+            }
 
-                if (avatar.ProfileImage != null)
+            if (avatar.Textures != null)
+            {
+                foreach (TextureEntryFace tef in avatar.Textures.FaceTextures.Values)
                 {
-                    if (imgManager.isCachedImage(avatar.FirstLifeImage) == false)
+                    if (_Client.Images.isCachedImage(tef.TextureID) == false)
                     {
-                        imgManager.RequestImageAsync(avatar.ProfileImage);
+                        _Client.Images.RequestImageAsync(tef.TextureID);
                     }
-                }
-
-                if (avatar.Textures != null)
-                {
-                    foreach (TextureEntryFace tef in avatar.Textures.FaceTextures.Values)
+                    else
                     {
-                        if (imgManager.isCachedImage(tef.TextureID) == false)
-                        {
-                            imgManager.RequestImageAsync(tef.TextureID);
-                        }
-                        else
-                        {
-                            Console.WriteLine(&quot;Already cached: &quot; + tef.TextureID);
-                        }
+                        Console.WriteLine(&quot;Already cached: &quot; + tef.TextureID);
                     }
                 }
             }
@@ -87,44 +91,31 @@
 
         private void Objects_OnNewPrim(Simulator simulator, PrimObject prim, ulong regionHandle, ushort timeDilation)
         {
-            if (imgManager == null)
+            if ((prim.Textures.DefaultTexture != null) &amp;&amp; (prim.Textures.DefaultTexture.TextureID != null))
             {
-                Console.WriteLine(&quot;ImageManager not ready yet, queueing Prim textures.&quot;);
-                TextureQueue.Enqueue(prim.Textures.DefaultTexture.TextureID);
-
-                foreach (TextureEntryFace tef in prim.Textures.FaceTextures.Values)
+                if (_Client.Images.isCachedImage(prim.Textures.DefaultTexture.TextureID) == false)
                 {
-                    TextureQueue.Enqueue(tef.TextureID);
+                    _Client.Images.RequestImageAsync(prim.Textures.DefaultTexture.TextureID);
                 }
+                else
+                {
+                    Console.WriteLine(&quot;Already cached: &quot; + prim.Textures.DefaultTexture.TextureID);
+                }
             }
-            else
+
+            if (prim.Textures.FaceTextures != null)
             {
-                if ((prim.Textures.DefaultTexture != null) &amp;&amp; (prim.Textures.DefaultTexture.TextureID != null))
+                foreach (TextureEntryFace tef in prim.Textures.FaceTextures.Values)
                 {
-                    if (imgManager.isCachedImage(prim.Textures.DefaultTexture.TextureID) == false)
+                    if (_Client.Images.isCachedImage(tef.TextureID) == false)
                     {
-                        imgManager.RequestImageAsync(prim.Textures.DefaultTexture.TextureID);
+                        _Client.Images.RequestImageAsync(tef.TextureID);
                     }
                     else
                     {
-                        Console.WriteLine(&quot;Already cached: &quot; + prim.Textures.DefaultTexture.TextureID);
+                        Console.WriteLine(&quot;Already cached: &quot; + tef.TextureID);
                     }
                 }
-
-                if (prim.Textures.FaceTextures != null)
-                {
-                    foreach (TextureEntryFace tef in prim.Textures.FaceTextures.Values)
-                    {
-                        if (imgManager.isCachedImage(tef.TextureID) == false)
-                        {
-                            imgManager.RequestImageAsync(tef.TextureID);
-                        }
-                        else
-                        {
-                            Console.WriteLine(&quot;Already cached: &quot; + tef.TextureID);
-                        }
-                    }
-                }
             }
         }
 
@@ -153,14 +144,14 @@
             }
         }
 
-        protected new void doStuff()
+        protected void doStuff()
         {
-            imgManager = new ImageManager(client, ImageManager.CacheTypes.Disk, OutputDirectory);
-            imgManager.OnImageRetrieved += new ImageRetrievedCallback(NewImageRetrievedCallBack);
+            
+            _Client.Images.OnImageRetrieved += new ImageRetrievedCallback(NewImageRetrievedCallBack);
 
             while (TextureQueue.Count &gt; 0)
             {
-                imgManager.RequestImageAsync(TextureQueue.Dequeue());
+                _Client.Images.RequestImageAsync(TextureQueue.Dequeue());
             }
 
             Console.WriteLine(&quot;Press any key to stop.&quot;);
@@ -183,5 +174,40 @@
                 File.WriteAllBytes(filename, JasperWrapper.jasper_decode_j2c_to_tiff(j2cdata));
             }
         }
+
+        void Network_OnConnected(object sender)
+        {
+            ConnectedSignal.Set();
+        }
+
+        protected bool Connect(string FirstName, string LastName, string Password)
+        {
+            Console.WriteLine(&quot;Attempting to connect and login to SecondLife.&quot;);
+
+            // Setup Login to Second Life
+            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
+
+            // Login
+            if (!_Client.Network.Login(FirstName, LastName, Password, &quot;createnotecard&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;))
+            {
+                // Login failed
+                Console.WriteLine(&quot;Error logging in: &quot; + _Client.Network.LoginError);
+                return false;
+            }
+
+            // Login was successful
+            Console.WriteLine(&quot;Login was successful.&quot;);
+            Console.WriteLine(&quot;AgentID:   &quot; + _Client.Network.AgentID);
+            Console.WriteLine(&quot;SessionID: &quot; + _Client.Network.SessionID);
+
+            return true;
+        }
+
+        protected void Disconnect()
+        {
+            // Logout of Second Life
+            Console.WriteLine(&quot;Request logout&quot;);
+            _Client.Network.Logout();
+        }
     }
 }

Copied: branches/aditi/libsecondlife-cs/examples/Key2Name (from rev 775, trunk/libsecondlife-cs/examples/Key2Name)

Deleted: branches/aditi/libsecondlife-cs/examples/Key2Name/Program.cs
===================================================================
--- trunk/libsecondlife-cs/examples/Key2Name/Program.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/Key2Name/Program.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,41 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Text;
-using libsecondlife;
-using libsecondlife.Utilities;
-
-namespace Key2Name
-{
-    class Program
-    {
-        static void Main(string[] args)
-        {
-            SecondLife client = new SecondLife();
-            if (args.Length &lt; 4)
-            {
-                Console.WriteLine(&quot;Usage: Key2Name [loginfirstname] [loginlastname] [password] [key]&quot;);
-                return;
-            }
-            Console.WriteLine(&quot;Attempting to connect and login to Second Life.&quot;);
-
-            // Setup Login to Second Life
-            Dictionary&lt;string, object&gt; loginParams = client.Network.DefaultLoginValues(args[0],
-                args[1], args[2], &quot;00:00:00:00:00:00&quot;, &quot;last&quot;, &quot;Win&quot;, &quot;0&quot;, &quot;key2name&quot;,
-                &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">jessemalthus at gmail.com</A>&quot;);
-            Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string, object&gt;();
-            if (!client.Network.Login(loginParams))
-            {
-                // Login failed
-                Console.WriteLine(&quot;Error logging in: &quot; + client.Network.LoginError);
-                return;
-            }
-            AvatarTracker avatarTracker = new AvatarTracker(client);
-            LLUUID lookup = new LLUUID(args[3]);
-            Console.WriteLine(&quot;Looking up name for &quot; + lookup.ToStringHyphenated());
-            string name = avatarTracker.GetAvatarName(lookup);
-            Console.WriteLine(&quot;Name: &quot; + name + &quot;. Press enter to logout.&quot;);
-            Console.ReadLine();
-            client.Network.Logout();
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/examples/Key2Name/Program.cs (from rev 775, trunk/libsecondlife-cs/examples/Key2Name/Program.cs)

Copied: branches/aditi/libsecondlife-cs/examples/Key2Name/Properties (from rev 775, trunk/libsecondlife-cs/examples/Key2Name/Properties)

Deleted: branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs
===================================================================
--- trunk/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,33 +0,0 @@
-&#65279;using System.Reflection;
-using System.Runtime.CompilerServices;
-using System.Runtime.InteropServices;
-
-// General Information about an assembly is controlled through the following 
-// set of attributes. Change these attribute values to modify the information
-// associated with an assembly.
-[assembly: AssemblyTitle(&quot;Key2Name&quot;)]
-[assembly: AssemblyDescription(&quot;&quot;)]
-[assembly: AssemblyConfiguration(&quot;&quot;)]
-[assembly: AssemblyCompany(&quot;Thearis Systems/RedWire Virtual&quot;)]
-[assembly: AssemblyProduct(&quot;Key2Name&quot;)]
-[assembly: AssemblyCopyright(&quot;Copyright &#169; Thearis Systems/RedWire Virtual 2006&quot;)]
-[assembly: AssemblyTrademark(&quot;&quot;)]
-[assembly: AssemblyCulture(&quot;&quot;)]
-
-// Setting ComVisible to false makes the types in this assembly not visible 
-// to COM components.  If you need to access a type in this assembly from 
-// COM, set the ComVisible attribute to true on that type.
-[assembly: ComVisible(false)]
-
-// The following GUID is for the ID of the typelib if this project is exposed to COM
-[assembly: Guid(&quot;d7607cfe-25cf-4240-a0ea-064b54f3b71d&quot;)]
-
-// Version information for an assembly consists of the following four values:
-//
-//      Major Version
-//      Minor Version 
-//      Build Number
-//      Revision
-//
-[assembly: AssemblyVersion(&quot;1.0.0.0&quot;)]
-[assembly: AssemblyFileVersion(&quot;1.0.0.0&quot;)]

Copied: branches/aditi/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs (from rev 775, trunk/libsecondlife-cs/examples/Key2Name/Properties/AssemblyInfo.cs)

Modified: branches/aditi/libsecondlife-cs/examples/ParcelDownload/ParcelDownload.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/ParcelDownload/ParcelDownload.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/ParcelDownload/ParcelDownload.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -52,7 +52,7 @@
 
 			client = new SecondLife();
 
-            Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(args[0], args[1], args[2], 
+            Dictionary&lt;string, object&gt; loginParams = client.Network.DefaultLoginValues(args[0], args[1], args[2], 
                 &quot;00:00:00:00:00:00&quot;, &quot;last&quot;, &quot;Win&quot;, &quot;0&quot;, &quot;ParcelDownload&quot;, &quot;Adam \&quot;Zaius\&quot; Frisby &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">adam at gwala.net</A>&gt;&quot;);
 
 			if (!client.Network.Login(loginParams))

Modified: branches/aditi/libsecondlife-cs/examples/Teleport/Teleport.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/Teleport/Teleport.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/Teleport/Teleport.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -83,7 +83,7 @@
             Console.WriteLine(&quot;Attempting to connect and login to Second Life.&quot;);
 
             // Setup Login to Second Life
-            Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(FirstName, 
+            Dictionary&lt;string, object&gt; loginParams = Client.Network.DefaultLoginValues(FirstName, 
                 LastName, Password, &quot;00:00:00:00:00:00&quot;, &quot;last&quot;, &quot;Win&quot;, &quot;0&quot;, &quot;createnotecard&quot;, 
                 &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">static.sprocket at gmail.com</A>&quot;);
             Dictionary&lt;string, object&gt; loginReply = new Dictionary&lt;string,object&gt;();
@@ -136,7 +136,7 @@
                 }
             }
 
-            Client.Self.OnTeleport += new TeleportCallback(Avatar_OnTeleportMessage);
+            Client.Self.OnTeleport += new MainAvatar.TeleportCallback(Self_OnTeleport);
 
             DoneTeleporting = false;
             Client.Self.Teleport(RegionHandle, coords);
@@ -147,11 +147,11 @@
             }
         }
 
-        private void Avatar_OnTeleportMessage(string message, TeleportStatus status)
+        void Self_OnTeleport(Simulator currentSim, string message, MainAvatar.TeleportStatus status)
         {
             Console.WriteLine(message);
 
-            if (status == TeleportStatus.Finished || status == TeleportStatus.Failed)
+            if (status == MainAvatar.TeleportStatus.Finished || status == MainAvatar.TeleportStatus.Failed)
             {
                 DoneTeleporting = true;
             }

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Arguments.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Arguments.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/ClientManager.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/ClientManager.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Command.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Command.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Command.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -12,7 +12,7 @@
 		public string Description;
 		public TestClient TestClient;
 
-		public abstract string Execute(SecondLife Client, string[] args, LLUUID fromAgentID);
+		public abstract string Execute(string[] args, LLUUID fromAgentID);
 
 		/// &lt;summary&gt;
 		/// When set to true, think will be called.

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/AppearanceCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/AppearanceCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/BalanceCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/BalanceCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/BalanceCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,6 +1,5 @@
 using System;
 using System.Collections.Generic;
-using System.Text;
 using libsecondlife;
 using libsecondlife.Packets;
 
@@ -8,15 +7,20 @@
 {
     public class BalanceCommand: Command
     {
-		public BalanceCommand()
+        SecondLife Client;
+
+        public BalanceCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;balance&quot;;
 			Description = &quot;Shows the amount of L$.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
-			return &quot;L$: &quot; + Client.Self.Balance;
+			return Client.ToString() + &quot; has L$: &quot; + Client.Self.Balance;
 		}
     }
 }

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/CloneProfileCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/CloneProfileCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/EchoMasterCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/EchoMasterCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ExportCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/ExportCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ExportOutfitCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/ExportOutfitCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FindSimCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/FindSimCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FollowCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FollowCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/FollowCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,23 +8,38 @@
 {
     public class FollowCommand: Command
     {
-		public FollowCommand()
+        SecondLife Client;
+
+		public FollowCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;follow&quot;;
-			Description = &quot;Follow another avatar. (usage: follow FirstName LastName)&quot;;
+			Description = &quot;Follow another avatar. (usage: follow [FirstName LastName])  If no target is set then will follow master.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			string target = String.Empty;
-			for (int ct = 0; ct &lt; args.Length;ct++)
+			for (int ct = 0; ct &lt; args.Length; ct++)
 				target = target + args[ct] + &quot; &quot;;
 			target = target.TrimEnd();
-			
-			if (Follow(target))
-				return &quot;Following &quot; + target;
-			else
-				return &quot;Unable to follow &quot; + target + &quot;.  Client may not be able to see that avatar.&quot;;
+
+			if (target.Length == 0)
+				target = TestClient.Master;
+
+            if (target.Length &gt; 0)
+            {
+                if (Follow(target))
+                    return &quot;Following &quot; + target;
+                else
+                    return &quot;Unable to follow &quot; + target + &quot;.  Client may not be able to see that avatar.&quot;;
+            }
+            else
+            {
+                return &quot;No target specified and no master is set. usage: follow [FirstName LastName])&quot;;
+            }
 		}
 
         const float DISTANCE_BUFFER = 3.0f;
@@ -33,7 +48,7 @@
 
         bool Follow(string name)
         {
-            foreach (Avatar av in TestClient.Avatars.Values)
+            foreach (Avatar av in TestClient.AvatarList.Values)
             {
                 if (av.Name == name)
 				{
@@ -48,48 +63,25 @@
 
 		public override void Think(SecondLife Client)
 		{
-            if (vecDist(followAvatar.Position, Client.Self.Position) &gt; DISTANCE_BUFFER)
+            if (Helpers.VecDist(followAvatar.Position, Client.Self.Position) &gt; DISTANCE_BUFFER)
             {
-                if (followAvatar.CurrentRegion.GridRegionData != null)
-                {
-                    // move toward target
-                    ulong x = (ulong)(followAvatar.Position.X + (followAvatar.CurrentRegion.GridRegionData.X * 256));
-                    ulong y = (ulong)(followAvatar.Position.Y + (followAvatar.CurrentRegion.GridRegionData.Y * 256));
-                    Client.Self.AutoPilotLocal(Convert.ToInt32(followAvatar.Position.X), Convert.ToInt32(followAvatar.Position.Y), followAvatar.Position.Z);
-                }
+                //move toward target
+				if (followAvatar.CurrentRegion.GridRegionData != null)
+				{
+					//ulong x = (ulong)(followAvatar.Position.X + (followAvatar.CurrentRegion.GridRegionData.X * 256));
+					//ulong y = (ulong)(followAvatar.Position.Y + (followAvatar.CurrentRegion.GridRegionData.Y * 256));
+					Client.Self.AutoPilotLocal(Convert.ToInt32(followAvatar.Position.X), Convert.ToInt32(followAvatar.Position.Y), followAvatar.Position.Z);
+				}
             }
 			//else
 			//{
 			//    //stop at current position
-			//    LLVector3 myPos = Client.Self.Position;
-			//    Client.Self.AutoPilot((ulong)myPos.X, (ulong)myPos.Y, myPos.Z);
+			//    LLVector3 myPos = client.Self.Position;
+			//    client.Self.AutoPilot((ulong)myPos.x, (ulong)myPos.y, myPos.Z);
 			//}
 
 			base.Think(Client);
 		}
 
-		//void SendAgentUpdate(uint ControlID)
-		//{
-		//    AgentUpdatePacket p = new AgentUpdatePacket();
-		//    p.AgentData.Far = 30.0f;
-		//    p.AgentData.CameraAtAxis = new LLVector3(0, 0, 0);
-		//    p.AgentData.CameraCenter = new LLVector3(0, 0, 0);
-		//    p.AgentData.CameraLeftAxis = new LLVector3(0, 0, 0);
-		//    p.AgentData.CameraUpAxis = new LLVector3(0, 0, 0);
-		//    p.AgentData.HeadRotation = new LLQuaternion(0, 0, 0, 1); ;
-		//    p.AgentData.BodyRotation = new LLQuaternion(0, 0, 0, 1); ;
-		//    p.AgentData.AgentID = client.Network.AgentID;
-		//    p.AgentData.SessionID = client.Network.SessionID;
-		//    p.AgentData.ControlFlags = ControlID;
-		//    client.Network.SendPacket(p);
-		//}
-
-        float vecDist(LLVector3 pointA, LLVector3 pointB)
-        {
-            float xd = pointB.X - pointA.X;
-            float yd = pointB.Y - pointA.Y;
-            float zd = pointB.Z - pointA.Z;
-            return (float)Math.Sqrt(xd * xd + yd * yd + zd * zd);
-        }
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GiveAllCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GiveAllCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GiveAllCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,13 +8,18 @@
 {
     public class GiveAllCommand: Command
     {
-		public GiveAllCommand()
+        SecondLife Client;
+
+		public GiveAllCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;giveAll&quot;;
 			Description = &quot;Gives you all it's money.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			if (fromAgentID == null)
 				return &quot;Unable to send money to console.  This command only works when IMed.&quot;;

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GotoCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GotoCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/GotoCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,15 +8,19 @@
 {
     public class GotoCommand: Command
     {
+        SecondLife Client;
         private bool EstateLookupFinished = false;
 
-		public GotoCommand()
+        public GotoCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;goto&quot;;
 			Description = &quot;Teleport to a location (e.g. \&quot;goto Hooper/100/100/30\&quot;)&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			if (args.Length &lt; 1)
                 return &quot;usage: Destination should be specified as sim/x/y/z&quot;;

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/HelpCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/HelpCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/HelpCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,13 +8,18 @@
 {
     public class HelpCommand: Command
     {
-		public HelpCommand()
+        SecondLife Client;
+
+        public HelpCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;help&quot;;
 			Description = &quot;Lists available commands.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			StringBuilder result = new StringBuilder();
 			result.AppendFormat(&quot;\n\nHELP\nClient accept teleport lures from master and group members.\n&quot;);

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/IMCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/IMCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ImportCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/ImportCommand.cs)

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ImportOutfitCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/ImportOutfitCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/JumpCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/JumpCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/JumpCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,13 +8,18 @@
 {
     public class JumpCommand: Command
     {
-		public JumpCommand()
+        SecondLife Client;
+
+        public JumpCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;jump&quot;;
 			Description = &quot;Teleports to the specified height. (e.g. \&quot;jump 1000\&quot;)&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			if (args.Length != 1)
                 return &quot;usage: jump 1000&quot;;

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoadCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/LoadCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LocationCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LocationCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LocationCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,13 +8,18 @@
 {
     public class LocationCommand: Command
     {
-		public LocationCommand()
+        SecondLife Client;
+
+        public LocationCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;location&quot;;
 			Description = &quot;Show the location.&quot;;
 		}
 
-		public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+		public override string Execute(string[] args, LLUUID fromAgentID)
 		{
             return &quot;CurrentSim: '&quot; + Client.Network.CurrentSim.Region.Name + &quot;' Position: &quot; + Client.Self.Position.ToString();
 		}

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoginCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoginCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LoginCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,46 +8,27 @@
 {
     public class LoginCommand : Command
     {
-        public LoginCommand()
+        public LoginCommand(TestClient testClient)
         {
+            TestClient = testClient;
             Name = &quot;login&quot;;
             Description = &quot;Logs in another avatar&quot;;
         }
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
         {
             if (args.Length != 3)
                 return &quot;usage: login firstname lastname password&quot;;
 
-            LoginDetails account = new LoginDetails();
-            account.FirstName = args[0];
-            account.LastName = args[1];
-            account.Password = args[2];
+            SecondLife newClient = TestClient.ClientManager.Login(args);
 
-            // Check if this client is already logged in
-            foreach (SecondLife client in TestClient.Clients.Values)
-            {
-                if (client.Self.FirstName == account.FirstName &amp;&amp; client.Self.LastName == account.LastName)
-                {
-                    TestClient.Clients.Remove(client.Network.AgentID);
-
-                    client.Network.Logout();
-
-                    break;
-                }
-            }
-
-            SecondLife newClient = TestClient.InitializeClient(account);
-
             if (newClient.Network.Connected)
             {
-                TestClient.Clients[newClient.Network.AgentID] = newClient;
-
                 return &quot;Logged in &quot; + newClient.ToString();
             }
             else
             {
-                return &quot;Failed to login &quot; + account.FirstName + &quot; &quot; + account.LastName + &quot;: &quot; +
+                return &quot;Failed to login: &quot; +
                     newClient.Network.LoginError;
             }
         }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LogoutCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LogoutCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/LogoutCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,28 +8,22 @@
 {
     public class LogoutCommand : Command
     {
-        public LogoutCommand()
+        SecondLife Client;
+
+        public LogoutCommand(TestClient testClient)
         {
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
             Name = &quot;logout&quot;;
             Description = &quot;Log this avatar out&quot;;
         }
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
         {
             string name = Client.ToString();
-            TestClient.Clients.Remove(Client.Network.AgentID);
-            Client.Network.Logout();
-            Client = null;
-
-            if (TestClient.Clients.Count &gt; 0)
-            {
-                return &quot;Logged &quot; + name + &quot; out&quot;;
-            }
-            else
-            {
-                TestClient.Running = false;
-                return &quot;All avatars logged out&quot;;
-            }
+			TestClient.ClientManager.Logout(TestClient);
+            return &quot;Logged &quot; + name + &quot; out&quot;;
         }
     }
 }

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PacketLogCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/PacketLogCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PrimCountCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PrimCountCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/PrimCountCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,15 +8,30 @@
 {
     public class PrimCountCommand: Command
     {
-		public PrimCountCommand()
+        SecondLife Client;
+
+        public PrimCountCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;primCount&quot;;
 			Description = &quot;Shows the number of prims that have been received.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
-			return TestClient.Prims.Count.ToString();
+            int count = 0;
+
+            lock (TestClient.SimPrims)
+            {
+                foreach (Dictionary&lt;uint, PrimObject&gt; prims in TestClient.SimPrims.Values)
+                {
+                    count += prims.Count;
+                }
+            }
+
+			return count.ToString();
 		}
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/QuitCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/QuitCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/QuitCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,20 +8,21 @@
 {
     public class QuitCommand: Command
     {
-		public QuitCommand()
+        SecondLife Client;
+
+        public QuitCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;quit&quot;;
 			Description = &quot;Log all avatars out and shut down&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
-            foreach (SecondLife client in TestClient.Clients.Values)
-            {
-                client.Network.Logout();
-            }
-
-            TestClient.Running = false;
+			TestClient.ClientManager.LogoutAll();
+            TestClient.ClientManager.Running = false;
             return &quot;All avatars logged out&quot;;
 		}
     }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SayCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SayCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SayCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,23 +8,38 @@
 {
     public class SayCommand: Command
     {
-		public SayCommand()
+        SecondLife Client;
+
+        public SayCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;say&quot;;
-			Description = &quot;Say something.&quot;;
+			Description = &quot;Say something.  (usage: say (optional channel) whatever)&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
-			if (args.Length &lt; 1)
-                return &quot;usage: say whatever&quot;;
+            int channel = 0;
+            int startIndex = 0;
+            string message = String.Empty;
+            if (args.Length &lt; 1)
+            {
+                return &quot;usage: say (optional channel) whatever&quot;;
+            }
+            else if (args.Length &gt; 1)
+            {
+                if (Int32.TryParse(args[0], out channel))
+					startIndex = 1;
+            }
+            
+			for (int i = startIndex; i &lt; args.Length; i++) {
+				message += args[i] + &quot; &quot;;
+            }
 
-			string message = String.Empty;
-			foreach (string s in args)
-				message += s + &quot; &quot;;
+			Client.Self.Chat(message, channel, MainAvatar.ChatType.Normal);
 
-			Client.Self.Chat(message, 0, MainAvatar.ChatType.Normal);
-
             return &quot;Said &quot; + message;
 		}
     }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SetMasterCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SetMasterCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SetMasterCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,28 +8,32 @@
 {
     public class SetMasterCommand: Command
     {
+        SecondLife Client;
 		public DateTime Created = DateTime.Now;
 
-		public SetMasterCommand()
+        public SetMasterCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;setMaster&quot;;
 			Description = &quot;Sets the user name of the master user.  The master user can IM to run commands.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			string masterName = String.Empty;
 			for (int ct = 0; ct &lt; args.Length;ct++)
 				masterName = masterName + args[ct] + &quot; &quot;;
 			TestClient.Master = masterName.TrimEnd();
 
-			foreach (Avatar av in TestClient.Avatars.Values)
+			foreach (Avatar av in TestClient.AvatarList.Values)
 			{
-				if (av.Name == TestClient.Master)
-				{
-					Client.Self.InstantMessage(av.ID, &quot;You are now my master.  IM me with \&quot;help\&quot; for a command list.&quot;);
-					break;
-				}
+			    if (av.Name == TestClient.Master)
+			    {
+			        Client.Self.InstantMessage(av.ID, &quot;You are now my master.  IM me with \&quot;help\&quot; for a command list.&quot;);
+			        break;
+			    }
 			}
 
 			return &quot;Master set to &quot; + masterName;

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/ShoutCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/ShoutCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SitCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SitCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/SitCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,72 +8,50 @@
 {
     public class SitCommand: Command
     {
-		public SitCommand()
-		{
-			Name = &quot;sit&quot;;
-			Description = &quot;Sit on closest touchable prim.&quot;;
-		}
+        SecondLife Client;
 
-		public string Sit(SecondLife Client, LLUUID target)
+        public SitCommand(TestClient testClient)
 		{
-		    AgentRequestSitPacket sitPacket = new AgentRequestSitPacket();
-			
-		    sitPacket.AgentData.AgentID = Client.Network.AgentID;
-		    sitPacket.AgentData.SessionID = Client.Network.SessionID;
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
 
-		    sitPacket.TargetObject.TargetID = target;
-		    sitPacket.TargetObject.Offset = new LLVector3();
-
-		    Client.Network.SendPacket(sitPacket);
-
-//			SitTime = DateTime.Now;
-
-		    return String.Empty;
+			Name = &quot;sit&quot;;
+			Description = &quot;Attempt to sit on the closest prim&quot;;
 		}
-
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+			
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 		    PrimObject closest = null;
 		    double closestDistance = Double.MaxValue;
 
-		    lock (TestClient.Prims)
+		    lock (TestClient.SimPrims)
 		    {
-		        foreach (PrimObject p in TestClient.Prims.Values)
-		        {
-		            if ((p.Flags &amp; ObjectFlags.Touch) &gt; 0)
-		            {
-		                double distance = QuadranceBetween(Client.Self.Position, p.Position);
-		                if (closest == null || distance &lt; closestDistance)
-		                {
-		                    closest = p;
-		                    closestDistance = distance;
-		                }
-		            }
-		        }
-		    }
+                if (TestClient.SimPrims.ContainsKey(Client.Network.CurrentSim))
+                {
+                    foreach (PrimObject p in TestClient.SimPrims[Client.Network.CurrentSim].Values)
+                    {
+                        float distance = Helpers.VecDist(Client.Self.Position, p.Position);
 
-		    if (closest != null)
-		    {
-		        Sit(Client, closest.ID);
-		        return TestClient.Prims.Count + &quot; prims. Sat on &quot; + closest.ID + &quot;. Distance: &quot; + closestDistance;
+                        if (closest == null || distance &lt; closestDistance)
+                        {
+                            closest = p;
+                            closestDistance = distance;
+                        }
+                    }
+                }
 		    }
 
-		    return String.Empty;
-		}
+            if (closest != null)
+            {
+                Client.Self.RequestSit(closest.ID, LLVector3.Zero);
+                Client.Self.Sit();
 
-		//string sitTimeCommand(string[] args, LLUUID fromAgentID)
-		//{
-		//    return &quot;Sitting Since: &quot; + SitTime + &quot; (&quot; + (DateTime.Now - SitTime) + &quot;)&quot;;
-		//}
-
-		public static double QuadranceBetween(LLVector3 a, LLVector3 b)
-		{
-			return
-				(
-					((a.X - b.X) * (a.X - b.X))
-					+ ((a.Y - b.Y) * (a.Y - b.Y))
-					+ ((a.Z - b.Z) * (a.Z - b.Z))
-				);
+                return &quot;Sat on &quot; + closest.ID + &quot;. Distance: &quot; + closestDistance;
+            }
+            else
+            {
+                return &quot;Couldn't find a nearby prim to sit on&quot;;
+            }
 		}
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/TreeCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/TreeCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/TreeCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,13 +8,18 @@
 {
     public class TreeCommand: Command
     {
-		public TreeCommand()
+        SecondLife Client;
+
+        public TreeCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;tree&quot;;
 			Description = &quot;Rez a tree.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 		    if (args.Length == 1)
 		    {

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/UptimeCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/UptimeCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/UptimeCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -6,19 +6,24 @@
 
 namespace libsecondlife.TestClient
 {
-    public class UptimeCommand: Command
+    public class UptimeCommand : Command
     {
-		public DateTime Created = DateTime.Now;
+        SecondLife Client;
+        public DateTime Created = DateTime.Now;
 
-		public UptimeCommand()
-		{
-			Name = &quot;uptime&quot;;
-			Description = &quot;Shows the login time and length of time logged on.&quot;;
-		}
+        public UptimeCommand(TestClient testClient)
+        {
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
-		{
-			return &quot;Up Since: &quot; + Created + &quot; (&quot; + (DateTime.Now - Created) + &quot;)&quot;;
-		}
+            Name = &quot;uptime&quot;;
+            Description = &quot;Shows the login name, login time and length of time logged on.&quot;;
+        }
+
+        public override string Execute(string[] args, LLUUID fromAgentID)
+        {
+            string name = Client.ToString();
+            return &quot;I am &quot; + name + &quot;, Up Since: &quot; + Created + &quot; (&quot; + (DateTime.Now - Created) + &quot;)&quot;;
+        }
     }
-}
+}
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhisperCommand.cs (from rev 775, trunk/libsecondlife-cs/examples/TestClient/Commands/WhisperCommand.cs)

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhoCommand.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhoCommand.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Commands/WhoCommand.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -8,18 +8,23 @@
 {
     public class WhoCommand: Command
     {
-		public WhoCommand()
+        SecondLife Client;
+
+        public WhoCommand(TestClient testClient)
 		{
+            TestClient = testClient;
+            Client = (SecondLife)TestClient;
+
 			Name = &quot;who&quot;;
 			Description = &quot;Lists seen avatars.&quot;;
 		}
 
-        public override string Execute(SecondLife Client, string[] args, LLUUID fromAgentID)
+        public override string Execute(string[] args, LLUUID fromAgentID)
 		{
 			StringBuilder result = new StringBuilder();
-			foreach (Avatar av in TestClient.Avatars.Values)
+			foreach (Avatar av in TestClient.AvatarList.Values)
 			{
-				result.AppendFormat(&quot;\n{0} {1}&quot;, av.Name, av.GroupName);
+				result.AppendFormat(&quot;\n{0} {1} {2}/{3} ID: {4}&quot;, av.Name, av.GroupName, av.CurrentRegion != null ? av.CurrentRegion.Name : String.Empty, av.Position, av.ID);
 			}
 
             return result.ToString();

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/Program.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/Program.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/Program.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,6 +1,7 @@
 using System;
 using System.Collections.Generic;
 using System.IO;
+using CommandLine.Utility;
 
 namespace libsecondlife.TestClient
 {
@@ -9,29 +10,33 @@
         private static void Usage()
         {
             Console.WriteLine(&quot;Usage: &quot; + Environment.NewLine +
-                    &quot;TestClient.exe firstname lastname password [master name]&quot; + Environment.NewLine +
-                    &quot;TestClient.exe --file filename [master name]&quot;);
+                    &quot;TestClient.exe --first firstname --last lastname --pass password [--master \&quot;master name\&quot;]&quot; + 
+                    Environment.NewLine + &quot;TestClient.exe --file filename [--master \&quot;master name\&quot;]&quot;);
         }
 
         static void Main(string[] args)
         {
-            if (args.Length &lt; 2 || args.Length &gt; 5)
-            {
-                Usage();
-                return;
-            }
+            Arguments arguments = new Arguments(args);
 
-            TestClient tester;
+            ClientManager manager;
             List&lt;LoginDetails&gt; accounts = new List&lt;LoginDetails&gt;();
             LoginDetails account;
             string master = &quot;&quot;;
+            string file = &quot;&quot;;
 
-            if (args[0] == &quot;--file&quot;)
+            if (arguments[&quot;master&quot;] != null)
             {
+                master = arguments[&quot;master&quot;];
+            }
+
+            if (arguments[&quot;file&quot;] != null)
+            {
+                file = arguments[&quot;file&quot;];
+
                 // Loading names from a file
                 try
                 {
-                    using (StreamReader reader = new StreamReader(args[1]))
+                    using (StreamReader reader = new StreamReader(file))
                     {
                         string line;
                         int lineNumber = 0;
@@ -41,7 +46,7 @@
                             lineNumber++;
                             string[] tokens = line.Trim().Split(new char[] { ' ', ',' });
 
-                            if (tokens.Length == 3)
+                            if (tokens.Length &gt;= 3)
                             {
                                 account = new LoginDetails();
                                 account.FirstName = tokens[0];
@@ -49,6 +54,15 @@
                                 account.Password = tokens[2];
 
                                 accounts.Add(account);
+
+                                // Leaving this out until we have per-account masters (if that
+                                // is desirable). For now the command-line option can 
+                                // specify the single master that TestClient supports
+                                
+                                //if (tokens.Length == 5)
+                                //{
+                                //    master = tokens[3] + &quot; &quot; + tokens[4];
+                                //}
                             }
                             else
                             {
@@ -58,42 +72,38 @@
                         }
                     }
                 }
-                catch (Exception)
+				catch (Exception e)
+				{
+				    Console.WriteLine(&quot;Error reading from &quot; + args[1]);
+					Console.WriteLine(e.ToString());
+				    return;
+				}
+            }
+            else
+            {
+                if (arguments[&quot;first&quot;] != null &amp;&amp; arguments[&quot;last&quot;] != null &amp;&amp; arguments[&quot;pass&quot;] != null)
                 {
-                    Console.WriteLine(&quot;Error reading from &quot; + args[1]);
-                    return;
+                    // Taking a single login off the command-line
+                    account = new LoginDetails();
+                    account.FirstName = arguments[&quot;first&quot;];
+                    account.LastName = arguments[&quot;last&quot;];
+                    account.Password = arguments[&quot;pass&quot;];
+
+                    accounts.Add(account);
                 }
-
-                if (args.Length == 4)
+                else
                 {
-                    master = args[2] + &quot; &quot; + args[3];
+                    Usage();
+                    return;
                 }
             }
-            else if (args.Length == 3 || args.Length == 5)
-            {
-                // Taking a single login off the command-line
-                account = new LoginDetails();
-                account.FirstName = args[0];
-                account.LastName = args[1];
-                account.Password = args[2];
 
-                if (args.Length == 5)
-                {
-                    master = args[3] + &quot; &quot; + args[4];
-                }
+			foreach (LoginDetails a in accounts)
+				a.Master = master;
 
-                accounts.Add(account);
-            }
-            else
-            {
-                Usage();
-                return;
-            }
-
             // Login the accounts and run the input loop
-            tester = new TestClient(accounts);
-            tester.Master = master;
-            tester.Run();
+            manager = new ClientManager(accounts);
+			manager.Run();
         }
     }
 }

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.build
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -23,10 +23,10 @@
      - datetime::parse('01/01/2002'))))}&quot; /&gt;
   &lt;property
     name=&quot;assembly&quot;
-    value=&quot;TestCommand&quot;/&gt;
+    value=&quot;TestClient&quot;/&gt;
   &lt;property
     name=&quot;bin_dir&quot;
-    value=&quot;../../bin&quot; /&gt;
+    value=&quot;../../../bin&quot; /&gt;
 
   &lt;!-- default configuration --&gt;
   &lt;property
@@ -74,7 +74,7 @@
   &lt;!-- build tasks --&gt;
   &lt;target
     name=&quot;build&quot;
-    depends=&quot;init build-dll&quot;
+    depends=&quot;init&quot;
     description=&quot;Builds the binaries for the current configuration&quot;&gt;
     &lt;echo message=&quot;Build Directory is ${bin_dir}/&quot; /&gt;
     &lt;mkdir

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,29 +1,29 @@
 using System;
 using System.Collections.Generic;
 using System.Reflection;
-using System.Text;
+using System.Xml;
 using libsecondlife;
 using libsecondlife.Packets;
+using libsecondlife.AssetSystem;
 
 namespace libsecondlife.TestClient
 {
-    public struct LoginDetails
+    public class TestClient : SecondLife
     {
-        public string FirstName;
-        public string LastName;
-        public string Password;
-    }
+        public delegate void PrimCreatedCallback(Simulator simulator, PrimObject prim);
 
-    public class TestClient
-    {
-        public Dictionary&lt;LLUUID, SecondLife&gt; Clients = new Dictionary&lt;LLUUID, SecondLife&gt;();
+        public event PrimCreatedCallback OnPrimCreated;
+
+        public Dictionary&lt;Simulator, Dictionary&lt;uint, PrimObject&gt;&gt; SimPrims;
         public LLUUID GroupID = LLUUID.Zero;
         public Dictionary&lt;LLUUID, GroupMember&gt; GroupMembers;
-        public Dictionary&lt;uint, PrimObject&gt; Prims = new Dictionary&lt;uint,PrimObject&gt;();
-        public Dictionary&lt;uint, Avatar&gt; Avatars = new Dictionary&lt;uint,Avatar&gt;();
-        public Dictionary&lt;string, Command&gt; Commands = new Dictionary&lt;string,Command&gt;();
+        public Dictionary&lt;uint, Avatar&gt; AvatarList = new Dictionary&lt;uint,Avatar&gt;();
+		public Dictionary&lt;LLUUID, AvatarAppearancePacket&gt; Appearances = new Dictionary&lt;LLUUID, AvatarAppearancePacket&gt;();
+		public Dictionary&lt;string, Command&gt; Commands = new Dictionary&lt;string,Command&gt;();
+        public Dictionary&lt;string, object&gt; SharedValues = new Dictionary&lt;string, object&gt;();
         public bool Running = true;
-	    public string Master = &quot;&quot;;
+	    public string Master = String.Empty;
+		public ClientManager ClientManager;
 
         private LLQuaternion bodyRotation = LLQuaternion.Identity;
         private LLVector3 forward = new LLVector3(0, 0.9999f, 0);
@@ -35,103 +35,82 @@
         /// &lt;summary&gt;
         /// 
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;accounts&quot;&gt;&lt;/param&gt;
-        public TestClient(List&lt;LoginDetails&gt; accounts)
+        public TestClient(ClientManager manager)
         {
+			ClientManager = manager;
+
             updateTimer = new System.Timers.Timer(1000);
             updateTimer.Elapsed += new System.Timers.ElapsedEventHandler(updateTimer_Elapsed);
 
             RegisterAllCommands(Assembly.GetExecutingAssembly());
 
-            foreach (LoginDetails account in accounts)
-            {
-                SecondLife client = InitializeClient(account);
 
-                if (client.Network.Connected)
-                {
-                    Clients[client.Network.AgentID] = client;
+            Debug = false;
 
-                    Console.WriteLine(&quot;Logged in &quot; + client.ToString());
-                }
-                else
-                {
-                    Console.WriteLine(&quot;Failed to login &quot; + account.FirstName + &quot; &quot; + account.LastName +
-                        &quot;: &quot; + client.Network.LoginError);
-                }
-            }
+            Network.RegisterCallback(PacketType.AgentDataUpdate, new NetworkManager.PacketCallback(AgentDataUpdateHandler));
 
-            updateTimer.Start();
-        }
+            Objects.OnNewPrim += new ObjectManager.NewPrimCallback(Objects_OnNewPrim);
+            Objects.OnPrimMoved += new ObjectManager.PrimMovedCallback(Objects_OnPrimMoved);
+            Objects.OnObjectKilled += new ObjectManager.KillObjectCallback(Objects_OnObjectKilled);
+			Objects.OnNewAvatar += new ObjectManager.NewAvatarCallback(Objects_OnNewAvatar);
+			Objects.OnAvatarMoved += new ObjectManager.AvatarMovedCallback(Objects_OnAvatarMoved);
+            Self.OnInstantMessage += new MainAvatar.InstantMessageCallback(Self_OnInstantMessage);
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;account&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public SecondLife InitializeClient(LoginDetails account)
-        {
-            SecondLife client = new SecondLife();
+            Network.RegisterCallback(PacketType.AvatarAppearance, new NetworkManager.PacketCallback(AvatarAppearanceHandler));
 
-            client.Debug = false;
+            Objects.RequestAllObjects = true;
 
-            client.Network.RegisterCallback(PacketType.AgentDataUpdate, new NetworkManager.PacketCallback(AgentDataUpdateHandler));
 
-            client.Objects.OnNewPrim += new ObjectManager.NewPrimCallback(Objects_OnNewPrim);
-            client.Objects.OnPrimMoved += new ObjectManager.PrimMovedCallback(Objects_OnPrimMoved);
-            client.Objects.OnObjectKilled += new ObjectManager.KillObjectCallback(Objects_OnObjectKilled);
-            client.Objects.OnNewAvatar += new ObjectManager.NewAvatarCallback(Objects_OnNewAvatar);
-            client.Objects.OnAvatarMoved += new ObjectManager.AvatarMovedCallback(Objects_OnAvatarMoved);
-            client.Self.OnInstantMessage += new InstantMessageCallback(Self_OnInstantMessage);
-
-            client.Objects.RequestAllObjects = true;
-
-            client.Network.Login(account.FirstName, account.LastName, account.Password, 
-                &quot;TestClient&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">contact at libsecondlife.org</A>&quot;);
-            
-            return client;
+            updateTimer.Start();
         }
 
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        public void Run()
+        public void RegisterAllCommands(Assembly assembly)
         {
-            Console.WriteLine(&quot;Type quit to exit.  Type help for a command list.&quot;);
-
-            while (Running)
-            {
-                PrintPrompt();
-                string input = Console.ReadLine();
-                DoCommandAll(input, null, null);
-            }
-
-            foreach (SecondLife client in Clients.Values)
-            {
-                if (client.Network.Connected)
-                    client.Network.Logout();
-            }
-        }
-
-        private void RegisterAllCommands(Assembly assembly)
-        {
             foreach (Type t in assembly.GetTypes())
             {
-                if (t.IsSubclassOf(typeof(Command)))
+                try
                 {
-                    Command command = (Command)t.GetConstructor(new Type[0]).Invoke(new object[0]);
-                    RegisterCommand(command);
+                    if (t.IsSubclassOf(typeof(Command)))
+                    {
+                        ConstructorInfo info = t.GetConstructor(new Type[] { typeof(TestClient) });
+                        Command command = (Command)info.Invoke(new object[] { this });
+                        RegisterCommand(command);
+                    }
                 }
+                catch (Exception e)
+                {
+                    Console.WriteLine(e.ToString());
+                }
             }
         }
 
         private void RegisterCommand(Command command)
         {
-			command.TestClient = this;
+			if (!Commands.ContainsKey(command.Name.ToLower()))
+			{
+				Commands.Add(command.Name.ToLower(), command);
+			}
+        }
 
-			Commands.Add(command.Name.ToLower(), command);
+        //breaks up large responses to deal with the max IM size
+        private void SendResponseIM(SecondLife client, LLUUID fromAgentID, string data, LLUUID imSessionID)
+        {
+            for ( int i = 0 ; i &lt; data.Length ; i += 1024 ) {
+                int y;
+                if ((i + 1023) &gt; data.Length)
+                {
+                    y = data.Length - i;
+                }
+                else
+                {
+                    y = 1023;
+                }
+                string message = data.Substring(i, y);
+                client.Self.InstantMessage(fromAgentID, message, imSessionID);
+            }
         }
 
-        private void DoCommand(SecondLife client, string cmd, LLUUID fromAgentID, LLUUID imSessionID)
+		public void DoCommand(string cmd, LLUUID fromAgentID, LLUUID imSessionID)
         {
             string[] tokens = cmd.Trim().Split(new char[] { ' ', '\t' });
             string firstToken = tokens[0].ToLower();
@@ -140,107 +119,45 @@
                 return;
 
             // &quot;all balance&quot; will send the balance command to all currently logged in bots
-            if (firstToken == &quot;all&quot; &amp;&amp; tokens.Length &gt; 1)
-            {
-                cmd = &quot;&quot;;
+			if (firstToken == &quot;all&quot; &amp;&amp; tokens.Length &gt; 1)
+			{
+			    cmd = &quot;&quot;;
 
-                // Reserialize all of the arguments except for &quot;all&quot;
-                for (int i = 1; i &lt; tokens.Length; i++)
-                {
-                    cmd += tokens[i] + &quot; &quot;;
-                }
+			    // Reserialize all of the arguments except for &quot;all&quot;
+			    for (int i = 1; i &lt; tokens.Length; i++)
+			    {
+			        cmd += tokens[i] + &quot; &quot;;
+			    }
 
-                DoCommandAll(cmd, fromAgentID, imSessionID);
+			    ClientManager.DoCommandAll(cmd, fromAgentID, imSessionID);
 
-                return;
-            }
+			    return;
+			}
 
             if (Commands.ContainsKey(firstToken))
             {
                 string[] args = new string[tokens.Length - 1];
                 Array.Copy(tokens, 1, args, 0, args.Length);
-                string response = response = Commands[firstToken].Execute(client, args, fromAgentID);
+                string response = response = Commands[firstToken].Execute(args, fromAgentID);
 
                 if (response.Length &gt; 0)
                 {
-                    if (fromAgentID != null &amp;&amp; client.Network.Connected)
-                        client.Self.InstantMessage(fromAgentID, response, imSessionID);
+                    if (fromAgentID != null &amp;&amp; Network.Connected) 
+                        SendResponseIM(this, fromAgentID, response, imSessionID);
+                        
                     Console.WriteLine(response);
                 }
             }
         }
 
-        private void DoCommandAll(string cmd, LLUUID fromAgentID, LLUUID imSessionID)
-        {
-            string[] tokens = cmd.Trim().Split(new char[] { ' ', '\t' });
-            string firstToken = tokens[0].ToLower();
-
-            if (tokens.Length == 0)
-                return;
-
-Begin:
-
-            int avatars = Clients.Count;
-
-            if (Commands.ContainsKey(firstToken))
-            {
-                foreach (SecondLife client in Clients.Values)
-                {
-                    if (client.Network.Connected)
-                    {
-                        string[] args = new string[tokens.Length - 1];
-                        Array.Copy(tokens, 1, args, 0, args.Length);
-                        string response = Commands[firstToken].Execute(client, args, fromAgentID);
-
-                        if (response.Length &gt; 0)
-                        {
-                            if (fromAgentID != null &amp;&amp; client.Network.Connected)
-                                client.Self.InstantMessage(fromAgentID, response, imSessionID);
-                            Console.WriteLine(response);
-                        }
-
-                        if (firstToken == &quot;login&quot;)
-                        {
-                            // Special login case: Only call it once
-                            break;
-                        }
-                    }
-
-                    if (avatars != Clients.Count)
-                    {
-                        // The dictionary size changed, start over since the 
-                        // foreach is shot
-                        goto Begin;
-                    }
-                }
-            }
-        }
-
-		private void PrintPrompt()
-		{
-			//Console.Write(String.Format(&quot;{0} {1} - {2}&gt; &quot;, Client.Self.FirstName, Client.Self.LastName, Client.Network.CurrentSim.Region.Name));
-
-            int online = 0;
-
-            foreach (SecondLife client in Clients.Values)
-            {
-                if (client.Network.Connected) online++;
-            }
-
-            Console.Write(online + &quot; avatars online&gt; &quot;);
-		}
-
         private void updateTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
         {
-            foreach (SecondLife client in Clients.Values)
-            {
-                client.Self.UpdateCamera(0, client.Self.Position, forward, left, up, bodyRotation,
-                    LLQuaternion.Identity, DrawDistance, false);
+            Self.UpdateCamera(0, Self.Position, forward, left, up, bodyRotation,
+                LLQuaternion.Identity, DrawDistance, false);
 
-                foreach (Command c in Commands.Values)
-                    if (c.Active)
-                        c.Think(client);
-            }
+            foreach (Command c in Commands.Values)
+                if (c.Active)
+                    c.Think(this);
         }
 
         private void AgentDataUpdateHandler(Packet packet, Simulator sim)
@@ -259,62 +176,78 @@
         {
             Console.WriteLine(&quot;Got &quot; + members.Count + &quot; group members.&quot;);
             GroupMembers = members;
-			PrintPrompt();
         }
 
         private void Objects_OnObjectKilled(Simulator simulator, uint objectID)
         {
-            lock (Prims)
+            lock (SimPrims)
             {
-                if (Prims.ContainsKey(objectID))
-                    Prims.Remove(objectID);
+                if (SimPrims.ContainsKey(simulator) &amp;&amp; SimPrims[simulator].ContainsKey(objectID))
+                    SimPrims[simulator].Remove(objectID);
             }
 
-            lock (Avatars)
-            {
-                if (Avatars.ContainsKey(objectID))
-                    Avatars.Remove(objectID);
-            }
+			lock (AvatarList)
+			{
+			    if (AvatarList.ContainsKey(objectID))
+			        AvatarList.Remove(objectID);
+			}
         }
 
         private void Objects_OnPrimMoved(Simulator simulator, PrimUpdate prim, ulong regionHandle, ushort timeDilation)
         {
-            lock (Prims)
+            lock (SimPrims)
             {
-                if (Prims.ContainsKey(prim.LocalID))
+                if (SimPrims.ContainsKey(simulator) &amp;&amp; SimPrims[simulator].ContainsKey(prim.LocalID))
                 {
-                    Prims[prim.LocalID].Position = prim.Position;
-                    Prims[prim.LocalID].Rotation = prim.Rotation;
+                    SimPrims[simulator][prim.LocalID].Position = prim.Position;
+                    SimPrims[simulator][prim.LocalID].Rotation = prim.Rotation;
                 }
             }
         }
 
         private void Objects_OnNewPrim(Simulator simulator, PrimObject prim, ulong regionHandle, ushort timeDilation)
         {
-            lock (Prims)
+            lock (SimPrims)
             {
-                Prims[prim.LocalID] = prim;
+                if (!SimPrims.ContainsKey(simulator))
+                {
+                    SimPrims[simulator] = new Dictionary&lt;uint, PrimObject&gt;(10000);
+                }
+
+                SimPrims[simulator][prim.LocalID] = prim;
             }
-        }
 
-        private void Objects_OnNewAvatar(Simulator simulator, Avatar avatar, ulong regionHandle, ushort timeDilation)
-        {
-            lock (Avatars)
+            if ((prim.Flags &amp; ObjectFlags.CreateSelected) != 0 &amp;&amp; OnPrimCreated != null)
             {
-                Avatars[avatar.LocalID] = avatar;
+                OnPrimCreated(simulator, prim);
             }
         }
 
-        private void Objects_OnAvatarMoved(Simulator simulator, AvatarUpdate avatar, ulong regionHandle, ushort timeDilation)
+		private void Objects_OnNewAvatar(Simulator simulator, Avatar avatar, ulong regionHandle, ushort timeDilation)
+		{
+		    lock (AvatarList)
+		    {
+		        AvatarList[avatar.LocalID] = avatar;
+		    }
+		}
+
+		private void Objects_OnAvatarMoved(Simulator simulator, AvatarUpdate avatar, ulong regionHandle, ushort timeDilation)
+		{
+		    lock (AvatarList)
+		    {
+		        if (AvatarList.ContainsKey(avatar.LocalID))
+		        {
+		            AvatarList[avatar.LocalID].Position = avatar.Position;
+		            AvatarList[avatar.LocalID].Rotation = avatar.Rotation;
+		        }
+		    }
+		}
+
+        private void AvatarAppearanceHandler(Packet packet, Simulator simulator)
         {
-            lock (Avatars)
-            {
-                if (Avatars.ContainsKey(avatar.LocalID))
-                {
-                    Avatars[avatar.LocalID].Position = avatar.Position;
-                    Avatars[avatar.LocalID].Rotation = avatar.Rotation;
-                }
-            }
+            AvatarAppearancePacket appearance = (AvatarAppearancePacket)packet;
+
+            lock (Appearances) Appearances[appearance.Sender.ID] = appearance;
         }
 
         private void Self_OnInstantMessage(LLUUID fromAgentID, string fromAgentName, LLUUID toAgentID, uint parentEstateID, 
@@ -326,7 +259,7 @@
                 if (fromAgentName.ToLower().Trim() != Master.ToLower().Trim())
                 {
                     // Received an IM from someone that is not the bot's master, ignore
-                    Console.WriteLine(&quot;&lt;IM&gt;&quot; + fromAgentName + &quot; (not master): &quot; + message);
+                    Console.WriteLine(&quot;&lt;IM&gt;&quot; + fromAgentName + &quot; (not master): &quot; + message + &quot;@&quot;  + regionID.ToString() + &quot;:&quot; + position.ToString() );
                     return;
                 }
             }
@@ -335,23 +268,23 @@
                 if (GroupMembers != null &amp;&amp; !GroupMembers.ContainsKey(fromAgentID))
                 {
                     // Received an IM from someone outside the bot's group, ignore
-                    Console.WriteLine(&quot;&lt;IM&gt;&quot; + fromAgentName + &quot; (not in group): &quot; + message);
+                    Console.WriteLine(&quot;&lt;IM&gt;&quot; + fromAgentName + &quot; (not in group): &quot; + message + &quot;@&quot; + regionID.ToString() + &quot;:&quot; + position.ToString());
                     return;
                 }
             }
 
             Console.WriteLine(&quot;&lt;IM&gt;&quot; + fromAgentName + &quot;: &quot; + message);
 
-            if (Clients.ContainsKey(toAgentID))
+            if (Self.ID == toAgentID)
             {
                 if (dialog == 22)
                 {
                     Console.WriteLine(&quot;Accepting teleport lure&quot;);
-                    Clients[toAgentID].Self.TeleportLureRespond(fromAgentID, true);
+                    Self.TeleportLureRespond(fromAgentID, true);
                 }
                 else
                 {
-                    DoCommand(Clients[toAgentID], message, fromAgentID, imSessionID);
+                    DoCommand(message, fromAgentID, imSessionID);
                 }
             }
             else
@@ -360,5 +293,5 @@
                 Console.WriteLine(&quot;A bot that we aren't tracking received an IM?&quot;);
             }
         }
-    }
-}
+	}
+}
\ No newline at end of file

Modified: branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.csproj
===================================================================
--- branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/TestClient/TestClient.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -33,16 +33,42 @@
     &lt;Reference Include=&quot;System.Xml&quot; /&gt;
   &lt;/ItemGroup&gt;
   &lt;ItemGroup&gt;
+    &lt;Compile Include=&quot;Arguments.cs&quot; /&gt;
     &lt;Compile Include=&quot;Command.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\AppearanceCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\BalanceCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\LoginCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\LogoutCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\WhoCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\FollowCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\CloneProfileCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\EchoMasterCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\ExportOutfitCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\FindSimCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\FollowCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\IMCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\ImportOutfitCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\LoginCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\LogoutCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\PacketLogCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\QuitCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\SetMasterCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
+    &lt;Compile Include=&quot;Commands\ShoutCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\WhisperCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\ExportCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\ImportCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\LoadCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\SayCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\JumpCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\GotoCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\SetMasterCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\GiveAllCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\PrimCountCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\SitCommand.cs&quot; /&gt;
@@ -50,7 +76,10 @@
     &lt;Compile Include=&quot;Commands\UptimeCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\HelpCommand.cs&quot; /&gt;
     &lt;Compile Include=&quot;Commands\LocationCommand.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Commands\QuitCommand.cs&quot; /&gt;
+    &lt;Compile Include=&quot;ClientManager.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Commands\WhoCommand.cs&quot;&gt;
+      &lt;SubType&gt;Code&lt;/SubType&gt;
+    &lt;/Compile&gt;
     &lt;Compile Include=&quot;Program.cs&quot; /&gt;
     &lt;Compile Include=&quot;TestClient.cs&quot; /&gt;
     &lt;Compile Include=&quot;Properties\AssemblyInfo.cs&quot; /&gt;

Modified: branches/aditi/libsecondlife-cs/examples/examples.build
===================================================================
--- branches/aditi/libsecondlife-cs/examples/examples.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/examples.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -44,9 +44,13 @@
   &lt;!-- build tasks --&gt;
   &lt;target name=&quot;example&quot; description=&quot;Build a particular example&quot;&gt;
     &lt;property name=&quot;example_name&quot; value=&quot;${path::get-file-name(example_path)}&quot; /&gt;
+	&lt;property name=&quot;example_buildfile&quot; value=&quot;${example_path}/${example_name}.build&quot; /&gt;
     &lt;echo message=&quot;building ${example_name}&quot; /&gt;
-    &lt;csc target=&quot;exe&quot; debug=&quot;${build.debug}&quot; output=&quot;${bin_dir}/${example_name}.exe&quot;&gt;
-      &lt;sources failonempty=&quot;true&quot;&gt;&lt;include name=&quot;${example_path}/*.cs&quot;/&gt;&lt;/sources&gt;
+	&lt;nant buildfile=&quot;${example_buildfile}&quot; if=&quot;${file::exists(example_buildfile)}&quot; /&gt;
+	  &lt;csc target=&quot;exe&quot; debug=&quot;${build.debug}&quot; output=&quot;${bin_dir}/${example_name}.exe&quot; unless=&quot;${file::exists(example_buildfile)}&quot;&gt;
+		  &lt;sources failonempty=&quot;true&quot;&gt;
+			  &lt;include name=&quot;${example_path}/**/*.cs&quot;/&gt;
+		  &lt;/sources&gt;
       &lt;references basedir=&quot;${bin_dir}/&quot;&gt; 
          &lt;include name=&quot;libjaspernet.dll&quot;/&gt;
          &lt;include name=&quot;libsecondlife.dll&quot;/&gt;
@@ -57,9 +61,9 @@
     &lt;/csc&gt;
   &lt;/target&gt;
 
-  &lt;target name=&quot;build&quot; depends=&quot;init build-dll&quot; description=&quot;Build all examples&quot;&gt;
+  &lt;target name=&quot;build&quot; depends=&quot;init&quot; description=&quot;Build all examples&quot;&gt;
 	&lt;foreach item=&quot;Folder&quot; in=&quot;.&quot; property=&quot;example_path&quot;&gt;
-	  &lt;call target=&quot;example&quot; unless=&quot;${string::contains(example_path,'svn') or string::contains(example_path,'IA_') or string::contains(example_path,'Test')}&quot;/&gt;
+	  &lt;call target=&quot;example&quot; unless=&quot;${string::contains(example_path,'svn') or string::contains(example_path,'IA_')}&quot;/&gt;
     &lt;/foreach&gt;
   &lt;/target&gt;
 
@@ -69,11 +73,6 @@
     &lt;/foreach&gt;
   &lt;/target&gt;
 
-  &lt;target name=&quot;build-dll&quot; description=&quot;Builds libsecondlife dll&quot;&gt;
-    &lt;nant buildfile=&quot;../../libsecondlife.build&quot;
-      target=&quot;${project.config} build-lib&quot;/&gt;
-  &lt;/target&gt;
-
   &lt;target name=&quot;clean-example&quot; description=&quot;Deletes files for a given example&quot;&gt;
     &lt;property name=&quot;example_name&quot; value=&quot;${path::get-file-name(example_path)}&quot; /&gt;
     &lt;delete failonerror=&quot;false&quot;&gt;

Modified: branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.Designer.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.Designer.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.Designer.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -731,7 +731,6 @@
             this.ShowInTaskbar = false;
             this.SizeGripStyle = System.Windows.Forms.SizeGripStyle.Hide;
             this.Text = &quot;Group Information&quot;;
-            this.Load += new System.EventHandler(this.frmGroupInfo_Load);
             this.tabs.ResumeLayout(false);
             this.tabGeneral.ResumeLayout(false);
             this.tabGeneral.PerformLayout();

Modified: branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupInfo.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -11,29 +11,44 @@
 
 namespace groupmanager
 {
+    public class GroupMemberData
+    {
+        public LLUUID ID;
+        public string Name;
+        public string Title;
+        public string LastOnline;
+        public ulong Powers;
+        public bool IsOwner;
+        public int Contribution;
+    }
+
     public partial class frmGroupInfo : Form
     {
         Group Group;
         SecondLife Client;
-        GroupProfile Profile;
-        Dictionary&lt;LLUUID, GroupMember&gt; Members;
-        Dictionary&lt;LLUUID, GroupTitle&gt; Titles;
-        Dictionary&lt;LLUUID, GroupMemberData&gt; MemberData;
-        Dictionary&lt;LLUUID, string&gt; Names;
+        GroupProfile Profile = new GroupProfile();
+        Dictionary&lt;LLUUID, GroupMember&gt; Members = new Dictionary&lt;LLUUID,GroupMember&gt;();
+        Dictionary&lt;LLUUID, GroupTitle&gt; Titles = new Dictionary&lt;LLUUID,GroupTitle&gt;();
+        Dictionary&lt;LLUUID, GroupMemberData&gt; MemberData = new Dictionary&lt;LLUUID, GroupMemberData&gt;();
+        Dictionary&lt;LLUUID, string&gt; Names = new Dictionary&lt;LLUUID, string&gt;();
         
         public frmGroupInfo(Group group, SecondLife client)
         {
+            InitializeComponent();
+
+            while (!IsHandleCreated)
+            {
+                // Force handle creation
+                IntPtr temp = Handle;
+            }
+
             Group = group;
             Client = client;
-            Profile = new GroupProfile();
-            MemberData = new Dictionary&lt;LLUUID, GroupMemberData&gt;();
-            Names = new Dictionary&lt;LLUUID, string&gt;();
 
-            InitializeComponent();
-        }
+            Client.Avatars.OnAvatarNames += new AvatarManager.AvatarNamesCallback(AvatarNamesHandler);
 
-        private void frmGroupInfo_Load(object sender, EventArgs e)
-        {
+            // Request the group information
+
             Client.Groups.BeginGetGroupProfile(Group.ID,
                 new GroupManager.GroupProfileCallback(GroupProfileHandler));
 
@@ -50,8 +65,6 @@
 
             Invoke(new MethodInvoker(UpdateProfile));
 
-            // Waterdrop: new LLUUID(&quot;c77a1c21-e604-7d2c-2c89-5539ce853466&quot;)
-
             byte[] j2cdata;
             if (Group.InsigniaID != null)
             {
@@ -59,7 +72,7 @@
             }
             else
             {
-                // TODO: Add somekind of 
+                // ???
                 j2cdata = Client.Images.RequestImage(&quot;c77a1c21-e604-7d2c-2c89-5539ce853466&quot;);
             }
 
@@ -84,10 +97,10 @@
             numFee.Value = Profile.MembershipFee;
             chkMature.Checked = Profile.MaturePublish;
 
-            Client.Avatars.BeginGetAvatarName(Profile.FounderID, new AvatarManager.AgentNamesCallback(AgentNamesHandler));
+            Client.Avatars.RequestAvatarName(Profile.FounderID);
         }
 
-        private void AgentNamesHandler(Dictionary&lt;LLUUID, string&gt; names)
+        private void AvatarNamesHandler(Dictionary&lt;LLUUID, string&gt; names)
         {
             lock (Names)
             {
@@ -102,8 +115,6 @@
 
         private void UpdateNames()
         {
-            GroupMemberData member;
-
             lock (Names)
             {
                 if (Profile.FounderID != null &amp;&amp; Names.ContainsKey(Profile.FounderID))
@@ -120,8 +131,7 @@
                             MemberData[name.Key] = new GroupMemberData();
                         }
 
-                        member = MemberData[name.Key];
-                        member.Name = name.Value;
+                        MemberData[name.Key].Name = name.Value;
                     }
                 }
             }
@@ -209,7 +219,7 @@
                 }
             }
 
-            Client.Avatars.BeginGetAvatarNames(requestids, new AvatarManager.AgentNamesCallback(AgentNamesHandler));
+            Client.Avatars.RequestAvatarNames(requestids);
         }
 
         private void GroupTitlesHandler(Dictionary&lt;LLUUID, GroupTitle&gt; titles)
@@ -223,25 +233,5 @@
         {
             ;
         }
-
-        //private void BytesToFile(byte[] bytes, string filename)
-        //{
-        //    FileStream filestream = new FileStream(filename, FileMode.Create);
-        //    BinaryWriter writer = new BinaryWriter(filestream);
-        //    writer.Write(bytes);
-        //    writer.Close();
-        //    filestream.Close();
-        //}
     }
-
-    public class GroupMemberData
-    {
-        public LLUUID ID;
-        public string Name;
-        public string Title;
-        public string LastOnline;
-        public ulong Powers;
-        public bool IsOwner;
-        public int Contribution;
-    }
 }

Modified: branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupManager.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupManager.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/groupmanager/frmGroupManager.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -59,7 +59,7 @@
                 cmdConnect.Text = &quot;Disconnect&quot;;
                 txtFirstName.Enabled = txtLastName.Enabled = txtPassword.Enabled = false;
 
-                Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(txtFirstName.Text,
+                Dictionary&lt;string, object&gt; loginParams = Client.Network.DefaultLoginValues(txtFirstName.Text,
                     txtLastName.Text, txtPassword.Text, &quot;00:00:00:00:00:00&quot;, &quot;last&quot;, 
                     &quot;Win&quot;, &quot;0&quot;, &quot;groupmanager&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">jhurliman at wsu.edu</A>&quot;);
 

Modified: branches/aditi/libsecondlife-cs/examples/groupmanager/groupmanager.csproj
===================================================================
--- branches/aditi/libsecondlife-cs/examples/groupmanager/groupmanager.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/groupmanager/groupmanager.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -133,4 +133,4 @@
     &lt;PostBuildEvent&gt;
     &lt;/PostBuildEvent&gt;
   &lt;/PropertyGroup&gt;
-&lt;/Project&gt;
+&lt;/Project&gt;
\ No newline at end of file

Modified: branches/aditi/libsecondlife-cs/examples/name2key/name2key.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/name2key/name2key.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/name2key/name2key.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -76,7 +76,7 @@
             client.Network.RegisterCallback(PacketType.DirPeopleReply, new NetworkManager.PacketCallback(QueryHandler));
 
 			// Setup the login values
-            Dictionary&lt;string, object&gt; loginParams = NetworkManager.DefaultLoginValues(args[0], args[1], args[2], 
+            Dictionary&lt;string, object&gt; loginParams = client.Network.DefaultLoginValues(args[0], args[1], args[2], 
                 &quot;00:00:00:00:00:00&quot;, &quot;last&quot;, &quot;Win&quot;, &quot;0&quot;, &quot;name2key&quot;, &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">jhurliman at wsu.edu</A>&quot;);
 
 			if (!client.Network.Login(loginParams))

Modified: branches/aditi/libsecondlife-cs/examples/primexport/frmPrimExport.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/primexport/frmPrimExport.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/primexport/frmPrimExport.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -299,7 +299,7 @@
             InitializeComponent();
 
             client = new SecondLife();
-            client.OnLogMessage += new LogCallback(client_OnLogMessage);
+            client.OnLogMessage += new SecondLife.LogCallback(client_OnLogMessage);
             client.Objects.RequestAllObjects = true;
             client.Objects.OnNewPrim += new ObjectManager.NewPrimCallback(PrimSeen);
             client.Objects.OnNewAvatar += new ObjectManager.NewAvatarCallback(AvatarSeen);
@@ -544,7 +544,8 @@
                         // This prim is part of a linkset, we need to adjust it's position and rotation
                         if (Prims.ContainsKey(prim.ParentID))
                         {
-                            stream.WriteLine(prim.GetXml());
+                            // FIXME: Rewrite this when the xml serialization stuff is complete
+                            //stream.WriteLine(prim.GetXml());
                         }
                         else if (Avatars.Contains(prim.ParentID) || Attachments.Contains(prim.ParentID))
                         {

Modified: branches/aditi/libsecondlife-cs/examples/slaccountant/frmSLAccountant.cs
===================================================================
--- branches/aditi/libsecondlife-cs/examples/slaccountant/frmSLAccountant.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/examples/slaccountant/frmSLAccountant.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -453,7 +453,7 @@
             query.AgentData.AgentID = client.Network.AgentID;
             query.AgentData.SessionID = client.Network.SessionID;
             query.QueryData.QueryFlags = 1;
-            query.QueryData.QueryID = LLUUID.GenerateUUID();
+            query.QueryData.QueryID = LLUUID.Random();
             query.QueryData.QueryStart = 0;
             query.QueryData.QueryText = Helpers.StringToField(txtFind.Text);
             query.Header.Reliable = true;

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests)


Property changes on: branches/aditi/libsecondlife-cs/libsecondlife.Tests
___________________________________________________________________
Name: svn:ignore
   + 
obj


Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,225 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Net;
-using libsecondlife;
-using libsecondlife.Packets;
-using libsecondlife.Utilities;
-using NUnit.Framework;
-
-namespace libsecondlife.Tests
-{
-    [TestFixture]
-    public class NetworkTests : Assert
-    {
-        SecondLife Client;
-
-        ulong CurrentRegionHandle = 0;
-        ulong AhernRegionHandle = 1096213093149184;
-        ulong MorrisRegionHandle = 1096213093149183;
-        bool DetectedObject = false;
-        bool DoneTeleporting = false;
-        MainAvatar.TeleportStatus tpStatus = MainAvatar.TeleportStatus.None;
-        string tpMessage = &quot;&quot;;
-
-        LLUUID LookupKey1 = new LLUUID(&quot;25472683cb324516904a6cd0ecabf128&quot;);
-        string LookupName1 = &quot;Bot Ringo&quot;;
-
-        public NetworkTests()
-        {
-            Client = new SecondLife();
-
-            string startLoc = NetworkManager.StartLocation(&quot;hooper&quot;, 128, 128, 32);
-
-            // Register callbacks
-            Client.Network.RegisterCallback(PacketType.ObjectUpdate, new NetworkManager.PacketCallback(ObjectUpdateHandler));
-            Client.Self.OnTeleport += new MainAvatar.TeleportCallback(OnTeleportHandler);
-
-            Client.Network.Login(&quot;Testing&quot;, &quot;Anvil&quot;, &quot;testinganvil&quot;, &quot;Unit Test Framework&quot;, startLoc,
-                &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">contact at libsecondlife.org</A>&quot;, false);
-        }
-
-        ~NetworkTests()
-        {
-            Client.Network.Logout();
-        }
-
-        [SetUp]
-        public void Init()
-        {
-            Assert.IsTrue(Client.Network.Connected, &quot;Client is not connected to the grid: &quot; + Client.Network.LoginError);
-
-            int start = Environment.TickCount;
-            while (Client.Network.CurrentSim.Region.Name == &quot;&quot;)
-            {
-                if (Environment.TickCount - start &gt; 5000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for a RegionHandshake packet&quot;);
-                }
-            }
-
-            //Assert.AreEqual(&quot;ahern&quot;, Client.Network.CurrentSim.Region.Name.ToLower(), &quot;Logged in to sim &quot; + 
-            //    Client.Network.CurrentSim.Region.Name + &quot; instead of Ahern&quot;);
-        }
-
-        [Test]
-        public void DetectObjects()
-        {
-            int start = Environment.TickCount;
-            while (!DetectedObject)
-            {
-                if (Environment.TickCount - start &gt; 10000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for an ObjectUpdate packet&quot;);
-                    return;
-                }
-            }
-        }
-
-        [Test]
-        public void U64Receive()
-        {
-            int start = Environment.TickCount;
-            while (CurrentRegionHandle == 0)
-            {
-                if (Environment.TickCount - start &gt; 10000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for an ObjectUpdate packet&quot;);
-                    return;
-                }
-            }
-
-            Assert.IsTrue(CurrentRegionHandle == AhernRegionHandle, &quot;Current region is &quot; +
-                CurrentRegionHandle + &quot; when we were expecting &quot; + AhernRegionHandle + &quot;, possible endian issue&quot;);
-        }
-
-        [Test]
-        public void NameLookup()
-        {
-            AvatarTracker tracker = new AvatarTracker(Client);
-
-            string name = tracker.GetAvatarName(LookupKey1);
-
-            Assert.IsTrue(name == LookupName1, &quot;AvatarTracker.GetAvatarName() returned &quot; + name +
-                &quot; instead of &quot; + LookupName1);
-        }
-
-        [Test]
-        public void Teleport()
-        {
-            DoneTeleporting = false;
-            tpStatus = MainAvatar.TeleportStatus.None;
-
-            Client.Self.Teleport(MorrisRegionHandle, new LLVector3(128, 128, 32));
-
-            int start = Environment.TickCount;
-
-            while (!DoneTeleporting)
-            {
-                System.Threading.Thread.Sleep(100);
-
-                if (Environment.TickCount - start &gt; 10000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for the first teleport to finish&quot;);
-                    return;
-                }
-            }
-
-            Assert.IsTrue(tpStatus == MainAvatar.TeleportStatus.Finished, 
-                &quot;Teleport status is &quot; + tpStatus.ToString() + &quot;, message=&quot; + tpMessage);
-
-            // Wait for the region information to come in
-            start = Environment.TickCount;
-            while (Client.Network.CurrentSim.Region.Name == &quot;&quot;)
-            {
-                if (Environment.TickCount - start &gt; 5000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for a RegionHandshake packet&quot;);
-                }
-            }
-
-            // Assert that we really did make it to our scheduled destination
-            Assert.AreEqual(&quot;morris&quot;, Client.Network.CurrentSim.Region.Name.ToLower(),
-                &quot;Expected to teleport to Morris, ended up in &quot; + Client.Network.CurrentSim.Region.Name +
-                &quot;. Possibly region full or offline?&quot;);
-
-            ///////////////////////////////////////////////////////////////////
-
-            // TODO: Add a local region teleport
-
-            ///////////////////////////////////////////////////////////////////
-
-            DoneTeleporting = false;
-            tpStatus = MainAvatar.TeleportStatus.None;
-
-            Client.Self.Teleport(AhernRegionHandle, new LLVector3(128, 128, 32));
-
-            start = Environment.TickCount;
-
-            while (!DoneTeleporting)
-            {
-                System.Threading.Thread.Sleep(100);
-
-                if (Environment.TickCount - start &gt; 10000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for the second teleport to finish&quot;);
-                    return;
-                }
-            }
-
-            Assert.IsTrue(tpStatus == MainAvatar.TeleportStatus.Finished, &quot;Teleport status is &quot; + 
-                tpStatus.ToString() + &quot;, message=&quot; + tpMessage);
-
-            // Wait for the region information to come in
-            start = Environment.TickCount;
-            while (Client.Network.CurrentSim.Region.Name == &quot;&quot;)
-            {
-                if (Environment.TickCount - start &gt; 5000)
-                {
-                    Assert.Fail(&quot;Timeout waiting for a RegionHandshake packet&quot;);
-                }
-            }
-
-            // Assert that we really did make it to our scheduled destination
-            Assert.AreEqual(&quot;ahern&quot;, Client.Network.CurrentSim.Region.Name.ToLower(),
-                &quot;Expected to teleport to Ahern, ended up in &quot; + Client.Network.CurrentSim.Region.Name +
-                &quot;. Possibly region full or offline?&quot;);
-        }
-
-        private void ObjectUpdateHandler(Packet packet, Simulator sim)
-        {
-            ObjectUpdatePacket update = (ObjectUpdatePacket)packet;
-
-            DetectedObject = true;
-            CurrentRegionHandle = update.RegionData.RegionHandle;
-        }
-
-        private void OnTeleportHandler(Simulator currentSim, string message, MainAvatar.TeleportStatus status)
-        {
-            switch (status)
-            {
-                case MainAvatar.TeleportStatus.None:
-                    break;
-                case MainAvatar.TeleportStatus.Start:
-                    break;
-                case MainAvatar.TeleportStatus.Progress:
-                    break;
-                case MainAvatar.TeleportStatus.Failed:
-                    DoneTeleporting = true;
-                    break;
-                case MainAvatar.TeleportStatus.Finished:
-                    DoneTeleporting = true;
-                    break;
-            }
-
-            tpMessage = message;
-            tpStatus = status;
-        }
-
-        [TearDown]
-        public void Shutdown()
-        {
-            //Client.Network.Logout();
-            //Client = null;
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/NetworkTests.cs)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,68 +0,0 @@
-using System;
-using System.Collections.Generic;
-using libsecondlife;
-using libsecondlife.Packets;
-using NUnit.Framework;
-
-namespace libsecondlife.Tests
-{
-    [TestFixture]
-    public class PacketTests : Assert
-    {
-        [Test]
-        public void HeaderFlags()
-        {
-            TestMessagePacket packet = new TestMessagePacket();
-
-            packet.Header.AppendedAcks = false;
-            packet.Header.Reliable = false;
-            packet.Header.Resent = false;
-            packet.Header.Zerocoded = false;
-
-            Assert.IsFalse(packet.Header.AppendedAcks, &quot;AppendedAcks: Failed to initially set the flag to false&quot;);
-            Assert.IsFalse(packet.Header.Reliable, &quot;Reliable: Failed to initially set the flag to false&quot;);
-            Assert.IsFalse(packet.Header.Resent, &quot;Resent: Failed to initially set the flag to false&quot;);
-            Assert.IsFalse(packet.Header.Zerocoded, &quot;Zerocoded: Failed to initially set the flag to false&quot;);
-
-            packet.Header.AppendedAcks = false;
-            packet.Header.Reliable = false;
-            packet.Header.Resent = false;
-            packet.Header.Zerocoded = false;
-
-            Assert.IsFalse(packet.Header.AppendedAcks, &quot;AppendedAcks: Failed to set the flag to false a second time&quot;);
-            Assert.IsFalse(packet.Header.Reliable, &quot;Reliable: Failed to set the flag to false a second time&quot;);
-            Assert.IsFalse(packet.Header.Resent, &quot;Resent: Failed to set the flag to false a second time&quot;);
-            Assert.IsFalse(packet.Header.Zerocoded, &quot;Zerocoded: Failed to set the flag to false a second time&quot;);
-
-            packet.Header.AppendedAcks = true;
-            packet.Header.Reliable = true;
-            packet.Header.Resent = true;
-            packet.Header.Zerocoded = true;
-
-            Assert.IsTrue(packet.Header.AppendedAcks, &quot;AppendedAcks: Failed to set the flag to true&quot;);
-            Assert.IsTrue(packet.Header.Reliable, &quot;Reliable: Failed to set the flag to true&quot;);
-            Assert.IsTrue(packet.Header.Resent, &quot;Resent: Failed to set the flag to true&quot;);
-            Assert.IsTrue(packet.Header.Zerocoded, &quot;Zerocoded: Failed to set the flag to true&quot;);
-
-            packet.Header.AppendedAcks = true;
-            packet.Header.Reliable = true;
-            packet.Header.Resent = true;
-            packet.Header.Zerocoded = true;
-
-            Assert.IsTrue(packet.Header.AppendedAcks, &quot;AppendedAcks: Failed to set the flag to true a second time&quot;);
-            Assert.IsTrue(packet.Header.Reliable, &quot;Reliable: Failed to set the flag to true a second time&quot;);
-            Assert.IsTrue(packet.Header.Resent, &quot;Resent: Failed to set the flag to true a second time&quot;);
-            Assert.IsTrue(packet.Header.Zerocoded, &quot;Zerocoded: Failed to set the flag to true a second time&quot;);
-
-            packet.Header.AppendedAcks = false;
-            packet.Header.Reliable = false;
-            packet.Header.Resent = false;
-            packet.Header.Zerocoded = false;
-
-            Assert.IsFalse(packet.Header.AppendedAcks, &quot;AppendedAcks: Failed to set the flag back to false&quot;);
-            Assert.IsFalse(packet.Header.Reliable, &quot;Reliable: Failed to set the flag back to false&quot;);
-            Assert.IsFalse(packet.Header.Resent, &quot;Resent: Failed to set the flag back to false&quot;);
-            Assert.IsFalse(packet.Header.Zerocoded, &quot;Zerocoded: Failed to set the flag back to false&quot;);
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/PacketTests.cs)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,143 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Net;
-using libsecondlife;
-using libsecondlife.Packets;
-using NUnit.Framework;
-
-namespace libsecondlife.Tests
-{
-    [TestFixture]
-    public class PrimObjectTests : Assert
-    {
-        [Test]
-        public void PathBegin()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathBeginFloat(i);
-                byte result = PrimObject.PathBeginByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathEnd()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathEndFloat(i);
-                byte result = PrimObject.PathEndByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathRadiusOffset()
-        {
-            for (sbyte i = sbyte.MinValue; i &lt; sbyte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathRadiusOffsetFloat(i);
-                sbyte result = PrimObject.PathRadiusOffsetByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathRevolutions()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathRevolutionsFloat(i);
-                byte result = PrimObject.PathRevolutionsByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathScale()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathScaleFloat(i);
-                byte result = PrimObject.PathScaleByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathShear()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathShearFloat(i);
-                byte result = PrimObject.PathShearByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathSkew()
-        {
-            for (sbyte i = sbyte.MinValue; i &lt; sbyte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathSkewFloat(i);
-                sbyte result = PrimObject.PathSkewByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void PathTaper()
-        {
-            for (sbyte i = sbyte.MinValue; i &lt; sbyte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.PathTaperFloat(i);
-                sbyte result = PrimObject.PathTaperByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void ProfileBegin()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.ProfileBeginFloat(i);
-                byte result = PrimObject.ProfileBeginByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-
-        [Test]
-        public void ProfileEnd()
-        {
-            for (byte i = 0; i &lt; byte.MaxValue; i++)
-            {
-                float floatValue = PrimObject.ProfileEndFloat(i);
-                byte result = PrimObject.ProfileEndByte(floatValue);
-
-                Assert.IsTrue(result == i, &quot;Started with &quot; + i + &quot;, float value was &quot; + floatValue +
-                &quot;, and ended up with &quot; + result);
-            }
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/PrimObjectTests.cs)

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/Properties (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/Properties)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,71 +0,0 @@
-using System;
-using System.Collections.Generic;
-using libsecondlife;
-using libsecondlife.Packets;
-using NUnit.Framework;
-
-namespace libsecondlife.Tests
-{
-    [TestFixture]
-    public class TypeTests : Assert
-    {
-        [Test]
-        public void LLUUIDs()
-        {
-            // Comparison
-            LLUUID a = new LLUUID(new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
-                0x0B, 0x0C, 0x0D, 0x0E, 0x0F }, 0);
-            LLUUID b = new LLUUID(new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
-                0x0B, 0x0C, 0x0D, 0x0E, 0x0F }, 0);
-
-            Assert.IsTrue(a == b, &quot;LLUUID comparison operator failed, &quot; + a.ToString() + &quot; should equal &quot; + 
-                b.ToString());
-
-            // From string
-            a = new LLUUID(new byte[] { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A,
-                0x0B, 0x0C, 0x0D, 0x0E, 0x0F }, 0);
-            b = new LLUUID(&quot;00010203-0405-0607-0809-0a0b0c0d0e0f&quot;);
-
-            Assert.IsTrue(a == b, &quot;LLUUID hyphenated string constructor failed, should have &quot; + a.ToString() + 
-                &quot; but we got &quot; + b.ToString());
-
-            // TODO: CRC test
-        }
-
-        [Test]
-        public void Quaternions()
-        {
-            LLQuaternion a = new LLQuaternion(1, 0, 0, 0);
-            LLQuaternion b = new LLQuaternion(1, 0, 0, 0);
-
-            Assert.IsTrue(a == b, &quot;LLQuaternion comparison operator failed&quot;);
-
-            LLQuaternion expected = new LLQuaternion(0, 0, 0, -1);
-            LLQuaternion result = a * b;
-
-            Assert.IsTrue(result == expected, a.ToString() + &quot; * &quot; + b.ToString() + &quot; produced &quot; + result.ToString() +
-                &quot; instead of &quot; + expected.ToString());
-
-            a = new LLQuaternion(1, 0, 0, 0);
-            b = new LLQuaternion(0, 1, 0, 0);
-            expected = new LLQuaternion(0, 0, 1, 0);
-            result = a * b;
-
-            Assert.IsTrue(result == expected, a.ToString() + &quot; * &quot; + b.ToString() + &quot; produced &quot; + result.ToString() +
-                &quot; instead of &quot; + expected.ToString());
-
-            a = new LLQuaternion(0, 0, 1, 0);
-            b = new LLQuaternion(0, 1, 0, 0);
-            expected = new LLQuaternion(-1, 0, 0, 0);
-            result = a * b;
-
-            Assert.IsTrue(result == expected, a.ToString() + &quot; * &quot; + b.ToString() + &quot; produced &quot; + result.ToString() +
-                &quot; instead of &quot; + expected.ToString());
-        }
-        [Test]
-        public void VectorQuaternionMath()
-        {
-            ;
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/TypeTests.cs)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,66 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{E0BCBBAE-A620-431A-9EB7-30173EAF195B}&lt;/ProjectGuid&gt;
-    &lt;OutputType&gt;Library&lt;/OutputType&gt;
-    &lt;AppDesignerFolder&gt;Properties&lt;/AppDesignerFolder&gt;
-    &lt;RootNamespace&gt;libsecondlife.Tests&lt;/RootNamespace&gt;
-    &lt;AssemblyName&gt;libsecondlife.Tests&lt;/AssemblyName&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;DebugType&gt;pdbonly&lt;/DebugType&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;OutputPath&gt;bin\Release\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|.NET 1.1' &quot;&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;nunit.framework, Version=2.2.9.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77, processorArchitecture=MSIL&quot; /&gt;
-    &lt;Reference Include=&quot;System&quot; /&gt;
-    &lt;Reference Include=&quot;System.Data&quot; /&gt;
-    &lt;Reference Include=&quot;System.Xml&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;PacketTests.cs&quot; /&gt;
-    &lt;Compile Include=&quot;PrimObjectTests.cs&quot; /&gt;
-    &lt;Compile Include=&quot;TypeTests.cs&quot; /&gt;
-    &lt;Compile Include=&quot;NetworkTests.cs&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;ProjectReference Include=&quot;..\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-    &lt;ProjectReference Include=&quot;..\libsecondlife.Utilities\libsecondlife.Utilities.csproj&quot;&gt;
-      &lt;Project&gt;{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife.Utilities&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Folder Include=&quot;Properties\&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
-       Other similar extension points exist, see Microsoft.Common.targets.
-  &lt;Target Name=&quot;BeforeBuild&quot;&gt;
-  &lt;/Target&gt;
-  &lt;Target Name=&quot;AfterBuild&quot;&gt;
-  &lt;/Target&gt;
-  --&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.csproj)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,33 +0,0 @@
-&lt;Project name=&quot;libsecondlife.Tests&quot; fileversion=&quot;2.0&quot; language=&quot;C#&quot; clr-version=&quot;Net_2_0&quot; ctype=&quot;DotNetProject&quot;&gt;
-  &lt;Configurations active=&quot;Debug&quot;&gt;
-    &lt;Configuration name=&quot;Debug&quot; ctype=&quot;DotNetProjectConfiguration&quot;&gt;
-      &lt;Output directory=&quot;../bin/Debug&quot; assembly=&quot;libsecondlife.Tests&quot; /&gt;
-      &lt;Build debugmode=&quot;True&quot; target=&quot;Library&quot; /&gt;
-      &lt;Execution runwithwarnings=&quot;True&quot; consolepause=&quot;True&quot; runtime=&quot;MsNet&quot; clr-version=&quot;Net_2_0&quot; /&gt;
-      &lt;CodeGeneration compiler=&quot;Csc&quot; warninglevel=&quot;4&quot; optimize=&quot;True&quot; unsafecodeallowed=&quot;False&quot; generateoverflowchecks=&quot;True&quot; mainclass=&quot;&quot; generatexmldocumentation=&quot;False&quot; ctype=&quot;CSharpCompilerParameters&quot; /&gt;
-    &lt;/Configuration&gt;
-    &lt;Configuration name=&quot;Release&quot; ctype=&quot;DotNetProjectConfiguration&quot;&gt;
-      &lt;Output directory=&quot;../bin/Debug&quot; assembly=&quot;libsecondlife.Tests&quot; /&gt;
-      &lt;Build debugmode=&quot;False&quot; target=&quot;Library&quot; /&gt;
-      &lt;Execution runwithwarnings=&quot;True&quot; consolepause=&quot;True&quot; runtime=&quot;MsNet&quot; clr-version=&quot;Net_2_0&quot; /&gt;
-      &lt;CodeGeneration compiler=&quot;Csc&quot; warninglevel=&quot;4&quot; optimize=&quot;True&quot; unsafecodeallowed=&quot;False&quot; generateoverflowchecks=&quot;True&quot; mainclass=&quot;&quot; generatexmldocumentation=&quot;False&quot; ctype=&quot;CSharpCompilerParameters&quot; /&gt;
-    &lt;/Configuration&gt;
-  &lt;/Configurations&gt;
-  &lt;DeployTargets /&gt;
-  &lt;Contents&gt;
-    &lt;File name=&quot;./NetworkTests.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-    &lt;File name=&quot;./PacketTests.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-    &lt;File name=&quot;./PrimObjectTests.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-    &lt;File name=&quot;./TypeTests.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-  &lt;/Contents&gt;
-  &lt;References&gt;
-    &lt;ProjectReference type=&quot;Project&quot; localcopy=&quot;True&quot; refto=&quot;libsecondlife&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-    &lt;ProjectReference type=&quot;Project&quot; localcopy=&quot;True&quot; refto=&quot;libsecondlife.Utilities&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;nunit.framework, Version=2.2.8.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;nunit.core, Version=2.2.8.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;nunit.util, Version=2.2.8.0, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-  &lt;/References&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.mdp)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,20 +0,0 @@
-&#65279;
-Microsoft Visual Studio Solution File, Format Version 9.00
-# Visual Studio 2005
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife.Tests&quot;, &quot;libsecondlife.Tests.csproj&quot;, &quot;{E0BCBBAE-A620-431A-9EB7-30173EAF195B}&quot;
-EndProject
-Global
-	GlobalSection(SolutionConfigurationPlatforms) = preSolution
-		Debug|Any CPU = Debug|Any CPU
-		Release|Any CPU = Release|Any CPU
-	EndGlobalSection
-	GlobalSection(ProjectConfigurationPlatforms) = postSolution
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.Build.0 = Release|Any CPU
-	EndGlobalSection
-	GlobalSection(SolutionProperties) = preSolution
-		HideSolutionNode = FALSE
-	EndGlobalSection
-EndGlobal

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln (from rev 775, trunk/libsecondlife-cs/libsecondlife.Tests/libsecondlife.Tests.sln)

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities)

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities/Properties)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,35 +0,0 @@
-&#65279;using System.Reflection;
-using System.Runtime.CompilerServices;
-using System.Runtime.InteropServices;
-
-// General Information about an assembly is controlled through the following 
-// set of attributes. Change these attribute values to modify the information
-// associated with an assembly.
-[assembly: AssemblyTitle(&quot;libsecondlife.Utilities&quot;)]
-[assembly: AssemblyDescription(&quot;&quot;)]
-[assembly: AssemblyConfiguration(&quot;&quot;)]
-[assembly: AssemblyCompany(&quot;&quot;)]
-[assembly: AssemblyProduct(&quot;libsecondlife.Utilities&quot;)]
-[assembly: AssemblyCopyright(&quot;Copyright &#169;  2006&quot;)]
-[assembly: AssemblyTrademark(&quot;&quot;)]
-[assembly: AssemblyCulture(&quot;&quot;)]
-
-// Setting ComVisible to false makes the types in this assembly not visible 
-// to COM components.  If you need to access a type in this assembly from 
-// COM, set the ComVisible attribute to true on that type.
-[assembly: ComVisible(false)]
-
-// The following GUID is for the ID of the typelib if this project is exposed to COM
-[assembly: Guid(&quot;b77aa07a-daa3-431f-b5aa-0c9c5e2151fd&quot;)]
-
-// Version information for an assembly consists of the following four values:
-//
-//      Major Version
-//      Minor Version 
-//      Build Number
-//      Revision
-//
-// You can specify all the values or you can default the Revision and Build Numbers 
-// by using the '*' as shown below:
-[assembly: AssemblyVersion(&quot;1.0.0.0&quot;)]
-[assembly: AssemblyFileVersion(&quot;1.0.0.0&quot;)]

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities/Properties/AssemblyInfo.cs)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,183 +0,0 @@
-using System;
-using System.Collections.Generic;
-using System.Threading;
-using libsecondlife;
-using libsecondlife.Packets;
-
-namespace libsecondlife.Utilities
-{
-    /// &lt;summary&gt;
-    /// Keeps an up to date inventory of the currently seen objects in each
-    /// simulator
-    /// &lt;/summary&gt;
-    //public class ObjectTracker
-    //{
-    //    private SecondLife Client;
-    //    private Dictionary&lt;ulong, Dictionary&lt;uint, PrimObject&gt;&gt; SimPrims = new Dictionary&lt;ulong, Dictionary&lt;uint, PrimObject&gt;&gt;();
-
-    //    /// &lt;summary&gt;
-    //    /// Default constructor
-    //    /// &lt;/summary&gt;
-    //    /// &lt;param name=&quot;client&quot;&gt;A reference to the SecondLife client to track
-    //    /// objects for&lt;/param&gt;
-    //    public ObjectTracker(SecondLife client)
-    //    {
-    //        Client = client;
-    //    }
-    //}
-
-    /// &lt;summary&gt;
-    /// Maintains a cache of avatars and does blocking lookups for avatar data
-    /// &lt;/summary&gt;
-    public class AvatarTracker
-    {
-        protected SecondLife Client;
-        protected Dictionary&lt;LLUUID, Avatar&gt; avatars = new Dictionary&lt;LLUUID,Avatar&gt;();
-        protected Dictionary&lt;LLUUID, ManualResetEvent&gt; NameLookupEvents = new Dictionary&lt;LLUUID, ManualResetEvent&gt;();
-
-        public AvatarTracker(SecondLife client)
-        {
-            Client = client;
-
-            Client.Avatars.OnAvatarNames += new AvatarManager.AvatarNamesCallback(Avatars_OnAvatarNames);
-        }
-
-        /// &lt;summary&gt;
-        /// Check if a particular avatar is in the local cache
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
-        /// &lt;returns&gt;&lt;/returns&gt;
-        public bool Contains(LLUUID id)
-        {
-            return avatars.ContainsKey(id);
-        }
-
-        /// &lt;summary&gt;
-        /// Get an avatar's name, either from the cache or request it.
-        /// This function is blocking
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;key&quot;&gt;Avatar key to look up&lt;/param&gt;
-        /// &lt;returns&gt;The avatar name, or String.Empty if the lookup failed&lt;/returns&gt;
-        public string GetAvatarName(LLUUID id)
-        {
-            // Short circuit the cache lookup in GetAvatarNames
-            if (Contains(id))
-                return LocalAvatarNameLookup(id);
-
-            // Add to the dictionary
-            lock (NameLookupEvents)
-                NameLookupEvents.Add(id, new ManualResetEvent(false));
-
-            // Call function
-            Client.Avatars.RequestAvatarName(id);
-
-            // Start blocking while we wait for this name to be fetched
-            NameLookupEvents[id].WaitOne(5000, false);
-
-            // Clean up
-            lock (NameLookupEvents)
-                NameLookupEvents.Remove(id);
-
-            // Return
-            return LocalAvatarNameLookup(id);
-        }
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
-        //public void BeginGetAvatarName(LLUUID id)
-        //{
-        //    // TODO: BeginGetAvatarNames is pretty bulky, rewrite a simple version here
-
-        //    List&lt;LLUUID&gt; ids = new List&lt;LLUUID&gt;();
-        //    ids.Add(id);
-        //    BeginGetAvatarNames(ids);
-        //}
-
-        /// &lt;summary&gt;
-        /// 
-        /// &lt;/summary&gt;
-        /// &lt;param name=&quot;ids&quot;&gt;&lt;/param&gt;
-        //public void BeginGetAvatarNames(List&lt;LLUUID&gt; ids)
-        //{
-        //    Dictionary&lt;LLUUID, string&gt; havenames = new Dictionary&lt;LLUUID, string&gt;();
-        //    List&lt;LLUUID&gt; neednames = new List&lt;LLUUID&gt;();
-
-        //    // Fire callbacks for the ones we already have cached
-        //    foreach (LLUUID id in ids)
-        //    {
-        //        if (Avatars.ContainsKey(id))
-        //        {
-        //            havenames[id] = Avatars[id].Name;
-        //            //Short circuit the lookup process
-        //            if (ManualResetEvents.ContainsKey(id))
-        //            {
-        //                ManualResetEvents[id].Set();
-        //                return;
-        //            }
-        //        }
-        //        else
-        //        {
-        //            neednames.Add(id);
-        //        }
-        //    }
-
-        //    if (havenames.Count &gt; 0 &amp;&amp; OnAgentNames != null)
-        //    {
-        //        OnAgentNames(havenames);
-        //    }
-
-        //    if (neednames.Count &gt; 0)
-        //    {
-        //        UUIDNameRequestPacket request = new UUIDNameRequestPacket();
-
-        //        request.UUIDNameBlock = new UUIDNameRequestPacket.UUIDNameBlockBlock[neednames.Count];
-
-        //        for (int i = 0; i &lt; neednames.Count; i++)
-        //        {
-        //            request.UUIDNameBlock[i] = new UUIDNameRequestPacket.UUIDNameBlockBlock();
-        //            request.UUIDNameBlock[i].ID = neednames[i];
-        //        }
-
-        //        Client.Network.SendPacket(request);
-        //    }
-        //}
-
-        /// &lt;summary&gt;
-        /// This function will only check if the avatar name exists locally,
-        /// it will not do any networking calls to fetch the name
-        /// &lt;/summary&gt;
-        /// &lt;returns&gt;The avatar name, or an empty string if it's not found&lt;/returns&gt;
-        protected string LocalAvatarNameLookup(LLUUID id)
-        {
-            lock (avatars)
-            {
-                if (avatars.ContainsKey(id))
-                    return avatars[id].Name;
-                else
-                    return String.Empty;
-            }
-        }
-
-        private void Avatars_OnAvatarNames(Dictionary&lt;LLUUID, string&gt; names)
-        {
-            lock (avatars)
-            {
-                foreach (KeyValuePair&lt;LLUUID, string&gt; kvp in names)
-                {
-                    if (!avatars.ContainsKey(kvp.Key) || avatars[kvp.Key] == null)
-                        avatars[kvp.Key] = new Avatar();
-
-                    avatars[kvp.Key].Name = kvp.Value;
-
-                    lock (NameLookupEvents)
-                    {
-                        if (NameLookupEvents.ContainsKey(kvp.Key))
-                            NameLookupEvents[kvp.Key].Set();
-                    }
-                }
-            }
-        }
-    }
-}

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities/Utilities.cs)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,53 +0,0 @@
-&#65279;&lt;Project DefaultTargets=&quot;Build&quot; xmlns=&quot;<A HREF="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.com/developer/msbuild/2003</A>&quot;&gt;
-  &lt;PropertyGroup&gt;
-    &lt;Configuration Condition=&quot; '$(Configuration)' == '' &quot;&gt;Debug&lt;/Configuration&gt;
-    &lt;Platform Condition=&quot; '$(Platform)' == '' &quot;&gt;AnyCPU&lt;/Platform&gt;
-    &lt;ProductVersion&gt;8.0.50727&lt;/ProductVersion&gt;
-    &lt;SchemaVersion&gt;2.0&lt;/SchemaVersion&gt;
-    &lt;ProjectGuid&gt;{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}&lt;/ProjectGuid&gt;
-    &lt;OutputType&gt;Library&lt;/OutputType&gt;
-    &lt;AppDesignerFolder&gt;Properties&lt;/AppDesignerFolder&gt;
-    &lt;RootNamespace&gt;libsecondlife.Utilities&lt;/RootNamespace&gt;
-    &lt;AssemblyName&gt;libsecondlife.Utilities&lt;/AssemblyName&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' &quot;&gt;
-    &lt;DebugSymbols&gt;true&lt;/DebugSymbols&gt;
-    &lt;DebugType&gt;full&lt;/DebugType&gt;
-    &lt;Optimize&gt;false&lt;/Optimize&gt;
-    &lt;OutputPath&gt;..\..\bin\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;DEBUG;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;PropertyGroup Condition=&quot; '$(Configuration)|$(Platform)' == 'Release|AnyCPU' &quot;&gt;
-    &lt;DebugType&gt;pdbonly&lt;/DebugType&gt;
-    &lt;Optimize&gt;true&lt;/Optimize&gt;
-    &lt;OutputPath&gt;bin\Release\&lt;/OutputPath&gt;
-    &lt;DefineConstants&gt;TRACE&lt;/DefineConstants&gt;
-    &lt;ErrorReport&gt;prompt&lt;/ErrorReport&gt;
-    &lt;WarningLevel&gt;4&lt;/WarningLevel&gt;
-  &lt;/PropertyGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Reference Include=&quot;System&quot; /&gt;
-    &lt;Reference Include=&quot;System.Data&quot; /&gt;
-    &lt;Reference Include=&quot;System.Xml&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;Compile Include=&quot;Utilities.cs&quot; /&gt;
-    &lt;Compile Include=&quot;Properties\AssemblyInfo.cs&quot; /&gt;
-  &lt;/ItemGroup&gt;
-  &lt;ItemGroup&gt;
-    &lt;ProjectReference Include=&quot;..\libsecondlife.csproj&quot;&gt;
-      &lt;Project&gt;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&lt;/Project&gt;
-      &lt;Name&gt;libsecondlife&lt;/Name&gt;
-    &lt;/ProjectReference&gt;
-  &lt;/ItemGroup&gt;
-  &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
-  &lt;!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
-       Other similar extension points exist, see Microsoft.Common.targets.
-  &lt;Target Name=&quot;BeforeBuild&quot;&gt;
-  &lt;/Target&gt;
-  &lt;Target Name=&quot;AfterBuild&quot;&gt;
-  &lt;/Target&gt;
-  --&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.csproj)

Deleted: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp
===================================================================
--- trunk/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,27 +0,0 @@
-&lt;Project name=&quot;libsecondlife.Utilities&quot; fileversion=&quot;2.0&quot; language=&quot;C#&quot; clr-version=&quot;Net_2_0&quot; ctype=&quot;DotNetProject&quot;&gt;
-  &lt;Configurations active=&quot;Debug&quot;&gt;
-    &lt;Configuration name=&quot;Debug&quot; ctype=&quot;DotNetProjectConfiguration&quot;&gt;
-      &lt;Output directory=&quot;../bin/Debug&quot; assembly=&quot;libsecondlife.Utilities&quot; /&gt;
-      &lt;Build debugmode=&quot;True&quot; target=&quot;Library&quot; /&gt;
-      &lt;Execution runwithwarnings=&quot;True&quot; consolepause=&quot;True&quot; runtime=&quot;MsNet&quot; clr-version=&quot;Net_2_0&quot; /&gt;
-      &lt;CodeGeneration compiler=&quot;Csc&quot; warninglevel=&quot;4&quot; optimize=&quot;True&quot; unsafecodeallowed=&quot;False&quot; generateoverflowchecks=&quot;True&quot; mainclass=&quot;&quot; generatexmldocumentation=&quot;False&quot; ctype=&quot;CSharpCompilerParameters&quot; /&gt;
-    &lt;/Configuration&gt;
-    &lt;Configuration name=&quot;Release&quot; ctype=&quot;DotNetProjectConfiguration&quot;&gt;
-      &lt;Output directory=&quot;../bin/Debug&quot; assembly=&quot;libsecondlife.Utilities&quot; /&gt;
-      &lt;Build debugmode=&quot;False&quot; target=&quot;Library&quot; /&gt;
-      &lt;Execution runwithwarnings=&quot;True&quot; consolepause=&quot;True&quot; runtime=&quot;MsNet&quot; clr-version=&quot;Net_2_0&quot; /&gt;
-      &lt;CodeGeneration compiler=&quot;Csc&quot; warninglevel=&quot;4&quot; optimize=&quot;True&quot; unsafecodeallowed=&quot;False&quot; generateoverflowchecks=&quot;True&quot; mainclass=&quot;&quot; generatexmldocumentation=&quot;False&quot; ctype=&quot;CSharpCompilerParameters&quot; /&gt;
-    &lt;/Configuration&gt;
-  &lt;/Configurations&gt;
-  &lt;DeployTargets /&gt;
-  &lt;Contents&gt;
-    &lt;File name=&quot;./Properties/AssemblyInfo.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-    &lt;File name=&quot;./Utilities.cs&quot; subtype=&quot;Code&quot; buildaction=&quot;Compile&quot; /&gt;
-  &lt;/Contents&gt;
-  &lt;References&gt;
-    &lt;ProjectReference type=&quot;Project&quot; localcopy=&quot;True&quot; refto=&quot;libsecondlife&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-    &lt;ProjectReference type=&quot;Gac&quot; localcopy=&quot;True&quot; refto=&quot;System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&quot; /&gt;
-  &lt;/References&gt;
-&lt;/Project&gt;
\ No newline at end of file

Copied: branches/aditi/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp (from rev 775, trunk/libsecondlife-cs/libsecondlife.Utilities/libsecondlife.Utilities.mdp)

Modified: branches/aditi/libsecondlife-cs/libsecondlife.build
===================================================================
--- branches/aditi/libsecondlife-cs/libsecondlife.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,96 +1,127 @@
 &lt;?xml version=&quot;1.0&quot;?&gt;
 &lt;project name=&quot;libsecondlife&quot; default=&quot;build&quot;&gt;
-  &lt;sysinfo /&gt;
+	&lt;sysinfo /&gt;
 
-  &lt;!-- global framework settings --&gt;
-  &lt;property name=&quot;target.framework&quot; value=&quot;${framework::get-target-framework()}&quot; /&gt;
-  &lt;property name=&quot;assembly.dir&quot; value=&quot;${framework::get-assembly-directory(target.framework)}&quot; /&gt;
+	&lt;!-- global framework settings --&gt;
+	&lt;property name=&quot;target.framework&quot; value=&quot;${framework::get-target-framework()}&quot; /&gt;
+	&lt;property name=&quot;assembly.dir&quot; value=&quot;${framework::get-assembly-directory(target.framework)}&quot; /&gt;
 
-  &lt;!-- global project settings --&gt;
-  &lt;xmlpeek verbose=&quot;false&quot;
-    file=&quot;../libsecondlife.build&quot;
-    xpath=&quot;/project/property[@name = 'project.version']/@value&quot;
-    property=&quot;project.version&quot; /&gt;
-  &lt;property name=&quot;build.number&quot;
-     value=&quot;${math::abs(math::floor(timespan::get-total-days(datetime::now()
+	&lt;!-- global project settings --&gt;
+	&lt;xmlpeek verbose=&quot;false&quot;
+	  file=&quot;../libsecondlife.build&quot;
+	  xpath=&quot;/project/property[@name = 'project.version']/@value&quot;
+	  property=&quot;project.version&quot; /&gt;
+	&lt;property name=&quot;build.number&quot;
+	   value=&quot;${math::abs(math::floor(timespan::get-total-days(datetime::now()
      - datetime::parse('01/01/2002'))))}&quot; /&gt;
-  &lt;property name=&quot;assembly&quot; value=&quot;libsecondlife&quot; /&gt;
-  &lt;property name=&quot;bin_dir&quot; value=&quot;../bin&quot; /&gt;
+	&lt;property name=&quot;assembly&quot; value=&quot;libsecondlife&quot; /&gt;
+	&lt;property name=&quot;bin_dir&quot; value=&quot;../bin&quot; /&gt;
 
-  &lt;!-- default configuration --&gt;
-  &lt;property name=&quot;project.config&quot; value=&quot;debug&quot; /&gt; &lt;!-- debug|release --&gt;
+	&lt;!-- default configuration --&gt;
+	&lt;property name=&quot;project.config&quot; value=&quot;debug&quot; /&gt;
+	&lt;!-- debug|release --&gt;
 
-  &lt;!-- named configurations --&gt;
-  &lt;target name=&quot;init&quot; description=&quot;Initializes build properties&quot;&gt;
-    &lt;call target=&quot;${project.config}&quot; /&gt;
-  &lt;/target&gt;
+	&lt;!-- named configurations --&gt;
+	&lt;target name=&quot;init&quot; description=&quot;Initializes build properties&quot;&gt;
+		&lt;call target=&quot;${project.config}&quot; /&gt;
+	&lt;/target&gt;
 
-  &lt;target name=&quot;debug&quot; description=&quot;configures a debug build&quot;&gt;
-    &lt;property name=&quot;build.debug&quot; value=&quot;true&quot; /&gt;
-    &lt;property name=&quot;package.name&quot;
-      value=&quot;${project::get-name()}-${project.version}-${project.config}&quot; /&gt;
-    &lt;property name=&quot;assembly.configuration&quot;
-      value=&quot;${framework::get-target-framework()}.${platform::get-name()} [${project.config}]&quot; /&gt;
-  &lt;/target&gt;
+	&lt;target name=&quot;debug&quot; description=&quot;configures a debug build&quot;&gt;
+		&lt;property name=&quot;build.debug&quot; value=&quot;true&quot; /&gt;
+		&lt;property name=&quot;package.name&quot;
+		  value=&quot;${project::get-name()}-${project.version}-${project.config}&quot; /&gt;
+		&lt;property name=&quot;assembly.configuration&quot;
+		  value=&quot;${framework::get-target-framework()}.${platform::get-name()} [${project.config}]&quot; /&gt;
+	&lt;/target&gt;
 
-  &lt;target name=&quot;release&quot; description=&quot;configures a release build&quot;&gt;
-    &lt;property name=&quot;project.config&quot; value=&quot;release&quot; /&gt;
-    &lt;property name=&quot;build.debug&quot;    value=&quot;false&quot; /&gt;
-    &lt;property name=&quot;package.name&quot;   value=&quot;${project::get-name()}-${project.version}&quot; /&gt;
-    &lt;property name=&quot;assembly.configuration&quot;
-      value=&quot;${framework::get-target-framework()}.${platform::get-name()}&quot; /&gt;
-  &lt;/target&gt;
+	&lt;target name=&quot;release&quot; description=&quot;configures a release build&quot;&gt;
+		&lt;property name=&quot;project.config&quot; value=&quot;release&quot; /&gt;
+		&lt;property name=&quot;build.debug&quot;    value=&quot;false&quot; /&gt;
+		&lt;property name=&quot;package.name&quot;   value=&quot;${project::get-name()}-${project.version}&quot; /&gt;
+		&lt;property name=&quot;assembly.configuration&quot;
+		  value=&quot;${framework::get-target-framework()}.${platform::get-name()}&quot; /&gt;
+	&lt;/target&gt;
 
-  &lt;!-- build tasks --&gt;
-    &lt;target name=&quot;map&quot; depends=&quot;init&quot; description=&quot;generates the packet map source code&quot;&gt;
-        &lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;true&quot;/&gt;
-        
-        &lt;!-- &lt;copy file=&quot;../data/keywords.txt&quot; tofile=&quot;../bin/keywords.txt&quot; /&gt;
-        &lt;copy file=&quot;../data/message_template.msg&quot; tofile=&quot;../bin/message_template.msg&quot; /&gt;
-        &lt;copy file=&quot;mapgenerator/template.cs&quot; tofile=&quot;../bin/template.cs&quot; /&gt; --&gt;
-        
-        &lt;csc target=&quot;exe&quot; output=&quot;../bin/mapgenerator.exe&quot; debug=&quot;${build.debug}&quot;&gt;
-            &lt;sources&gt;
-                &lt;include name=&quot;mapgenerator/mapgenerator.cs&quot; /&gt;
-                &lt;include name=&quot;mapgenerator/ProtocolManager.cs&quot; /&gt;
-            &lt;/sources&gt;
-        &lt;/csc&gt;
-        &lt;exec program=&quot;../bin/mapgenerator.exe&quot; output=&quot;_Packets_.cs&quot; useruntimeengine=&quot;true&quot;&gt;
-            &lt;arg line=&quot;../data/message_template.msg mapgenerator/template.cs _Packets_.cs&quot; /&gt;
-        &lt;/exec&gt;
-    &lt;/target&gt;
-    
-    &lt;target name=&quot;build&quot; depends=&quot;init map&quot; description=&quot;compiles the source code&quot;&gt;
-    	&lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;true&quot;/&gt;
-        &lt;csc target=&quot;library&quot; output=&quot;../bin/libsecondlife.dll&quot; doc=&quot;../bin/libsecondlife.xml&quot; debug=&quot;${build.debug}&quot;&gt;
-            &lt;sources&gt; 
-                &lt;include name=&quot;*.cs&quot; /&gt; 
-                &lt;include name=&quot;AssetSystem/*.cs&quot; /&gt;
-                &lt;include name=&quot;InventorySystem/*.cs&quot; /&gt;
-                &lt;include name=&quot;JSON/*.cs&quot; /&gt;
-                &lt;include name=&quot;XmlRpcCS/*.cs&quot; /&gt;
-        	&lt;/sources&gt;
-        &lt;/csc&gt;
-    &lt;/target&gt;
+	&lt;!-- build tasks --&gt;
+	&lt;target name=&quot;map&quot; depends=&quot;init&quot; description=&quot;generates the packet map source code&quot;&gt;
+		&lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;true&quot;/&gt;
 
-    &lt;target name=&quot;test-dll&quot; depends=&quot;init build&quot; description=&quot;makes the test dll&quot;&gt;
-	&lt;csc target=&quot;library&quot; output=&quot;tests/tests.dll&quot;&gt; 
-	   &lt;sources&gt;
-    	     &lt;include name=&quot;tests/*.cs&quot; /&gt;
-	   &lt;/sources&gt;
-	   &lt;references&gt;
-	     &lt;include name=&quot;NUnit.dll&quot; /&gt;
-	   &lt;/references&gt;
-	&lt;/csc&gt;
-    &lt;/target&gt;
+		&lt;csc target=&quot;exe&quot; output=&quot;../bin/mapgenerator.exe&quot; debug=&quot;${build.debug}&quot;&gt;
+			&lt;sources&gt;
+				&lt;include name=&quot;mapgenerator/mapgenerator.cs&quot; /&gt;
+				&lt;include name=&quot;mapgenerator/ProtocolManager.cs&quot; /&gt;
+			&lt;/sources&gt;
+		&lt;/csc&gt;
+		&lt;!-- Does _Packets_.cs really need to be reproduced? --&gt;
+		&lt;!-- Don't do it unless we have must, otherwise lots of stuff recompiles. --&gt;
+		&lt;uptodate property=&quot;_Packets_.cs.uptodate&quot;&gt;
+			&lt;sourcefiles&gt;
+				&lt;include name=&quot;../bin/mapgenerator.exe&quot; /&gt;
+				&lt;include name=&quot;../data/message_template.msg mapgenerator/template.cs&quot; /&gt;
+			&lt;/sourcefiles&gt;
+			&lt;targetfiles&gt;
+				&lt;include name=&quot;_Packets_.cs&quot; /&gt;
+			&lt;/targetfiles&gt;
+		&lt;/uptodate&gt;
+		&lt;exec program=&quot;../bin/mapgenerator.exe&quot; output=&quot;_Packets_.cs&quot; useruntimeengine=&quot;true&quot; unless=&quot;${_Packets_.cs.uptodate}&quot;&gt;
+			&lt;arg line=&quot;../data/message_template.msg mapgenerator/template.cs mapgenerator/unusedpackets.txt _Packets_.cs&quot; /&gt;
+		&lt;/exec&gt;
+	&lt;/target&gt;
 
-    &lt;target name=&quot;clean&quot; description=&quot;remove build output&quot;&gt;
-	    &lt;delete failonerror=&quot;false&quot;&gt;
-    	    &lt;fileset basedir=&quot;${bin_dir}/&quot;&gt;
-                &lt;include name=&quot;libsecondlife.dll&quot; /&gt;
-                &lt;include name=&quot;libsecondlife.dll.mdb&quot; /&gt;
-                &lt;include name=&quot;mapgenerator.exe&quot; /&gt;
-            &lt;/fileset&gt;
-        &lt;/delete&gt;
-    &lt;/target&gt;
+	&lt;target name=&quot;build&quot; depends=&quot;init map&quot; description=&quot;compiles the source code&quot;&gt;
+		&lt;if propertyexists=&quot;CCNetLabel&quot;&gt;
+			&lt;!-- Produce AssemblyInfo.cs for libsecondlife.dll --&gt;
+			&lt;asminfo output=&quot;AssemblyInfo.cs&quot; language=&quot;CSharp&quot;&gt;
+				&lt;imports&gt;
+					&lt;import name=&quot;System&quot; /&gt;
+					&lt;import name=&quot;System.Reflection&quot; /&gt;
+					&lt;import name=&quot;System.Runtime.InteropServices&quot; /&gt;
+				&lt;/imports&gt;
+				&lt;attributes&gt;
+					&lt;attribute type=&quot;ComVisibleAttribute&quot; value=&quot;false&quot; /&gt;
+					&lt;attribute type=&quot;CLSCompliantAttribute&quot; value=&quot;false&quot; /&gt;
+					&lt;attribute type=&quot;AssemblyVersionAttribute&quot; value=&quot;${CCNetLabel}&quot; /&gt;
+					&lt;attribute type=&quot;AssemblyTitleAttribute&quot; value=&quot;libsecondlife&quot; /&gt;
+					&lt;attribute type=&quot;AssemblyDescriptionAttribute&quot; value=&quot;Networking layer for Second Life&quot; /&gt;
+					&lt;attribute type=&quot;AssemblyCopyrightAttribute&quot; value=&quot;Copyright &#169; libsecondlife 2006&quot; /&gt;
+				&lt;/attributes&gt;
+			&lt;/asminfo&gt;
+		&lt;/if&gt;
+
+		&lt;!-- Make sure the bin/ directory exists --&gt;
+		&lt;mkdir dir=&quot;${bin_dir}&quot; failonerror=&quot;true&quot;/&gt;
+
+		&lt;!-- Compile the library --&gt;
+		&lt;csc target=&quot;library&quot; output=&quot;../bin/libsecondlife.dll&quot; doc=&quot;../bin/libsecondlife.xml&quot; debug=&quot;${build.debug}&quot;&gt;
+			&lt;sources&gt;
+				&lt;include name=&quot;*.cs&quot; /&gt;
+				&lt;include name=&quot;AssetSystem/*.cs&quot; /&gt;
+				&lt;include name=&quot;InventorySystem/*.cs&quot; /&gt;
+				&lt;include name=&quot;JSON/*.cs&quot; /&gt;
+				&lt;include name=&quot;XmlRpcCS/*.cs&quot; /&gt;
+				&lt;include name=&quot;libsecondlife.Utilities/Utilities.cs&quot; /&gt;
+			&lt;/sources&gt;
+		&lt;/csc&gt;
+	&lt;/target&gt;
+
+	&lt;target name=&quot;test-dll&quot; depends=&quot;init build&quot; description=&quot;makes the test dll&quot;&gt;
+		&lt;csc target=&quot;library&quot; output=&quot;tests/tests.dll&quot;&gt;
+			&lt;sources&gt;
+				&lt;include name=&quot;tests/*.cs&quot; /&gt;
+			&lt;/sources&gt;
+			&lt;references&gt;
+				&lt;include name=&quot;NUnit.dll&quot; /&gt;
+			&lt;/references&gt;
+		&lt;/csc&gt;
+	&lt;/target&gt;
+
+	&lt;target name=&quot;clean&quot; description=&quot;remove build output&quot;&gt;
+		&lt;delete failonerror=&quot;false&quot;&gt;
+			&lt;fileset basedir=&quot;${bin_dir}/&quot;&gt;
+				&lt;include name=&quot;libsecondlife.dll&quot; /&gt;
+				&lt;include name=&quot;libsecondlife.dll.mdb&quot; /&gt;
+				&lt;include name=&quot;mapgenerator.exe&quot; /&gt;
+			&lt;/fileset&gt;
+		&lt;/delete&gt;
+	&lt;/target&gt;
 &lt;/project&gt;

Modified: branches/aditi/libsecondlife-cs/libsecondlife.csproj
===================================================================
--- branches/aditi/libsecondlife-cs/libsecondlife.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -91,6 +91,7 @@
     &lt;Compile Include=&quot;AssemblyInfo.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;AssetSystem\AppearanceManager.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\Asset.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\AssetImage.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\AssetManager.cs&quot; /&gt;
@@ -98,14 +99,20 @@
     &lt;Compile Include=&quot;AssetSystem\AssetPacketHelpers.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\AssetRequestDownload.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\AssetRequestUpload.cs&quot; /&gt;
-    &lt;Compile Include=&quot;AssetSystem\BodyPart.cs&quot; /&gt;
-    &lt;Compile Include=&quot;AssetSystem\BodyShape\_BodyShapeParams_.cs&quot; /&gt;
+    &lt;Compile Include=&quot;AssetSystem\AssetWearable.cs&quot; /&gt;
+    &lt;Compile Include=&quot;AssetSystem\AssetWearable_Body.cs&quot; /&gt;
+    &lt;Compile Include=&quot;AssetSystem\AssetWearable_Clothing.cs&quot; /&gt;
+    &lt;Compile Include=&quot;AssetSystem\_BodyShapeParams_.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\ImageManager.cs&quot; /&gt;
     &lt;Compile Include=&quot;AssetSystem\ImagePacketHelpers.cs&quot; /&gt;
     &lt;Compile Include=&quot;Avatar.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
     &lt;Compile Include=&quot;AvatarManager.cs&quot; /&gt;
+    &lt;Compile Include=&quot;InventorySystem\DownloadRequest_Folder.cs&quot; /&gt;
+    &lt;Compile Include=&quot;InventorySystem\InventoryWearable.cs&quot; /&gt;
+    &lt;Compile Include=&quot;MainAvatarStatus.cs&quot; /&gt;
+    &lt;Compile Include=&quot;MainAvatar.cs&quot; /&gt;
     &lt;Compile Include=&quot;EstateTools.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
@@ -157,6 +164,8 @@
     &lt;Compile Include=&quot;SecondLife.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;SerializableDictionary.cs&quot; /&gt;
+    &lt;Compile Include=&quot;Settings.cs&quot; /&gt;
     &lt;Compile Include=&quot;Textures.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
@@ -166,6 +175,7 @@
     &lt;Compile Include=&quot;XmlRpcCS\Logger.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;XmlRpcCS\SimpleHttpRequest.cs&quot; /&gt;
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcDeserializer.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
@@ -175,6 +185,7 @@
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcException.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;XmlRpcCS\XmlRpcExposedAttribute.cs&quot; /&gt;
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcRequest.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
@@ -184,6 +195,7 @@
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcRequestSerializer.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;XmlRpcCS\XmlRpcResponder.cs&quot; /&gt;
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcResponse.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
@@ -196,6 +208,8 @@
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcSerializer.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;
+    &lt;Compile Include=&quot;XmlRpcCS\XmlRpcServer.cs&quot; /&gt;
+    &lt;Compile Include=&quot;XmlRpcCS\XmlRpcSystemObject.cs&quot; /&gt;
     &lt;Compile Include=&quot;XmlRpcCS\XmlRpcXmlTokens.cs&quot;&gt;
       &lt;SubType&gt;Code&lt;/SubType&gt;
     &lt;/Compile&gt;

Copied: branches/aditi/libsecondlife-cs/libsecondlife.mdp (from rev 775, trunk/libsecondlife-cs/libsecondlife.mdp)

Copied: branches/aditi/libsecondlife-cs/libsecondlife.mds (from rev 775, trunk/libsecondlife-cs/libsecondlife.mds)

Modified: branches/aditi/libsecondlife-cs/libsecondlife.sln
===================================================================
--- branches/aditi/libsecondlife-cs/libsecondlife.sln	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/libsecondlife.sln	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,5 +1,5 @@
 Microsoft Visual Studio Solution File, Format Version 9.00
-# Visual Studio 2005
+# Visual C# Express 2005
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife&quot;, &quot;libsecondlife.csproj&quot;, &quot;{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}&quot;
 EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;sldump&quot;, &quot;examples\sldump\sldump.csproj&quot;, &quot;{F6258A68-C624-46A0-BA73-B55D21BB0A3B}&quot;
@@ -12,8 +12,6 @@
 EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;primexport&quot;, &quot;examples\primexport\primexport.csproj&quot;, &quot;{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife.Tests&quot;, &quot;tests\libsecondlife.Tests.csproj&quot;, &quot;{E0BCBBAE-A620-431A-9EB7-30173EAF195B}&quot;
-EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;mapgenerator&quot;, &quot;mapgenerator\mapgenerator.csproj&quot;, &quot;{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}&quot;
 EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;IA_SimpleInventory&quot;, &quot;examples\IA_SimpleInventory\IA_SimpleInventory.csproj&quot;, &quot;{E464B963-46E3-4E1A-A36F-9C640C880E68}&quot;
@@ -38,155 +36,200 @@
 EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;SLIRC&quot;, &quot;..\applications\SLIRC\SLIRC.csproj&quot;, &quot;{8855EB2F-BC4C-485A-A577-0989EB16BFDC}&quot;
 EndProject
-Project(&quot;{2150E333-8FDC-42A3-9474-1A3956D46DE8}&quot;) = &quot;InventoryImageAssets&quot;, &quot;InventoryImageAssets&quot;, &quot;{AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}&quot;
-EndProject
 Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;IA_MultiImageUpload&quot;, &quot;examples\IA_MultiImageUpload\IA_MultiImageUpload.csproj&quot;, &quot;{8598E42A-DCBC-4224-9503-5694F17B2F45}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;SLProxy&quot;, &quot;..\SLProxy\SLProxy.csproj&quot;, &quot;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;BodyPartMorphGenerator&quot;, &quot;examples\BodyPartMorphGenerator\BodyPartMorphGenerator.csproj&quot;, &quot;{98C44481-3F15-4305-840D-037EA0D9C221}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;Analyst&quot;, &quot;..\SLProxy\Analyst.csproj&quot;, &quot;{6222B134-AE5F-489A-8A77-423A721B7C62}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;TestClient&quot;, &quot;examples\TestClient\TestClient.csproj&quot;, &quot;{B87682F6-B2D7-4C4D-A529-400C24FD4880}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;ChatConsole&quot;, &quot;..\SLProxy\ChatConsole.csproj&quot;, &quot;{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife.Utilities&quot;, &quot;libsecondlife.Utilities\libsecondlife.Utilities.csproj&quot;, &quot;{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;BodyPartMorphGenerator&quot;, &quot;examples\BodyPartMorphGenerator\BodyPartMorphGenerator.csproj&quot;, &quot;{98C44481-3F15-4305-840D-037EA0D9C221}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;libsecondlife.Tests&quot;, &quot;libsecondlife.Tests\libsecondlife.Tests.csproj&quot;, &quot;{E0BCBBAE-A620-431A-9EB7-30173EAF195B}&quot;
 EndProject
-Project(&quot;{2150E333-8FDC-42A3-9474-1A3956D46DE8}&quot;) = &quot;Tools and Examples&quot;, &quot;Tools and Examples&quot;, &quot;{F35EF72F-4302-4924-A162-10447B94F635}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;SecondGlance&quot;, &quot;..\applications\SecondGlance\SecondGlance.csproj&quot;, &quot;{D72C92D1-559A-48A7-93F5-99F4E99F3F98}&quot;
 EndProject
-Project(&quot;{2150E333-8FDC-42A3-9474-1A3956D46DE8}&quot;) = &quot;SL Proxy&quot;, &quot;SL Proxy&quot;, &quot;{C754652B-2ACB-4D47-8914-834E17919132}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;SLProxy&quot;, &quot;..\applications\SLProxy\SLProxy.csproj&quot;, &quot;{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}&quot;
 EndProject
-Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;TestClient&quot;, &quot;examples\TestClient\TestClient.csproj&quot;, &quot;{B87682F6-B2D7-4C4D-A529-400C24FD4880}&quot;
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;Analyst&quot;, &quot;..\applications\SLProxy\Analyst.csproj&quot;, &quot;{6222B134-AE5F-489A-8A77-423A721B7C62}&quot;
 EndProject
+Project(&quot;{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}&quot;) = &quot;ChatConsole&quot;, &quot;..\applications\SLProxy\ChatConsole.csproj&quot;, &quot;{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}&quot;
+EndProject
 Global
 	GlobalSection(SolutionConfigurationPlatforms) = preSolution
+		Debug|.NET 1.1 = Debug|.NET 1.1
 		Debug|Any CPU = Debug|Any CPU
+		Release|.NET 1.1 = Release|.NET 1.1
 		Release|Any CPU = Release|Any CPU
 	EndGlobalSection
 	GlobalSection(ProjectConfigurationPlatforms) = postSolution
+		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|.NET 1.1.ActiveCfg = Debug|.NET 1.1
+		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|.NET 1.1.Build.0 = Debug|.NET 1.1
 		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|.NET 1.1.ActiveCfg = Release|.NET 1.1
+		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|.NET 1.1.Build.0 = Release|.NET 1.1
 		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{D9CDEDFB-8169-4B03-B57F-0DF638F044EC}.Release|Any CPU.Build.0 = Release|Any CPU
+		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{F6258A68-C624-46A0-BA73-B55D21BB0A3B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{FC19D5F6-076E-4923-8456-9B0E00E22896}.Release|Any CPU.Build.0 = Release|Any CPU
+		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{66FFD34E-652C-4EF5-81FE-06AD011169D2}.Release|Any CPU.Build.0 = Release|Any CPU
+		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E}.Release|Any CPU.Build.0 = Release|Any CPU
+		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D}.Release|Any CPU.Build.0 = Release|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{C59B1312-57EF-4146-B6B2-1C7B6DC4638B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{E464B963-46E3-4E1A-A36F-9C640C880E68}.Release|Any CPU.Build.0 = Release|Any CPU
+		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{E185E4E1-62D2-430C-A94C-E8E38190805B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{B5AC6795-E426-4BC3-950F-D7B2970E2394}.Release|Any CPU.Build.0 = Release|Any CPU
+		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C}.Release|Any CPU.Build.0 = Release|Any CPU
+		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A}.Release|Any CPU.Build.0 = Release|Any CPU
+		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7}.Release|Any CPU.Build.0 = Release|Any CPU
+		{F460FAB3-0D12-4873-89EB-2696818764B8}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{F460FAB3-0D12-4873-89EB-2696818764B8}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{F460FAB3-0D12-4873-89EB-2696818764B8}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{F460FAB3-0D12-4873-89EB-2696818764B8}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{F460FAB3-0D12-4873-89EB-2696818764B8}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{F460FAB3-0D12-4873-89EB-2696818764B8}.Release|Any CPU.Build.0 = Release|Any CPU
+		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{4EF98AD4-B3B3-42B0-9273-13A614A823F7}.Release|Any CPU.Build.0 = Release|Any CPU
+		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{7D4C4807-7705-48A7-9D82-F6689FBBCC8B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{A4F59DE9-E382-401D-AA8D-4557779D764E}.Release|Any CPU.Build.0 = Release|Any CPU
+		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{8855EB2F-BC4C-485A-A577-0989EB16BFDC}.Release|Any CPU.Build.0 = Release|Any CPU
+		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{8598E42A-DCBC-4224-9503-5694F17B2F45}.Release|Any CPU.Build.0 = Release|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{98C44481-3F15-4305-840D-037EA0D9C221}.Release|Any CPU.Build.0 = Release|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Release|Any CPU.Build.0 = Release|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{CE5E06C2-2428-416B-ADC1-F1FE16A0FB27}.Release|Any CPU.Build.0 = Release|Any CPU
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|.NET 1.1.ActiveCfg = Debug|.NET 1.1
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|.NET 1.1.Build.0 = Debug|.NET 1.1
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|.NET 1.1.ActiveCfg = Release|.NET 1.1
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|.NET 1.1.Build.0 = Release|.NET 1.1
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{E0BCBBAE-A620-431A-9EB7-30173EAF195B}.Release|Any CPU.Build.0 = Release|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Release|Any CPU.ActiveCfg = Release|Any CPU
+		{D72C92D1-559A-48A7-93F5-99F4E99F3F98}.Release|Any CPU.Build.0 = Release|Any CPU
+		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D}.Release|Any CPU.Build.0 = Release|Any CPU
+		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{6222B134-AE5F-489A-8A77-423A721B7C62}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{6222B134-AE5F-489A-8A77-423A721B7C62}.Release|Any CPU.Build.0 = Release|Any CPU
+		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|.NET 1.1.ActiveCfg = Debug|Any CPU
 		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
 		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Debug|Any CPU.Build.0 = Debug|Any CPU
+		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|.NET 1.1.ActiveCfg = Release|Any CPU
 		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|Any CPU.ActiveCfg = Release|Any CPU
 		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504}.Release|Any CPU.Build.0 = Release|Any CPU
-		{98C44481-3F15-4305-840D-037EA0D9C221}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{98C44481-3F15-4305-840D-037EA0D9C221}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{98C44481-3F15-4305-840D-037EA0D9C221}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{98C44481-3F15-4305-840D-037EA0D9C221}.Release|Any CPU.Build.0 = Release|Any CPU
-		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
-		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Debug|Any CPU.Build.0 = Debug|Any CPU
-		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Release|Any CPU.ActiveCfg = Release|Any CPU
-		{B87682F6-B2D7-4C4D-A529-400C24FD4880}.Release|Any CPU.Build.0 = Release|Any CPU
 	EndGlobalSection
 	GlobalSection(SolutionProperties) = preSolution
 		HideSolutionNode = FALSE
 	EndGlobalSection
-	GlobalSection(NestedProjects) = preSolution
-		{FC19D5F6-076E-4923-8456-9B0E00E22896} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{66FFD34E-652C-4EF5-81FE-06AD011169D2} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{623B86F7-7753-44B7-A8C8-CBC89FB8AF8E} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{77E5330D-8A8C-41B4-A2D1-6F06FE45ED6D} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{B5AC6795-E426-4BC3-950F-D7B2970E2394} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{7AE16AC1-E64C-4FDC-9B85-4BB6145D511C} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{F460FAB3-0D12-4873-89EB-2696818764B8} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{4EF98AD4-B3B3-42B0-9273-13A614A823F7} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{8855EB2F-BC4C-485A-A577-0989EB16BFDC} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{F6258A68-C624-46A0-BA73-B55D21BB0A3B} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{B87682F6-B2D7-4C4D-A529-400C24FD4880} = {F35EF72F-4302-4924-A162-10447B94F635}
-		{E185E4E1-62D2-430C-A94C-E8E38190805B} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{8D2E5240-2247-42F5-AAAC-CF0CCCEE349A} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{D6D1D020-D8D8-4D7E-B7AC-5913A903D6E7} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{A4F59DE9-E382-401D-AA8D-4557779D764E} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{E464B963-46E3-4E1A-A36F-9C640C880E68} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{8598E42A-DCBC-4224-9503-5694F17B2F45} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{98C44481-3F15-4305-840D-037EA0D9C221} = {AE3B6C21-9B43-490E-ABCE-2018DC1AEA44}
-		{6222B134-AE5F-489A-8A77-423A721B7C62} = {C754652B-2ACB-4D47-8914-834E17919132}
-		{D8ECCBE1-AC71-4054-AAA6-2D50E5629504} = {C754652B-2ACB-4D47-8914-834E17919132}
-		{E4115DC9-FC88-47D6-B3B6-2400AD19B80D} = {C754652B-2ACB-4D47-8914-834E17919132}
-	EndGlobalSection
 EndGlobal

Modified: branches/aditi/libsecondlife-cs/mapgenerator/Properties/AssemblyInfo.cs
===================================================================
--- branches/aditi/libsecondlife-cs/mapgenerator/Properties/AssemblyInfo.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/mapgenerator/Properties/AssemblyInfo.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -29,5 +29,5 @@
 //      Build Number
 //      Revision
 //
-[assembly: AssemblyVersion(&quot;0.0.0.1&quot;)]
-[assembly: AssemblyFileVersion(&quot;0.0.0.1&quot;)]
+[assembly: AssemblyVersion(&quot;1.0.0.0&quot;)]
+[assembly: AssemblyFileVersion(&quot;1.0.0.0&quot;)]

Modified: branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.cs
===================================================================
--- branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -1,5 +1,5 @@
 using System;
-using System.Text;
+using System.Collections.Generic;
 using System.IO;
 using libsecondlife;
 
@@ -73,9 +73,9 @@
             {
                 writer.WriteLine(&quot;            private byte[] _&quot; + field.Name.ToLower() + &quot;;&quot;);
                 //writer.WriteLine(&quot;            /// &lt;summary&gt;&quot; + field.Name + &quot; field&lt;/summary&gt;&quot;);
-                writer.WriteLine(&quot;            public byte[] &quot; + field.Name + &quot;\n            {&quot;);
+                writer.WriteLine(&quot;            public byte[] &quot; + field.Name + Environment.NewLine + &quot;            {&quot;);
                 writer.WriteLine(&quot;                get { return _&quot; + field.Name.ToLower() + &quot;; }&quot;);
-                writer.WriteLine(&quot;                set\n                {&quot;);
+                writer.WriteLine(&quot;                set&quot; + Environment.NewLine + &quot;                {&quot;);
                 writer.WriteLine(&quot;                    if (value == null) { _&quot; + 
                     field.Name.ToLower() + &quot; = null; return; }&quot;);
                 writer.WriteLine(&quot;                    if (value.Length &gt; &quot; + 
@@ -84,7 +84,7 @@
                 writer.WriteLine(&quot;                    else { _&quot; + field.Name.ToLower() + 
                     &quot; = new byte[value.Length]; Array.Copy(value, _&quot; + 
                     field.Name.ToLower() + &quot;, value.Length); }&quot;);
-                writer.WriteLine(&quot;                }\n            }&quot;);
+                writer.WriteLine(&quot;                }&quot; + Environment.NewLine + &quot;            }&quot;);
             }
         }
 
@@ -201,13 +201,13 @@
                     writer.WriteLine(&quot;bytes[i++] = (byte)((&quot; + field.Name + &quot;) ? 1 : 0);&quot;);
                     break;
                 case FieldType.F32:
-                    writer.WriteLine(&quot;ba = BitConverter.GetBytes(&quot; + field.Name + &quot;);\n&quot; +
-                        &quot;                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }\n&quot; +
+                    writer.WriteLine(&quot;ba = BitConverter.GetBytes(&quot; + field.Name + &quot;);&quot; + Environment.NewLine +
+                        &quot;                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 4); }&quot; + Environment.NewLine +
                         &quot;                Array.Copy(ba, 0, bytes, i, 4); i += 4;&quot;);
                     break;
                 case FieldType.F64:
-                    writer.WriteLine(&quot;ba = BitConverter.GetBytes(&quot; + field.Name + &quot;);\n&quot; +
-                        &quot;                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }\n&quot; +
+                    writer.WriteLine(&quot;ba = BitConverter.GetBytes(&quot; + field.Name + &quot;);&quot; + Environment.NewLine +
+                        &quot;                if(!BitConverter.IsLittleEndian) { Array.Reverse(ba, 0, 8); }&quot; + Environment.NewLine +
                         &quot;                Array.Copy(ba, 0, bytes, i, 8); i += 8;&quot;);
                     break;
                 case FieldType.Fixed:
@@ -224,22 +224,19 @@
                     writer.WriteLine(&quot;bytes[i++] = (byte)(&quot; + field.Name + &quot; % 256);&quot;);
                     writer.WriteLine(&quot;                bytes[i++] = (byte)((&quot; + field.Name + &quot; &gt;&gt; 8) % 256);&quot;);
                     break;
-                //case FieldType.LLQuaternion:
                 case FieldType.LLUUID:
-                case FieldType.LLVector4:
                     writer.WriteLine(&quot;if(&quot; + field.Name + &quot; == null) { Console.WriteLine(\&quot;Warning: &quot; + field.Name + &quot; is null, in \&quot; + this.GetType()); }&quot;);
                     writer.Write(&quot;                &quot;);
                     writer.WriteLine(&quot;Array.Copy(&quot; + field.Name + &quot;.GetBytes(), 0, bytes, i, 16); i += 16;&quot;);
                     break;
+                case FieldType.LLVector4:
+                    writer.WriteLine(&quot;Array.Copy(&quot; + field.Name + &quot;.GetBytes(), 0, bytes, i, 16); i += 16;&quot;);
+                    break;
                 case FieldType.LLQuaternion:
                 case FieldType.LLVector3:
-                    writer.WriteLine(&quot;if(&quot; + field.Name + &quot; == null) { Console.WriteLine(\&quot;Warning: &quot; + field.Name + &quot; is null, in \&quot; + this.GetType()); }&quot;);
-                    writer.Write(&quot;                &quot;);
                     writer.WriteLine(&quot;Array.Copy(&quot; + field.Name + &quot;.GetBytes(), 0, bytes, i, 12); i += 12;&quot;);
                     break;
                 case FieldType.LLVector3d:
-                    writer.WriteLine(&quot;if(&quot; + field.Name + &quot; == null) { Console.WriteLine(\&quot;Warning: &quot; + field.Name + &quot; is null, in \&quot; + this.GetType()); }&quot;);
-                    writer.Write(&quot;                &quot;);
                     writer.WriteLine(&quot;Array.Copy(&quot; + field.Name + &quot;.GetBytes(), 0, bytes, i, 24); i += 24;&quot;);
                     break;
                 case FieldType.U8:
@@ -327,14 +324,15 @@
             }
         }
 
-        static void WriteBlockClass(TextWriter writer, MapBlock block)
+        static void WriteBlockClass(TextWriter writer, MapBlock block, MapPacket packet)
         {
             bool variableFields = false;
             bool floatFields = false;
 
             //writer.WriteLine(&quot;        /// &lt;summary&gt;&quot; + block.Name + &quot; block&lt;/summary&gt;&quot;);
             writer.WriteLine(&quot;        /// &lt;exclude/&gt;&quot;);
-            writer.WriteLine(&quot;        public class &quot; + block.Name + &quot;Block\n        {&quot;);
+            writer.WriteLine(&quot;        [XmlType(\&quot;&quot; + packet.Name.ToLower() + &quot;_&quot; + block.Name.ToLower() + &quot;\&quot;)]&quot;);
+            writer.WriteLine(&quot;        public class &quot; + block.Name + &quot;Block&quot; + Environment.NewLine + &quot;        {&quot;);
 
             foreach (MapField field in block.Fields)
             {
@@ -347,9 +345,14 @@
             // Length property
             writer.WriteLine(&quot;&quot;);
             //writer.WriteLine(&quot;            /// &lt;summary&gt;Length of this block serialized in bytes&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;            public int Length\n            {\n                get\n&quot; +
-                &quot;                {&quot;);
+            writer.WriteLine(&quot;            [XmlIgnore]&quot; + Environment.NewLine +
+                             &quot;            public int Length&quot; + Environment.NewLine +
+                             &quot;            {&quot; + Environment.NewLine + 
+                             &quot;                get&quot; + Environment.NewLine +
+                             &quot;                {&quot;);
             int length = 0;
+
+            // Figure out the length of this block
             foreach (MapField field in block.Fields)
             {
                 length += GetFieldLength(writer, field);
@@ -375,7 +378,7 @@
                 writer.WriteLine(&quot;                    return length;&quot;);
             }
 
-            writer.WriteLine(&quot;                }\n            }\n&quot;);
+            writer.WriteLine(&quot;                }&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine);
 
             // Default constructor
             //writer.WriteLine(&quot;            /// &lt;summary&gt;Default constructor&lt;/summary&gt;&quot;);
@@ -383,27 +386,30 @@
 
             // Constructor for building the class from bytes
             //writer.WriteLine(&quot;            /// &lt;summary&gt;Constructor for building the block from a byte array&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;            public &quot; + block.Name + &quot;Block(byte[] bytes, ref int i)&quot; +
-                &quot;\n            {&quot;);
+            writer.WriteLine(&quot;            public &quot; + block.Name + &quot;Block(byte[] bytes, ref int i)&quot; + Environment.NewLine + 
+                &quot;            {&quot;);
 
             // Declare a length variable if we need it for variable fields in this constructor
             if (variableFields) { writer.WriteLine(&quot;                int length;&quot;); }
 
             // Start of the try catch block
-            writer.WriteLine(&quot;                try\n                {&quot;);
+            writer.WriteLine(&quot;                try&quot; + Environment.NewLine + &quot;                {&quot;);
 
             foreach (MapField field in block.Fields)
             {
                 WriteFieldFromBytes(writer, field);
             }
 
-            writer.WriteLine(&quot;                }\n                catch (Exception)\n&quot; +
-                &quot;                {\n                    throw new MalformedDataException();\n&quot; +
-                &quot;                }\n            }\n&quot;);
+            writer.WriteLine(&quot;                }&quot; + Environment.NewLine + 
+                &quot;                catch (Exception)&quot; + Environment.NewLine +
+                &quot;                {&quot; + Environment.NewLine + 
+                &quot;                    throw new MalformedDataException();&quot; + Environment.NewLine +
+                &quot;                }&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine);
 
             // ToBytes() function
             //writer.WriteLine(&quot;            /// &lt;summary&gt;Serialize this block to a byte array&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;            public void ToBytes(byte[] bytes, ref int i)\n            {&quot;);
+            writer.WriteLine(&quot;            public void ToBytes(byte[] bytes, ref int i)&quot; + Environment.NewLine + 
+                &quot;            {&quot;);
 
             // Declare a byte[] variable if we need it for floating point field conversions
             if (floatFields) { writer.WriteLine(&quot;                byte[] ba;&quot;); }
@@ -413,28 +419,29 @@
                 WriteFieldToBytes(writer, field);
             }
 
-            writer.WriteLine(&quot;            }\n&quot;);
+            writer.WriteLine(&quot;            }&quot; + Environment.NewLine);
 
             // ToString() function
             //writer.WriteLine(&quot;            /// &lt;summary&gt;Serialize this block to a string&lt;/summary&gt;&lt;returns&gt;A string containing the serialized block&lt;/returns&gt;&quot;);
-            writer.WriteLine(&quot;            public override string ToString()\n            {&quot;);
-            writer.WriteLine(&quot;                string output = \&quot;-- &quot; + block.Name + &quot; --\\n\&quot;;&quot;);
+            writer.WriteLine(&quot;            public override string ToString()&quot; + Environment.NewLine + &quot;            {&quot;);
+            writer.WriteLine(&quot;                string output = \&quot;-- &quot; + block.Name + &quot; --\&quot; + Environment.NewLine;&quot;);
 
             foreach (MapField field in block.Fields)
             {
                 if (field.Type == FieldType.Variable || field.Type == FieldType.Fixed)
                 {
-                    writer.WriteLine(&quot;                output += Helpers.FieldToString(&quot; + field.Name + &quot;, \&quot;&quot; + field.Name + &quot;\&quot;) + \&quot;\\n\&quot;;&quot;);
+                    writer.WriteLine(&quot;                output += Helpers.FieldToString(&quot; + field.Name + &quot;, \&quot;&quot; + field.Name + &quot;\&quot;) + \&quot;\&quot; + Environment.NewLine;&quot;);
                 }
                 else
                 {
-                    writer.WriteLine(&quot;                output += \&quot;&quot; + field.Name + &quot;: \&quot; + &quot; + field.Name + &quot;.ToString() + \&quot;\\n\&quot;;&quot;);
+                    writer.WriteLine(&quot;                output += \&quot;&quot; + field.Name + &quot;: \&quot; + &quot; + field.Name + &quot;.ToString() + \&quot;\&quot; + Environment.NewLine;&quot;);
                 }
             }
 
-            writer.WriteLine(&quot;                output = output.Trim();\n                return output;\n            }&quot;);
+            writer.WriteLine(&quot;                output = output.Trim();&quot; + Environment.NewLine +
+                &quot;                return output;&quot; + Environment.NewLine + &quot;            }&quot;);
 
-            writer.WriteLine(&quot;        }\n&quot;);
+            writer.WriteLine(&quot;        }&quot; + Environment.NewLine);
         }
 
         static void WritePacketClass(TextWriter writer, MapPacket packet)
@@ -443,12 +450,12 @@
 
             //writer.WriteLine(&quot;    /// &lt;summary&gt;&quot; + packet.Name + &quot; packet&lt;/summary&gt;&quot;);
             writer.WriteLine(&quot;    /// &lt;exclude/&gt;&quot;);
-            writer.WriteLine(&quot;    public class &quot; + packet.Name + &quot;Packet : Packet\n    {&quot;);
+            writer.WriteLine(&quot;    public class &quot; + packet.Name + &quot;Packet : Packet&quot; + Environment.NewLine + &quot;    {&quot;);
 
             // Write out each block class
             foreach (MapBlock block in packet.Blocks)
             {
-                WriteBlockClass(writer, block);
+                WriteBlockClass(writer, block, packet);
             }
 
             // Header member
@@ -477,7 +484,7 @@
 
             // Default constructor
             //writer.WriteLine(&quot;        /// &lt;summary&gt;Default constructor&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;        public &quot; + packet.Name + &quot;Packet()\n        {&quot;);
+            writer.WriteLine(&quot;        public &quot; + packet.Name + &quot;Packet()&quot; + Environment.NewLine + &quot;        {&quot;);
             writer.WriteLine(&quot;            Header = new &quot; + packet.Frequency.ToString() + &quot;Header();&quot;);
             writer.WriteLine(&quot;            Header.ID = &quot; + packet.ID + &quot;;&quot;);
             writer.WriteLine(&quot;            Header.Reliable = true;&quot;); // Turn the reliable flag on by default
@@ -504,12 +511,12 @@
                         &quot;Block[&quot; + block.Count + &quot;];&quot;);
                 }
             }
-            writer.WriteLine(&quot;        }\n&quot;);
+            writer.WriteLine(&quot;        }&quot; + Environment.NewLine);
 
             // Constructor that takes a byte array and beginning position only (no prebuilt header)
             bool seenVariable = false;
             //writer.WriteLine(&quot;        /// &lt;summary&gt;Constructor that takes a byte array and beginning position (no prebuilt header)&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;        public &quot; + packet.Name + &quot;Packet(byte[] bytes, ref int i)\n        {&quot;);
+            writer.WriteLine(&quot;        public &quot; + packet.Name + &quot;Packet(byte[] bytes, ref int i)&quot; + Environment.NewLine + &quot;        {&quot;);
             writer.WriteLine(&quot;            int packetEnd = bytes.Length - 1;&quot;);
             writer.WriteLine(&quot;            Header = new &quot; + packet.Frequency.ToString() + 
                 &quot;Header(bytes, ref i, ref packetEnd);&quot;);
@@ -550,13 +557,14 @@
                         block.Name + &quot;Block(bytes, ref i); }&quot;);
                 }
             }
-            writer.WriteLine(&quot;        }\n&quot;);
+            writer.WriteLine(&quot;        }&quot; + Environment.NewLine);
 
             seenVariable = false;
 
             // Constructor that takes a byte array and a prebuilt header
             //writer.WriteLine(&quot;        /// &lt;summary&gt;Constructor that takes a byte array and a prebuilt header&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;        public &quot; + packet.Name + &quot;Packet(Header head, byte[] bytes, ref int i)\n        {&quot;);
+            writer.WriteLine(&quot;        public &quot; + packet.Name + 
+                &quot;Packet(Header head, byte[] bytes, ref int i)&quot; + Environment.NewLine + &quot;        {&quot;);
             writer.WriteLine(&quot;            Header = head;&quot;);
             foreach (MapBlock block in packet.Blocks)
             {
@@ -595,11 +603,11 @@
                         block.Name + &quot;Block(bytes, ref i); }&quot;);
                 }
             }
-            writer.WriteLine(&quot;        }\n&quot;);
+            writer.WriteLine(&quot;        }&quot; + Environment.NewLine);
 
             // ToBytes() function
             //writer.WriteLine(&quot;        /// &lt;summary&gt;Serialize this packet to a byte array&lt;/summary&gt;&lt;returns&gt;A byte array containing the serialized packet&lt;/returns&gt;&quot;);
-            writer.WriteLine(&quot;        public override byte[] ToBytes()\n        {&quot;);
+            writer.WriteLine(&quot;        public override byte[] ToBytes()&quot; + Environment.NewLine + &quot;        {&quot;);
 
             writer.Write(&quot;            int length = &quot;);
             if (packet.Frequency == PacketFrequency.Low) { writer.WriteLine(&quot;8;&quot;); }
@@ -666,12 +674,12 @@
             }
 
             writer.WriteLine(&quot;            if (header.AckList.Length &gt; 0) { header.AcksToBytes(bytes, ref i); }&quot;);
-            writer.WriteLine(&quot;            return bytes;\n        }\n&quot;);
+            writer.WriteLine(&quot;            return bytes;&quot; + Environment.NewLine + &quot;        }&quot; + Environment.NewLine);
 
             // ToString() function
             //writer.WriteLine(&quot;        /// &lt;summary&gt;Serialize this packet to a string&lt;/summary&gt;&lt;returns&gt;A string containing the serialized packet&lt;/returns&gt;&quot;);
-            writer.WriteLine(&quot;        public override string ToString()\n        {&quot;);
-            writer.WriteLine(&quot;            string output = \&quot;--- &quot; + packet.Name + &quot; ---\\n\&quot;;&quot;);
+            writer.WriteLine(&quot;        public override string ToString()&quot; + Environment.NewLine + &quot;        {&quot;);
+            writer.WriteLine(&quot;            string output = \&quot;--- &quot; + packet.Name + &quot; ---\&quot; + Environment.NewLine;&quot;);
 
             foreach (MapBlock block in packet.Blocks)
             {
@@ -681,43 +689,58 @@
                 if (block.Count == -1)
                 {
                     // Variable count block
-                    writer.WriteLine(&quot;            for (int j = 0; j &lt; &quot; + sanitizedName + &quot;.Length; j++)\n            {&quot;);
-                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + &quot;[j].ToString() + \&quot;\\n\&quot;;\n            }&quot;);
+                    writer.WriteLine(&quot;            for (int j = 0; j &lt; &quot; + 
+                        sanitizedName + &quot;.Length; j++)&quot; + Environment.NewLine + &quot;            {&quot;);
+                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + 
+                        &quot;[j].ToString() + \&quot;\&quot; + Environment.NewLine;&quot; + Environment.NewLine + &quot;            }&quot;);
                 }
                 else if (block.Count == 1)
                 {
-                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + &quot;.ToString() + \&quot;\\n\&quot;;&quot;);
+                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + &quot;.ToString() + \&quot;\&quot; + Environment.NewLine;&quot;);
                 }
                 else
                 {
                     // Multiple count block
-                    writer.WriteLine(&quot;            for (int j = 0; j &lt; &quot; + block.Count + &quot;; j++)\n            {&quot;);
-                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + &quot;[j].ToString() + \&quot;\\n\&quot;;\n            }&quot;);
+                    writer.WriteLine(&quot;            for (int j = 0; j &lt; &quot; + 
+                        block.Count + &quot;; j++)&quot; + Environment.NewLine + &quot;            {&quot;);
+                    writer.WriteLine(&quot;                output += &quot; + sanitizedName + 
+                        &quot;[j].ToString() + \&quot;\&quot; + Environment.NewLine;&quot; + Environment.NewLine + &quot;            }&quot;);
                 }
             }
 
-            writer.WriteLine(&quot;            return output;\n        }\n&quot;);
+            writer.WriteLine(&quot;            return output;&quot; + Environment.NewLine + &quot;        }&quot; + Environment.NewLine);
 
             // Closing function bracket
-            writer.WriteLine(&quot;    }\n&quot;);
+            writer.WriteLine(&quot;    }&quot; + Environment.NewLine);
         }
 
         static int Main(string[] args)
         {
             ProtocolManager protocol;
+            List&lt;string&gt; unused = new List&lt;string&gt;();
             TextWriter writer;
 
             try
             {
-                if (args.Length &lt; 3)
+                if (args.Length != 4)
                 {
-                    Console.WriteLine(&quot;Invalid arguments, need [message_template.msg] [template.cs] [_Packets_.cs]&quot;);
+                    Console.WriteLine(&quot;Invalid arguments, need [message_template.msg] [template.cs] [unusedpackets.txt] [_Packets_.cs]&quot;);
                     return -1;
                 }
 
-                writer = new StreamWriter(args[2]);
+                writer = new StreamWriter(args[3]);
                 protocol = new ProtocolManager(args[0]);
 
+                // Build a list of unused packets
+                using (StreamReader unusedReader = new StreamReader(args[2])) 
+                {
+                    while (unusedReader.Peek() &gt;= 0) 
+                    {
+                        unused.Add(unusedReader.ReadLine().Trim());
+                    }
+                }
+
+                // Read in the template.cs file and write it to our output
                 TextReader reader = new StreamReader(args[1]);
                 writer.WriteLine(reader.ReadToEnd());
                 reader.Close();
@@ -728,162 +751,151 @@
                 return -2;
             }
 
+
+            // Prune all of the unused packets out of the protocol
+            int i = 0;
+            foreach (MapPacket packet in protocol.LowMaps)
+            {
+                if (packet != null &amp;&amp; unused.Contains(packet.Name))
+                    protocol.LowMaps[i] = null;
+                i++;
+            }
+            i = 0;
+            foreach (MapPacket packet in protocol.MediumMaps)
+            {
+                if (packet != null &amp;&amp; unused.Contains(packet.Name))
+                    protocol.MediumMaps[i] = null;
+                i++;
+            }
+            i = 0;
+            foreach (MapPacket packet in protocol.HighMaps)
+            {
+                if (packet != null &amp;&amp; unused.Contains(packet.Name))
+                    protocol.HighMaps[i] = null;
+                i++;
+            }
+
+
             // Write the PacketType enum
-            //writer.WriteLine(&quot;    /// &lt;summary&gt;Used to identify the type of a packet&lt;/summary&gt;&quot;);
-            writer.WriteLine(&quot;    public enum PacketType\n    {\n&quot; +
-                &quot;        /// &lt;summary&gt;A generic value, not an actual packet type&lt;/summary&gt;\n&quot; +
+            writer.WriteLine(&quot;    public enum PacketType&quot; + Environment.NewLine + &quot;    {&quot; + Environment.NewLine +
+                &quot;        /// &lt;summary&gt;A generic value, not an actual packet type&lt;/summary&gt;&quot; + Environment.NewLine +
                 &quot;        Default,&quot;);
             foreach (MapPacket packet in protocol.LowMaps)
-            {
                 if (packet != null)
-                {
-                    //writer.WriteLine(&quot;        /// &lt;summary&gt;&quot; + packet.Name + &quot;&lt;/summary&gt;&quot;);
                     writer.WriteLine(&quot;        &quot; + packet.Name + &quot;,&quot;);
-                }
-            }
             foreach (MapPacket packet in protocol.MediumMaps)
-            {
                 if (packet != null)
-                {
-                    //writer.WriteLine(&quot;        /// &lt;summary&gt;&quot; + packet.Name + &quot;&lt;/summary&gt;&quot;);
                     writer.WriteLine(&quot;        &quot; + packet.Name + &quot;,&quot;);
-                }
-            }
             foreach (MapPacket packet in protocol.HighMaps)
-            {
                 if (packet != null)
-                {
-                    //writer.WriteLine(&quot;        /// &lt;summary&gt;&quot; + packet.Name + &quot;&lt;/summary&gt;&quot;);
                     writer.WriteLine(&quot;        &quot; + packet.Name + &quot;,&quot;);
-                }
-            }
-            writer.WriteLine(&quot;    }\n&quot;);
+            writer.WriteLine(&quot;    }&quot; + Environment.NewLine);
 
-            // Write the base Packet class
-            writer.WriteLine(//&quot;    /// &lt;summary&gt;Base class for all packet classes&lt;/summary&gt;\n&quot; +
-                &quot;    public abstract class Packet\n    {\n&quot; + 
-                //&quot;        /// &lt;summary&gt;Either a LowHeader, MediumHeader, or HighHeader representing the first bytes of the packet&lt;/summary&gt;\n&quot; +
-                &quot;        public abstract Header Header { get; set; }\n&quot; +
-                //&quot;        /// &lt;summary&gt;The type of this packet, identified by it's frequency and ID&lt;/summary&gt;\n&quot; +
-                &quot;        public abstract PacketType Type { get; }\n&quot; +
-                //&quot;        /// &lt;summary&gt;Used internally to track timeouts, do not use&lt;/summary&gt;\n&quot; +
-                &quot;        public int TickCount;\n\n&quot; +
-                //&quot;        /// &lt;summary&gt;Serializes the packet in to a byte array&lt;/summary&gt;\n&quot; +
-                //&quot;        /// &lt;returns&gt;A byte array containing the serialized packet payload, ready to be sent across the wire&lt;/returns&gt;\n&quot; +
-                &quot;        public abstract byte[] ToBytes();\n\n&quot; +
-                //&quot;        /// &lt;summary&gt;Get the PacketType for a given packet id and packet frequency&lt;/summary&gt;\n&quot; +
-                //&quot;        /// &lt;param name=\&quot;id\&quot;&gt;The packet ID from the header&lt;/param&gt;\n&quot; +
-                //&quot;        /// &lt;param name=\&quot;frequency\&quot;&gt;Frequency of this packet&lt;/param&gt;\n&quot; +
-                //&quot;        /// &lt;returns&gt;The packet type, or PacketType.Default&lt;/returns&gt;\n&quot; +
-                &quot;        public static PacketType GetType(ushort id, PacketFrequency frequency)\n        {\n&quot; +
-                &quot;            switch (frequency)\n            {\n                case PacketFrequency.Low:\n&quot; +
-                &quot;                    switch (id)\n                    {&quot;);
 
+            // Write all of the XmlInclude statements for the Packet class to allow packet serialization
             foreach (MapPacket packet in protocol.LowMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID + 
-                        &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
-                }
-            }
+                    writer.WriteLine(&quot;    [XmlInclude(typeof(&quot; + packet.Name + &quot;Packet))]&quot;);
+            foreach (MapPacket packet in protocol.MediumMaps)
+                if (packet != null)
+                    writer.WriteLine(&quot;    [XmlInclude(typeof(&quot; + packet.Name + &quot;Packet))]&quot;);
+            foreach (MapPacket packet in protocol.HighMaps)
+                if (packet != null)
+                    writer.WriteLine(&quot;    [XmlInclude(typeof(&quot; + packet.Name + &quot;Packet))]&quot;);
 
-            writer.WriteLine(&quot;                    }\n                    break;\n&quot; +
-                &quot;                case PacketFrequency.Medium:\n                    switch (id)\n                    {&quot;);
 
+            // Write the base Packet class
+            writer.WriteLine(
+                &quot;    public abstract class Packet&quot; + Environment.NewLine + &quot;    {&quot; + Environment.NewLine + 
+                &quot;        public abstract Header Header { get; set; }&quot; + Environment.NewLine +
+                &quot;        public abstract PacketType Type { get; }&quot; + Environment.NewLine +
+                &quot;        public int TickCount;&quot; + Environment.NewLine + Environment.NewLine +
+                &quot;        public abstract byte[] ToBytes();&quot; + Environment.NewLine + Environment.NewLine +
+                &quot;        public void ToXml(XmlWriter xmlWriter)&quot; + Environment.NewLine +
+                &quot;        {&quot; + Environment.NewLine +
+                &quot;            XmlSerializer serializer = new XmlSerializer(typeof(Packet));&quot; + Environment.NewLine +
+                &quot;            serializer.Serialize(xmlWriter, this);&quot; + Environment.NewLine +
+                &quot;        }&quot;);
+
+
+            // Write the Packet.GetType() function
+            writer.WriteLine(
+                &quot;        public static PacketType GetType(ushort id, PacketFrequency frequency)&quot; + Environment.NewLine +
+                &quot;        {&quot; + Environment.NewLine +
+                &quot;            switch (frequency)&quot; + Environment.NewLine + 
+                &quot;            {&quot; + Environment.NewLine + 
+                &quot;                case PacketFrequency.Low:&quot; + Environment.NewLine +
+                &quot;                    switch (id)&quot; + Environment.NewLine + 
+                &quot;                    {&quot;);
+            foreach (MapPacket packet in protocol.LowMaps)
+                if (packet != null)
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
+            writer.WriteLine(&quot;                    }&quot; + Environment.NewLine + 
+                &quot;                    break;&quot; + Environment.NewLine +
+                &quot;                case PacketFrequency.Medium:&quot; + Environment.NewLine +
+                &quot;                    switch (id)&quot; + Environment.NewLine + &quot;                    {&quot;);
             foreach (MapPacket packet in protocol.MediumMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID +
-                        &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
-                }
-            }
-
-            writer.WriteLine(&quot;                    }\n                    break;\n&quot; +
-                &quot;                case PacketFrequency.High:\n                    switch (id)\n                    {&quot;);
-
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
+            writer.WriteLine(&quot;                    }&quot; + Environment.NewLine + 
+                &quot;                    break;&quot; + Environment.NewLine +
+                &quot;                case PacketFrequency.High:&quot; + Environment.NewLine +
+                &quot;                    switch (id)&quot; + Environment.NewLine + &quot;                    {&quot;);
             foreach (MapPacket packet in protocol.HighMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID +
-                        &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
-                }
-            }
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return PacketType.&quot; + packet.Name + &quot;;&quot;);
+            writer.WriteLine(&quot;                    }&quot; + Environment.NewLine +
+                &quot;                    break;&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine + Environment.NewLine +
+                &quot;            return PacketType.Default;&quot; + Environment.NewLine + &quot;        }&quot; + Environment.NewLine);
+            
 
-            writer.WriteLine(&quot;                    }\n                    break;\n            }\n\n&quot; +
-                &quot;            return PacketType.Default;\n        }\n&quot;);
-
-            writer.WriteLine(//&quot;        /// &lt;summary&gt;Construct a packet in it's native class from a byte array&lt;/summary&gt;\n&quot; +
-                //&quot;        /// &lt;param name=\&quot;bytes\&quot;&gt;Byte array containing the packet, starting at position 0&lt;/param&gt;\n&quot; +
-                //&quot;        /// &lt;param name=\&quot;packetEnd\&quot;&gt;The last byte of the packet. If the packet was 76 bytes long, packetEnd would be 75&lt;/param&gt;\n&quot; +
-                //&quot;        /// &lt;returns&gt;The native packet class for this type of packet, typecasted to the generic Packet&lt;/returns&gt;\n&quot; +
-                &quot;        public static Packet BuildPacket(byte[] bytes, ref int packetEnd, byte[] zeroBuffer)\n&quot; +
-                &quot;        {\n            ushort id;\n            int i = 0;\n&quot; +
-                &quot;            Header header = Header.BuildHeader(bytes, ref i, ref packetEnd);\n&quot; +
-                &quot;            if (header.Zerocoded)\n            {\n&quot; +
-                &quot;                packetEnd = Helpers.ZeroDecode(bytes, packetEnd + 1, zeroBuffer) - 1;\n&quot; +
-                &quot;                bytes = zeroBuffer;\n            }\n\n&quot; + 
-                &quot;            if (bytes[4] == 0xFF)\n            {\n&quot; +
-                &quot;                if (bytes[5] == 0xFF)\n                {\n&quot; +
-                &quot;                    id = (ushort)((bytes[6] &lt;&lt; 8) + bytes[7]);\n&quot; +
-                &quot;                    switch (id)\n                    {&quot;);
+            // Write the Packet.BuildPacket() function
+            writer.WriteLine(
+                &quot;        public static Packet BuildPacket(byte[] bytes, ref int packetEnd, byte[] zeroBuffer)&quot; + Environment.NewLine +
+                &quot;        {&quot; + Environment.NewLine + &quot;            ushort id;&quot; + Environment.NewLine + 
+                &quot;            int i = 0;&quot; + Environment.NewLine +
+                &quot;            Header header = Header.BuildHeader(bytes, ref i, ref packetEnd);&quot; + Environment.NewLine +
+                &quot;            if (header.Zerocoded)&quot; + Environment.NewLine + &quot;            {&quot; + Environment.NewLine +
+                &quot;                packetEnd = Helpers.ZeroDecode(bytes, packetEnd + 1, zeroBuffer) - 1;&quot; + Environment.NewLine +
+                &quot;                bytes = zeroBuffer;&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine + Environment.NewLine +
+                &quot;            if (bytes[4] == 0xFF)&quot; + Environment.NewLine + &quot;            {&quot; + Environment.NewLine +
+                &quot;                if (bytes[5] == 0xFF)&quot; + Environment.NewLine + &quot;                {&quot; + Environment.NewLine +
+                &quot;                    id = (ushort)((bytes[6] &lt;&lt; 8) + bytes[7]);&quot; + Environment.NewLine +
+                &quot;                    switch (id)&quot; + Environment.NewLine + &quot;                    {&quot;);
             foreach (MapPacket packet in protocol.LowMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID + 
-                        &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
-                }
-            }
-            writer.WriteLine(&quot;                    }\n                }\n                else\n&quot; +
-                &quot;                {\n                    id = (ushort)bytes[5];\n&quot; +
-                &quot;                    switch (id)\n                    {&quot;);
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
+            writer.WriteLine(&quot;                    }&quot; + Environment.NewLine + &quot;                }&quot; + Environment.NewLine + 
+                &quot;                else&quot; + Environment.NewLine +
+                &quot;                {&quot; + Environment.NewLine + &quot;                    id = (ushort)bytes[5];&quot; + Environment.NewLine +
+                &quot;                    switch (id)&quot; + Environment.NewLine + &quot;                    {&quot;);
             foreach (MapPacket packet in protocol.MediumMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID + 
-                        &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
-                }
-            }
-            writer.WriteLine(&quot;                    }\n                }\n            }\n&quot; + 
-                &quot;            else\n            {\n&quot; + 
-                &quot;                id = (ushort)bytes[4];\n&quot; + 
-                &quot;                switch (id)\n                    {&quot;);
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
+            writer.WriteLine(&quot;                    }&quot; + Environment.NewLine + &quot;                }&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine +
+                &quot;            else&quot; + Environment.NewLine + &quot;            {&quot; + Environment.NewLine +
+                &quot;                id = (ushort)bytes[4];&quot; + Environment.NewLine +
+                &quot;                switch (id)&quot; + Environment.NewLine + &quot;                    {&quot;);
             foreach (MapPacket packet in protocol.HighMaps)
-            {
                 if (packet != null)
-                {
-                    writer.WriteLine(&quot;                        case &quot; + packet.ID + 
-                        &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
-                }
-            }
-            writer.WriteLine(&quot;                }\n            }\n\n&quot; +
-                &quot;            throw new MalformedDataException(\&quot;Unknown packet ID\&quot;);\n&quot; + 
-                &quot;        }\n    }\n&quot;);
+                    writer.WriteLine(&quot;                        case &quot; + packet.ID + &quot;: return new &quot; + packet.Name + &quot;Packet(header, bytes, ref i);&quot;);
+            writer.WriteLine(&quot;                }&quot; + Environment.NewLine + &quot;            }&quot; + Environment.NewLine + Environment.NewLine +
+                &quot;            throw new MalformedDataException(\&quot;Unknown packet ID\&quot;);&quot; + Environment.NewLine +
+                &quot;        }&quot; + Environment.NewLine + &quot;    }&quot; + Environment.NewLine);
 
+
             // Write the packet classes
             foreach (MapPacket packet in protocol.LowMaps)
-            {
                 if (packet != null) { WritePacketClass(writer, packet); }
-            }
-
             foreach (MapPacket packet in protocol.MediumMaps)
-            {
                 if (packet != null) { WritePacketClass(writer, packet); }
-            }
-
             foreach (MapPacket packet in protocol.HighMaps)
-            {
                 if (packet != null) { WritePacketClass(writer, packet); }
-            }
 
+
+            // Finish up
             writer.WriteLine(&quot;}&quot;);
-
             writer.Close();
-
             return 0;
         }
     }

Modified: branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.csproj
===================================================================
--- branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.csproj	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/mapgenerator/mapgenerator.csproj	2006-12-29 00:26:28 UTC (rev 776)
@@ -29,14 +29,15 @@
   &lt;/PropertyGroup&gt;
   &lt;ItemGroup&gt;
     &lt;Reference Include=&quot;System&quot; /&gt;
-    &lt;Reference Include=&quot;System.Data&quot; /&gt;
-    &lt;Reference Include=&quot;System.Xml&quot; /&gt;
   &lt;/ItemGroup&gt;
   &lt;ItemGroup&gt;
     &lt;Compile Include=&quot;mapgenerator.cs&quot; /&gt;
     &lt;Compile Include=&quot;Properties\AssemblyInfo.cs&quot; /&gt;
     &lt;Compile Include=&quot;ProtocolManager.cs&quot; /&gt;
   &lt;/ItemGroup&gt;
+  &lt;ItemGroup&gt;
+    &lt;Content Include=&quot;unusedpackets.txt&quot; /&gt;
+  &lt;/ItemGroup&gt;
   &lt;Import Project=&quot;$(MSBuildBinPath)\Microsoft.CSharp.targets&quot; /&gt;
   &lt;!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
        Other similar extension points exist, see Microsoft.Common.targets.

Modified: branches/aditi/libsecondlife-cs/mapgenerator/template.cs
===================================================================
--- branches/aditi/libsecondlife-cs/mapgenerator/template.cs	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife-cs/mapgenerator/template.cs	2006-12-29 00:26:28 UTC (rev 776)
@@ -25,6 +25,8 @@
  */
 
 using System;
+using System.Xml;
+using System.Xml.Serialization;
 using libsecondlife;
 
 namespace libsecondlife.Packets
@@ -35,14 +37,14 @@
     public class MalformedDataException : ApplicationException
     {
         /// &lt;summary&gt;
-        /// 
+        /// Default constructor
         /// &lt;/summary&gt;
         public MalformedDataException() { }
 
         /// &lt;summary&gt;
-        /// 
+        /// Constructor that takes an additional error message
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;Message&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;Message&quot;&gt;An error message to attach to this exception&lt;/param&gt;
         public MalformedDataException(string Message)
             : base(Message)
         {
@@ -55,60 +57,77 @@
     /// bytes in length at the beginning of the packet, and encapsulates any 
     /// appended ACKs at the end of the packet as well
     /// &lt;/summary&gt;
+    [XmlInclude(typeof(LowHeader))]
+    [XmlInclude(typeof(MediumHeader))]
+    [XmlInclude(typeof(HighHeader))]
     public abstract class Header
     {
-        /// &lt;summary&gt;The raw header data, does not include appended ACKs&lt;/summary&gt;
+        /// &lt;summary&gt;Raw header data, does not include appended ACKs&lt;/summary&gt;
         public byte[] Data;
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Raw value of the flags byte&lt;/summary&gt;
+        [XmlIgnore]
         public byte Flags
         {
             get { return Data[0]; }
             set { Data[0] = value; }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Reliable flag, whether this packet requires an ACK&lt;/summary&gt;
+        [XmlIgnore]
         public bool Reliable
         {
             get { return (Data[0] &amp; Helpers.MSG_RELIABLE) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_RELIABLE; } else { byte mask = (byte)Helpers.MSG_RELIABLE ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Resent flag, whether this same packet has already been 
+        /// sent&lt;/summary&gt;
+        [XmlIgnore]
         public bool Resent
         {
             get { return (Data[0] &amp; Helpers.MSG_RESENT) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_RESENT; } else { byte mask = (byte)Helpers.MSG_RESENT ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Zerocoded flag, whether this packet is compressed with 
+        /// zerocoding&lt;/summary&gt;
+        [XmlIgnore]
         public bool Zerocoded
         {
             get { return (Data[0] &amp; Helpers.MSG_ZEROCODED) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_ZEROCODED; } else { byte mask = (byte)Helpers.MSG_ZEROCODED ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Appended ACKs flag, whether this packet has ACKs appended
+        /// to the end&lt;/summary&gt;
+        [XmlIgnore]
         public bool AppendedAcks
         {
             get { return (Data[0] &amp; Helpers.MSG_APPENDED_ACKS) != 0; }
             set { if (value) { Data[0] |= (byte)Helpers.MSG_APPENDED_ACKS; } else { byte mask = (byte)Helpers.MSG_APPENDED_ACKS ^ 0xFF; Data[0] &amp;= mask; } }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
-        public ushort Sequence
+        /// &lt;summary&gt;Packet sequence number, three bytes long&lt;/summary&gt;
+        [XmlIgnore]
+        public uint Sequence
         {
-            get { return (ushort)((Data[2] &lt;&lt; 8) + Data[3]); }
-            set { Data[2] = (byte)(value &gt;&gt; 8); Data[3] = (byte)(value % 256); }
+            get { return (uint)((Data[1] &lt;&lt; 16) + (Data[2] &lt;&lt; 8) + Data[3]); }
+            set { Data[1] = (byte)(value &gt;&gt; 16); Data[2] = (byte)(value &gt;&gt; 8); Data[3] = (byte)(value % 256); }
         }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Numeric ID number of this packet&lt;/summary&gt;
+        [XmlIgnore]
         public abstract ushort ID { get; set; }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Frequency classification of this packet, Low Medium or 
+        /// High&lt;/summary&gt;
+        [XmlIgnore]
         public abstract PacketFrequency Frequency { get; }
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Convert this header to a byte array, not including any
+        /// appended ACKs&lt;/summary&gt;
         public abstract void ToBytes(byte[] bytes, ref int i);
-        /// &lt;summary&gt;&lt;/summary&gt;
+        /// &lt;summary&gt;Array containing all the appended ACKs of this packet&lt;/summary&gt;
         public uint[] AckList;
 
         /// &lt;summary&gt;
-        /// 
+        /// Convert the AckList to a byte array, used for packet serializing
         /// &lt;/summary&gt;
-        /// &lt;param name=&quot;bytes&quot;&gt;&lt;/param&gt;
-        /// &lt;param name=&quot;i&quot;&gt;&lt;/param&gt;
+        /// &lt;param name=&quot;bytes&quot;&gt;Reference to the target byte array&lt;/param&gt;
+        /// &lt;param name=&quot;i&quot;&gt;Beginning position to start writing to in the byte
+        /// array, will be updated with the ending position of the ACK list&lt;/param&gt;
         public void AcksToBytes(byte[] bytes, ref int i)
         {
             foreach (uint ack in AckList)
@@ -163,7 +182,11 @@
                     
                     for (int i = 0; i &lt; count; i++)
                     {
-                        AckList[i] = (ushort)((bytes[(packetEnd - i * 4) - 1] &lt;&lt; 8) | (bytes[packetEnd - i * 4]));
+                        AckList[i] = (uint)(
+                            (bytes[(packetEnd - i * 4) - 3] &lt;&lt; 24) |
+                            (bytes[(packetEnd - i * 4) - 2] &lt;&lt; 16) |
+                            (bytes[(packetEnd - i * 4) - 1] &lt;&lt;  8) |
+                            (bytes[(packetEnd - i * 4)    ]));
                     }
 
                     packetEnd -= (count * 4);

Copied: branches/aditi/libsecondlife-cs/mapgenerator/unusedpackets.txt (from rev 775, trunk/libsecondlife-cs/mapgenerator/unusedpackets.txt)

Modified: branches/aditi/libsecondlife.build
===================================================================
--- branches/aditi/libsecondlife.build	2006-12-28 23:12:26 UTC (rev 775)
+++ branches/aditi/libsecondlife.build	2006-12-29 00:26:28 UTC (rev 776)
@@ -23,12 +23,9 @@
 
   &lt;!-- build sets --&gt;
   &lt;fileset id=&quot;apps&quot;&gt;
-    &lt;include name=&quot;applications/TestBot/*.build&quot; /&gt;
     &lt;include name=&quot;applications/Decoder/*.build&quot; /&gt;
-    &lt;!-- &lt;include name=&quot;applications/SecondSuite/*.build&quot; /&gt; --&gt;
-    &lt;!-- &lt;include name=&quot;applications/SLChat/*.build&quot; /&gt; --&gt;
     &lt;include name=&quot;applications/SLIRC/*.build&quot; /&gt;
-    &lt;include name=&quot;SLProxy/*.build&quot; /&gt;
+    &lt;include name=&quot;applications/SLProxy/*.build&quot; /&gt;
   &lt;/fileset&gt;
   &lt;fileset id=&quot;lib&quot;&gt;
     &lt;include name=&quot;libjaspernet/*.build&quot; /&gt;
@@ -156,7 +153,6 @@
         &lt;fileset basedir=&quot;bin&quot;&gt;
           &lt;include name=&quot;*.exe&quot; /&gt;
           &lt;include name=&quot;*.dll&quot; /&gt;
-          &lt;include name=&quot;message_template.msg&quot; /&gt;
 		&lt;/fileset&gt;
       &lt;/copy&gt;
     &lt;/if&gt;

Copied: branches/aditi/mapgen.bat (from rev 775, trunk/mapgen.bat)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000153.html">[Libsecondlife-commits] r775 - trunk/libsecondlife-cs
</A></li>
	<LI>Next message: <A HREF="000155.html">[Libsecondlife-commits] [Patch #1760] SLProxy: initial caps support	(ADITI). FOR TESTING ONLY.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#154">[ date ]</a>
              <a href="thread.html#154">[ thread ]</a>
              <a href="subject.html#154">[ subject ]</a>
              <a href="author.html#154">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/libsecondlife-commits">More information about the Libsecondlife-commits
mailing list</a><br>
</body></html>
